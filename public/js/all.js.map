{"version":3,"sources":["jquery.js","bootstrap.js","slimmenu.js","bootstrap-datepicker.js","bootstrap-timepicker.js","dropit.js","ionrangeslider.js","icheck.js","fotorama.js","magnific.js","owl-carousel.js","nicescroll.js","fitvids.js","countdown.js","gridrotator.js","mixitup.js","select2.min.js","dropzone.js","jquery-confirm.min.js","jquery.noty.js","wysihtml5.all.js","maskedinput.min.js","custom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1zGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACv5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5kCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnhHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACleA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9iEA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC76BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACthBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/ndA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/*! jQuery v1.10.1 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license\r\n */\r\n(function(e, t) {\r\n    var n, r, i = typeof t,\r\n        o = e.location,\r\n        a = e.document,\r\n        s = a.documentElement,\r\n        l = e.jQuery,\r\n        u = e.$,\r\n        c = {},\r\n        p = [],\r\n        f = \"1.10.1\",\r\n        d = p.concat,\r\n        h = p.push,\r\n        g = p.slice,\r\n        m = p.indexOf,\r\n        y = c.toString,\r\n        v = c.hasOwnProperty,\r\n        b = f.trim,\r\n        x = function(e, t) {\r\n            return new x.fn.init(e, t, r)\r\n        },\r\n        w = /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,\r\n        T = /\\S+/g,\r\n        C = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\r\n        N = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,\r\n        k = /^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,\r\n        E = /^[\\],:{}\\s]*$/,\r\n        S = /(?:^|:|,)(?:\\s*\\[)+/g,\r\n        A = /\\\\(?:[\"\\\\\\/bfnrt]|u[\\da-fA-F]{4})/g,\r\n        j = /\"[^\"\\\\\\r\\n]*\"|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)/g,\r\n        D = /^-ms-/,\r\n        L = /-([\\da-z])/gi,\r\n        H = function(e, t) {\r\n            return t.toUpperCase()\r\n        },\r\n        q = function(e) {\r\n            (a.addEventListener || \"load\" === e.type || \"complete\" === a.readyState) && (_(), x.ready())\r\n        },\r\n        _ = function() {\r\n            a.addEventListener ? (a.removeEventListener(\"DOMContentLoaded\", q, !1), e.removeEventListener(\"load\", q, !1)) : (a.detachEvent(\"onreadystatechange\", q), e.detachEvent(\"onload\", q))\r\n        };\r\n    x.fn = x.prototype = {\r\n        jquery: f,\r\n        constructor: x,\r\n        init: function(e, n, r) {\r\n            var i, o;\r\n            if (!e) return this;\r\n            if (\"string\" == typeof e) {\r\n                if (i = \"<\" === e.charAt(0) && \">\" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : N.exec(e), !i || !i[1] && n) return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e);\r\n                if (i[1]) {\r\n                    if (n = n instanceof x ? n[0] : n, x.merge(this, x.parseHTML(i[1], n && n.nodeType ? n.ownerDocument || n : a, !0)), k.test(i[1]) && x.isPlainObject(n))\r\n                        for (i in n) x.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i]);\r\n                    return this\r\n                }\r\n                if (o = a.getElementById(i[2]), o && o.parentNode) {\r\n                    if (o.id !== i[2]) return r.find(e);\r\n                    this.length = 1, this[0] = o\r\n                }\r\n                return this.context = a, this.selector = e, this\r\n            }\r\n            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : x.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), x.makeArray(e, this))\r\n        },\r\n        selector: \"\",\r\n        length: 0,\r\n        toArray: function() {\r\n            return g.call(this)\r\n        },\r\n        get: function(e) {\r\n            return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e]\r\n        },\r\n        pushStack: function(e) {\r\n            var t = x.merge(this.constructor(), e);\r\n            return t.prevObject = this, t.context = this.context, t\r\n        },\r\n        each: function(e, t) {\r\n            return x.each(this, e, t)\r\n        },\r\n        ready: function(e) {\r\n            return x.ready.promise().done(e), this\r\n        },\r\n        slice: function() {\r\n            return this.pushStack(g.apply(this, arguments))\r\n        },\r\n        first: function() {\r\n            return this.eq(0)\r\n        },\r\n        last: function() {\r\n            return this.eq(-1)\r\n        },\r\n        eq: function(e) {\r\n            var t = this.length,\r\n                n = +e + (0 > e ? t : 0);\r\n            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])\r\n        },\r\n        map: function(e) {\r\n            return this.pushStack(x.map(this, function(t, n) {\r\n                return e.call(t, n, t)\r\n            }))\r\n        },\r\n        end: function() {\r\n            return this.prevObject || this.constructor(null)\r\n        },\r\n        push: h,\r\n        sort: [].sort,\r\n        splice: [].splice\r\n    }, x.fn.init.prototype = x.fn, x.extend = x.fn.extend = function() {\r\n        var e, n, r, i, o, a, s = arguments[0] || {},\r\n            l = 1,\r\n            u = arguments.length,\r\n            c = !1;\r\n        for (\"boolean\" == typeof s && (c = s, s = arguments[1] || {}, l = 2), \"object\" == typeof s || x.isFunction(s) || (s = {}), u === l && (s = this, --l); u > l; l++)\r\n            if (null != (o = arguments[l]))\r\n                for (i in o) e = s[i], r = o[i], s !== r && (c && r && (x.isPlainObject(r) || (n = x.isArray(r))) ? (n ? (n = !1, a = e && x.isArray(e) ? e : []) : a = e && x.isPlainObject(e) ? e : {}, s[i] = x.extend(c, a, r)) : r !== t && (s[i] = r));\r\n        return s\r\n    }, x.extend({\r\n        expando: \"jQuery\" + (f + Math.random()).replace(/\\D/g, \"\"),\r\n        noConflict: function(t) {\r\n            return e.$ === x && (e.$ = u), t && e.jQuery === x && (e.jQuery = l), x\r\n        },\r\n        isReady: !1,\r\n        readyWait: 1,\r\n        holdReady: function(e) {\r\n            e ? x.readyWait++ : x.ready(!0)\r\n        },\r\n        ready: function(e) {\r\n            if (e === !0 ? !--x.readyWait : !x.isReady) {\r\n                if (!a.body) return setTimeout(x.ready);\r\n                x.isReady = !0, e !== !0 && --x.readyWait > 0 || (n.resolveWith(a, [x]), x.fn.trigger && x(a).trigger(\"ready\").off(\"ready\"))\r\n            }\r\n        },\r\n        isFunction: function(e) {\r\n            return \"function\" === x.type(e)\r\n        },\r\n        isArray: Array.isArray || function(e) {\r\n            return \"array\" === x.type(e)\r\n        },\r\n        isWindow: function(e) {\r\n            return null != e && e == e.window\r\n        },\r\n        isNumeric: function(e) {\r\n            return !isNaN(parseFloat(e)) && isFinite(e)\r\n        },\r\n        type: function(e) {\r\n            return null == e ? e + \"\" : \"object\" == typeof e || \"function\" == typeof e ? c[y.call(e)] || \"object\" : typeof e\r\n        },\r\n        isPlainObject: function(e) {\r\n            var n;\r\n            if (!e || \"object\" !== x.type(e) || e.nodeType || x.isWindow(e)) return !1;\r\n            try {\r\n                if (e.constructor && !v.call(e, \"constructor\") && !v.call(e.constructor.prototype, \"isPrototypeOf\")) return !1\r\n            } catch (r) {\r\n                return !1\r\n            }\r\n            if (x.support.ownLast)\r\n                for (n in e) return v.call(e, n);\r\n            for (n in e);\r\n            return n === t || v.call(e, n)\r\n        },\r\n        isEmptyObject: function(e) {\r\n            var t;\r\n            for (t in e) return !1;\r\n            return !0\r\n        },\r\n        error: function(e) {\r\n            throw Error(e)\r\n        },\r\n        parseHTML: function(e, t, n) {\r\n            if (!e || \"string\" != typeof e) return null;\r\n            \"boolean\" == typeof t && (n = t, t = !1), t = t || a;\r\n            var r = k.exec(e),\r\n                i = !n && [];\r\n            return r ? [t.createElement(r[1])] : (r = x.buildFragment([e], t, i), i && x(i).remove(), x.merge([], r.childNodes))\r\n        },\r\n        parseJSON: function(n) {\r\n            return e.JSON && e.JSON.parse ? e.JSON.parse(n) : null === n ? n : \"string\" == typeof n && (n = x.trim(n), n && E.test(n.replace(A, \"@\").replace(j, \"]\").replace(S, \"\"))) ? Function(\"return \" + n)() : (x.error(\"Invalid JSON: \" + n), t)\r\n        },\r\n        parseXML: function(n) {\r\n            var r, i;\r\n            if (!n || \"string\" != typeof n) return null;\r\n            try {\r\n                e.DOMParser ? (i = new DOMParser, r = i.parseFromString(n, \"text/xml\")) : (r = new ActiveXObject(\"Microsoft.XMLDOM\"), r.async = \"false\", r.loadXML(n))\r\n            } catch (o) {\r\n                r = t\r\n            }\r\n            return r && r.documentElement && !r.getElementsByTagName(\"parsererror\").length || x.error(\"Invalid XML: \" + n), r\r\n        },\r\n        noop: function() {},\r\n        globalEval: function(t) {\r\n            t && x.trim(t) && (e.execScript || function(t) {\r\n                e.eval.call(e, t)\r\n            })(t)\r\n        },\r\n        camelCase: function(e) {\r\n            return e.replace(D, \"ms-\").replace(L, H)\r\n        },\r\n        nodeName: function(e, t) {\r\n            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()\r\n        },\r\n        each: function(e, t, n) {\r\n            var r, i = 0,\r\n                o = e.length,\r\n                a = M(e);\r\n            if (n) {\r\n                if (a) {\r\n                    for (; o > i; i++)\r\n                        if (r = t.apply(e[i], n), r === !1) break\r\n                } else\r\n                    for (i in e)\r\n                        if (r = t.apply(e[i], n), r === !1) break\r\n            } else if (a) {\r\n                for (; o > i; i++)\r\n                    if (r = t.call(e[i], i, e[i]), r === !1) break\r\n            } else\r\n                for (i in e)\r\n                    if (r = t.call(e[i], i, e[i]), r === !1) break; return e\r\n        },\r\n        trim: b && !b.call(\"\\ufeff\\u00a0\") ? function(e) {\r\n            return null == e ? \"\" : b.call(e)\r\n        } : function(e) {\r\n            return null == e ? \"\" : (e + \"\").replace(C, \"\")\r\n        },\r\n        makeArray: function(e, t) {\r\n            var n = t || [];\r\n            return null != e && (M(Object(e)) ? x.merge(n, \"string\" == typeof e ? [e] : e) : h.call(n, e)), n\r\n        },\r\n        inArray: function(e, t, n) {\r\n            var r;\r\n            if (t) {\r\n                if (m) return m.call(t, e, n);\r\n                for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++)\r\n                    if (n in t && t[n] === e) return n\r\n            }\r\n            return -1\r\n        },\r\n        merge: function(e, n) {\r\n            var r = n.length,\r\n                i = e.length,\r\n                o = 0;\r\n            if (\"number\" == typeof r)\r\n                for (; r > o; o++) e[i++] = n[o];\r\n            else\r\n                while (n[o] !== t) e[i++] = n[o++];\r\n            return e.length = i, e\r\n        },\r\n        grep: function(e, t, n) {\r\n            var r, i = [],\r\n                o = 0,\r\n                a = e.length;\r\n            for (n = !!n; a > o; o++) r = !!t(e[o], o), n !== r && i.push(e[o]);\r\n            return i\r\n        },\r\n        map: function(e, t, n) {\r\n            var r, i = 0,\r\n                o = e.length,\r\n                a = M(e),\r\n                s = [];\r\n            if (a)\r\n                for (; o > i; i++) r = t(e[i], i, n), null != r && (s[s.length] = r);\r\n            else\r\n                for (i in e) r = t(e[i], i, n), null != r && (s[s.length] = r);\r\n            return d.apply([], s)\r\n        },\r\n        guid: 1,\r\n        proxy: function(e, n) {\r\n            var r, i, o;\r\n            return \"string\" == typeof n && (o = e[n], n = e, e = o), x.isFunction(e) ? (r = g.call(arguments, 2), i = function() {\r\n                return e.apply(n || this, r.concat(g.call(arguments)))\r\n            }, i.guid = e.guid = e.guid || x.guid++, i) : t\r\n        },\r\n        access: function(e, n, r, i, o, a, s) {\r\n            var l = 0,\r\n                u = e.length,\r\n                c = null == r;\r\n            if (\"object\" === x.type(r)) {\r\n                o = !0;\r\n                for (l in r) x.access(e, n, l, r[l], !0, a, s)\r\n            } else if (i !== t && (o = !0, x.isFunction(i) || (s = !0), c && (s ? (n.call(e, i), n = null) : (c = n, n = function(e, t, n) {\r\n                return c.call(x(e), n)\r\n            })), n))\r\n                for (; u > l; l++) n(e[l], r, s ? i : i.call(e[l], l, n(e[l], r)));\r\n            return o ? e : c ? n.call(e) : u ? n(e[0], r) : a\r\n        },\r\n        now: function() {\r\n            return (new Date).getTime()\r\n        },\r\n        swap: function(e, t, n, r) {\r\n            var i, o, a = {};\r\n            for (o in t) a[o] = e.style[o], e.style[o] = t[o];\r\n            i = n.apply(e, r || []);\r\n            for (o in t) e.style[o] = a[o];\r\n            return i\r\n        }\r\n    }), x.ready.promise = function(t) {\r\n        if (!n)\r\n            if (n = x.Deferred(), \"complete\" === a.readyState) setTimeout(x.ready);\r\n            else if (a.addEventListener) a.addEventListener(\"DOMContentLoaded\", q, !1), e.addEventListener(\"load\", q, !1);\r\n        else {\r\n            a.attachEvent(\"onreadystatechange\", q), e.attachEvent(\"onload\", q);\r\n            var r = !1;\r\n            try {\r\n                r = null == e.frameElement && a.documentElement\r\n            } catch (i) {}\r\n            r && r.doScroll && function o() {\r\n                if (!x.isReady) {\r\n                    try {\r\n                        r.doScroll(\"left\")\r\n                    } catch (e) {\r\n                        return setTimeout(o, 50)\r\n                    }\r\n                    _(), x.ready()\r\n                }\r\n            }()\r\n        }\r\n        return n.promise(t)\r\n    }, x.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"), function(e, t) {\r\n        c[\"[object \" + t + \"]\"] = t.toLowerCase()\r\n    });\r\n\r\n    function M(e) {\r\n        var t = e.length,\r\n            n = x.type(e);\r\n        return x.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : \"array\" === n || \"function\" !== n && (0 === t || \"number\" == typeof t && t > 0 && t - 1 in e)\r\n    }\r\n    r = x(a),\r\n    function(e, t) {\r\n        var n, r, i, o, a, s, l, u, c, p, f, d, h, g, m, y, v, b = \"sizzle\" + -new Date,\r\n            w = e.document,\r\n            T = 0,\r\n            C = 0,\r\n            N = lt(),\r\n            k = lt(),\r\n            E = lt(),\r\n            S = !1,\r\n            A = function() {\r\n                return 0\r\n            },\r\n            j = typeof t,\r\n            D = 1 << 31,\r\n            L = {}.hasOwnProperty,\r\n            H = [],\r\n            q = H.pop,\r\n            _ = H.push,\r\n            M = H.push,\r\n            O = H.slice,\r\n            F = H.indexOf || function(e) {\r\n                var t = 0,\r\n                    n = this.length;\r\n                for (; n > t; t++)\r\n                    if (this[t] === e) return t;\r\n                return -1\r\n            },\r\n            B = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\r\n            P = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\r\n            R = \"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",\r\n            W = R.replace(\"w\", \"w#\"),\r\n            $ = \"\\\\[\" + P + \"*(\" + R + \")\" + P + \"*(?:([*^$|!~]?=)\" + P + \"*(?:(['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\" + W + \")|)|)\" + P + \"*\\\\]\",\r\n            I = \":(\" + R + \")(?:\\\\(((['\\\"])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + $.replace(3, 8) + \")*)|.*)\\\\)|)\",\r\n            z = RegExp(\"^\" + P + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + P + \"+$\", \"g\"),\r\n            X = RegExp(\"^\" + P + \"*,\" + P + \"*\"),\r\n            U = RegExp(\"^\" + P + \"*([>+~]|\" + P + \")\" + P + \"*\"),\r\n            V = RegExp(P + \"*[+~]\"),\r\n            Y = RegExp(\"=\" + P + \"*([^\\\\]'\\\"]*)\" + P + \"*\\\\]\", \"g\"),\r\n            J = RegExp(I),\r\n            G = RegExp(\"^\" + W + \"$\"),\r\n            Q = {\r\n                ID: RegExp(\"^#(\" + R + \")\"),\r\n                CLASS: RegExp(\"^\\\\.(\" + R + \")\"),\r\n                TAG: RegExp(\"^(\" + R.replace(\"w\", \"w*\") + \")\"),\r\n                ATTR: RegExp(\"^\" + $),\r\n                PSEUDO: RegExp(\"^\" + I),\r\n                CHILD: RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + P + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + P + \"*(?:([+-]|)\" + P + \"*(\\\\d+)|))\" + P + \"*\\\\)|)\", \"i\"),\r\n                bool: RegExp(\"^(?:\" + B + \")$\", \"i\"),\r\n                needsContext: RegExp(\"^\" + P + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + P + \"*((?:-\\\\d)?\\\\d*)\" + P + \"*\\\\)|)(?=[^-]|$)\", \"i\")\r\n            },\r\n            K = /^[^{]+\\{\\s*\\[native \\w/,\r\n            Z = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\r\n            et = /^(?:input|select|textarea|button)$/i,\r\n            tt = /^h\\d$/i,\r\n            nt = /'|\\\\/g,\r\n            rt = RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\" + P + \"?|(\" + P + \")|.)\", \"ig\"),\r\n            it = function(e, t, n) {\r\n                var r = \"0x\" + t - 65536;\r\n                return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(55296 | r >> 10, 56320 | 1023 & r)\r\n            };\r\n        try {\r\n            M.apply(H = O.call(w.childNodes), w.childNodes), H[w.childNodes.length].nodeType\r\n        } catch (ot) {\r\n            M = {\r\n                apply: H.length ? function(e, t) {\r\n                    _.apply(e, O.call(t))\r\n                } : function(e, t) {\r\n                    var n = e.length,\r\n                        r = 0;\r\n                    while (e[n++] = t[r++]);\r\n                    e.length = n - 1\r\n                }\r\n            }\r\n        }\r\n\r\n        function at(e, t, n, i) {\r\n            var o, a, s, l, u, c, d, m, y, x;\r\n            if ((t ? t.ownerDocument || t : w) !== f && p(t), t = t || f, n = n || [], !e || \"string\" != typeof e) return n;\r\n            if (1 !== (l = t.nodeType) && 9 !== l) return [];\r\n            if (h && !i) {\r\n                if (o = Z.exec(e))\r\n                    if (s = o[1]) {\r\n                        if (9 === l) {\r\n                            if (a = t.getElementById(s), !a || !a.parentNode) return n;\r\n                            if (a.id === s) return n.push(a), n\r\n                        } else if (t.ownerDocument && (a = t.ownerDocument.getElementById(s)) && v(t, a) && a.id === s) return n.push(a), n\r\n                    } else {\r\n                        if (o[2]) return M.apply(n, t.getElementsByTagName(e)), n;\r\n                        if ((s = o[3]) && r.getElementsByClassName && t.getElementsByClassName) return M.apply(n, t.getElementsByClassName(s)), n\r\n                    }\r\n                if (r.qsa && (!g || !g.test(e))) {\r\n                    if (m = d = b, y = t, x = 9 === l && e, 1 === l && \"object\" !== t.nodeName.toLowerCase()) {\r\n                        c = bt(e), (d = t.getAttribute(\"id\")) ? m = d.replace(nt, \"\\\\$&\") : t.setAttribute(\"id\", m), m = \"[id='\" + m + \"'] \", u = c.length;\r\n                        while (u--) c[u] = m + xt(c[u]);\r\n                        y = V.test(e) && t.parentNode || t, x = c.join(\",\")\r\n                    }\r\n                    if (x) try {\r\n                        return M.apply(n, y.querySelectorAll(x)), n\r\n                    } catch (T) {} finally {\r\n                        d || t.removeAttribute(\"id\")\r\n                    }\r\n                }\r\n            }\r\n            return At(e.replace(z, \"$1\"), t, n, i)\r\n        }\r\n\r\n        function st(e) {\r\n            return K.test(e + \"\")\r\n        }\r\n\r\n        function lt() {\r\n            var e = [];\r\n\r\n            function t(n, r) {\r\n                return e.push(n += \" \") > o.cacheLength && delete t[e.shift()], t[n] = r\r\n            }\r\n            return t\r\n        }\r\n\r\n        function ut(e) {\r\n            return e[b] = !0, e\r\n        }\r\n\r\n        function ct(e) {\r\n            var t = f.createElement(\"div\");\r\n            try {\r\n                return !!e(t)\r\n            } catch (n) {\r\n                return !1\r\n            } finally {\r\n                t.parentNode && t.parentNode.removeChild(t), t = null\r\n            }\r\n        }\r\n\r\n        function pt(e, t, n) {\r\n            e = e.split(\"|\");\r\n            var r, i = e.length,\r\n                a = n ? null : t;\r\n            while (i--)(r = o.attrHandle[e[i]]) && r !== t || (o.attrHandle[e[i]] = a)\r\n        }\r\n\r\n        function ft(e, t) {\r\n            var n = e.getAttributeNode(t);\r\n            return n && n.specified ? n.value : e[t] === !0 ? t.toLowerCase() : null\r\n        }\r\n\r\n        function dt(e, t) {\r\n            return e.getAttribute(t, \"type\" === t.toLowerCase() ? 1 : 2)\r\n        }\r\n\r\n        function ht(e) {\r\n            return \"input\" === e.nodeName.toLowerCase() ? e.defaultValue : t\r\n        }\r\n\r\n        function gt(e, t) {\r\n            var n = t && e,\r\n                r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || D) - (~e.sourceIndex || D);\r\n            if (r) return r;\r\n            if (n)\r\n                while (n = n.nextSibling)\r\n                    if (n === t) return -1;\r\n            return e ? 1 : -1\r\n        }\r\n\r\n        function mt(e) {\r\n            return function(t) {\r\n                var n = t.nodeName.toLowerCase();\r\n                return \"input\" === n && t.type === e\r\n            }\r\n        }\r\n\r\n        function yt(e) {\r\n            return function(t) {\r\n                var n = t.nodeName.toLowerCase();\r\n                return (\"input\" === n || \"button\" === n) && t.type === e\r\n            }\r\n        }\r\n\r\n        function vt(e) {\r\n            return ut(function(t) {\r\n                return t = +t, ut(function(n, r) {\r\n                    var i, o = e([], n.length, t),\r\n                        a = o.length;\r\n                    while (a--) n[i = o[a]] && (n[i] = !(r[i] = n[i]))\r\n                })\r\n            })\r\n        }\r\n        s = at.isXML = function(e) {\r\n            var t = e && (e.ownerDocument || e).documentElement;\r\n            return t ? \"HTML\" !== t.nodeName : !1\r\n        }, r = at.support = {}, p = at.setDocument = function(e) {\r\n            var n = e ? e.ownerDocument || e : w,\r\n                i = n.parentWindow;\r\n            return n !== f && 9 === n.nodeType && n.documentElement ? (f = n, d = n.documentElement, h = !s(n), i && i.frameElement && i.attachEvent(\"onbeforeunload\", function() {\r\n                p()\r\n            }), r.attributes = ct(function(e) {\r\n                return e.innerHTML = \"<a href='#'></a>\", pt(\"type|href|height|width\", dt, \"#\" === e.firstChild.getAttribute(\"href\")), pt(B, ft, null == e.getAttribute(\"disabled\")), e.className = \"i\", !e.getAttribute(\"className\")\r\n            }), r.input = ct(function(e) {\r\n                return e.innerHTML = \"<input>\", e.firstChild.setAttribute(\"value\", \"\"), \"\" === e.firstChild.getAttribute(\"value\")\r\n            }), pt(\"value\", ht, r.attributes && r.input), r.getElementsByTagName = ct(function(e) {\r\n                return e.appendChild(n.createComment(\"\")), !e.getElementsByTagName(\"*\").length\r\n            }), r.getElementsByClassName = ct(function(e) {\r\n                return e.innerHTML = \"<div class='a'></div><div class='a i'></div>\", e.firstChild.className = \"i\", 2 === e.getElementsByClassName(\"i\").length\r\n            }), r.getById = ct(function(e) {\r\n                return d.appendChild(e).id = b, !n.getElementsByName || !n.getElementsByName(b).length\r\n            }), r.getById ? (o.find.ID = function(e, t) {\r\n                if (typeof t.getElementById !== j && h) {\r\n                    var n = t.getElementById(e);\r\n                    return n && n.parentNode ? [n] : []\r\n                }\r\n            }, o.filter.ID = function(e) {\r\n                var t = e.replace(rt, it);\r\n                return function(e) {\r\n                    return e.getAttribute(\"id\") === t\r\n                }\r\n            }) : (delete o.find.ID, o.filter.ID = function(e) {\r\n                var t = e.replace(rt, it);\r\n                return function(e) {\r\n                    var n = typeof e.getAttributeNode !== j && e.getAttributeNode(\"id\");\r\n                    return n && n.value === t\r\n                }\r\n            }), o.find.TAG = r.getElementsByTagName ? function(e, n) {\r\n                return typeof n.getElementsByTagName !== j ? n.getElementsByTagName(e) : t\r\n            } : function(e, t) {\r\n                var n, r = [],\r\n                    i = 0,\r\n                    o = t.getElementsByTagName(e);\r\n                if (\"*\" === e) {\r\n                    while (n = o[i++]) 1 === n.nodeType && r.push(n);\r\n                    return r\r\n                }\r\n                return o\r\n            }, o.find.CLASS = r.getElementsByClassName && function(e, n) {\r\n                return typeof n.getElementsByClassName !== j && h ? n.getElementsByClassName(e) : t\r\n            }, m = [], g = [], (r.qsa = st(n.querySelectorAll)) && (ct(function(e) {\r\n                e.innerHTML = \"<select><option selected=''></option></select>\", e.querySelectorAll(\"[selected]\").length || g.push(\"\\\\[\" + P + \"*(?:value|\" + B + \")\"), e.querySelectorAll(\":checked\").length || g.push(\":checked\")\r\n            }), ct(function(e) {\r\n                var t = n.createElement(\"input\");\r\n                t.setAttribute(\"type\", \"hidden\"), e.appendChild(t).setAttribute(\"t\", \"\"), e.querySelectorAll(\"[t^='']\").length && g.push(\"[*^$]=\" + P + \"*(?:''|\\\"\\\")\"), e.querySelectorAll(\":enabled\").length || g.push(\":enabled\", \":disabled\"), e.querySelectorAll(\"*,:x\"), g.push(\",.*:\")\r\n            })), (r.matchesSelector = st(y = d.webkitMatchesSelector || d.mozMatchesSelector || d.oMatchesSelector || d.msMatchesSelector)) && ct(function(e) {\r\n                r.disconnectedMatch = y.call(e, \"div\"), y.call(e, \"[s!='']:x\"), m.push(\"!=\", I)\r\n            }), g = g.length && RegExp(g.join(\"|\")), m = m.length && RegExp(m.join(\"|\")), v = st(d.contains) || d.compareDocumentPosition ? function(e, t) {\r\n                var n = 9 === e.nodeType ? e.documentElement : e,\r\n                    r = t && t.parentNode;\r\n                return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))\r\n            } : function(e, t) {\r\n                if (t)\r\n                    while (t = t.parentNode)\r\n                        if (t === e) return !0;\r\n                return !1\r\n            }, r.sortDetached = ct(function(e) {\r\n                return 1 & e.compareDocumentPosition(n.createElement(\"div\"))\r\n            }), A = d.compareDocumentPosition ? function(e, t) {\r\n                if (e === t) return S = !0, 0;\r\n                var i = t.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(t);\r\n                return i ? 1 & i || !r.sortDetached && t.compareDocumentPosition(e) === i ? e === n || v(w, e) ? -1 : t === n || v(w, t) ? 1 : c ? F.call(c, e) - F.call(c, t) : 0 : 4 & i ? -1 : 1 : e.compareDocumentPosition ? -1 : 1\r\n            } : function(e, t) {\r\n                var r, i = 0,\r\n                    o = e.parentNode,\r\n                    a = t.parentNode,\r\n                    s = [e],\r\n                    l = [t];\r\n                if (e === t) return S = !0, 0;\r\n                if (!o || !a) return e === n ? -1 : t === n ? 1 : o ? -1 : a ? 1 : c ? F.call(c, e) - F.call(c, t) : 0;\r\n                if (o === a) return gt(e, t);\r\n                r = e;\r\n                while (r = r.parentNode) s.unshift(r);\r\n                r = t;\r\n                while (r = r.parentNode) l.unshift(r);\r\n                while (s[i] === l[i]) i++;\r\n                return i ? gt(s[i], l[i]) : s[i] === w ? -1 : l[i] === w ? 1 : 0\r\n            }, n) : f\r\n        }, at.matches = function(e, t) {\r\n            return at(e, null, null, t)\r\n        }, at.matchesSelector = function(e, t) {\r\n            if ((e.ownerDocument || e) !== f && p(e), t = t.replace(Y, \"='$1']\"), !(!r.matchesSelector || !h || m && m.test(t) || g && g.test(t))) try {\r\n                var n = y.call(e, t);\r\n                if (n || r.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n\r\n            } catch (i) {}\r\n            return at(t, f, null, [e]).length > 0\r\n        }, at.contains = function(e, t) {\r\n            return (e.ownerDocument || e) !== f && p(e), v(e, t)\r\n        }, at.attr = function(e, n) {\r\n            (e.ownerDocument || e) !== f && p(e);\r\n            var i = o.attrHandle[n.toLowerCase()],\r\n                a = i && L.call(o.attrHandle, n.toLowerCase()) ? i(e, n, !h) : t;\r\n            return a === t ? r.attributes || !h ? e.getAttribute(n) : (a = e.getAttributeNode(n)) && a.specified ? a.value : null : a\r\n        }, at.error = function(e) {\r\n            throw Error(\"Syntax error, unrecognized expression: \" + e)\r\n        }, at.uniqueSort = function(e) {\r\n            var t, n = [],\r\n                i = 0,\r\n                o = 0;\r\n            if (S = !r.detectDuplicates, c = !r.sortStable && e.slice(0), e.sort(A), S) {\r\n                while (t = e[o++]) t === e[o] && (i = n.push(o));\r\n                while (i--) e.splice(n[i], 1)\r\n            }\r\n            return e\r\n        }, a = at.getText = function(e) {\r\n            var t, n = \"\",\r\n                r = 0,\r\n                i = e.nodeType;\r\n            if (i) {\r\n                if (1 === i || 9 === i || 11 === i) {\r\n                    if (\"string\" == typeof e.textContent) return e.textContent;\r\n                    for (e = e.firstChild; e; e = e.nextSibling) n += a(e)\r\n                } else if (3 === i || 4 === i) return e.nodeValue\r\n            } else\r\n                for (; t = e[r]; r++) n += a(t);\r\n            return n\r\n        }, o = at.selectors = {\r\n            cacheLength: 50,\r\n            createPseudo: ut,\r\n            match: Q,\r\n            attrHandle: {},\r\n            find: {},\r\n            relative: {\r\n                \">\": {\r\n                    dir: \"parentNode\",\r\n                    first: !0\r\n                },\r\n                \" \": {\r\n                    dir: \"parentNode\"\r\n                },\r\n                \"+\": {\r\n                    dir: \"previousSibling\",\r\n                    first: !0\r\n                },\r\n                \"~\": {\r\n                    dir: \"previousSibling\"\r\n                }\r\n            },\r\n            preFilter: {\r\n                ATTR: function(e) {\r\n                    return e[1] = e[1].replace(rt, it), e[3] = (e[4] || e[5] || \"\").replace(rt, it), \"~=\" === e[2] && (e[3] = \" \" + e[3] + \" \"), e.slice(0, 4)\r\n                },\r\n                CHILD: function(e) {\r\n                    return e[1] = e[1].toLowerCase(), \"nth\" === e[1].slice(0, 3) ? (e[3] || at.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * (\"even\" === e[3] || \"odd\" === e[3])), e[5] = +(e[7] + e[8] || \"odd\" === e[3])) : e[3] && at.error(e[0]), e\r\n                },\r\n                PSEUDO: function(e) {\r\n                    var n, r = !e[5] && e[2];\r\n                    return Q.CHILD.test(e[0]) ? null : (e[3] && e[4] !== t ? e[2] = e[4] : r && J.test(r) && (n = bt(r, !0)) && (n = r.indexOf(\")\", r.length - n) - r.length) && (e[0] = e[0].slice(0, n), e[2] = r.slice(0, n)), e.slice(0, 3))\r\n                }\r\n            },\r\n            filter: {\r\n                TAG: function(e) {\r\n                    var t = e.replace(rt, it).toLowerCase();\r\n                    return \"*\" === e ? function() {\r\n                        return !0\r\n                    } : function(e) {\r\n                        return e.nodeName && e.nodeName.toLowerCase() === t\r\n                    }\r\n                },\r\n                CLASS: function(e) {\r\n                    var t = N[e + \" \"];\r\n                    return t || (t = RegExp(\"(^|\" + P + \")\" + e + \"(\" + P + \"|$)\")) && N(e, function(e) {\r\n                        return t.test(\"string\" == typeof e.className && e.className || typeof e.getAttribute !== j && e.getAttribute(\"class\") || \"\")\r\n                    })\r\n                },\r\n                ATTR: function(e, t, n) {\r\n                    return function(r) {\r\n                        var i = at.attr(r, e);\r\n                        return null == i ? \"!=\" === t : t ? (i += \"\", \"=\" === t ? i === n : \"!=\" === t ? i !== n : \"^=\" === t ? n && 0 === i.indexOf(n) : \"*=\" === t ? n && i.indexOf(n) > -1 : \"$=\" === t ? n && i.slice(-n.length) === n : \"~=\" === t ? (\" \" + i + \" \").indexOf(n) > -1 : \"|=\" === t ? i === n || i.slice(0, n.length + 1) === n + \"-\" : !1) : !0\r\n                    }\r\n                },\r\n                CHILD: function(e, t, n, r, i) {\r\n                    var o = \"nth\" !== e.slice(0, 3),\r\n                        a = \"last\" !== e.slice(-4),\r\n                        s = \"of-type\" === t;\r\n                    return 1 === r && 0 === i ? function(e) {\r\n                        return !!e.parentNode\r\n                    } : function(t, n, l) {\r\n                        var u, c, p, f, d, h, g = o !== a ? \"nextSibling\" : \"previousSibling\",\r\n                            m = t.parentNode,\r\n                            y = s && t.nodeName.toLowerCase(),\r\n                            v = !l && !s;\r\n                        if (m) {\r\n                            if (o) {\r\n                                while (g) {\r\n                                    p = t;\r\n                                    while (p = p[g])\r\n                                        if (s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) return !1;\r\n                                    h = g = \"only\" === e && !h && \"nextSibling\"\r\n                                }\r\n                                return !0\r\n                            }\r\n                            if (h = [a ? m.firstChild : m.lastChild], a && v) {\r\n                                c = m[b] || (m[b] = {}), u = c[e] || [], d = u[0] === T && u[1], f = u[0] === T && u[2], p = d && m.childNodes[d];\r\n                                while (p = ++d && p && p[g] || (f = d = 0) || h.pop())\r\n                                    if (1 === p.nodeType && ++f && p === t) {\r\n                                        c[e] = [T, d, f];\r\n                                        break\r\n                                    }\r\n                            } else if (v && (u = (t[b] || (t[b] = {}))[e]) && u[0] === T) f = u[1];\r\n                            else\r\n                                while (p = ++d && p && p[g] || (f = d = 0) || h.pop())\r\n                                    if ((s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) && ++f && (v && ((p[b] || (p[b] = {}))[e] = [T, f]), p === t)) break; return f -= i, f === r || 0 === f % r && f / r >= 0\r\n                        }\r\n                    }\r\n                },\r\n                PSEUDO: function(e, t) {\r\n                    var n, r = o.pseudos[e] || o.setFilters[e.toLowerCase()] || at.error(\"unsupported pseudo: \" + e);\r\n                    return r[b] ? r(t) : r.length > 1 ? (n = [e, e, \"\", t], o.setFilters.hasOwnProperty(e.toLowerCase()) ? ut(function(e, n) {\r\n                        var i, o = r(e, t),\r\n                            a = o.length;\r\n                        while (a--) i = F.call(e, o[a]), e[i] = !(n[i] = o[a])\r\n                    }) : function(e) {\r\n                        return r(e, 0, n)\r\n                    }) : r\r\n                }\r\n            },\r\n            pseudos: {\r\n                not: ut(function(e) {\r\n                    var t = [],\r\n                        n = [],\r\n                        r = l(e.replace(z, \"$1\"));\r\n                    return r[b] ? ut(function(e, t, n, i) {\r\n                        var o, a = r(e, null, i, []),\r\n                            s = e.length;\r\n                        while (s--)(o = a[s]) && (e[s] = !(t[s] = o))\r\n                    }) : function(e, i, o) {\r\n                        return t[0] = e, r(t, null, o, n), !n.pop()\r\n                    }\r\n                }),\r\n                has: ut(function(e) {\r\n                    return function(t) {\r\n                        return at(e, t).length > 0\r\n                    }\r\n                }),\r\n                contains: ut(function(e) {\r\n                    return function(t) {\r\n                        return (t.textContent || t.innerText || a(t)).indexOf(e) > -1\r\n                    }\r\n                }),\r\n                lang: ut(function(e) {\r\n                    return G.test(e || \"\") || at.error(\"unsupported lang: \" + e), e = e.replace(rt, it).toLowerCase(),\r\n                        function(t) {\r\n                            var n;\r\n                            do\r\n                                if (n = h ? t.lang : t.getAttribute(\"xml:lang\") || t.getAttribute(\"lang\")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + \"-\");\r\n                            while ((t = t.parentNode) && 1 === t.nodeType);\r\n                            return !1\r\n                        }\r\n                }),\r\n                target: function(t) {\r\n                    var n = e.location && e.location.hash;\r\n                    return n && n.slice(1) === t.id\r\n                },\r\n                root: function(e) {\r\n                    return e === d\r\n                },\r\n                focus: function(e) {\r\n                    return e === f.activeElement && (!f.hasFocus || f.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)\r\n                },\r\n                enabled: function(e) {\r\n                    return e.disabled === !1\r\n                },\r\n                disabled: function(e) {\r\n                    return e.disabled === !0\r\n                },\r\n                checked: function(e) {\r\n                    var t = e.nodeName.toLowerCase();\r\n                    return \"input\" === t && !!e.checked || \"option\" === t && !!e.selected\r\n                },\r\n                selected: function(e) {\r\n                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0\r\n                },\r\n                empty: function(e) {\r\n                    for (e = e.firstChild; e; e = e.nextSibling)\r\n                        if (e.nodeName > \"@\" || 3 === e.nodeType || 4 === e.nodeType) return !1;\r\n                    return !0\r\n                },\r\n                parent: function(e) {\r\n                    return !o.pseudos.empty(e)\r\n                },\r\n                header: function(e) {\r\n                    return tt.test(e.nodeName)\r\n                },\r\n                input: function(e) {\r\n                    return et.test(e.nodeName)\r\n                },\r\n                button: function(e) {\r\n                    var t = e.nodeName.toLowerCase();\r\n                    return \"input\" === t && \"button\" === e.type || \"button\" === t\r\n                },\r\n                text: function(e) {\r\n                    var t;\r\n                    return \"input\" === e.nodeName.toLowerCase() && \"text\" === e.type && (null == (t = e.getAttribute(\"type\")) || t.toLowerCase() === e.type)\r\n                },\r\n                first: vt(function() {\r\n                    return [0]\r\n                }),\r\n                last: vt(function(e, t) {\r\n                    return [t - 1]\r\n                }),\r\n                eq: vt(function(e, t, n) {\r\n                    return [0 > n ? n + t : n]\r\n                }),\r\n                even: vt(function(e, t) {\r\n                    var n = 0;\r\n                    for (; t > n; n += 2) e.push(n);\r\n                    return e\r\n                }),\r\n                odd: vt(function(e, t) {\r\n                    var n = 1;\r\n                    for (; t > n; n += 2) e.push(n);\r\n                    return e\r\n                }),\r\n                lt: vt(function(e, t, n) {\r\n                    var r = 0 > n ? n + t : n;\r\n                    for (; --r >= 0;) e.push(r);\r\n                    return e\r\n                }),\r\n                gt: vt(function(e, t, n) {\r\n                    var r = 0 > n ? n + t : n;\r\n                    for (; t > ++r;) e.push(r);\r\n                    return e\r\n                })\r\n            }\r\n        };\r\n        for (n in {\r\n            radio: !0,\r\n            checkbox: !0,\r\n            file: !0,\r\n            password: !0,\r\n            image: !0\r\n        }) o.pseudos[n] = mt(n);\r\n        for (n in {\r\n            submit: !0,\r\n            reset: !0\r\n        }) o.pseudos[n] = yt(n);\r\n\r\n        function bt(e, t) {\r\n            var n, r, i, a, s, l, u, c = k[e + \" \"];\r\n            if (c) return t ? 0 : c.slice(0);\r\n            s = e, l = [], u = o.preFilter;\r\n            while (s) {\r\n                (!n || (r = X.exec(s))) && (r && (s = s.slice(r[0].length) || s), l.push(i = [])), n = !1, (r = U.exec(s)) && (n = r.shift(), i.push({\r\n                    value: n,\r\n                    type: r[0].replace(z, \" \")\r\n                }), s = s.slice(n.length));\r\n                for (a in o.filter)!(r = Q[a].exec(s)) || u[a] && !(r = u[a](r)) || (n = r.shift(), i.push({\r\n                    value: n,\r\n                    type: a,\r\n                    matches: r\r\n                }), s = s.slice(n.length));\r\n                if (!n) break\r\n            }\r\n            return t ? s.length : s ? at.error(e) : k(e, l).slice(0)\r\n        }\r\n\r\n        function xt(e) {\r\n            var t = 0,\r\n                n = e.length,\r\n                r = \"\";\r\n            for (; n > t; t++) r += e[t].value;\r\n            return r\r\n        }\r\n\r\n        function wt(e, t, n) {\r\n            var r = t.dir,\r\n                o = n && \"parentNode\" === r,\r\n                a = C++;\r\n            return t.first ? function(t, n, i) {\r\n                while (t = t[r])\r\n                    if (1 === t.nodeType || o) return e(t, n, i)\r\n            } : function(t, n, s) {\r\n                var l, u, c, p = T + \" \" + a;\r\n                if (s) {\r\n                    while (t = t[r])\r\n                        if ((1 === t.nodeType || o) && e(t, n, s)) return !0\r\n                } else\r\n                    while (t = t[r])\r\n                        if (1 === t.nodeType || o)\r\n                            if (c = t[b] || (t[b] = {}), (u = c[r]) && u[0] === p) {\r\n                                if ((l = u[1]) === !0 || l === i) return l === !0\r\n                            } else if (u = c[r] = [p], u[1] = e(t, n, s) || i, u[1] === !0) return !0\r\n            }\r\n        }\r\n\r\n        function Tt(e) {\r\n            return e.length > 1 ? function(t, n, r) {\r\n                var i = e.length;\r\n                while (i--)\r\n                    if (!e[i](t, n, r)) return !1;\r\n                return !0\r\n            } : e[0]\r\n        }\r\n\r\n        function Ct(e, t, n, r, i) {\r\n            var o, a = [],\r\n                s = 0,\r\n                l = e.length,\r\n                u = null != t;\r\n            for (; l > s; s++)(o = e[s]) && (!n || n(o, r, i)) && (a.push(o), u && t.push(s));\r\n            return a\r\n        }\r\n\r\n        function Nt(e, t, n, r, i, o) {\r\n            return r && !r[b] && (r = Nt(r)), i && !i[b] && (i = Nt(i, o)), ut(function(o, a, s, l) {\r\n                var u, c, p, f = [],\r\n                    d = [],\r\n                    h = a.length,\r\n                    g = o || St(t || \"*\", s.nodeType ? [s] : s, []),\r\n                    m = !e || !o && t ? g : Ct(g, f, e, s, l),\r\n                    y = n ? i || (o ? e : h || r) ? [] : a : m;\r\n                if (n && n(m, y, s, l), r) {\r\n                    u = Ct(y, d), r(u, [], s, l), c = u.length;\r\n                    while (c--)(p = u[c]) && (y[d[c]] = !(m[d[c]] = p))\r\n                }\r\n                if (o) {\r\n                    if (i || e) {\r\n                        if (i) {\r\n                            u = [], c = y.length;\r\n                            while (c--)(p = y[c]) && u.push(m[c] = p);\r\n                            i(null, y = [], u, l)\r\n                        }\r\n                        c = y.length;\r\n                        while (c--)(p = y[c]) && (u = i ? F.call(o, p) : f[c]) > -1 && (o[u] = !(a[u] = p))\r\n                    }\r\n                } else y = Ct(y === a ? y.splice(h, y.length) : y), i ? i(null, a, y, l) : M.apply(a, y)\r\n            })\r\n        }\r\n\r\n        function kt(e) {\r\n            var t, n, r, i = e.length,\r\n                a = o.relative[e[0].type],\r\n                s = a || o.relative[\" \"],\r\n                l = a ? 1 : 0,\r\n                c = wt(function(e) {\r\n                    return e === t\r\n                }, s, !0),\r\n                p = wt(function(e) {\r\n                    return F.call(t, e) > -1\r\n                }, s, !0),\r\n                f = [\r\n                    function(e, n, r) {\r\n                        return !a && (r || n !== u) || ((t = n).nodeType ? c(e, n, r) : p(e, n, r))\r\n                    }\r\n                ];\r\n            for (; i > l; l++)\r\n                if (n = o.relative[e[l].type]) f = [wt(Tt(f), n)];\r\n                else {\r\n                    if (n = o.filter[e[l].type].apply(null, e[l].matches), n[b]) {\r\n                        for (r = ++l; i > r; r++)\r\n                            if (o.relative[e[r].type]) break;\r\n                        return Nt(l > 1 && Tt(f), l > 1 && xt(e.slice(0, l - 1).concat({\r\n                            value: \" \" === e[l - 2].type ? \"*\" : \"\"\r\n                        })).replace(z, \"$1\"), n, r > l && kt(e.slice(l, r)), i > r && kt(e = e.slice(r)), i > r && xt(e))\r\n                    }\r\n                    f.push(n)\r\n                }\r\n            return Tt(f)\r\n        }\r\n\r\n        function Et(e, t) {\r\n            var n = 0,\r\n                r = t.length > 0,\r\n                a = e.length > 0,\r\n                s = function(s, l, c, p, d) {\r\n                    var h, g, m, y = [],\r\n                        v = 0,\r\n                        b = \"0\",\r\n                        x = s && [],\r\n                        w = null != d,\r\n                        C = u,\r\n                        N = s || a && o.find.TAG(\"*\", d && l.parentNode || l),\r\n                        k = T += null == C ? 1 : Math.random() || .1;\r\n                    for (w && (u = l !== f && l, i = n); null != (h = N[b]); b++) {\r\n                        if (a && h) {\r\n                            g = 0;\r\n                            while (m = e[g++])\r\n                                if (m(h, l, c)) {\r\n                                    p.push(h);\r\n                                    break\r\n                                }\r\n                            w && (T = k, i = ++n)\r\n                        }\r\n                        r && ((h = !m && h) && v--, s && x.push(h))\r\n                    }\r\n                    if (v += b, r && b !== v) {\r\n                        g = 0;\r\n                        while (m = t[g++]) m(x, y, l, c);\r\n                        if (s) {\r\n                            if (v > 0)\r\n                                while (b--) x[b] || y[b] || (y[b] = q.call(p));\r\n                            y = Ct(y)\r\n                        }\r\n                        M.apply(p, y), w && !s && y.length > 0 && v + t.length > 1 && at.uniqueSort(p)\r\n                    }\r\n                    return w && (T = k, u = C), x\r\n                };\r\n            return r ? ut(s) : s\r\n        }\r\n        l = at.compile = function(e, t) {\r\n            var n, r = [],\r\n                i = [],\r\n                o = E[e + \" \"];\r\n            if (!o) {\r\n                t || (t = bt(e)), n = t.length;\r\n                while (n--) o = kt(t[n]), o[b] ? r.push(o) : i.push(o);\r\n                o = E(e, Et(i, r))\r\n            }\r\n            return o\r\n        };\r\n\r\n        function St(e, t, n) {\r\n            var r = 0,\r\n                i = t.length;\r\n            for (; i > r; r++) at(e, t[r], n);\r\n            return n\r\n        }\r\n\r\n        function At(e, t, n, i) {\r\n            var a, s, u, c, p, f = bt(e);\r\n            if (!i && 1 === f.length) {\r\n                if (s = f[0] = f[0].slice(0), s.length > 2 && \"ID\" === (u = s[0]).type && r.getById && 9 === t.nodeType && h && o.relative[s[1].type]) {\r\n                    if (t = (o.find.ID(u.matches[0].replace(rt, it), t) || [])[0], !t) return n;\r\n                    e = e.slice(s.shift().value.length)\r\n                }\r\n                a = Q.needsContext.test(e) ? 0 : s.length;\r\n                while (a--) {\r\n                    if (u = s[a], o.relative[c = u.type]) break;\r\n                    if ((p = o.find[c]) && (i = p(u.matches[0].replace(rt, it), V.test(s[0].type) && t.parentNode || t))) {\r\n                        if (s.splice(a, 1), e = i.length && xt(s), !e) return M.apply(n, i), n;\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n            return l(e, f)(i, t, !h, n, V.test(e)), n\r\n        }\r\n        o.pseudos.nth = o.pseudos.eq;\r\n\r\n        function jt() {}\r\n        jt.prototype = o.filters = o.pseudos, o.setFilters = new jt, r.sortStable = b.split(\"\").sort(A).join(\"\") === b, p(), [0, 0].sort(A), r.detectDuplicates = S, x.find = at, x.expr = at.selectors, x.expr[\":\"] = x.expr.pseudos, x.unique = at.uniqueSort, x.text = at.getText, x.isXMLDoc = at.isXML, x.contains = at.contains\r\n    }(e);\r\n    var O = {};\r\n\r\n    function F(e) {\r\n        var t = O[e] = {};\r\n        return x.each(e.match(T) || [], function(e, n) {\r\n            t[n] = !0\r\n        }), t\r\n    }\r\n    x.Callbacks = function(e) {\r\n        e = \"string\" == typeof e ? O[e] || F(e) : x.extend({}, e);\r\n        var n, r, i, o, a, s, l = [],\r\n            u = !e.once && [],\r\n            c = function(t) {\r\n                for (r = e.memory && t, i = !0, a = s || 0, s = 0, o = l.length, n = !0; l && o > a; a++)\r\n                    if (l[a].apply(t[0], t[1]) === !1 && e.stopOnFalse) {\r\n                        r = !1;\r\n                        break\r\n                    }\r\n                n = !1, l && (u ? u.length && c(u.shift()) : r ? l = [] : p.disable())\r\n            },\r\n            p = {\r\n                add: function() {\r\n                    if (l) {\r\n                        var t = l.length;\r\n                        (function i(t) {\r\n                            x.each(t, function(t, n) {\r\n                                var r = x.type(n);\r\n                                \"function\" === r ? e.unique && p.has(n) || l.push(n) : n && n.length && \"string\" !== r && i(n)\r\n                            })\r\n                        })(arguments), n ? o = l.length : r && (s = t, c(r))\r\n                    }\r\n                    return this\r\n                },\r\n                remove: function() {\r\n                    return l && x.each(arguments, function(e, t) {\r\n                        var r;\r\n                        while ((r = x.inArray(t, l, r)) > -1) l.splice(r, 1), n && (o >= r && o--, a >= r && a--)\r\n                    }), this\r\n                },\r\n                has: function(e) {\r\n                    return e ? x.inArray(e, l) > -1 : !(!l || !l.length)\r\n                },\r\n                empty: function() {\r\n                    return l = [], o = 0, this\r\n                },\r\n                disable: function() {\r\n                    return l = u = r = t, this\r\n                },\r\n                disabled: function() {\r\n                    return !l\r\n                },\r\n                lock: function() {\r\n                    return u = t, r || p.disable(), this\r\n                },\r\n                locked: function() {\r\n                    return !u\r\n                },\r\n                fireWith: function(e, t) {\r\n                    return t = t || [], t = [e, t.slice ? t.slice() : t], !l || i && !u || (n ? u.push(t) : c(t)), this\r\n                },\r\n                fire: function() {\r\n                    return p.fireWith(this, arguments), this\r\n                },\r\n                fired: function() {\r\n                    return !!i\r\n                }\r\n            };\r\n        return p\r\n    }, x.extend({\r\n        Deferred: function(e) {\r\n            var t = [\r\n                    [\"resolve\", \"done\", x.Callbacks(\"once memory\"), \"resolved\"],\r\n                    [\"reject\", \"fail\", x.Callbacks(\"once memory\"), \"rejected\"],\r\n                    [\"notify\", \"progress\", x.Callbacks(\"memory\")]\r\n                ],\r\n                n = \"pending\",\r\n                r = {\r\n                    state: function() {\r\n                        return n\r\n                    },\r\n                    always: function() {\r\n                        return i.done(arguments).fail(arguments), this\r\n                    },\r\n                    then: function() {\r\n                        var e = arguments;\r\n                        return x.Deferred(function(n) {\r\n                            x.each(t, function(t, o) {\r\n                                var a = o[0],\r\n                                    s = x.isFunction(e[t]) && e[t];\r\n                                i[o[1]](function() {\r\n                                    var e = s && s.apply(this, arguments);\r\n                                    e && x.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + \"With\"](this === r ? n.promise() : this, s ? [e] : arguments)\r\n                                })\r\n                            }), e = null\r\n                        }).promise()\r\n                    },\r\n                    promise: function(e) {\r\n                        return null != e ? x.extend(e, r) : r\r\n                    }\r\n                },\r\n                i = {};\r\n            return r.pipe = r.then, x.each(t, function(e, o) {\r\n                var a = o[2],\r\n                    s = o[3];\r\n                r[o[1]] = a.add, s && a.add(function() {\r\n                    n = s\r\n                }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {\r\n                    return i[o[0] + \"With\"](this === i ? r : this, arguments), this\r\n                }, i[o[0] + \"With\"] = a.fireWith\r\n            }), r.promise(i), e && e.call(i, i), i\r\n        },\r\n        when: function(e) {\r\n            var t = 0,\r\n                n = g.call(arguments),\r\n                r = n.length,\r\n                i = 1 !== r || e && x.isFunction(e.promise) ? r : 0,\r\n                o = 1 === i ? e : x.Deferred(),\r\n                a = function(e, t, n) {\r\n                    return function(r) {\r\n                        t[e] = this, n[e] = arguments.length > 1 ? g.call(arguments) : r, n === s ? o.notifyWith(t, n) : --i || o.resolveWith(t, n)\r\n                    }\r\n                },\r\n                s, l, u;\r\n            if (r > 1)\r\n                for (s = Array(r), l = Array(r), u = Array(r); r > t; t++) n[t] && x.isFunction(n[t].promise) ? n[t].promise().done(a(t, u, n)).fail(o.reject).progress(a(t, l, s)) : --i;\r\n            return i || o.resolveWith(u, n), o.promise()\r\n        }\r\n    }), x.support = function(t) {\r\n        var n, r, o, s, l, u, c, p, f, d = a.createElement(\"div\");\r\n        if (d.setAttribute(\"className\", \"t\"), d.innerHTML = \"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\", n = d.getElementsByTagName(\"*\") || [], r = d.getElementsByTagName(\"a\")[0], !r || !r.style || !n.length) return t;\r\n        s = a.createElement(\"select\"), u = s.appendChild(a.createElement(\"option\")), o = d.getElementsByTagName(\"input\")[0], r.style.cssText = \"top:1px;float:left;opacity:.5\", t.getSetAttribute = \"t\" !== d.className, t.leadingWhitespace = 3 === d.firstChild.nodeType, t.tbody = !d.getElementsByTagName(\"tbody\").length, t.htmlSerialize = !!d.getElementsByTagName(\"link\").length, t.style = /top/.test(r.getAttribute(\"style\")), t.hrefNormalized = \"/a\" === r.getAttribute(\"href\"), t.opacity = /^0.5/.test(r.style.opacity), t.cssFloat = !!r.style.cssFloat, t.checkOn = !!o.value, t.optSelected = u.selected, t.enctype = !!a.createElement(\"form\").enctype, t.html5Clone = \"<:nav></:nav>\" !== a.createElement(\"nav\").cloneNode(!0).outerHTML, t.inlineBlockNeedsLayout = !1, t.shrinkWrapBlocks = !1, t.pixelPosition = !1, t.deleteExpando = !0, t.noCloneEvent = !0, t.reliableMarginRight = !0, t.boxSizingReliable = !0, o.checked = !0, t.noCloneChecked = o.cloneNode(!0).checked, s.disabled = !0, t.optDisabled = !u.disabled;\r\n        try {\r\n            delete d.test\r\n        } catch (h) {\r\n            t.deleteExpando = !1\r\n        }\r\n        o = a.createElement(\"input\"), o.setAttribute(\"value\", \"\"), t.input = \"\" === o.getAttribute(\"value\"), o.value = \"t\", o.setAttribute(\"type\", \"radio\"), t.radioValue = \"t\" === o.value, o.setAttribute(\"checked\", \"t\"), o.setAttribute(\"name\", \"t\"), l = a.createDocumentFragment(), l.appendChild(o), t.appendChecked = o.checked, t.checkClone = l.cloneNode(!0).cloneNode(!0).lastChild.checked, d.attachEvent && (d.attachEvent(\"onclick\", function() {\r\n            t.noCloneEvent = !1\r\n        }), d.cloneNode(!0).click());\r\n        for (f in {\r\n            submit: !0,\r\n            change: !0,\r\n            focusin: !0\r\n        }) d.setAttribute(c = \"on\" + f, \"t\"), t[f + \"Bubbles\"] = c in e || d.attributes[c].expando === !1;\r\n        d.style.backgroundClip = \"content-box\", d.cloneNode(!0).style.backgroundClip = \"\", t.clearCloneStyle = \"content-box\" === d.style.backgroundClip;\r\n        for (f in x(t)) break;\r\n        return t.ownLast = \"0\" !== f, x(function() {\r\n            var n, r, o, s = \"padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\",\r\n                l = a.getElementsByTagName(\"body\")[0];\r\n            l && (n = a.createElement(\"div\"), n.style.cssText = \"border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\", l.appendChild(n).appendChild(d), d.innerHTML = \"<table><tr><td></td><td>t</td></tr></table>\", o = d.getElementsByTagName(\"td\"), o[0].style.cssText = \"padding:0;margin:0;border:0;display:none\", p = 0 === o[0].offsetHeight, o[0].style.display = \"\", o[1].style.display = \"none\", t.reliableHiddenOffsets = p && 0 === o[0].offsetHeight, d.innerHTML = \"\", d.style.cssText = \"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\", x.swap(l, null != l.style.zoom ? {\r\n                zoom: 1\r\n            } : {}, function() {\r\n                t.boxSizing = 4 === d.offsetWidth\r\n            }), e.getComputedStyle && (t.pixelPosition = \"1%\" !== (e.getComputedStyle(d, null) || {}).top, t.boxSizingReliable = \"4px\" === (e.getComputedStyle(d, null) || {\r\n                width: \"4px\"\r\n            }).width, r = d.appendChild(a.createElement(\"div\")), r.style.cssText = d.style.cssText = s, r.style.marginRight = r.style.width = \"0\", d.style.width = \"1px\", t.reliableMarginRight = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight)), typeof d.style.zoom !== i && (d.innerHTML = \"\", d.style.cssText = s + \"width:1px;padding:1px;display:inline;zoom:1\", t.inlineBlockNeedsLayout = 3 === d.offsetWidth, d.style.display = \"block\", d.innerHTML = \"<div></div>\", d.firstChild.style.width = \"5px\", t.shrinkWrapBlocks = 3 !== d.offsetWidth, t.inlineBlockNeedsLayout && (l.style.zoom = 1)), l.removeChild(n), n = d = o = r = null)\r\n        }), n = s = l = u = r = o = null, t\r\n    }({});\r\n    var B = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\r\n        P = /([A-Z])/g;\r\n\r\n    function R(e, n, r, i) {\r\n        if (x.acceptData(e)) {\r\n            var o, a, s = x.expando,\r\n                l = e.nodeType,\r\n                u = l ? x.cache : e,\r\n                c = l ? e[s] : e[s] && s;\r\n            if (c && u[c] && (i || u[c].data) || r !== t || \"string\" != typeof n) return c || (c = l ? e[s] = p.pop() || x.guid++ : s), u[c] || (u[c] = l ? {} : {\r\n                toJSON: x.noop\r\n            }), (\"object\" == typeof n || \"function\" == typeof n) && (i ? u[c] = x.extend(u[c], n) : u[c].data = x.extend(u[c].data, n)), a = u[c], i || (a.data || (a.data = {}), a = a.data), r !== t && (a[x.camelCase(n)] = r), \"string\" == typeof n ? (o = a[n], null == o && (o = a[x.camelCase(n)])) : o = a, o\r\n        }\r\n    }\r\n\r\n    function W(e, t, n) {\r\n        if (x.acceptData(e)) {\r\n            var r, i, o = e.nodeType,\r\n                a = o ? x.cache : e,\r\n                s = o ? e[x.expando] : x.expando;\r\n            if (a[s]) {\r\n                if (t && (r = n ? a[s] : a[s].data)) {\r\n                    x.isArray(t) ? t = t.concat(x.map(t, x.camelCase)) : t in r ? t = [t] : (t = x.camelCase(t), t = t in r ? [t] : t.split(\" \")), i = t.length;\r\n                    while (i--) delete r[t[i]];\r\n                    if (n ? !I(r) : !x.isEmptyObject(r)) return\r\n                }(n || (delete a[s].data, I(a[s]))) && (o ? x.cleanData([e], !0) : x.support.deleteExpando || a != a.window ? delete a[s] : a[s] = null)\r\n            }\r\n        }\r\n    }\r\n    x.extend({\r\n        cache: {},\r\n        noData: {\r\n            applet: !0,\r\n            embed: !0,\r\n            object: \"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"\r\n        },\r\n        hasData: function(e) {\r\n            return e = e.nodeType ? x.cache[e[x.expando]] : e[x.expando], !!e && !I(e)\r\n        },\r\n        data: function(e, t, n) {\r\n            return R(e, t, n)\r\n        },\r\n        removeData: function(e, t) {\r\n            return W(e, t)\r\n        },\r\n        _data: function(e, t, n) {\r\n            return R(e, t, n, !0)\r\n        },\r\n        _removeData: function(e, t) {\r\n            return W(e, t, !0)\r\n        },\r\n        acceptData: function(e) {\r\n            if (e.nodeType && 1 !== e.nodeType && 9 !== e.nodeType) return !1;\r\n            var t = e.nodeName && x.noData[e.nodeName.toLowerCase()];\r\n            return !t || t !== !0 && e.getAttribute(\"classid\") === t\r\n        }\r\n    }), x.fn.extend({\r\n        data: function(e, n) {\r\n            var r, i, o = null,\r\n                a = 0,\r\n                s = this[0];\r\n            if (e === t) {\r\n                if (this.length && (o = x.data(s), 1 === s.nodeType && !x._data(s, \"parsedAttrs\"))) {\r\n                    for (r = s.attributes; r.length > a; a++) i = r[a].name, 0 === i.indexOf(\"data-\") && (i = x.camelCase(i.slice(5)), $(s, i, o[i]));\r\n                    x._data(s, \"parsedAttrs\", !0)\r\n                }\r\n                return o\r\n            }\r\n            return \"object\" == typeof e ? this.each(function() {\r\n                x.data(this, e)\r\n            }) : arguments.length > 1 ? this.each(function() {\r\n                x.data(this, e, n)\r\n            }) : s ? $(s, e, x.data(s, e)) : null\r\n        },\r\n        removeData: function(e) {\r\n            return this.each(function() {\r\n                x.removeData(this, e)\r\n            })\r\n        }\r\n    });\r\n\r\n    function $(e, n, r) {\r\n        if (r === t && 1 === e.nodeType) {\r\n            var i = \"data-\" + n.replace(P, \"-$1\").toLowerCase();\r\n            if (r = e.getAttribute(i), \"string\" == typeof r) {\r\n                try {\r\n                    r = \"true\" === r ? !0 : \"false\" === r ? !1 : \"null\" === r ? null : +r + \"\" === r ? +r : B.test(r) ? x.parseJSON(r) : r\r\n                } catch (o) {}\r\n                x.data(e, n, r)\r\n            } else r = t\r\n        }\r\n        return r\r\n    }\r\n\r\n    function I(e) {\r\n        var t;\r\n        for (t in e)\r\n            if ((\"data\" !== t || !x.isEmptyObject(e[t])) && \"toJSON\" !== t) return !1;\r\n        return !0\r\n    }\r\n    x.extend({\r\n        queue: function(e, n, r) {\r\n            var i;\r\n            return e ? (n = (n || \"fx\") + \"queue\", i = x._data(e, n), r && (!i || x.isArray(r) ? i = x._data(e, n, x.makeArray(r)) : i.push(r)), i || []) : t\r\n        },\r\n        dequeue: function(e, t) {\r\n            t = t || \"fx\";\r\n            var n = x.queue(e, t),\r\n                r = n.length,\r\n                i = n.shift(),\r\n                o = x._queueHooks(e, t),\r\n                a = function() {\r\n                    x.dequeue(e, t)\r\n                };\r\n            \"inprogress\" === i && (i = n.shift(), r--), i && (\"fx\" === t && n.unshift(\"inprogress\"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()\r\n        },\r\n        _queueHooks: function(e, t) {\r\n            var n = t + \"queueHooks\";\r\n            return x._data(e, n) || x._data(e, n, {\r\n                empty: x.Callbacks(\"once memory\").add(function() {\r\n                    x._removeData(e, t + \"queue\"), x._removeData(e, n)\r\n                })\r\n            })\r\n        }\r\n    }), x.fn.extend({\r\n        queue: function(e, n) {\r\n            var r = 2;\r\n            return \"string\" != typeof e && (n = e, e = \"fx\", r--), r > arguments.length ? x.queue(this[0], e) : n === t ? this : this.each(function() {\r\n                var t = x.queue(this, e, n);\r\n                x._queueHooks(this, e), \"fx\" === e && \"inprogress\" !== t[0] && x.dequeue(this, e)\r\n            })\r\n        },\r\n        dequeue: function(e) {\r\n            return this.each(function() {\r\n                x.dequeue(this, e)\r\n            })\r\n        },\r\n        delay: function(e, t) {\r\n            return e = x.fx ? x.fx.speeds[e] || e : e, t = t || \"fx\", this.queue(t, function(t, n) {\r\n                var r = setTimeout(t, e);\r\n                n.stop = function() {\r\n                    clearTimeout(r)\r\n                }\r\n            })\r\n        },\r\n        clearQueue: function(e) {\r\n            return this.queue(e || \"fx\", [])\r\n        },\r\n        promise: function(e, n) {\r\n            var r, i = 1,\r\n                o = x.Deferred(),\r\n                a = this,\r\n                s = this.length,\r\n                l = function() {\r\n                    --i || o.resolveWith(a, [a])\r\n                };\r\n            \"string\" != typeof e && (n = e, e = t), e = e || \"fx\";\r\n            while (s--) r = x._data(a[s], e + \"queueHooks\"), r && r.empty && (i++, r.empty.add(l));\r\n            return l(), o.promise(n)\r\n        }\r\n    });\r\n    var z, X, U = /[\\t\\r\\n\\f]/g,\r\n        V = /\\r/g,\r\n        Y = /^(?:input|select|textarea|button|object)$/i,\r\n        J = /^(?:a|area)$/i,\r\n        G = /^(?:checked|selected)$/i,\r\n        Q = x.support.getSetAttribute,\r\n        K = x.support.input;\r\n    x.fn.extend({\r\n        attr: function(e, t) {\r\n            return x.access(this, x.attr, e, t, arguments.length > 1)\r\n        },\r\n        removeAttr: function(e) {\r\n            return this.each(function() {\r\n                x.removeAttr(this, e)\r\n            })\r\n        },\r\n        prop: function(e, t) {\r\n            return x.access(this, x.prop, e, t, arguments.length > 1)\r\n        },\r\n        removeProp: function(e) {\r\n            return e = x.propFix[e] || e, this.each(function() {\r\n                try {\r\n                    this[e] = t, delete this[e]\r\n                } catch (n) {}\r\n            })\r\n        },\r\n        addClass: function(e) {\r\n            var t, n, r, i, o, a = 0,\r\n                s = this.length,\r\n                l = \"string\" == typeof e && e;\r\n            if (x.isFunction(e)) return this.each(function(t) {\r\n                x(this).addClass(e.call(this, t, this.className))\r\n            });\r\n            if (l)\r\n                for (t = (e || \"\").match(T) || []; s > a; a++)\r\n                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (\" \" + n.className + \" \").replace(U, \" \") : \" \")) {\r\n                        o = 0;\r\n                        while (i = t[o++]) 0 > r.indexOf(\" \" + i + \" \") && (r += i + \" \");\r\n                        n.className = x.trim(r)\r\n                    }\r\n            return this\r\n        },\r\n        removeClass: function(e) {\r\n            var t, n, r, i, o, a = 0,\r\n                s = this.length,\r\n                l = 0 === arguments.length || \"string\" == typeof e && e;\r\n            if (x.isFunction(e)) return this.each(function(t) {\r\n                x(this).removeClass(e.call(this, t, this.className))\r\n            });\r\n            if (l)\r\n                for (t = (e || \"\").match(T) || []; s > a; a++)\r\n                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (\" \" + n.className + \" \").replace(U, \" \") : \"\")) {\r\n                        o = 0;\r\n                        while (i = t[o++])\r\n                            while (r.indexOf(\" \" + i + \" \") >= 0) r = r.replace(\" \" + i + \" \", \" \");\r\n                        n.className = e ? x.trim(r) : \"\"\r\n                    }\r\n            return this\r\n        },\r\n        toggleClass: function(e, t) {\r\n            var n = typeof e,\r\n                r = \"boolean\" == typeof t;\r\n            return x.isFunction(e) ? this.each(function(n) {\r\n                x(this).toggleClass(e.call(this, n, this.className, t), t)\r\n            }) : this.each(function() {\r\n                if (\"string\" === n) {\r\n                    var o, a = 0,\r\n                        s = x(this),\r\n                        l = t,\r\n                        u = e.match(T) || [];\r\n                    while (o = u[a++]) l = r ? l : !s.hasClass(o), s[l ? \"addClass\" : \"removeClass\"](o)\r\n                } else(n === i || \"boolean\" === n) && (this.className && x._data(this, \"__className__\", this.className), this.className = this.className || e === !1 ? \"\" : x._data(this, \"__className__\") || \"\")\r\n            })\r\n        },\r\n        hasClass: function(e) {\r\n            var t = \" \" + e + \" \",\r\n                n = 0,\r\n                r = this.length;\r\n            for (; r > n; n++)\r\n                if (1 === this[n].nodeType && (\" \" + this[n].className + \" \").replace(U, \" \").indexOf(t) >= 0) return !0;\r\n            return !1\r\n        },\r\n        val: function(e) {\r\n            var n, r, i, o = this[0]; {\r\n                if (arguments.length) return i = x.isFunction(e), this.each(function(n) {\r\n                    var o;\r\n                    1 === this.nodeType && (o = i ? e.call(this, n, x(this).val()) : e, null == o ? o = \"\" : \"number\" == typeof o ? o += \"\" : x.isArray(o) && (o = x.map(o, function(e) {\r\n                        return null == e ? \"\" : e + \"\"\r\n                    })), r = x.valHooks[this.type] || x.valHooks[this.nodeName.toLowerCase()], r && \"set\" in r && r.set(this, o, \"value\") !== t || (this.value = o))\r\n                });\r\n                if (o) return r = x.valHooks[o.type] || x.valHooks[o.nodeName.toLowerCase()], r && \"get\" in r && (n = r.get(o, \"value\")) !== t ? n : (n = o.value, \"string\" == typeof n ? n.replace(V, \"\") : null == n ? \"\" : n)\r\n            }\r\n        }\r\n    }), x.extend({\r\n        valHooks: {\r\n            option: {\r\n                get: function(e) {\r\n                    var t = x.find.attr(e, \"value\");\r\n                    return null != t ? t : e.text\r\n                }\r\n            },\r\n            select: {\r\n                get: function(e) {\r\n                    var t, n, r = e.options,\r\n                        i = e.selectedIndex,\r\n                        o = \"select-one\" === e.type || 0 > i,\r\n                        a = o ? null : [],\r\n                        s = o ? i + 1 : r.length,\r\n                        l = 0 > i ? s : o ? i : 0;\r\n                    for (; s > l; l++)\r\n                        if (n = r[l], !(!n.selected && l !== i || (x.support.optDisabled ? n.disabled : null !== n.getAttribute(\"disabled\")) || n.parentNode.disabled && x.nodeName(n.parentNode, \"optgroup\"))) {\r\n                            if (t = x(n).val(), o) return t;\r\n                            a.push(t)\r\n                        }\r\n                    return a\r\n                },\r\n                set: function(e, t) {\r\n                    var n, r, i = e.options,\r\n                        o = x.makeArray(t),\r\n                        a = i.length;\r\n                    while (a--) r = i[a], (r.selected = x.inArray(x(r).val(), o) >= 0) && (n = !0);\r\n                    return n || (e.selectedIndex = -1), o\r\n                }\r\n            }\r\n        },\r\n        attr: function(e, n, r) {\r\n            var o, a, s = e.nodeType;\r\n            if (e && 3 !== s && 8 !== s && 2 !== s) return typeof e.getAttribute === i ? x.prop(e, n, r) : (1 === s && x.isXMLDoc(e) || (n = n.toLowerCase(), o = x.attrHooks[n] || (x.expr.match.bool.test(n) ? X : z)), r === t ? o && \"get\" in o && null !== (a = o.get(e, n)) ? a : (a = x.find.attr(e, n), null == a ? t : a) : null !== r ? o && \"set\" in o && (a = o.set(e, r, n)) !== t ? a : (e.setAttribute(n, r + \"\"), r) : (x.removeAttr(e, n), t))\r\n        },\r\n        removeAttr: function(e, t) {\r\n            var n, r, i = 0,\r\n                o = t && t.match(T);\r\n            if (o && 1 === e.nodeType)\r\n                while (n = o[i++]) r = x.propFix[n] || n, x.expr.match.bool.test(n) ? K && Q || !G.test(n) ? e[r] = !1 : e[x.camelCase(\"default-\" + n)] = e[r] = !1 : x.attr(e, n, \"\"), e.removeAttribute(Q ? n : r)\r\n        },\r\n        attrHooks: {\r\n            type: {\r\n                set: function(e, t) {\r\n                    if (!x.support.radioValue && \"radio\" === t && x.nodeName(e, \"input\")) {\r\n                        var n = e.value;\r\n                        return e.setAttribute(\"type\", t), n && (e.value = n), t\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        propFix: {\r\n            \"for\": \"htmlFor\",\r\n            \"class\": \"className\"\r\n        },\r\n        prop: function(e, n, r) {\r\n            var i, o, a, s = e.nodeType;\r\n            if (e && 3 !== s && 8 !== s && 2 !== s) return a = 1 !== s || !x.isXMLDoc(e), a && (n = x.propFix[n] || n, o = x.propHooks[n]), r !== t ? o && \"set\" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && \"get\" in o && null !== (i = o.get(e, n)) ? i : e[n]\r\n        },\r\n        propHooks: {\r\n            tabIndex: {\r\n                get: function(e) {\r\n                    var t = x.find.attr(e, \"tabindex\");\r\n                    return t ? parseInt(t, 10) : Y.test(e.nodeName) || J.test(e.nodeName) && e.href ? 0 : -1\r\n                }\r\n            }\r\n        }\r\n    }), X = {\r\n        set: function(e, t, n) {\r\n            return t === !1 ? x.removeAttr(e, n) : K && Q || !G.test(n) ? e.setAttribute(!Q && x.propFix[n] || n, n) : e[x.camelCase(\"default-\" + n)] = e[n] = !0, n\r\n        }\r\n    }, x.each(x.expr.match.bool.source.match(/\\w+/g), function(e, n) {\r\n        var r = x.expr.attrHandle[n] || x.find.attr;\r\n        x.expr.attrHandle[n] = K && Q || !G.test(n) ? function(e, n, i) {\r\n            var o = x.expr.attrHandle[n],\r\n                a = i ? t : (x.expr.attrHandle[n] = t) != r(e, n, i) ? n.toLowerCase() : null;\r\n            return x.expr.attrHandle[n] = o, a\r\n        } : function(e, n, r) {\r\n            return r ? t : e[x.camelCase(\"default-\" + n)] ? n.toLowerCase() : null\r\n        }\r\n    }), K && Q || (x.attrHooks.value = {\r\n        set: function(e, n, r) {\r\n            return x.nodeName(e, \"input\") ? (e.defaultValue = n, t) : z && z.set(e, n, r)\r\n        }\r\n    }), Q || (z = {\r\n        set: function(e, n, r) {\r\n            var i = e.getAttributeNode(r);\r\n            return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(r)), i.value = n += \"\", \"value\" === r || n === e.getAttribute(r) ? n : t\r\n        }\r\n    }, x.expr.attrHandle.id = x.expr.attrHandle.name = x.expr.attrHandle.coords = function(e, n, r) {\r\n        var i;\r\n        return r ? t : (i = e.getAttributeNode(n)) && \"\" !== i.value ? i.value : null\r\n    }, x.valHooks.button = {\r\n        get: function(e, n) {\r\n            var r = e.getAttributeNode(n);\r\n            return r && r.specified ? r.value : t\r\n        },\r\n        set: z.set\r\n    }, x.attrHooks.contenteditable = {\r\n        set: function(e, t, n) {\r\n            z.set(e, \"\" === t ? !1 : t, n)\r\n        }\r\n    }, x.each([\"width\", \"height\"], function(e, n) {\r\n        x.attrHooks[n] = {\r\n            set: function(e, r) {\r\n                return \"\" === r ? (e.setAttribute(n, \"auto\"), r) : t\r\n            }\r\n        }\r\n    })), x.support.hrefNormalized || x.each([\"href\", \"src\"], function(e, t) {\r\n        x.propHooks[t] = {\r\n            get: function(e) {\r\n                return e.getAttribute(t, 4)\r\n            }\r\n        }\r\n    }), x.support.style || (x.attrHooks.style = {\r\n        get: function(e) {\r\n            return e.style.cssText || t\r\n        },\r\n        set: function(e, t) {\r\n            return e.style.cssText = t + \"\"\r\n        }\r\n    }), x.support.optSelected || (x.propHooks.selected = {\r\n        get: function(e) {\r\n            var t = e.parentNode;\r\n            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null\r\n        }\r\n    }), x.each([\"tabIndex\", \"readOnly\", \"maxLength\", \"cellSpacing\", \"cellPadding\", \"rowSpan\", \"colSpan\", \"useMap\", \"frameBorder\", \"contentEditable\"], function() {\r\n        x.propFix[this.toLowerCase()] = this\r\n    }), x.support.enctype || (x.propFix.enctype = \"encoding\"), x.each([\"radio\", \"checkbox\"], function() {\r\n        x.valHooks[this] = {\r\n            set: function(e, n) {\r\n                return x.isArray(n) ? e.checked = x.inArray(x(e).val(), n) >= 0 : t\r\n            }\r\n        }, x.support.checkOn || (x.valHooks[this].get = function(e) {\r\n            return null === e.getAttribute(\"value\") ? \"on\" : e.value\r\n        })\r\n    });\r\n    var Z = /^(?:input|select|textarea)$/i,\r\n        et = /^key/,\r\n        tt = /^(?:mouse|contextmenu)|click/,\r\n        nt = /^(?:focusinfocus|focusoutblur)$/,\r\n        rt = /^([^.]*)(?:\\.(.+)|)$/;\r\n\r\n    function it() {\r\n        return !0\r\n    }\r\n\r\n    function ot() {\r\n        return !1\r\n    }\r\n\r\n    function at() {\r\n        try {\r\n            return a.activeElement\r\n        } catch (e) {}\r\n    }\r\n    x.event = {\r\n        global: {},\r\n        add: function(e, n, r, o, a) {\r\n            var s, l, u, c, p, f, d, h, g, m, y, v = x._data(e);\r\n            if (v) {\r\n                r.handler && (c = r, r = c.handler, a = c.selector), r.guid || (r.guid = x.guid++), (l = v.events) || (l = v.events = {}), (f = v.handle) || (f = v.handle = function(e) {\r\n                    return typeof x === i || e && x.event.triggered === e.type ? t : x.event.dispatch.apply(f.elem, arguments)\r\n                }, f.elem = e), n = (n || \"\").match(T) || [\"\"], u = n.length;\r\n                while (u--) s = rt.exec(n[u]) || [], g = y = s[1], m = (s[2] || \"\").split(\".\").sort(), g && (p = x.event.special[g] || {}, g = (a ? p.delegateType : p.bindType) || g, p = x.event.special[g] || {}, d = x.extend({\r\n                    type: g,\r\n                    origType: y,\r\n                    data: o,\r\n                    handler: r,\r\n                    guid: r.guid,\r\n                    selector: a,\r\n                    needsContext: a && x.expr.match.needsContext.test(a),\r\n                    namespace: m.join(\".\")\r\n                }, c), (h = l[g]) || (h = l[g] = [], h.delegateCount = 0, p.setup && p.setup.call(e, o, m, f) !== !1 || (e.addEventListener ? e.addEventListener(g, f, !1) : e.attachEvent && e.attachEvent(\"on\" + g, f))), p.add && (p.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)), a ? h.splice(h.delegateCount++, 0, d) : h.push(d), x.event.global[g] = !0);\r\n                e = null\r\n            }\r\n        },\r\n        remove: function(e, t, n, r, i) {\r\n            var o, a, s, l, u, c, p, f, d, h, g, m = x.hasData(e) && x._data(e);\r\n            if (m && (c = m.events)) {\r\n                t = (t || \"\").match(T) || [\"\"], u = t.length;\r\n                while (u--)\r\n                    if (s = rt.exec(t[u]) || [], d = g = s[1], h = (s[2] || \"\").split(\".\").sort(), d) {\r\n                        p = x.event.special[d] || {}, d = (r ? p.delegateType : p.bindType) || d, f = c[d] || [], s = s[2] && RegExp(\"(^|\\\\.)\" + h.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\"), l = o = f.length;\r\n                        while (o--) a = f[o], !i && g !== a.origType || n && n.guid !== a.guid || s && !s.test(a.namespace) || r && r !== a.selector && (\"**\" !== r || !a.selector) || (f.splice(o, 1), a.selector && f.delegateCount--, p.remove && p.remove.call(e, a));\r\n                        l && !f.length && (p.teardown && p.teardown.call(e, h, m.handle) !== !1 || x.removeEvent(e, d, m.handle), delete c[d])\r\n                    } else\r\n                        for (d in c) x.event.remove(e, d + t[u], n, r, !0);\r\n                x.isEmptyObject(c) && (delete m.handle, x._removeData(e, \"events\"))\r\n            }\r\n        },\r\n        trigger: function(n, r, i, o) {\r\n            var s, l, u, c, p, f, d, h = [i || a],\r\n                g = v.call(n, \"type\") ? n.type : n,\r\n                m = v.call(n, \"namespace\") ? n.namespace.split(\".\") : [];\r\n            if (u = f = i = i || a, 3 !== i.nodeType && 8 !== i.nodeType && !nt.test(g + x.event.triggered) && (g.indexOf(\".\") >= 0 && (m = g.split(\".\"), g = m.shift(), m.sort()), l = 0 > g.indexOf(\":\") && \"on\" + g, n = n[x.expando] ? n : new x.Event(g, \"object\" == typeof n && n), n.isTrigger = o ? 2 : 3, n.namespace = m.join(\".\"), n.namespace_re = n.namespace ? RegExp(\"(^|\\\\.)\" + m.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\") : null, n.result = t, n.target || (n.target = i), r = null == r ? [n] : x.makeArray(r, [n]), p = x.event.special[g] || {}, o || !p.trigger || p.trigger.apply(i, r) !== !1)) {\r\n                if (!o && !p.noBubble && !x.isWindow(i)) {\r\n                    for (c = p.delegateType || g, nt.test(c + g) || (u = u.parentNode); u; u = u.parentNode) h.push(u), f = u;\r\n                    f === (i.ownerDocument || a) && h.push(f.defaultView || f.parentWindow || e)\r\n                }\r\n                d = 0;\r\n                while ((u = h[d++]) && !n.isPropagationStopped()) n.type = d > 1 ? c : p.bindType || g, s = (x._data(u, \"events\") || {})[n.type] && x._data(u, \"handle\"), s && s.apply(u, r), s = l && u[l], s && x.acceptData(u) && s.apply && s.apply(u, r) === !1 && n.preventDefault();\r\n                if (n.type = g, !o && !n.isDefaultPrevented() && (!p._default || p._default.apply(h.pop(), r) === !1) && x.acceptData(i) && l && i[g] && !x.isWindow(i)) {\r\n                    f = i[l], f && (i[l] = null), x.event.triggered = g;\r\n                    try {\r\n                        i[g]()\r\n                    } catch (y) {}\r\n                    x.event.triggered = t, f && (i[l] = f)\r\n                }\r\n                return n.result\r\n            }\r\n        },\r\n        dispatch: function(e) {\r\n            e = x.event.fix(e);\r\n            var n, r, i, o, a, s = [],\r\n                l = g.call(arguments),\r\n                u = (x._data(this, \"events\") || {})[e.type] || [],\r\n                c = x.event.special[e.type] || {};\r\n            if (l[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {\r\n                s = x.event.handlers.call(this, e, u), n = 0;\r\n                while ((o = s[n++]) && !e.isPropagationStopped()) {\r\n                    e.currentTarget = o.elem, a = 0;\r\n                    while ((i = o.handlers[a++]) && !e.isImmediatePropagationStopped())(!e.namespace_re || e.namespace_re.test(i.namespace)) && (e.handleObj = i, e.data = i.data, r = ((x.event.special[i.origType] || {}).handle || i.handler).apply(o.elem, l), r !== t && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()))\r\n                }\r\n                return c.postDispatch && c.postDispatch.call(this, e), e.result\r\n            }\r\n        },\r\n        handlers: function(e, n) {\r\n            var r, i, o, a, s = [],\r\n                l = n.delegateCount,\r\n                u = e.target;\r\n            if (l && u.nodeType && (!e.button || \"click\" !== e.type))\r\n                for (; u != this; u = u.parentNode || this)\r\n                    if (1 === u.nodeType && (u.disabled !== !0 || \"click\" !== e.type)) {\r\n                        for (o = [], a = 0; l > a; a++) i = n[a], r = i.selector + \" \", o[r] === t && (o[r] = i.needsContext ? x(r, this).index(u) >= 0 : x.find(r, this, null, [u]).length), o[r] && o.push(i);\r\n                        o.length && s.push({\r\n                            elem: u,\r\n                            handlers: o\r\n                        })\r\n                    }\r\n            return n.length > l && s.push({\r\n                elem: this,\r\n                handlers: n.slice(l)\r\n            }), s\r\n        },\r\n        fix: function(e) {\r\n            if (e[x.expando]) return e;\r\n            var t, n, r, i = e.type,\r\n                o = e,\r\n                s = this.fixHooks[i];\r\n            s || (this.fixHooks[i] = s = tt.test(i) ? this.mouseHooks : et.test(i) ? this.keyHooks : {}), r = s.props ? this.props.concat(s.props) : this.props, e = new x.Event(o), t = r.length;\r\n            while (t--) n = r[t], e[n] = o[n];\r\n            return e.target || (e.target = o.srcElement || a), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, s.filter ? s.filter(e, o) : e\r\n        },\r\n        props: \"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),\r\n        fixHooks: {},\r\n        keyHooks: {\r\n            props: \"char charCode key keyCode\".split(\" \"),\r\n            filter: function(e, t) {\r\n                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e\r\n            }\r\n        },\r\n        mouseHooks: {\r\n            props: \"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),\r\n            filter: function(e, n) {\r\n                var r, i, o, s = n.button,\r\n                    l = n.fromElement;\r\n                return null == e.pageX && null != n.clientX && (i = e.target.ownerDocument || a, o = i.documentElement, r = i.body, e.pageX = n.clientX + (o && o.scrollLeft || r && r.scrollLeft || 0) - (o && o.clientLeft || r && r.clientLeft || 0), e.pageY = n.clientY + (o && o.scrollTop || r && r.scrollTop || 0) - (o && o.clientTop || r && r.clientTop || 0)), !e.relatedTarget && l && (e.relatedTarget = l === e.target ? n.toElement : l), e.which || s === t || (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e\r\n            }\r\n        },\r\n        special: {\r\n            load: {\r\n                noBubble: !0\r\n            },\r\n            focus: {\r\n                trigger: function() {\r\n                    if (this !== at() && this.focus) try {\r\n                        return this.focus(), !1\r\n                    } catch (e) {}\r\n                },\r\n                delegateType: \"focusin\"\r\n            },\r\n            blur: {\r\n                trigger: function() {\r\n                    return this === at() && this.blur ? (this.blur(), !1) : t\r\n                },\r\n                delegateType: \"focusout\"\r\n            },\r\n            click: {\r\n                trigger: function() {\r\n                    return x.nodeName(this, \"input\") && \"checkbox\" === this.type && this.click ? (this.click(), !1) : t\r\n                },\r\n                _default: function(e) {\r\n                    return x.nodeName(e.target, \"a\")\r\n                }\r\n            },\r\n            beforeunload: {\r\n                postDispatch: function(e) {\r\n                    e.result !== t && (e.originalEvent.returnValue = e.result)\r\n                }\r\n            }\r\n        },\r\n        simulate: function(e, t, n, r) {\r\n            var i = x.extend(new x.Event, n, {\r\n                type: e,\r\n                isSimulated: !0,\r\n                originalEvent: {}\r\n            });\r\n            r ? x.event.trigger(i, null, t) : x.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()\r\n        }\r\n    }, x.removeEvent = a.removeEventListener ? function(e, t, n) {\r\n        e.removeEventListener && e.removeEventListener(t, n, !1)\r\n    } : function(e, t, n) {\r\n        var r = \"on\" + t;\r\n        e.detachEvent && (typeof e[r] === i && (e[r] = null), e.detachEvent(r, n))\r\n    }, x.Event = function(e, n) {\r\n        return this instanceof x.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? it : ot) : this.type = e, n && x.extend(this, n), this.timeStamp = e && e.timeStamp || x.now(), this[x.expando] = !0, t) : new x.Event(e, n)\r\n    }, x.Event.prototype = {\r\n        isDefaultPrevented: ot,\r\n        isPropagationStopped: ot,\r\n        isImmediatePropagationStopped: ot,\r\n        preventDefault: function() {\r\n            var e = this.originalEvent;\r\n            this.isDefaultPrevented = it, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)\r\n        },\r\n        stopPropagation: function() {\r\n            var e = this.originalEvent;\r\n            this.isPropagationStopped = it, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)\r\n        },\r\n        stopImmediatePropagation: function() {\r\n            this.isImmediatePropagationStopped = it, this.stopPropagation()\r\n        }\r\n    }, x.each({\r\n        mouseenter: \"mouseover\",\r\n        mouseleave: \"mouseout\"\r\n    }, function(e, t) {\r\n        x.event.special[e] = {\r\n            delegateType: t,\r\n            bindType: t,\r\n            handle: function(e) {\r\n                var n, r = this,\r\n                    i = e.relatedTarget,\r\n                    o = e.handleObj;\r\n                return (!i || i !== r && !x.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n\r\n            }\r\n        }\r\n    }), x.support.submitBubbles || (x.event.special.submit = {\r\n        setup: function() {\r\n            return x.nodeName(this, \"form\") ? !1 : (x.event.add(this, \"click._submit keypress._submit\", function(e) {\r\n                var n = e.target,\r\n                    r = x.nodeName(n, \"input\") || x.nodeName(n, \"button\") ? n.form : t;\r\n                r && !x._data(r, \"submitBubbles\") && (x.event.add(r, \"submit._submit\", function(e) {\r\n                    e._submit_bubble = !0\r\n                }), x._data(r, \"submitBubbles\", !0))\r\n            }), t)\r\n        },\r\n        postDispatch: function(e) {\r\n            e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && x.event.simulate(\"submit\", this.parentNode, e, !0))\r\n        },\r\n        teardown: function() {\r\n            return x.nodeName(this, \"form\") ? !1 : (x.event.remove(this, \"._submit\"), t)\r\n        }\r\n    }), x.support.changeBubbles || (x.event.special.change = {\r\n        setup: function() {\r\n            return Z.test(this.nodeName) ? ((\"checkbox\" === this.type || \"radio\" === this.type) && (x.event.add(this, \"propertychange._change\", function(e) {\r\n                \"checked\" === e.originalEvent.propertyName && (this._just_changed = !0)\r\n            }), x.event.add(this, \"click._change\", function(e) {\r\n                this._just_changed && !e.isTrigger && (this._just_changed = !1), x.event.simulate(\"change\", this, e, !0)\r\n            })), !1) : (x.event.add(this, \"beforeactivate._change\", function(e) {\r\n                var t = e.target;\r\n                Z.test(t.nodeName) && !x._data(t, \"changeBubbles\") && (x.event.add(t, \"change._change\", function(e) {\r\n                    !this.parentNode || e.isSimulated || e.isTrigger || x.event.simulate(\"change\", this.parentNode, e, !0)\r\n                }), x._data(t, \"changeBubbles\", !0))\r\n            }), t)\r\n        },\r\n        handle: function(e) {\r\n            var n = e.target;\r\n            return this !== n || e.isSimulated || e.isTrigger || \"radio\" !== n.type && \"checkbox\" !== n.type ? e.handleObj.handler.apply(this, arguments) : t\r\n        },\r\n        teardown: function() {\r\n            return x.event.remove(this, \"._change\"), !Z.test(this.nodeName)\r\n        }\r\n    }), x.support.focusinBubbles || x.each({\r\n        focus: \"focusin\",\r\n        blur: \"focusout\"\r\n    }, function(e, t) {\r\n        var n = 0,\r\n            r = function(e) {\r\n                x.event.simulate(t, e.target, x.event.fix(e), !0)\r\n            };\r\n        x.event.special[t] = {\r\n            setup: function() {\r\n                0 === n++ && a.addEventListener(e, r, !0)\r\n            },\r\n            teardown: function() {\r\n                0 === --n && a.removeEventListener(e, r, !0)\r\n            }\r\n        }\r\n    }), x.fn.extend({\r\n        on: function(e, n, r, i, o) {\r\n            var a, s;\r\n            if (\"object\" == typeof e) {\r\n                \"string\" != typeof n && (r = r || n, n = t);\r\n                for (a in e) this.on(a, n, r, e[a], o);\r\n                return this\r\n            }\r\n            if (null == r && null == i ? (i = n, r = n = t) : null == i && (\"string\" == typeof n ? (i = r, r = t) : (i = r, r = n, n = t)), i === !1) i = ot;\r\n            else if (!i) return this;\r\n            return 1 === o && (s = i, i = function(e) {\r\n                return x().off(e), s.apply(this, arguments)\r\n            }, i.guid = s.guid || (s.guid = x.guid++)), this.each(function() {\r\n                x.event.add(this, e, i, r, n)\r\n            })\r\n        },\r\n        one: function(e, t, n, r) {\r\n            return this.on(e, t, n, r, 1)\r\n        },\r\n        off: function(e, n, r) {\r\n            var i, o;\r\n            if (e && e.preventDefault && e.handleObj) return i = e.handleObj, x(e.delegateTarget).off(i.namespace ? i.origType + \".\" + i.namespace : i.origType, i.selector, i.handler), this;\r\n            if (\"object\" == typeof e) {\r\n                for (o in e) this.off(o, n, e[o]);\r\n                return this\r\n            }\r\n            return (n === !1 || \"function\" == typeof n) && (r = n, n = t), r === !1 && (r = ot), this.each(function() {\r\n                x.event.remove(this, e, r, n)\r\n            })\r\n        },\r\n        trigger: function(e, t) {\r\n            return this.each(function() {\r\n                x.event.trigger(e, t, this)\r\n            })\r\n        },\r\n        triggerHandler: function(e, n) {\r\n            var r = this[0];\r\n            return r ? x.event.trigger(e, n, r, !0) : t\r\n        }\r\n    });\r\n    var st = /^.[^:#\\[\\.,]*$/,\r\n        lt = /^(?:parents|prev(?:Until|All))/,\r\n        ut = x.expr.match.needsContext,\r\n        ct = {\r\n            children: !0,\r\n            contents: !0,\r\n            next: !0,\r\n            prev: !0\r\n        };\r\n    x.fn.extend({\r\n        find: function(e) {\r\n            var t, n = [],\r\n                r = this,\r\n                i = r.length;\r\n            if (\"string\" != typeof e) return this.pushStack(x(e).filter(function() {\r\n                for (t = 0; i > t; t++)\r\n                    if (x.contains(r[t], this)) return !0\r\n            }));\r\n            for (t = 0; i > t; t++) x.find(e, r[t], n);\r\n            return n = this.pushStack(i > 1 ? x.unique(n) : n), n.selector = this.selector ? this.selector + \" \" + e : e, n\r\n        },\r\n        has: function(e) {\r\n            var t, n = x(e, this),\r\n                r = n.length;\r\n            return this.filter(function() {\r\n                for (t = 0; r > t; t++)\r\n                    if (x.contains(this, n[t])) return !0\r\n            })\r\n        },\r\n        not: function(e) {\r\n            return this.pushStack(ft(this, e || [], !0))\r\n        },\r\n        filter: function(e) {\r\n            return this.pushStack(ft(this, e || [], !1))\r\n        },\r\n        is: function(e) {\r\n            return !!ft(this, \"string\" == typeof e && ut.test(e) ? x(e) : e || [], !1).length\r\n        },\r\n        closest: function(e, t) {\r\n            var n, r = 0,\r\n                i = this.length,\r\n                o = [],\r\n                a = ut.test(e) || \"string\" != typeof e ? x(e, t || this.context) : 0;\r\n            for (; i > r; r++)\r\n                for (n = this[r]; n && n !== t; n = n.parentNode)\r\n                    if (11 > n.nodeType && (a ? a.index(n) > -1 : 1 === n.nodeType && x.find.matchesSelector(n, e))) {\r\n                        n = o.push(n);\r\n                        break\r\n                    }\r\n            return this.pushStack(o.length > 1 ? x.unique(o) : o)\r\n        },\r\n        index: function(e) {\r\n            return e ? \"string\" == typeof e ? x.inArray(this[0], x(e)) : x.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1\r\n        },\r\n        add: function(e, t) {\r\n            var n = \"string\" == typeof e ? x(e, t) : x.makeArray(e && e.nodeType ? [e] : e),\r\n                r = x.merge(this.get(), n);\r\n            return this.pushStack(x.unique(r))\r\n        },\r\n        addBack: function(e) {\r\n            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))\r\n        }\r\n    });\r\n\r\n    function pt(e, t) {\r\n        do e = e[t]; while (e && 1 !== e.nodeType);\r\n        return e\r\n    }\r\n    x.each({\r\n        parent: function(e) {\r\n            var t = e.parentNode;\r\n            return t && 11 !== t.nodeType ? t : null\r\n        },\r\n        parents: function(e) {\r\n            return x.dir(e, \"parentNode\")\r\n        },\r\n        parentsUntil: function(e, t, n) {\r\n            return x.dir(e, \"parentNode\", n)\r\n        },\r\n        next: function(e) {\r\n            return pt(e, \"nextSibling\")\r\n        },\r\n        prev: function(e) {\r\n            return pt(e, \"previousSibling\")\r\n        },\r\n        nextAll: function(e) {\r\n            return x.dir(e, \"nextSibling\")\r\n        },\r\n        prevAll: function(e) {\r\n            return x.dir(e, \"previousSibling\")\r\n        },\r\n        nextUntil: function(e, t, n) {\r\n            return x.dir(e, \"nextSibling\", n)\r\n        },\r\n        prevUntil: function(e, t, n) {\r\n            return x.dir(e, \"previousSibling\", n)\r\n        },\r\n        siblings: function(e) {\r\n            return x.sibling((e.parentNode || {}).firstChild, e)\r\n        },\r\n        children: function(e) {\r\n            return x.sibling(e.firstChild)\r\n        },\r\n        contents: function(e) {\r\n            return x.nodeName(e, \"iframe\") ? e.contentDocument || e.contentWindow.document : x.merge([], e.childNodes)\r\n        }\r\n    }, function(e, t) {\r\n        x.fn[e] = function(n, r) {\r\n            var i = x.map(this, t, n);\r\n            return \"Until\" !== e.slice(-5) && (r = n), r && \"string\" == typeof r && (i = x.filter(r, i)), this.length > 1 && (ct[e] || (i = x.unique(i)), lt.test(e) && (i = i.reverse())), this.pushStack(i)\r\n        }\r\n    }), x.extend({\r\n        filter: function(e, t, n) {\r\n            var r = t[0];\r\n            return n && (e = \":not(\" + e + \")\"), 1 === t.length && 1 === r.nodeType ? x.find.matchesSelector(r, e) ? [r] : [] : x.find.matches(e, x.grep(t, function(e) {\r\n                return 1 === e.nodeType\r\n            }))\r\n        },\r\n        dir: function(e, n, r) {\r\n            var i = [],\r\n                o = e[n];\r\n            while (o && 9 !== o.nodeType && (r === t || 1 !== o.nodeType || !x(o).is(r))) 1 === o.nodeType && i.push(o), o = o[n];\r\n            return i\r\n        },\r\n        sibling: function(e, t) {\r\n            var n = [];\r\n            for (; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);\r\n            return n\r\n        }\r\n    });\r\n\r\n    function ft(e, t, n) {\r\n        if (x.isFunction(t)) return x.grep(e, function(e, r) {\r\n            return !!t.call(e, r, e) !== n\r\n        });\r\n        if (t.nodeType) return x.grep(e, function(e) {\r\n            return e === t !== n\r\n        });\r\n        if (\"string\" == typeof t) {\r\n            if (st.test(t)) return x.filter(t, e, n);\r\n            t = x.filter(t, e)\r\n        }\r\n        return x.grep(e, function(e) {\r\n            return x.inArray(e, t) >= 0 !== n\r\n        })\r\n    }\r\n\r\n    function dt(e) {\r\n        var t = ht.split(\"|\"),\r\n            n = e.createDocumentFragment();\r\n        if (n.createElement)\r\n            while (t.length) n.createElement(t.pop());\r\n        return n\r\n    }\r\n    var ht = \"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",\r\n        gt = / jQuery\\d+=\"(?:null|\\d+)\"/g,\r\n        mt = RegExp(\"<(?:\" + ht + \")[\\\\s/>]\", \"i\"),\r\n        yt = /^\\s+/,\r\n        vt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,\r\n        bt = /<([\\w:]+)/,\r\n        xt = /<tbody/i,\r\n        wt = /<|&#?\\w+;/,\r\n        Tt = /<(?:script|style|link)/i,\r\n        Ct = /^(?:checkbox|radio)$/i,\r\n        Nt = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\r\n        kt = /^$|\\/(?:java|ecma)script/i,\r\n        Et = /^true\\/(.*)/,\r\n        St = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,\r\n        At = {\r\n            option: [1, \"<select multiple='multiple'>\", \"</select>\"],\r\n            legend: [1, \"<fieldset>\", \"</fieldset>\"],\r\n            area: [1, \"<map>\", \"</map>\"],\r\n            param: [1, \"<object>\", \"</object>\"],\r\n            thead: [1, \"<table>\", \"</table>\"],\r\n            tr: [2, \"<table><tbody>\", \"</tbody></table>\"],\r\n            col: [2, \"<table><tbody></tbody><colgroup>\", \"</colgroup></table>\"],\r\n            td: [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\r\n            _default: x.support.htmlSerialize ? [0, \"\", \"\"] : [1, \"X<div>\", \"</div>\"]\r\n        },\r\n        jt = dt(a),\r\n        Dt = jt.appendChild(a.createElement(\"div\"));\r\n    At.optgroup = At.option, At.tbody = At.tfoot = At.colgroup = At.caption = At.thead, At.th = At.td, x.fn.extend({\r\n        text: function(e) {\r\n            return x.access(this, function(e) {\r\n                return e === t ? x.text(this) : this.empty().append((this[0] && this[0].ownerDocument || a).createTextNode(e))\r\n            }, null, e, arguments.length)\r\n        },\r\n        append: function() {\r\n            return this.domManip(arguments, function(e) {\r\n                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {\r\n                    var t = Lt(this, e);\r\n                    t.appendChild(e)\r\n                }\r\n            })\r\n        },\r\n        prepend: function() {\r\n            return this.domManip(arguments, function(e) {\r\n                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {\r\n                    var t = Lt(this, e);\r\n                    t.insertBefore(e, t.firstChild)\r\n                }\r\n            })\r\n        },\r\n        before: function() {\r\n            return this.domManip(arguments, function(e) {\r\n                this.parentNode && this.parentNode.insertBefore(e, this)\r\n            })\r\n        },\r\n        after: function() {\r\n            return this.domManip(arguments, function(e) {\r\n                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)\r\n            })\r\n        },\r\n        remove: function(e, t) {\r\n            var n, r = e ? x.filter(e, this) : this,\r\n                i = 0;\r\n            for (; null != (n = r[i]); i++) t || 1 !== n.nodeType || x.cleanData(Ft(n)), n.parentNode && (t && x.contains(n.ownerDocument, n) && _t(Ft(n, \"script\")), n.parentNode.removeChild(n));\r\n            return this\r\n        },\r\n        empty: function() {\r\n            var e, t = 0;\r\n            for (; null != (e = this[t]); t++) {\r\n                1 === e.nodeType && x.cleanData(Ft(e, !1));\r\n                while (e.firstChild) e.removeChild(e.firstChild);\r\n                e.options && x.nodeName(e, \"select\") && (e.options.length = 0)\r\n            }\r\n            return this\r\n        },\r\n        clone: function(e, t) {\r\n            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {\r\n                return x.clone(this, e, t)\r\n            })\r\n        },\r\n        html: function(e) {\r\n            return x.access(this, function(e) {\r\n                var n = this[0] || {},\r\n                    r = 0,\r\n                    i = this.length;\r\n                if (e === t) return 1 === n.nodeType ? n.innerHTML.replace(gt, \"\") : t;\r\n                if (!(\"string\" != typeof e || Tt.test(e) || !x.support.htmlSerialize && mt.test(e) || !x.support.leadingWhitespace && yt.test(e) || At[(bt.exec(e) || [\"\", \"\"])[1].toLowerCase()])) {\r\n                    e = e.replace(vt, \"<$1></$2>\");\r\n                    try {\r\n                        for (; i > r; r++) n = this[r] || {}, 1 === n.nodeType && (x.cleanData(Ft(n, !1)), n.innerHTML = e);\r\n                        n = 0\r\n                    } catch (o) {}\r\n                }\r\n                n && this.empty().append(e)\r\n            }, null, e, arguments.length)\r\n        },\r\n        replaceWith: function() {\r\n            var e = x.map(this, function(e) {\r\n                    return [e.nextSibling, e.parentNode]\r\n                }),\r\n                t = 0;\r\n            return this.domManip(arguments, function(n) {\r\n                var r = e[t++],\r\n                    i = e[t++];\r\n                i && (r && r.parentNode !== i && (r = this.nextSibling), x(this).remove(), i.insertBefore(n, r))\r\n            }, !0), t ? this : this.remove()\r\n        },\r\n        detach: function(e) {\r\n            return this.remove(e, !0)\r\n        },\r\n        domManip: function(e, t, n) {\r\n            e = d.apply([], e);\r\n            var r, i, o, a, s, l, u = 0,\r\n                c = this.length,\r\n                p = this,\r\n                f = c - 1,\r\n                h = e[0],\r\n                g = x.isFunction(h);\r\n            if (g || !(1 >= c || \"string\" != typeof h || x.support.checkClone) && Nt.test(h)) return this.each(function(r) {\r\n                var i = p.eq(r);\r\n                g && (e[0] = h.call(this, r, i.html())), i.domManip(e, t, n)\r\n            });\r\n            if (c && (l = x.buildFragment(e, this[0].ownerDocument, !1, !n && this), r = l.firstChild, 1 === l.childNodes.length && (l = r), r)) {\r\n                for (a = x.map(Ft(l, \"script\"), Ht), o = a.length; c > u; u++) i = l, u !== f && (i = x.clone(i, !0, !0), o && x.merge(a, Ft(i, \"script\"))), t.call(this[u], i, u);\r\n                if (o)\r\n                    for (s = a[a.length - 1].ownerDocument, x.map(a, qt), u = 0; o > u; u++) i = a[u], kt.test(i.type || \"\") && !x._data(i, \"globalEval\") && x.contains(s, i) && (i.src ? x._evalUrl(i.src) : x.globalEval((i.text || i.textContent || i.innerHTML || \"\").replace(St, \"\")));\r\n                l = r = null\r\n            }\r\n            return this\r\n        }\r\n    });\r\n\r\n    function Lt(e, t) {\r\n        return x.nodeName(e, \"table\") && x.nodeName(1 === t.nodeType ? t : t.firstChild, \"tr\") ? e.getElementsByTagName(\"tbody\")[0] || e.appendChild(e.ownerDocument.createElement(\"tbody\")) : e\r\n    }\r\n\r\n    function Ht(e) {\r\n        return e.type = (null !== x.find.attr(e, \"type\")) + \"/\" + e.type, e\r\n    }\r\n\r\n    function qt(e) {\r\n        var t = Et.exec(e.type);\r\n        return t ? e.type = t[1] : e.removeAttribute(\"type\"), e\r\n    }\r\n\r\n    function _t(e, t) {\r\n        var n, r = 0;\r\n        for (; null != (n = e[r]); r++) x._data(n, \"globalEval\", !t || x._data(t[r], \"globalEval\"))\r\n    }\r\n\r\n    function Mt(e, t) {\r\n        if (1 === t.nodeType && x.hasData(e)) {\r\n            var n, r, i, o = x._data(e),\r\n                a = x._data(t, o),\r\n                s = o.events;\r\n            if (s) {\r\n                delete a.handle, a.events = {};\r\n                for (n in s)\r\n                    for (r = 0, i = s[n].length; i > r; r++) x.event.add(t, n, s[n][r])\r\n            }\r\n            a.data && (a.data = x.extend({}, a.data))\r\n        }\r\n    }\r\n\r\n    function Ot(e, t) {\r\n        var n, r, i;\r\n        if (1 === t.nodeType) {\r\n            if (n = t.nodeName.toLowerCase(), !x.support.noCloneEvent && t[x.expando]) {\r\n                i = x._data(t);\r\n                for (r in i.events) x.removeEvent(t, r, i.handle);\r\n                t.removeAttribute(x.expando)\r\n            }\r\n            \"script\" === n && t.text !== e.text ? (Ht(t).text = e.text, qt(t)) : \"object\" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), x.support.html5Clone && e.innerHTML && !x.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : \"input\" === n && Ct.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : \"option\" === n ? t.defaultSelected = t.selected = e.defaultSelected : (\"input\" === n || \"textarea\" === n) && (t.defaultValue = e.defaultValue)\r\n        }\r\n    }\r\n    x.each({\r\n        appendTo: \"append\",\r\n        prependTo: \"prepend\",\r\n        insertBefore: \"before\",\r\n        insertAfter: \"after\",\r\n        replaceAll: \"replaceWith\"\r\n    }, function(e, t) {\r\n        x.fn[e] = function(e) {\r\n            var n, r = 0,\r\n                i = [],\r\n                o = x(e),\r\n                a = o.length - 1;\r\n            for (; a >= r; r++) n = r === a ? this : this.clone(!0), x(o[r])[t](n), h.apply(i, n.get());\r\n            return this.pushStack(i)\r\n        }\r\n    });\r\n\r\n    function Ft(e, n) {\r\n        var r, o, a = 0,\r\n            s = typeof e.getElementsByTagName !== i ? e.getElementsByTagName(n || \"*\") : typeof e.querySelectorAll !== i ? e.querySelectorAll(n || \"*\") : t;\r\n        if (!s)\r\n            for (s = [], r = e.childNodes || e; null != (o = r[a]); a++)!n || x.nodeName(o, n) ? s.push(o) : x.merge(s, Ft(o, n));\r\n        return n === t || n && x.nodeName(e, n) ? x.merge([e], s) : s\r\n    }\r\n\r\n    function Bt(e) {\r\n        Ct.test(e.type) && (e.defaultChecked = e.checked)\r\n    }\r\n    x.extend({\r\n        clone: function(e, t, n) {\r\n            var r, i, o, a, s, l = x.contains(e.ownerDocument, e);\r\n            if (x.support.html5Clone || x.isXMLDoc(e) || !mt.test(\"<\" + e.nodeName + \">\") ? o = e.cloneNode(!0) : (Dt.innerHTML = e.outerHTML, Dt.removeChild(o = Dt.firstChild)), !(x.support.noCloneEvent && x.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || x.isXMLDoc(e)))\r\n                for (r = Ft(o), s = Ft(e), a = 0; null != (i = s[a]); ++a) r[a] && Ot(i, r[a]);\r\n            if (t)\r\n                if (n)\r\n                    for (s = s || Ft(e), r = r || Ft(o), a = 0; null != (i = s[a]); a++) Mt(i, r[a]);\r\n                else Mt(e, o);\r\n            return r = Ft(o, \"script\"), r.length > 0 && _t(r, !l && Ft(e, \"script\")), r = s = i = null, o\r\n        },\r\n        buildFragment: function(e, t, n, r) {\r\n            var i, o, a, s, l, u, c, p = e.length,\r\n                f = dt(t),\r\n                d = [],\r\n                h = 0;\r\n            for (; p > h; h++)\r\n                if (o = e[h], o || 0 === o)\r\n                    if (\"object\" === x.type(o)) x.merge(d, o.nodeType ? [o] : o);\r\n                    else if (wt.test(o)) {\r\n                s = s || f.appendChild(t.createElement(\"div\")), l = (bt.exec(o) || [\"\", \"\"])[1].toLowerCase(), c = At[l] || At._default, s.innerHTML = c[1] + o.replace(vt, \"<$1></$2>\") + c[2], i = c[0];\r\n                while (i--) s = s.lastChild;\r\n                if (!x.support.leadingWhitespace && yt.test(o) && d.push(t.createTextNode(yt.exec(o)[0])), !x.support.tbody) {\r\n                    o = \"table\" !== l || xt.test(o) ? \"<table>\" !== c[1] || xt.test(o) ? 0 : s : s.firstChild, i = o && o.childNodes.length;\r\n                    while (i--) x.nodeName(u = o.childNodes[i], \"tbody\") && !u.childNodes.length && o.removeChild(u)\r\n                }\r\n                x.merge(d, s.childNodes), s.textContent = \"\";\r\n                while (s.firstChild) s.removeChild(s.firstChild);\r\n                s = f.lastChild\r\n            } else d.push(t.createTextNode(o));\r\n            s && f.removeChild(s), x.support.appendChecked || x.grep(Ft(d, \"input\"), Bt), h = 0;\r\n            while (o = d[h++])\r\n                if ((!r || -1 === x.inArray(o, r)) && (a = x.contains(o.ownerDocument, o), s = Ft(f.appendChild(o), \"script\"), a && _t(s), n)) {\r\n                    i = 0;\r\n                    while (o = s[i++]) kt.test(o.type || \"\") && n.push(o)\r\n                }\r\n            return s = null, f\r\n        },\r\n        cleanData: function(e, t) {\r\n            var n, r, o, a, s = 0,\r\n                l = x.expando,\r\n                u = x.cache,\r\n                c = x.support.deleteExpando,\r\n                f = x.event.special;\r\n            for (; null != (n = e[s]); s++)\r\n                if ((t || x.acceptData(n)) && (o = n[l], a = o && u[o])) {\r\n                    if (a.events)\r\n                        for (r in a.events) f[r] ? x.event.remove(n, r) : x.removeEvent(n, r, a.handle);\r\n                    u[o] && (delete u[o], c ? delete n[l] : typeof n.removeAttribute !== i ? n.removeAttribute(l) : n[l] = null, p.push(o))\r\n                }\r\n        },\r\n        _evalUrl: function(e) {\r\n            return x.ajax({\r\n                url: e,\r\n                type: \"GET\",\r\n                dataType: \"script\",\r\n                async: !1,\r\n                global: !1,\r\n                \"throws\": !0\r\n            })\r\n        }\r\n    }), x.fn.extend({\r\n        wrapAll: function(e) {\r\n            if (x.isFunction(e)) return this.each(function(t) {\r\n                x(this).wrapAll(e.call(this, t))\r\n            });\r\n            if (this[0]) {\r\n                var t = x(e, this[0].ownerDocument).eq(0).clone(!0);\r\n                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {\r\n                    var e = this;\r\n                    while (e.firstChild && 1 === e.firstChild.nodeType) e = e.firstChild;\r\n                    return e\r\n                }).append(this)\r\n            }\r\n            return this\r\n        },\r\n        wrapInner: function(e) {\r\n            return x.isFunction(e) ? this.each(function(t) {\r\n                x(this).wrapInner(e.call(this, t))\r\n            }) : this.each(function() {\r\n                var t = x(this),\r\n                    n = t.contents();\r\n                n.length ? n.wrapAll(e) : t.append(e)\r\n            })\r\n        },\r\n        wrap: function(e) {\r\n            var t = x.isFunction(e);\r\n            return this.each(function(n) {\r\n                x(this).wrapAll(t ? e.call(this, n) : e)\r\n            })\r\n        },\r\n        unwrap: function() {\r\n            return this.parent().each(function() {\r\n                x.nodeName(this, \"body\") || x(this).replaceWith(this.childNodes)\r\n            }).end()\r\n        }\r\n    });\r\n    var Pt, Rt, Wt, $t = /alpha\\([^)]*\\)/i,\r\n        It = /opacity\\s*=\\s*([^)]*)/,\r\n        zt = /^(top|right|bottom|left)$/,\r\n        Xt = /^(none|table(?!-c[ea]).+)/,\r\n        Ut = /^margin/,\r\n        Vt = RegExp(\"^(\" + w + \")(.*)$\", \"i\"),\r\n        Yt = RegExp(\"^(\" + w + \")(?!px)[a-z%]+$\", \"i\"),\r\n        Jt = RegExp(\"^([+-])=(\" + w + \")\", \"i\"),\r\n        Gt = {\r\n            BODY: \"block\"\r\n        },\r\n        Qt = {\r\n            position: \"absolute\",\r\n            visibility: \"hidden\",\r\n            display: \"block\"\r\n        },\r\n        Kt = {\r\n            letterSpacing: 0,\r\n            fontWeight: 400\r\n        },\r\n        Zt = [\"Top\", \"Right\", \"Bottom\", \"Left\"],\r\n        en = [\"Webkit\", \"O\", \"Moz\", \"ms\"];\r\n\r\n    function tn(e, t) {\r\n        if (t in e) return t;\r\n        var n = t.charAt(0).toUpperCase() + t.slice(1),\r\n            r = t,\r\n            i = en.length;\r\n        while (i--)\r\n            if (t = en[i] + n, t in e) return t;\r\n        return r\r\n    }\r\n\r\n    function nn(e, t) {\r\n        return e = t || e, \"none\" === x.css(e, \"display\") || !x.contains(e.ownerDocument, e)\r\n    }\r\n\r\n    function rn(e, t) {\r\n        var n, r, i, o = [],\r\n            a = 0,\r\n            s = e.length;\r\n        for (; s > a; a++) r = e[a], r.style && (o[a] = x._data(r, \"olddisplay\"), n = r.style.display, t ? (o[a] || \"none\" !== n || (r.style.display = \"\"), \"\" === r.style.display && nn(r) && (o[a] = x._data(r, \"olddisplay\", ln(r.nodeName)))) : o[a] || (i = nn(r), (n && \"none\" !== n || !i) && x._data(r, \"olddisplay\", i ? n : x.css(r, \"display\"))));\r\n        for (a = 0; s > a; a++) r = e[a], r.style && (t && \"none\" !== r.style.display && \"\" !== r.style.display || (r.style.display = t ? o[a] || \"\" : \"none\"));\r\n        return e\r\n    }\r\n    x.fn.extend({\r\n        css: function(e, n) {\r\n            return x.access(this, function(e, n, r) {\r\n                var i, o, a = {},\r\n                    s = 0;\r\n                if (x.isArray(n)) {\r\n                    for (o = Rt(e), i = n.length; i > s; s++) a[n[s]] = x.css(e, n[s], !1, o);\r\n                    return a\r\n                }\r\n                return r !== t ? x.style(e, n, r) : x.css(e, n)\r\n            }, e, n, arguments.length > 1)\r\n        },\r\n        show: function() {\r\n            return rn(this, !0)\r\n        },\r\n        hide: function() {\r\n            return rn(this)\r\n        },\r\n        toggle: function(e) {\r\n            var t = \"boolean\" == typeof e;\r\n            return this.each(function() {\r\n                (t ? e : nn(this)) ? x(this).show() : x(this).hide()\r\n            })\r\n        }\r\n    }), x.extend({\r\n        cssHooks: {\r\n            opacity: {\r\n                get: function(e, t) {\r\n                    if (t) {\r\n                        var n = Wt(e, \"opacity\");\r\n                        return \"\" === n ? \"1\" : n\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        cssNumber: {\r\n            columnCount: !0,\r\n            fillOpacity: !0,\r\n            fontWeight: !0,\r\n            lineHeight: !0,\r\n            opacity: !0,\r\n            orphans: !0,\r\n            widows: !0,\r\n            zIndex: !0,\r\n            zoom: !0\r\n        },\r\n        cssProps: {\r\n            \"float\": x.support.cssFloat ? \"cssFloat\" : \"styleFloat\"\r\n        },\r\n        style: function(e, n, r, i) {\r\n            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {\r\n                var o, a, s, l = x.camelCase(n),\r\n                    u = e.style;\r\n                if (n = x.cssProps[l] || (x.cssProps[l] = tn(u, l)), s = x.cssHooks[n] || x.cssHooks[l], r === t) return s && \"get\" in s && (o = s.get(e, !1, i)) !== t ? o : u[n];\r\n                if (a = typeof r, \"string\" === a && (o = Jt.exec(r)) && (r = (o[1] + 1) * o[2] + parseFloat(x.css(e, n)), a = \"number\"), !(null == r || \"number\" === a && isNaN(r) || (\"number\" !== a || x.cssNumber[l] || (r += \"px\"), x.support.clearCloneStyle || \"\" !== r || 0 !== n.indexOf(\"background\") || (u[n] = \"inherit\"), s && \"set\" in s && (r = s.set(e, r, i)) === t))) try {\r\n                    u[n] = r\r\n                } catch (c) {}\r\n            }\r\n        },\r\n        css: function(e, n, r, i) {\r\n            var o, a, s, l = x.camelCase(n);\r\n            return n = x.cssProps[l] || (x.cssProps[l] = tn(e.style, l)), s = x.cssHooks[n] || x.cssHooks[l], s && \"get\" in s && (a = s.get(e, !0, r)), a === t && (a = Wt(e, n, i)), \"normal\" === a && n in Kt && (a = Kt[n]), \"\" === r || r ? (o = parseFloat(a), r === !0 || x.isNumeric(o) ? o || 0 : a) : a\r\n        }\r\n    }), e.getComputedStyle ? (Rt = function(t) {\r\n        return e.getComputedStyle(t, null)\r\n    }, Wt = function(e, n, r) {\r\n        var i, o, a, s = r || Rt(e),\r\n            l = s ? s.getPropertyValue(n) || s[n] : t,\r\n            u = e.style;\r\n        return s && (\"\" !== l || x.contains(e.ownerDocument, e) || (l = x.style(e, n)), Yt.test(l) && Ut.test(n) && (i = u.width, o = u.minWidth, a = u.maxWidth, u.minWidth = u.maxWidth = u.width = l, l = s.width, u.width = i, u.minWidth = o, u.maxWidth = a)), l\r\n    }) : a.documentElement.currentStyle && (Rt = function(e) {\r\n        return e.currentStyle\r\n    }, Wt = function(e, n, r) {\r\n        var i, o, a, s = r || Rt(e),\r\n            l = s ? s[n] : t,\r\n            u = e.style;\r\n        return null == l && u && u[n] && (l = u[n]), Yt.test(l) && !zt.test(n) && (i = u.left, o = e.runtimeStyle, a = o && o.left, a && (o.left = e.currentStyle.left), u.left = \"fontSize\" === n ? \"1em\" : l, l = u.pixelLeft + \"px\", u.left = i, a && (o.left = a)), \"\" === l ? \"auto\" : l\r\n    });\r\n\r\n    function on(e, t, n) {\r\n        var r = Vt.exec(t);\r\n        return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || \"px\") : t\r\n    }\r\n\r\n    function an(e, t, n, r, i) {\r\n        var o = n === (r ? \"border\" : \"content\") ? 4 : \"width\" === t ? 1 : 0,\r\n            a = 0;\r\n        for (; 4 > o; o += 2) \"margin\" === n && (a += x.css(e, n + Zt[o], !0, i)), r ? (\"content\" === n && (a -= x.css(e, \"padding\" + Zt[o], !0, i)), \"margin\" !== n && (a -= x.css(e, \"border\" + Zt[o] + \"Width\", !0, i))) : (a += x.css(e, \"padding\" + Zt[o], !0, i), \"padding\" !== n && (a += x.css(e, \"border\" + Zt[o] + \"Width\", !0, i)));\r\n        return a\r\n    }\r\n\r\n    function sn(e, t, n) {\r\n        var r = !0,\r\n            i = \"width\" === t ? e.offsetWidth : e.offsetHeight,\r\n            o = Rt(e),\r\n            a = x.support.boxSizing && \"border-box\" === x.css(e, \"boxSizing\", !1, o);\r\n        if (0 >= i || null == i) {\r\n            if (i = Wt(e, t, o), (0 > i || null == i) && (i = e.style[t]), Yt.test(i)) return i;\r\n            r = a && (x.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0\r\n        }\r\n        return i + an(e, t, n || (a ? \"border\" : \"content\"), r, o) + \"px\"\r\n    }\r\n\r\n    function ln(e) {\r\n        var t = a,\r\n            n = Gt[e];\r\n        return n || (n = un(e, t), \"none\" !== n && n || (Pt = (Pt || x(\"<iframe frameborder='0' width='0' height='0'/>\").css(\"cssText\", \"display:block !important\")).appendTo(t.documentElement), t = (Pt[0].contentWindow || Pt[0].contentDocument).document, t.write(\"<!doctype html><html><body>\"), t.close(), n = un(e, t), Pt.detach()), Gt[e] = n), n\r\n    }\r\n\r\n    function un(e, t) {\r\n        var n = x(t.createElement(e)).appendTo(t.body),\r\n            r = x.css(n[0], \"display\");\r\n        return n.remove(), r\r\n    }\r\n    x.each([\"height\", \"width\"], function(e, n) {\r\n        x.cssHooks[n] = {\r\n            get: function(e, r, i) {\r\n                return r ? 0 === e.offsetWidth && Xt.test(x.css(e, \"display\")) ? x.swap(e, Qt, function() {\r\n                    return sn(e, n, i)\r\n                }) : sn(e, n, i) : t\r\n            },\r\n            set: function(e, t, r) {\r\n                var i = r && Rt(e);\r\n                return on(e, t, r ? an(e, n, r, x.support.boxSizing && \"border-box\" === x.css(e, \"boxSizing\", !1, i), i) : 0)\r\n            }\r\n        }\r\n    }), x.support.opacity || (x.cssHooks.opacity = {\r\n        get: function(e, t) {\r\n            return It.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || \"\") ? .01 * parseFloat(RegExp.$1) + \"\" : t ? \"1\" : \"\"\r\n        },\r\n        set: function(e, t) {\r\n            var n = e.style,\r\n                r = e.currentStyle,\r\n                i = x.isNumeric(t) ? \"alpha(opacity=\" + 100 * t + \")\" : \"\",\r\n                o = r && r.filter || n.filter || \"\";\r\n            n.zoom = 1, (t >= 1 || \"\" === t) && \"\" === x.trim(o.replace($t, \"\")) && n.removeAttribute && (n.removeAttribute(\"filter\"), \"\" === t || r && !r.filter) || (n.filter = $t.test(o) ? o.replace($t, i) : o + \" \" + i)\r\n        }\r\n    }), x(function() {\r\n        x.support.reliableMarginRight || (x.cssHooks.marginRight = {\r\n            get: function(e, n) {\r\n                return n ? x.swap(e, {\r\n                    display: \"inline-block\"\r\n                }, Wt, [e, \"marginRight\"]) : t\r\n            }\r\n        }), !x.support.pixelPosition && x.fn.position && x.each([\"top\", \"left\"], function(e, n) {\r\n            x.cssHooks[n] = {\r\n                get: function(e, r) {\r\n                    return r ? (r = Wt(e, n), Yt.test(r) ? x(e).position()[n] + \"px\" : r) : t\r\n                }\r\n            }\r\n        })\r\n    }), x.expr && x.expr.filters && (x.expr.filters.hidden = function(e) {\r\n        return 0 >= e.offsetWidth && 0 >= e.offsetHeight || !x.support.reliableHiddenOffsets && \"none\" === (e.style && e.style.display || x.css(e, \"display\"))\r\n    }, x.expr.filters.visible = function(e) {\r\n        return !x.expr.filters.hidden(e)\r\n    }), x.each({\r\n        margin: \"\",\r\n        padding: \"\",\r\n        border: \"Width\"\r\n    }, function(e, t) {\r\n        x.cssHooks[e + t] = {\r\n            expand: function(n) {\r\n                var r = 0,\r\n                    i = {},\r\n                    o = \"string\" == typeof n ? n.split(\" \") : [n];\r\n                for (; 4 > r; r++) i[e + Zt[r] + t] = o[r] || o[r - 2] || o[0];\r\n                return i\r\n            }\r\n        }, Ut.test(e) || (x.cssHooks[e + t].set = on)\r\n    });\r\n    var cn = /%20/g,\r\n        pn = /\\[\\]$/,\r\n        fn = /\\r?\\n/g,\r\n        dn = /^(?:submit|button|image|reset|file)$/i,\r\n        hn = /^(?:input|select|textarea|keygen)/i;\r\n    x.fn.extend({\r\n        serialize: function() {\r\n            return x.param(this.serializeArray())\r\n        },\r\n        serializeArray: function() {\r\n            return this.map(function() {\r\n                var e = x.prop(this, \"elements\");\r\n                return e ? x.makeArray(e) : this\r\n            }).filter(function() {\r\n                var e = this.type;\r\n                return this.name && !x(this).is(\":disabled\") && hn.test(this.nodeName) && !dn.test(e) && (this.checked || !Ct.test(e))\r\n            }).map(function(e, t) {\r\n                var n = x(this).val();\r\n                return null == n ? null : x.isArray(n) ? x.map(n, function(e) {\r\n                    return {\r\n                        name: t.name,\r\n                        value: e.replace(fn, \"\\r\\n\")\r\n                    }\r\n                }) : {\r\n                    name: t.name,\r\n                    value: n.replace(fn, \"\\r\\n\")\r\n                }\r\n            }).get()\r\n        }\r\n    }), x.param = function(e, n) {\r\n        var r, i = [],\r\n            o = function(e, t) {\r\n                t = x.isFunction(t) ? t() : null == t ? \"\" : t, i[i.length] = encodeURIComponent(e) + \"=\" + encodeURIComponent(t)\r\n            };\r\n        if (n === t && (n = x.ajaxSettings && x.ajaxSettings.traditional), x.isArray(e) || e.jquery && !x.isPlainObject(e)) x.each(e, function() {\r\n            o(this.name, this.value)\r\n        });\r\n        else\r\n            for (r in e) gn(r, e[r], n, o);\r\n        return i.join(\"&\").replace(cn, \"+\")\r\n    };\r\n\r\n    function gn(e, t, n, r) {\r\n        var i;\r\n        if (x.isArray(t)) x.each(t, function(t, i) {\r\n            n || pn.test(e) ? r(e, i) : gn(e + \"[\" + (\"object\" == typeof i ? t : \"\") + \"]\", i, n, r)\r\n        });\r\n        else if (n || \"object\" !== x.type(t)) r(e, t);\r\n        else\r\n            for (i in t) gn(e + \"[\" + i + \"]\", t[i], n, r)\r\n    }\r\n    x.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"), function(e, t) {\r\n        x.fn[t] = function(e, n) {\r\n            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)\r\n        }\r\n    }), x.fn.extend({\r\n        hover: function(e, t) {\r\n            return this.mouseenter(e).mouseleave(t || e)\r\n        },\r\n        bind: function(e, t, n) {\r\n            return this.on(e, null, t, n)\r\n        },\r\n        unbind: function(e, t) {\r\n            return this.off(e, null, t)\r\n        },\r\n        delegate: function(e, t, n, r) {\r\n            return this.on(t, e, n, r)\r\n        },\r\n        undelegate: function(e, t, n) {\r\n            return 1 === arguments.length ? this.off(e, \"**\") : this.off(t, e || \"**\", n)\r\n        }\r\n    });\r\n    var mn, yn, vn = x.now(),\r\n        bn = /\\?/,\r\n        xn = /#.*$/,\r\n        wn = /([?&])_=[^&]*/,\r\n        Tn = /^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,\r\n        Cn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\r\n        Nn = /^(?:GET|HEAD)$/,\r\n        kn = /^\\/\\//,\r\n        En = /^([\\w.+-]+:)(?:\\/\\/([^\\/?#:]*)(?::(\\d+)|)|)/,\r\n        Sn = x.fn.load,\r\n        An = {},\r\n        jn = {},\r\n        Dn = \"*/\".concat(\"*\");\r\n    try {\r\n        yn = o.href\r\n    } catch (Ln) {\r\n        yn = a.createElement(\"a\"), yn.href = \"\", yn = yn.href\r\n    }\r\n    mn = En.exec(yn.toLowerCase()) || [];\r\n\r\n    function Hn(e) {\r\n        return function(t, n) {\r\n            \"string\" != typeof t && (n = t, t = \"*\");\r\n            var r, i = 0,\r\n                o = t.toLowerCase().match(T) || [];\r\n            if (x.isFunction(n))\r\n                while (r = o[i++]) \"+\" === r[0] ? (r = r.slice(1) || \"*\", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)\r\n        }\r\n    }\r\n\r\n    function qn(e, n, r, i) {\r\n        var o = {},\r\n            a = e === jn;\r\n\r\n        function s(l) {\r\n            var u;\r\n            return o[l] = !0, x.each(e[l] || [], function(e, l) {\r\n                var c = l(n, r, i);\r\n                return \"string\" != typeof c || a || o[c] ? a ? !(u = c) : t : (n.dataTypes.unshift(c), s(c), !1)\r\n            }), u\r\n        }\r\n        return s(n.dataTypes[0]) || !o[\"*\"] && s(\"*\")\r\n    }\r\n\r\n    function _n(e, n) {\r\n        var r, i, o = x.ajaxSettings.flatOptions || {};\r\n        for (i in n) n[i] !== t && ((o[i] ? e : r || (r = {}))[i] = n[i]);\r\n        return r && x.extend(!0, e, r), e\r\n    }\r\n    x.fn.load = function(e, n, r) {\r\n        if (\"string\" != typeof e && Sn) return Sn.apply(this, arguments);\r\n        var i, o, a, s = this,\r\n            l = e.indexOf(\" \");\r\n        return l >= 0 && (i = e.slice(l, e.length), e = e.slice(0, l)), x.isFunction(n) ? (r = n, n = t) : n && \"object\" == typeof n && (a = \"POST\"), s.length > 0 && x.ajax({\r\n            url: e,\r\n            type: a,\r\n            dataType: \"html\",\r\n            data: n\r\n        }).done(function(e) {\r\n            o = arguments, s.html(i ? x(\"<div>\").append(x.parseHTML(e)).find(i) : e)\r\n        }).complete(r && function(e, t) {\r\n            s.each(r, o || [e.responseText, t, e])\r\n        }), this\r\n    }, x.each([\"ajaxStart\", \"ajaxStop\", \"ajaxComplete\", \"ajaxError\", \"ajaxSuccess\", \"ajaxSend\"], function(e, t) {\r\n        x.fn[t] = function(e) {\r\n            return this.on(t, e)\r\n        }\r\n    }), x.extend({\r\n        active: 0,\r\n        lastModified: {},\r\n        etag: {},\r\n        ajaxSettings: {\r\n            url: yn,\r\n            type: \"GET\",\r\n            isLocal: Cn.test(mn[1]),\r\n            global: !0,\r\n            processData: !0,\r\n            async: !0,\r\n            contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n            accepts: {\r\n                \"*\": Dn,\r\n                text: \"text/plain\",\r\n                html: \"text/html\",\r\n                xml: \"application/xml, text/xml\",\r\n                json: \"application/json, text/javascript\"\r\n            },\r\n            contents: {\r\n                xml: /xml/,\r\n                html: /html/,\r\n                json: /json/\r\n            },\r\n            responseFields: {\r\n                xml: \"responseXML\",\r\n                text: \"responseText\",\r\n                json: \"responseJSON\"\r\n            },\r\n            converters: {\r\n                \"* text\": String,\r\n                \"text html\": !0,\r\n                \"text json\": x.parseJSON,\r\n                \"text xml\": x.parseXML\r\n            },\r\n            flatOptions: {\r\n                url: !0,\r\n                context: !0\r\n            }\r\n        },\r\n        ajaxSetup: function(e, t) {\r\n            return t ? _n(_n(e, x.ajaxSettings), t) : _n(x.ajaxSettings, e)\r\n        },\r\n        ajaxPrefilter: Hn(An),\r\n        ajaxTransport: Hn(jn),\r\n        ajax: function(e, n) {\r\n            \"object\" == typeof e && (n = e, e = t), n = n || {};\r\n            var r, i, o, a, s, l, u, c, p = x.ajaxSetup({}, n),\r\n                f = p.context || p,\r\n                d = p.context && (f.nodeType || f.jquery) ? x(f) : x.event,\r\n                h = x.Deferred(),\r\n                g = x.Callbacks(\"once memory\"),\r\n                m = p.statusCode || {},\r\n                y = {},\r\n                v = {},\r\n                b = 0,\r\n                w = \"canceled\",\r\n                C = {\r\n                    readyState: 0,\r\n                    getResponseHeader: function(e) {\r\n                        var t;\r\n                        if (2 === b) {\r\n                            if (!c) {\r\n                                c = {};\r\n                                while (t = Tn.exec(a)) c[t[1].toLowerCase()] = t[2]\r\n                            }\r\n                            t = c[e.toLowerCase()]\r\n                        }\r\n                        return null == t ? null : t\r\n                    },\r\n                    getAllResponseHeaders: function() {\r\n                        return 2 === b ? a : null\r\n                    },\r\n                    setRequestHeader: function(e, t) {\r\n                        var n = e.toLowerCase();\r\n                        return b || (e = v[n] = v[n] || e, y[e] = t), this\r\n                    },\r\n                    overrideMimeType: function(e) {\r\n                        return b || (p.mimeType = e), this\r\n                    },\r\n                    statusCode: function(e) {\r\n                        var t;\r\n                        if (e)\r\n                            if (2 > b)\r\n                                for (t in e) m[t] = [m[t], e[t]];\r\n                            else C.always(e[C.status]);\r\n                        return this\r\n                    },\r\n                    abort: function(e) {\r\n                        var t = e || w;\r\n                        return u && u.abort(t), k(0, t), this\r\n                    }\r\n                };\r\n            if (h.promise(C).complete = g.add, C.success = C.done, C.error = C.fail, p.url = ((e || p.url || yn) + \"\").replace(xn, \"\").replace(kn, mn[1] + \"//\"), p.type = n.method || n.type || p.method || p.type, p.dataTypes = x.trim(p.dataType || \"*\").toLowerCase().match(T) || [\"\"], null == p.crossDomain && (r = En.exec(p.url.toLowerCase()), p.crossDomain = !(!r || r[1] === mn[1] && r[2] === mn[2] && (r[3] || (\"http:\" === r[1] ? \"80\" : \"443\")) === (mn[3] || (\"http:\" === mn[1] ? \"80\" : \"443\")))), p.data && p.processData && \"string\" != typeof p.data && (p.data = x.param(p.data, p.traditional)), qn(An, p, n, C), 2 === b) return C;\r\n            l = p.global, l && 0 === x.active++ && x.event.trigger(\"ajaxStart\"), p.type = p.type.toUpperCase(), p.hasContent = !Nn.test(p.type), o = p.url, p.hasContent || (p.data && (o = p.url += (bn.test(o) ? \"&\" : \"?\") + p.data, delete p.data), p.cache === !1 && (p.url = wn.test(o) ? o.replace(wn, \"$1_=\" + vn++) : o + (bn.test(o) ? \"&\" : \"?\") + \"_=\" + vn++)), p.ifModified && (x.lastModified[o] && C.setRequestHeader(\"If-Modified-Since\", x.lastModified[o]), x.etag[o] && C.setRequestHeader(\"If-None-Match\", x.etag[o])), (p.data && p.hasContent && p.contentType !== !1 || n.contentType) && C.setRequestHeader(\"Content-Type\", p.contentType), C.setRequestHeader(\"Accept\", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + (\"*\" !== p.dataTypes[0] ? \", \" + Dn + \"; q=0.01\" : \"\") : p.accepts[\"*\"]);\r\n            for (i in p.headers) C.setRequestHeader(i, p.headers[i]);\r\n            if (p.beforeSend && (p.beforeSend.call(f, C, p) === !1 || 2 === b)) return C.abort();\r\n            w = \"abort\";\r\n            for (i in {\r\n                success: 1,\r\n                error: 1,\r\n                complete: 1\r\n            }) C[i](p[i]);\r\n            if (u = qn(jn, p, n, C)) {\r\n                C.readyState = 1, l && d.trigger(\"ajaxSend\", [C, p]), p.async && p.timeout > 0 && (s = setTimeout(function() {\r\n                    C.abort(\"timeout\")\r\n                }, p.timeout));\r\n                try {\r\n                    b = 1, u.send(y, k)\r\n                } catch (N) {\r\n                    if (!(2 > b)) throw N;\r\n                    k(-1, N)\r\n                }\r\n            } else k(-1, \"No Transport\");\r\n\r\n            function k(e, n, r, i) {\r\n                var c, y, v, w, T, N = n;\r\n                2 !== b && (b = 2, s && clearTimeout(s), u = t, a = i || \"\", C.readyState = e > 0 ? 4 : 0, c = e >= 200 && 300 > e || 304 === e, r && (w = Mn(p, C, r)), w = On(p, w, C, c), c ? (p.ifModified && (T = C.getResponseHeader(\"Last-Modified\"), T && (x.lastModified[o] = T), T = C.getResponseHeader(\"etag\"), T && (x.etag[o] = T)), 204 === e || \"HEAD\" === p.type ? N = \"nocontent\" : 304 === e ? N = \"notmodified\" : (N = w.state, y = w.data, v = w.error, c = !v)) : (v = N, (e || !N) && (N = \"error\", 0 > e && (e = 0))), C.status = e, C.statusText = (n || N) + \"\", c ? h.resolveWith(f, [y, N, C]) : h.rejectWith(f, [C, N, v]), C.statusCode(m), m = t, l && d.trigger(c ? \"ajaxSuccess\" : \"ajaxError\", [C, p, c ? y : v]), g.fireWith(f, [C, N]), l && (d.trigger(\"ajaxComplete\", [C, p]), --x.active || x.event.trigger(\"ajaxStop\")))\r\n            }\r\n            return C\r\n        },\r\n        getJSON: function(e, t, n) {\r\n            return x.get(e, t, n, \"json\")\r\n        },\r\n        getScript: function(e, n) {\r\n            return x.get(e, t, n, \"script\")\r\n        }\r\n    }), x.each([\"get\", \"post\"], function(e, n) {\r\n        x[n] = function(e, r, i, o) {\r\n            return x.isFunction(r) && (o = o || i, i = r, r = t), x.ajax({\r\n                url: e,\r\n                type: n,\r\n                dataType: o,\r\n                data: r,\r\n                success: i\r\n            })\r\n        }\r\n    });\r\n\r\n    function Mn(e, n, r) {\r\n        var i, o, a, s, l = e.contents,\r\n            u = e.dataTypes;\r\n        while (\"*\" === u[0]) u.shift(), o === t && (o = e.mimeType || n.getResponseHeader(\"Content-Type\"));\r\n        if (o)\r\n            for (s in l)\r\n                if (l[s] && l[s].test(o)) {\r\n                    u.unshift(s);\r\n                    break\r\n                }\r\n        if (u[0] in r) a = u[0];\r\n        else {\r\n            for (s in r) {\r\n                if (!u[0] || e.converters[s + \" \" + u[0]]) {\r\n                    a = s;\r\n                    break\r\n                }\r\n                i || (i = s)\r\n            }\r\n            a = a || i\r\n        }\r\n        return a ? (a !== u[0] && u.unshift(a), r[a]) : t\r\n    }\r\n\r\n    function On(e, t, n, r) {\r\n        var i, o, a, s, l, u = {},\r\n            c = e.dataTypes.slice();\r\n        if (c[1])\r\n            for (a in e.converters) u[a.toLowerCase()] = e.converters[a];\r\n        o = c.shift();\r\n        while (o)\r\n            if (e.responseFields[o] && (n[e.responseFields[o]] = t), !l && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = c.shift())\r\n                if (\"*\" === o) o = l;\r\n                else if (\"*\" !== l && l !== o) {\r\n            if (a = u[l + \" \" + o] || u[\"* \" + o], !a)\r\n                for (i in u)\r\n                    if (s = i.split(\" \"), s[1] === o && (a = u[l + \" \" + s[0]] || u[\"* \" + s[0]])) {\r\n                        a === !0 ? a = u[i] : u[i] !== !0 && (o = s[0], c.unshift(s[1]));\r\n                        break\r\n                    }\r\n            if (a !== !0)\r\n                if (a && e[\"throws\"]) t = a(t);\r\n                else try {\r\n                    t = a(t)\r\n                } catch (p) {\r\n                    return {\r\n                        state: \"parsererror\",\r\n                        error: a ? p : \"No conversion from \" + l + \" to \" + o\r\n                    }\r\n                }\r\n        }\r\n        return {\r\n            state: \"success\",\r\n            data: t\r\n        }\r\n    }\r\n    x.ajaxSetup({\r\n        accepts: {\r\n            script: \"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"\r\n        },\r\n        contents: {\r\n            script: /(?:java|ecma)script/\r\n        },\r\n        converters: {\r\n            \"text script\": function(e) {\r\n                return x.globalEval(e), e\r\n            }\r\n        }\r\n    }), x.ajaxPrefilter(\"script\", function(e) {\r\n        e.cache === t && (e.cache = !1), e.crossDomain && (e.type = \"GET\", e.global = !1)\r\n    }), x.ajaxTransport(\"script\", function(e) {\r\n        if (e.crossDomain) {\r\n            var n, r = a.head || x(\"head\")[0] || a.documentElement;\r\n            return {\r\n                send: function(t, i) {\r\n                    n = a.createElement(\"script\"), n.async = !0, e.scriptCharset && (n.charset = e.scriptCharset), n.src = e.url, n.onload = n.onreadystatechange = function(e, t) {\r\n                        (t || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, t || i(200, \"success\"))\r\n                    }, r.insertBefore(n, r.firstChild)\r\n                },\r\n                abort: function() {\r\n                    n && n.onload(t, !0)\r\n                }\r\n            }\r\n        }\r\n    });\r\n    var Fn = [],\r\n        Bn = /(=)\\?(?=&|$)|\\?\\?/;\r\n    x.ajaxSetup({\r\n        jsonp: \"callback\",\r\n        jsonpCallback: function() {\r\n            var e = Fn.pop() || x.expando + \"_\" + vn++;\r\n            return this[e] = !0, e\r\n        }\r\n    }), x.ajaxPrefilter(\"json jsonp\", function(n, r, i) {\r\n        var o, a, s, l = n.jsonp !== !1 && (Bn.test(n.url) ? \"url\" : \"string\" == typeof n.data && !(n.contentType || \"\").indexOf(\"application/x-www-form-urlencoded\") && Bn.test(n.data) && \"data\");\r\n        return l || \"jsonp\" === n.dataTypes[0] ? (o = n.jsonpCallback = x.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, l ? n[l] = n[l].replace(Bn, \"$1\" + o) : n.jsonp !== !1 && (n.url += (bn.test(n.url) ? \"&\" : \"?\") + n.jsonp + \"=\" + o), n.converters[\"script json\"] = function() {\r\n            return s || x.error(o + \" was not called\"), s[0]\r\n        }, n.dataTypes[0] = \"json\", a = e[o], e[o] = function() {\r\n            s = arguments\r\n        }, i.always(function() {\r\n            e[o] = a, n[o] && (n.jsonpCallback = r.jsonpCallback, Fn.push(o)), s && x.isFunction(a) && a(s[0]), s = a = t\r\n        }), \"script\") : t\r\n    });\r\n    var Pn, Rn, Wn = 0,\r\n        $n = e.ActiveXObject && function() {\r\n            var e;\r\n            for (e in Pn) Pn[e](t, !0)\r\n        };\r\n\r\n    function In() {\r\n        try {\r\n            return new e.XMLHttpRequest\r\n        } catch (t) {}\r\n    }\r\n\r\n    function zn() {\r\n        try {\r\n            return new e.ActiveXObject(\"Microsoft.XMLHTTP\")\r\n        } catch (t) {}\r\n    }\r\n    x.ajaxSettings.xhr = e.ActiveXObject ? function() {\r\n        return !this.isLocal && In() || zn()\r\n    } : In, Rn = x.ajaxSettings.xhr(), x.support.cors = !!Rn && \"withCredentials\" in Rn, Rn = x.support.ajax = !!Rn, Rn && x.ajaxTransport(function(n) {\r\n        if (!n.crossDomain || x.support.cors) {\r\n            var r;\r\n            return {\r\n                send: function(i, o) {\r\n                    var a, s, l = n.xhr();\r\n                    if (n.username ? l.open(n.type, n.url, n.async, n.username, n.password) : l.open(n.type, n.url, n.async), n.xhrFields)\r\n                        for (s in n.xhrFields) l[s] = n.xhrFields[s];\r\n                    n.mimeType && l.overrideMimeType && l.overrideMimeType(n.mimeType), n.crossDomain || i[\"X-Requested-With\"] || (i[\"X-Requested-With\"] = \"XMLHttpRequest\");\r\n                    try {\r\n                        for (s in i) l.setRequestHeader(s, i[s])\r\n                    } catch (u) {}\r\n                    l.send(n.hasContent && n.data || null), r = function(e, i) {\r\n                        var s, u, c, p;\r\n                        try {\r\n                            if (r && (i || 4 === l.readyState))\r\n                                if (r = t, a && (l.onreadystatechange = x.noop, $n && delete Pn[a]), i) 4 !== l.readyState && l.abort();\r\n                                else {\r\n                                    p = {}, s = l.status, u = l.getAllResponseHeaders(), \"string\" == typeof l.responseText && (p.text = l.responseText);\r\n                                    try {\r\n                                        c = l.statusText\r\n                                    } catch (f) {\r\n                                        c = \"\"\r\n                                    }\r\n                                    s || !n.isLocal || n.crossDomain ? 1223 === s && (s = 204) : s = p.text ? 200 : 404\r\n                                }\r\n                        } catch (d) {\r\n                            i || o(-1, d)\r\n                        }\r\n                        p && o(s, c, p, u)\r\n                    }, n.async ? 4 === l.readyState ? setTimeout(r) : (a = ++Wn, $n && (Pn || (Pn = {}, x(e).unload($n)), Pn[a] = r), l.onreadystatechange = r) : r()\r\n                },\r\n                abort: function() {\r\n                    r && r(t, !0)\r\n                }\r\n            }\r\n        }\r\n    });\r\n    var Xn, Un, Vn = /^(?:toggle|show|hide)$/,\r\n        Yn = RegExp(\"^(?:([+-])=|)(\" + w + \")([a-z%]*)$\", \"i\"),\r\n        Jn = /queueHooks$/,\r\n        Gn = [nr],\r\n        Qn = {\r\n            \"*\": [\r\n                function(e, t) {\r\n                    var n = this.createTween(e, t),\r\n                        r = n.cur(),\r\n                        i = Yn.exec(t),\r\n                        o = i && i[3] || (x.cssNumber[e] ? \"\" : \"px\"),\r\n                        a = (x.cssNumber[e] || \"px\" !== o && +r) && Yn.exec(x.css(n.elem, e)),\r\n                        s = 1,\r\n                        l = 20;\r\n                    if (a && a[3] !== o) {\r\n                        o = o || a[3], i = i || [], a = +r || 1;\r\n                        do s = s || \".5\", a /= s, x.style(n.elem, e, a + o); while (s !== (s = n.cur() / r) && 1 !== s && --l)\r\n                    }\r\n                    return i && (a = n.start = +a || +r || 0, n.unit = o, n.end = i[1] ? a + (i[1] + 1) * i[2] : +i[2]), n\r\n                }\r\n            ]\r\n        };\r\n\r\n    function Kn() {\r\n        return setTimeout(function() {\r\n            Xn = t\r\n        }), Xn = x.now()\r\n    }\r\n\r\n    function Zn(e, t, n) {\r\n        var r, i = (Qn[t] || []).concat(Qn[\"*\"]),\r\n            o = 0,\r\n            a = i.length;\r\n        for (; a > o; o++)\r\n            if (r = i[o].call(n, t, e)) return r\r\n    }\r\n\r\n    function er(e, t, n) {\r\n        var r, i, o = 0,\r\n            a = Gn.length,\r\n            s = x.Deferred().always(function() {\r\n                delete l.elem\r\n            }),\r\n            l = function() {\r\n                if (i) return !1;\r\n                var t = Xn || Kn(),\r\n                    n = Math.max(0, u.startTime + u.duration - t),\r\n                    r = n / u.duration || 0,\r\n                    o = 1 - r,\r\n                    a = 0,\r\n                    l = u.tweens.length;\r\n                for (; l > a; a++) u.tweens[a].run(o);\r\n                return s.notifyWith(e, [u, o, n]), 1 > o && l ? n : (s.resolveWith(e, [u]), !1)\r\n            },\r\n            u = s.promise({\r\n                elem: e,\r\n                props: x.extend({}, t),\r\n                opts: x.extend(!0, {\r\n                    specialEasing: {}\r\n                }, n),\r\n                originalProperties: t,\r\n                originalOptions: n,\r\n                startTime: Xn || Kn(),\r\n                duration: n.duration,\r\n                tweens: [],\r\n                createTween: function(t, n) {\r\n                    var r = x.Tween(e, u.opts, t, n, u.opts.specialEasing[t] || u.opts.easing);\r\n                    return u.tweens.push(r), r\r\n                },\r\n                stop: function(t) {\r\n                    var n = 0,\r\n                        r = t ? u.tweens.length : 0;\r\n                    if (i) return this;\r\n                    for (i = !0; r > n; n++) u.tweens[n].run(1);\r\n                    return t ? s.resolveWith(e, [u, t]) : s.rejectWith(e, [u, t]), this\r\n                }\r\n            }),\r\n            c = u.props;\r\n        for (tr(c, u.opts.specialEasing); a > o; o++)\r\n            if (r = Gn[o].call(u, e, c, u.opts)) return r;\r\n        return x.map(c, Zn, u), x.isFunction(u.opts.start) && u.opts.start.call(e, u), x.fx.timer(x.extend(l, {\r\n            elem: e,\r\n            anim: u,\r\n            queue: u.opts.queue\r\n        })), u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always)\r\n    }\r\n\r\n    function tr(e, t) {\r\n        var n, r, i, o, a;\r\n        for (n in e)\r\n            if (r = x.camelCase(n), i = t[r], o = e[n], x.isArray(o) && (i = o[1], o = e[n] = o[0]), n !== r && (e[r] = o, delete e[n]), a = x.cssHooks[r], a && \"expand\" in a) {\r\n                o = a.expand(o), delete e[r];\r\n                for (n in o) n in e || (e[n] = o[n], t[n] = i)\r\n            } else t[r] = i\r\n    }\r\n    x.Animation = x.extend(er, {\r\n        tweener: function(e, t) {\r\n            x.isFunction(e) ? (t = e, e = [\"*\"]) : e = e.split(\" \");\r\n            var n, r = 0,\r\n                i = e.length;\r\n            for (; i > r; r++) n = e[r], Qn[n] = Qn[n] || [], Qn[n].unshift(t)\r\n        },\r\n        prefilter: function(e, t) {\r\n            t ? Gn.unshift(e) : Gn.push(e)\r\n        }\r\n    });\r\n\r\n    function nr(e, t, n) {\r\n        var r, i, o, a, s, l, u = this,\r\n            c = {},\r\n            p = e.style,\r\n            f = e.nodeType && nn(e),\r\n            d = x._data(e, \"fxshow\");\r\n        n.queue || (s = x._queueHooks(e, \"fx\"), null == s.unqueued && (s.unqueued = 0, l = s.empty.fire, s.empty.fire = function() {\r\n            s.unqueued || l()\r\n        }), s.unqueued++, u.always(function() {\r\n            u.always(function() {\r\n                s.unqueued--, x.queue(e, \"fx\").length || s.empty.fire()\r\n            })\r\n        })), 1 === e.nodeType && (\"height\" in t || \"width\" in t) && (n.overflow = [p.overflow, p.overflowX, p.overflowY], \"inline\" === x.css(e, \"display\") && \"none\" === x.css(e, \"float\") && (x.support.inlineBlockNeedsLayout && \"inline\" !== ln(e.nodeName) ? p.zoom = 1 : p.display = \"inline-block\")), n.overflow && (p.overflow = \"hidden\", x.support.shrinkWrapBlocks || u.always(function() {\r\n            p.overflow = n.overflow[0], p.overflowX = n.overflow[1], p.overflowY = n.overflow[2]\r\n        }));\r\n        for (r in t)\r\n            if (i = t[r], Vn.exec(i)) {\r\n                if (delete t[r], o = o || \"toggle\" === i, i === (f ? \"hide\" : \"show\")) continue;\r\n                c[r] = d && d[r] || x.style(e, r)\r\n            }\r\n        if (!x.isEmptyObject(c)) {\r\n            d ? \"hidden\" in d && (f = d.hidden) : d = x._data(e, \"fxshow\", {}), o && (d.hidden = !f), f ? x(e).show() : u.done(function() {\r\n                x(e).hide()\r\n            }), u.done(function() {\r\n                var t;\r\n                x._removeData(e, \"fxshow\");\r\n                for (t in c) x.style(e, t, c[t])\r\n            });\r\n            for (r in c) a = Zn(f ? d[r] : 0, r, u), r in d || (d[r] = a.start, f && (a.end = a.start, a.start = \"width\" === r || \"height\" === r ? 1 : 0))\r\n        }\r\n    }\r\n\r\n    function rr(e, t, n, r, i) {\r\n        return new rr.prototype.init(e, t, n, r, i)\r\n    }\r\n    x.Tween = rr, rr.prototype = {\r\n        constructor: rr,\r\n        init: function(e, t, n, r, i, o) {\r\n            this.elem = e, this.prop = n, this.easing = i || \"swing\", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (x.cssNumber[n] ? \"\" : \"px\")\r\n        },\r\n        cur: function() {\r\n            var e = rr.propHooks[this.prop];\r\n            return e && e.get ? e.get(this) : rr.propHooks._default.get(this)\r\n        },\r\n        run: function(e) {\r\n            var t, n = rr.propHooks[this.prop];\r\n            return this.pos = t = this.options.duration ? x.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : rr.propHooks._default.set(this), this\r\n        }\r\n    }, rr.prototype.init.prototype = rr.prototype, rr.propHooks = {\r\n        _default: {\r\n            get: function(e) {\r\n                var t;\r\n                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = x.css(e.elem, e.prop, \"\"), t && \"auto\" !== t ? t : 0) : e.elem[e.prop]\r\n            },\r\n            set: function(e) {\r\n                x.fx.step[e.prop] ? x.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[x.cssProps[e.prop]] || x.cssHooks[e.prop]) ? x.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now\r\n            }\r\n        }\r\n    }, rr.propHooks.scrollTop = rr.propHooks.scrollLeft = {\r\n        set: function(e) {\r\n            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)\r\n        }\r\n    }, x.each([\"toggle\", \"show\", \"hide\"], function(e, t) {\r\n        var n = x.fn[t];\r\n        x.fn[t] = function(e, r, i) {\r\n            return null == e || \"boolean\" == typeof e ? n.apply(this, arguments) : this.animate(ir(t, !0), e, r, i)\r\n        }\r\n    }), x.fn.extend({\r\n        fadeTo: function(e, t, n, r) {\r\n            return this.filter(nn).css(\"opacity\", 0).show().end().animate({\r\n                opacity: t\r\n            }, e, n, r)\r\n        },\r\n        animate: function(e, t, n, r) {\r\n            var i = x.isEmptyObject(e),\r\n                o = x.speed(t, n, r),\r\n                a = function() {\r\n                    var t = er(this, x.extend({}, e), o);\r\n                    (i || x._data(this, \"finish\")) && t.stop(!0)\r\n                };\r\n            return a.finish = a, i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)\r\n        },\r\n        stop: function(e, n, r) {\r\n            var i = function(e) {\r\n                var t = e.stop;\r\n                delete e.stop, t(r)\r\n            };\r\n            return \"string\" != typeof e && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || \"fx\", []), this.each(function() {\r\n                var t = !0,\r\n                    n = null != e && e + \"queueHooks\",\r\n                    o = x.timers,\r\n                    a = x._data(this);\r\n                if (n) a[n] && a[n].stop && i(a[n]);\r\n                else\r\n                    for (n in a) a[n] && a[n].stop && Jn.test(n) && i(a[n]);\r\n                for (n = o.length; n--;) o[n].elem !== this || null != e && o[n].queue !== e || (o[n].anim.stop(r), t = !1, o.splice(n, 1));\r\n                (t || !r) && x.dequeue(this, e)\r\n            })\r\n        },\r\n        finish: function(e) {\r\n            return e !== !1 && (e = e || \"fx\"), this.each(function() {\r\n                var t, n = x._data(this),\r\n                    r = n[e + \"queue\"],\r\n                    i = n[e + \"queueHooks\"],\r\n                    o = x.timers,\r\n                    a = r ? r.length : 0;\r\n                for (n.finish = !0, x.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = o.length; t--;) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));\r\n                for (t = 0; a > t; t++) r[t] && r[t].finish && r[t].finish.call(this);\r\n                delete n.finish\r\n            })\r\n        }\r\n    });\r\n\r\n    function ir(e, t) {\r\n        var n, r = {\r\n                height: e\r\n            },\r\n            i = 0;\r\n        for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = Zt[i], r[\"margin\" + n] = r[\"padding\" + n] = e;\r\n        return t && (r.opacity = r.width = e), r\r\n    }\r\n    x.each({\r\n        slideDown: ir(\"show\"),\r\n        slideUp: ir(\"hide\"),\r\n        slideToggle: ir(\"toggle\"),\r\n        fadeIn: {\r\n            opacity: \"show\"\r\n        },\r\n        fadeOut: {\r\n            opacity: \"hide\"\r\n        },\r\n        fadeToggle: {\r\n            opacity: \"toggle\"\r\n        }\r\n    }, function(e, t) {\r\n        x.fn[e] = function(e, n, r) {\r\n            return this.animate(t, e, n, r)\r\n        }\r\n    }), x.speed = function(e, t, n) {\r\n        var r = e && \"object\" == typeof e ? x.extend({}, e) : {\r\n            complete: n || !n && t || x.isFunction(e) && e,\r\n            duration: e,\r\n            easing: n && t || t && !x.isFunction(t) && t\r\n        };\r\n        return r.duration = x.fx.off ? 0 : \"number\" == typeof r.duration ? r.duration : r.duration in x.fx.speeds ? x.fx.speeds[r.duration] : x.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = \"fx\"), r.old = r.complete, r.complete = function() {\r\n            x.isFunction(r.old) && r.old.call(this), r.queue && x.dequeue(this, r.queue)\r\n        }, r\r\n    }, x.easing = {\r\n        linear: function(e) {\r\n            return e\r\n        },\r\n        swing: function(e) {\r\n            return .5 - Math.cos(e * Math.PI) / 2\r\n        }\r\n    }, x.timers = [], x.fx = rr.prototype.init, x.fx.tick = function() {\r\n        var e, n = x.timers,\r\n            r = 0;\r\n        for (Xn = x.now(); n.length > r; r++) e = n[r], e() || n[r] !== e || n.splice(r--, 1);\r\n        n.length || x.fx.stop(), Xn = t\r\n    }, x.fx.timer = function(e) {\r\n        e() && x.timers.push(e) && x.fx.start()\r\n    }, x.fx.interval = 13, x.fx.start = function() {\r\n        Un || (Un = setInterval(x.fx.tick, x.fx.interval))\r\n    }, x.fx.stop = function() {\r\n        clearInterval(Un), Un = null\r\n    }, x.fx.speeds = {\r\n        slow: 600,\r\n        fast: 200,\r\n        _default: 400\r\n    }, x.fx.step = {}, x.expr && x.expr.filters && (x.expr.filters.animated = function(e) {\r\n        return x.grep(x.timers, function(t) {\r\n            return e === t.elem\r\n        }).length\r\n    }), x.fn.offset = function(e) {\r\n        if (arguments.length) return e === t ? this : this.each(function(t) {\r\n            x.offset.setOffset(this, e, t)\r\n        });\r\n        var n, r, o = {\r\n                top: 0,\r\n                left: 0\r\n            },\r\n            a = this[0],\r\n            s = a && a.ownerDocument;\r\n        if (s) return n = s.documentElement, x.contains(n, a) ? (typeof a.getBoundingClientRect !== i && (o = a.getBoundingClientRect()), r = or(s), {\r\n            top: o.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0),\r\n            left: o.left + (r.pageXOffset || n.scrollLeft) - (n.clientLeft || 0)\r\n        }) : o\r\n    }, x.offset = {\r\n        setOffset: function(e, t, n) {\r\n            var r = x.css(e, \"position\");\r\n            \"static\" === r && (e.style.position = \"relative\");\r\n            var i = x(e),\r\n                o = i.offset(),\r\n                a = x.css(e, \"top\"),\r\n                s = x.css(e, \"left\"),\r\n                l = (\"absolute\" === r || \"fixed\" === r) && x.inArray(\"auto\", [a, s]) > -1,\r\n                u = {},\r\n                c = {},\r\n                p, f;\r\n            l ? (c = i.position(), p = c.top, f = c.left) : (p = parseFloat(a) || 0, f = parseFloat(s) || 0), x.isFunction(t) && (t = t.call(e, n, o)), null != t.top && (u.top = t.top - o.top + p), null != t.left && (u.left = t.left - o.left + f), \"using\" in t ? t.using.call(e, u) : i.css(u)\r\n        }\r\n    }, x.fn.extend({\r\n        position: function() {\r\n            if (this[0]) {\r\n                var e, t, n = {\r\n                        top: 0,\r\n                        left: 0\r\n                    },\r\n                    r = this[0];\r\n                return \"fixed\" === x.css(r, \"position\") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), x.nodeName(e[0], \"html\") || (n = e.offset()), n.top += x.css(e[0], \"borderTopWidth\", !0), n.left += x.css(e[0], \"borderLeftWidth\", !0)), {\r\n                    top: t.top - n.top - x.css(r, \"marginTop\", !0),\r\n                    left: t.left - n.left - x.css(r, \"marginLeft\", !0)\r\n                }\r\n            }\r\n        },\r\n        offsetParent: function() {\r\n            return this.map(function() {\r\n                var e = this.offsetParent || s;\r\n                while (e && !x.nodeName(e, \"html\") && \"static\" === x.css(e, \"position\")) e = e.offsetParent;\r\n                return e || s\r\n            })\r\n        }\r\n    }), x.each({\r\n        scrollLeft: \"pageXOffset\",\r\n        scrollTop: \"pageYOffset\"\r\n    }, function(e, n) {\r\n        var r = /Y/.test(n);\r\n        x.fn[e] = function(i) {\r\n            return x.access(this, function(e, i, o) {\r\n                var a = or(e);\r\n                return o === t ? a ? n in a ? a[n] : a.document.documentElement[i] : e[i] : (a ? a.scrollTo(r ? x(a).scrollLeft() : o, r ? o : x(a).scrollTop()) : e[i] = o, t)\r\n            }, e, i, arguments.length, null)\r\n        }\r\n    });\r\n\r\n    function or(e) {\r\n        return x.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1\r\n    }\r\n    x.each({\r\n        Height: \"height\",\r\n        Width: \"width\"\r\n    }, function(e, n) {\r\n        x.each({\r\n            padding: \"inner\" + e,\r\n            content: n,\r\n            \"\": \"outer\" + e\r\n        }, function(r, i) {\r\n            x.fn[i] = function(i, o) {\r\n                var a = arguments.length && (r || \"boolean\" != typeof i),\r\n                    s = r || (i === !0 || o === !0 ? \"margin\" : \"border\");\r\n                return x.access(this, function(n, r, i) {\r\n                    var o;\r\n                    return x.isWindow(n) ? n.document.documentElement[\"client\" + e] : 9 === n.nodeType ? (o = n.documentElement, Math.max(n.body[\"scroll\" + e], o[\"scroll\" + e], n.body[\"offset\" + e], o[\"offset\" + e], o[\"client\" + e])) : i === t ? x.css(n, r, s) : x.style(n, r, i, s)\r\n                }, n, a ? i : t, a, null)\r\n            }\r\n        })\r\n    }), x.fn.size = function() {\r\n        return this.length\r\n    }, x.fn.andSelf = x.fn.addBack, \"object\" == typeof module && module && \"object\" == typeof module.exports ? module.exports = x : (e.jQuery = e.$ = x, \"function\" == typeof define && define.amd && define(\"jquery\", [], function() {\r\n        return x\r\n    }))\r\n})(window);","/* ========================================================================\n * Bootstrap: alert.js v3.1.1\n * http://getbootstrap.com/javascript/#alerts\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // ALERT CLASS DEFINITION\n  // ======================\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n  var Alert   = function (el) {\n    $(el).on('click', dismiss, this.close)\n  }\n\n  Alert.prototype.close = function (e) {\n    var $this    = $(this)\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = $(selector)\n\n    if (e) e.preventDefault()\n\n    if (!$parent.length) {\n      $parent = $this.hasClass('alert') ? $this : $this.parent()\n    }\n\n    $parent.trigger(e = $.Event('close.bs.alert'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      $parent.trigger('closed.bs.alert').remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent\n        .one($.support.transition.end, removeElement)\n        .emulateTransitionEnd(150) :\n      removeElement()\n  }\n\n\n  // ALERT PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.alert\n\n  $.fn.alert = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.alert')\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.alert.Constructor = Alert\n\n\n  // ALERT NO CONFLICT\n  // =================\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n  // ALERT DATA-API\n  // ==============\n\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: button.js v3.1.1\n * http://getbootstrap.com/javascript/#buttons\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element  = $(element)\n    this.options   = $.extend({}, Button.DEFAULTS, options)\n    this.isLoading = false\n  }\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state = state + 'Text'\n\n    if (!data.resetText) $el.data('resetText', $el[val]())\n\n    $el[val](data[state] || this.options[state])\n\n    // push to event loop to allow forms to submit\n    setTimeout($.proxy(function () {\n      if (state == 'loadingText') {\n        this.isLoading = true\n        $el.addClass(d).attr(d, d)\n      } else if (this.isLoading) {\n        this.isLoading = false\n        $el.removeClass(d).removeAttr(d)\n      }\n    }, this), 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var changed = true\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n      if ($input.prop('type') == 'radio') {\n        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false\n        else $parent.find('.active').removeClass('active')\n      }\n      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')\n    }\n\n    if (changed) this.$element.toggleClass('active')\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  var old = $.fn.button\n\n  $.fn.button = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document).on('click.bs.button.data-api', '[data-toggle^=button]', function (e) {\n    var $btn = $(e.target)\n    if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n    $btn.button('toggle')\n    e.preventDefault()\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: carousel.js v3.1.1\n * http://getbootstrap.com/javascript/#carousel\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CAROUSEL CLASS DEFINITION\n  // =========================\n\n  var Carousel = function (element, options) {\n    this.$element    = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options     = options\n    this.paused      =\n    this.sliding     =\n    this.interval    =\n    this.$active     =\n    this.$items      = null\n\n    this.options.pause == 'hover' && this.$element\n      .on('mouseenter', $.proxy(this.pause, this))\n      .on('mouseleave', $.proxy(this.cycle, this))\n  }\n\n  Carousel.DEFAULTS = {\n    interval: 5000,\n    pause: 'hover',\n    wrap: true\n  }\n\n  Carousel.prototype.cycle =  function (e) {\n    e || (this.paused = false)\n\n    this.interval && clearInterval(this.interval)\n\n    this.options.interval\n      && !this.paused\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n\n    return this\n  }\n\n  Carousel.prototype.getActiveIndex = function () {\n    this.$active = this.$element.find('.item.active')\n    this.$items  = this.$active.parent().children()\n\n    return this.$items.index(this.$active)\n  }\n\n  Carousel.prototype.to = function (pos) {\n    var that        = this\n    var activeIndex = this.getActiveIndex()\n\n    if (pos > (this.$items.length - 1) || pos < 0) return\n\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) })\n    if (activeIndex == pos) return this.pause().cycle()\n\n    return this.slide(pos > activeIndex ? 'next' : 'prev', $(this.$items[pos]))\n  }\n\n  Carousel.prototype.pause = function (e) {\n    e || (this.paused = true)\n\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\n      this.$element.trigger($.support.transition.end)\n      this.cycle(true)\n    }\n\n    this.interval = clearInterval(this.interval)\n\n    return this\n  }\n\n  Carousel.prototype.next = function () {\n    if (this.sliding) return\n    return this.slide('next')\n  }\n\n  Carousel.prototype.prev = function () {\n    if (this.sliding) return\n    return this.slide('prev')\n  }\n\n  Carousel.prototype.slide = function (type, next) {\n    var $active   = this.$element.find('.item.active')\n    var $next     = next || $active[type]()\n    var isCycling = this.interval\n    var direction = type == 'next' ? 'left' : 'right'\n    var fallback  = type == 'next' ? 'first' : 'last'\n    var that      = this\n\n    if (!$next.length) {\n      if (!this.options.wrap) return\n      $next = this.$element.find('.item')[fallback]()\n    }\n\n    if ($next.hasClass('active')) return this.sliding = false\n\n    var e = $.Event('slide.bs.carousel', { relatedTarget: $next[0], direction: direction })\n    this.$element.trigger(e)\n    if (e.isDefaultPrevented()) return\n\n    this.sliding = true\n\n    isCycling && this.pause()\n\n    if (this.$indicators.length) {\n      this.$indicators.find('.active').removeClass('active')\n      this.$element.one('slid.bs.carousel', function () {\n        var $nextIndicator = $(that.$indicators.children()[that.getActiveIndex()])\n        $nextIndicator && $nextIndicator.addClass('active')\n      })\n    }\n\n    if ($.support.transition && this.$element.hasClass('slide')) {\n      $next.addClass(type)\n      $next[0].offsetWidth // force reflow\n      $active.addClass(direction)\n      $next.addClass(direction)\n      $active\n        .one($.support.transition.end, function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () { that.$element.trigger('slid.bs.carousel') }, 0)\n        })\n        .emulateTransitionEnd($active.css('transition-duration').slice(0, -1) * 1000)\n    } else {\n      $active.removeClass('active')\n      $next.addClass('active')\n      this.sliding = false\n      this.$element.trigger('slid.bs.carousel')\n    }\n\n    isCycling && this.cycle()\n\n    return this\n  }\n\n\n  // CAROUSEL PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.carousel\n\n  $.fn.carousel = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.carousel')\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n      var action  = typeof option == 'string' ? option : options.slide\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  $.fn.carousel.Constructor = Carousel\n\n\n  // CAROUSEL NO CONFLICT\n  // ====================\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n\n  // CAROUSEL DATA-API\n  // =================\n\n  $(document).on('click.bs.carousel.data-api', '[data-slide], [data-slide-to]', function (e) {\n    var $this   = $(this), href\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n    var options = $.extend({}, $target.data(), $this.data())\n    var slideIndex = $this.attr('data-slide-to')\n    if (slideIndex) options.interval = false\n\n    $target.carousel(options)\n\n    if (slideIndex = $this.attr('data-slide-to')) {\n      $target.data('bs.carousel').to(slideIndex)\n    }\n\n    e.preventDefault()\n  })\n\n  $(window).on('load', function () {\n    $('[data-ride=\"carousel\"]').each(function () {\n      var $carousel = $(this)\n      $carousel.carousel($carousel.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: dropdown.js v3.1.1\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=dropdown]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $('<div class=\"dropdown-backdrop\"/>').insertAfter($(this)).on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $parent\n        .toggleClass('open')\n        .trigger('shown.bs.dropdown', relatedTarget)\n\n      $this.focus()\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27)/.test(e.keyCode)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive || (isActive && e.keyCode == 27)) {\n      if (e.which == 27) $parent.find(toggle).focus()\n      return $this.click()\n    }\n\n    var desc = ' li:not(.divider):visible a'\n    var $items = $parent.find('[role=menu]' + desc + ', [role=listbox]' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index($items.filter(':focus'))\n\n    if (e.keyCode == 38 && index > 0)                 index--                        // up\n    if (e.keyCode == 40 && index < $items.length - 1) index++                        // down\n    if (!~index)                                      index = 0\n\n    $items.eq(index).focus()\n  }\n\n  function clearMenus(e) {\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $parent = getParent($(this))\n      var relatedTarget = { relatedTarget: this }\n      if (!$parent.hasClass('open')) return\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n      if (e.isDefaultPrevented()) return\n      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)\n    })\n  }\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle + ', [role=menu], [role=listbox]', Dropdown.prototype.keydown)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: modal.js v3.1.1\n * http://getbootstrap.com/javascript/#modals\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options   = options\n    this.$element  = $(element)\n    this.$backdrop =\n    this.isShown   = null\n\n    if (this.options.remote) {\n      this.$element\n        .find('.modal-content')\n        .load(this.options.remote, $.proxy(function () {\n          this.$element.trigger('loaded.bs.modal')\n        }, this))\n    }\n  }\n\n  Modal.DEFAULTS = {\n    backdrop: true,\n    keyboard: true,\n    show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this[!this.isShown ? 'show' : 'hide'](_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.escape()\n\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(document.body) // don't move modals dom position\n      }\n\n      that.$element\n        .show()\n        .scrollTop(0)\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element\n        .addClass('in')\n        .attr('aria-hidden', false)\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$element.find('.modal-dialog') // wait for modal to slide in\n          .one($.support.transition.end, function () {\n            that.$element.focus().trigger(e)\n          })\n          .emulateTransitionEnd(300) :\n        that.$element.focus().trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .attr('aria-hidden', true)\n      .off('click.dismiss.bs.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one($.support.transition.end, $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(300) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {\n          this.$element.focus()\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keyup.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keyup.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.removeBackdrop()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $('<div class=\"modal-backdrop ' + animate + '\" />')\n        .appendTo(document.body)\n\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus.call(this.$element[0])\n          : this.hide.call(this)\n      }, this))\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.$backdrop\n          .one($.support.transition.end, callback)\n          .emulateTransitionEnd(150) :\n        callback()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.modal\n\n  $.fn.modal = function (option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) //strip for ie7\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    if ($this.is('a')) e.preventDefault()\n\n    $target\n      .modal(option, this)\n      .one('hide', function () {\n        $this.is(':visible') && $this.focus()\n      })\n  })\n\n  $(document)\n    .on('show.bs.modal', '.modal', function () { $(document.body).addClass('modal-open') })\n    .on('hidden.bs.modal', '.modal', function () { $(document.body).removeClass('modal-open') })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tooltip.js v3.1.1\n * http://getbootstrap.com/javascript/#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       =\n    this.options    =\n    this.enabled    =\n    this.timeout    =\n    this.hoverState =\n    this.$element   = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n    html: false,\n    container: false\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled  = true\n    this.type     = type\n    this.$element = $(element)\n    this.options  = this.getOptions(options)\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay,\n        hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type)\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n      var that = this;\n\n      var $tip = this.tip()\n\n      this.setContent()\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var $parent = this.$element.parent()\n\n        var orgPlacement = placement\n        var docScroll    = document.documentElement.scrollTop || document.body.scrollTop\n        var parentWidth  = this.options.container == 'body' ? window.innerWidth  : $parent.outerWidth()\n        var parentHeight = this.options.container == 'body' ? window.innerHeight : $parent.outerHeight()\n        var parentLeft   = this.options.container == 'body' ? 0 : $parent.offset().left\n\n        placement = placement == 'bottom' && pos.top   + pos.height  + actualHeight - docScroll > parentHeight  ? 'top'    :\n                    placement == 'top'    && pos.top   - docScroll   - actualHeight < 0                         ? 'bottom' :\n                    placement == 'right'  && pos.right + actualWidth > parentWidth                              ? 'left'   :\n                    placement == 'left'   && pos.left  - actualWidth < parentLeft                               ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n      this.hoverState = null\n\n      var complete = function() {\n        that.$element.trigger('shown.bs.' + that.type)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one($.support.transition.end, complete)\n          .emulateTransitionEnd(150) :\n        complete()\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\n    var replace\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  = offset.top  + marginTop\n    offset.left = offset.left + marginLeft\n\n    // $.fn.offset doesn't round pixel values\n    // so we use setOffset directly with our own function B-0\n    $.offset.setOffset($tip[0], $.extend({\n      using: function (props) {\n        $tip.css({\n          top: Math.round(props.top),\n          left: Math.round(props.left)\n        })\n      }\n    }, offset), 0)\n\n    $tip.addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      replace = true\n      offset.top = offset.top + height - actualHeight\n    }\n\n    if (/bottom|top/.test(placement)) {\n      var delta = 0\n\n      if (offset.left < 0) {\n        delta       = offset.left * -2\n        offset.left = 0\n\n        $tip.offset(offset)\n\n        actualWidth  = $tip[0].offsetWidth\n        actualHeight = $tip[0].offsetHeight\n      }\n\n      this.replaceArrow(delta - width + actualWidth, actualWidth, 'left')\n    } else {\n      this.replaceArrow(actualHeight - height, actualHeight, 'top')\n    }\n\n    if (replace) $tip.offset(offset)\n  }\n\n  Tooltip.prototype.replaceArrow = function (delta, dimension, position) {\n    this.arrow().css(position, delta ? (50 * (1 - delta / dimension) + '%') : '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function () {\n    var that = this\n    var $tip = this.tip()\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n      that.$element.trigger('hidden.bs.' + that.type)\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && this.$tip.hasClass('fade') ?\n      $tip\n        .one($.support.transition.end, complete)\n        .emulateTransitionEnd(150) :\n      complete()\n\n    this.hoverState = null\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof($e.attr('data-original-title')) != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function () {\n    var el = this.$element[0]\n    return $.extend({}, (typeof el.getBoundingClientRect == 'function') ? el.getBoundingClientRect() : {\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    }, this.$element.offset())\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.tip = function () {\n    return this.$tip = this.$tip || $(this.options.template)\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow')\n  }\n\n  Tooltip.prototype.validate = function () {\n    if (!this.$element[0].parentNode) {\n      this.hide()\n      this.$element = null\n      this.options  = null\n    }\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = e ? $(e.currentTarget)[this.type](this.getDelegateOptions()).data('bs.' + this.type) : this\n    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n  }\n\n  Tooltip.prototype.destroy = function () {\n    clearTimeout(this.timeout)\n    this.hide().$element.off('.' + this.type).removeData('bs.' + this.type)\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data && option == 'destroy') return\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: popover.js v3.1.1\n * http://getbootstrap.com/javascript/#popovers\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // POPOVER PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\n\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\n    placement: 'right',\n    trigger: 'click',\n    content: '',\n    template: '<div class=\"popover\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n  // NOTE: POPOVER EXTENDS tooltip.js\n  // ================================\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\n\n  Popover.prototype.constructor = Popover\n\n  Popover.prototype.getDefaults = function () {\n    return Popover.DEFAULTS\n  }\n\n  Popover.prototype.setContent = function () {\n    var $tip    = this.tip()\n    var title   = this.getTitle()\n    var content = this.getContent()\n\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n    $tip.find('.popover-content')[ // we use append for html objects to maintain js events\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\n    ](content)\n\n    $tip.removeClass('fade top bottom left right in')\n\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\n    // this manually by checking the contents.\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\n  }\n\n  Popover.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent()\n  }\n\n  Popover.prototype.getContent = function () {\n    var $e = this.$element\n    var o  = this.options\n\n    return $e.attr('data-content')\n      || (typeof o.content == 'function' ?\n            o.content.call($e[0]) :\n            o.content)\n  }\n\n  Popover.prototype.arrow = function () {\n    return this.$arrow = this.$arrow || this.tip().find('.arrow')\n  }\n\n  Popover.prototype.tip = function () {\n    if (!this.$tip) this.$tip = $(this.options.template)\n    return this.$tip\n  }\n\n\n  // POPOVER PLUGIN DEFINITION\n  // =========================\n\n  var old = $.fn.popover\n\n  $.fn.popover = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.popover')\n      var options = typeof option == 'object' && option\n\n      if (!data && option == 'destroy') return\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.popover.Constructor = Popover\n\n\n  // POPOVER NO CONFLICT\n  // ===================\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tab.js v3.1.1\n * http://getbootstrap.com/javascript/#tabs\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TAB CLASS DEFINITION\n  // ====================\n\n  var Tab = function (element) {\n    this.element = $(element)\n  }\n\n  Tab.prototype.show = function () {\n    var $this    = this.element\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\n    var selector = $this.data('target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') //strip for ie7\n    }\n\n    if ($this.parent('li').hasClass('active')) return\n\n    var previous = $ul.find('.active:last a')[0]\n    var e        = $.Event('show.bs.tab', {\n      relatedTarget: previous\n    })\n\n    $this.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    var $target = $(selector)\n\n    this.activate($this.parent('li'), $ul)\n    this.activate($target, $target.parent(), function () {\n      $this.trigger({\n        type: 'shown.bs.tab',\n        relatedTarget: previous\n      })\n    })\n  }\n\n  Tab.prototype.activate = function (element, container, callback) {\n    var $active    = container.find('> .active')\n    var transition = callback\n      && $.support.transition\n      && $active.hasClass('fade')\n\n    function next() {\n      $active\n        .removeClass('active')\n        .find('> .dropdown-menu > .active')\n        .removeClass('active')\n\n      element.addClass('active')\n\n      if (transition) {\n        element[0].offsetWidth // reflow for transition\n        element.addClass('in')\n      } else {\n        element.removeClass('fade')\n      }\n\n      if (element.parent('.dropdown-menu')) {\n        element.closest('li.dropdown').addClass('active')\n      }\n\n      callback && callback()\n    }\n\n    transition ?\n      $active\n        .one($.support.transition.end, next)\n        .emulateTransitionEnd(150) :\n      next()\n\n    $active.removeClass('in')\n  }\n\n\n  // TAB PLUGIN DEFINITION\n  // =====================\n\n  var old = $.fn.tab\n\n  $.fn.tab = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.tab')\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.tab.Constructor = Tab\n\n\n  // TAB NO CONFLICT\n  // ===============\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n  // TAB DATA-API\n  // ============\n\n  $(document).on('click.bs.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\n    e.preventDefault()\n    $(this).tab('show')\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: affix.js v3.1.1\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n    this.$window = $(window)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      =\n    this.unpin        =\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.RESET = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$window.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var scrollHeight = $(document).height()\n    var scrollTop    = this.$window.scrollTop()\n    var position     = this.$element.offset()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n\n    if (this.affixed == 'top') position.top += scrollTop\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.unpin   != null && (scrollTop + this.unpin <= position.top) ? false :\n                offsetBottom != null && (position.top + this.$element.height() >= scrollHeight - offsetBottom) ? 'bottom' :\n                offsetTop    != null && (scrollTop <= offsetTop) ? 'top' : false\n\n    if (this.affixed === affix) return\n    if (this.unpin) this.$element.css('top', '')\n\n    var affixType = 'affix' + (affix ? '-' + affix : '')\n    var e         = $.Event(affixType + '.bs.affix')\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    this.affixed = affix\n    this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n    this.$element\n      .removeClass(Affix.RESET)\n      .addClass(affixType)\n      .trigger($.Event(affixType.replace('affix', 'affixed')))\n\n    if (affix == 'bottom') {\n      this.$element.offset({ top: scrollHeight - offsetBottom - this.$element.height() })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  var old = $.fn.affix\n\n  $.fn.affix = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop)    data.offset.top    = data.offsetTop\n\n      $spy.affix(data)\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.1.1\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = function (element, options) {\n    this.$element      = $(element)\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\n    this.transitioning = null\n\n    if (this.options.parent) this.$parent = $(this.options.parent)\n    if (this.options.toggle) this.toggle()\n  }\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n  Collapse.prototype.dimension = function () {\n    var hasWidth = this.$element.hasClass('width')\n    return hasWidth ? 'width' : 'height'\n  }\n\n  Collapse.prototype.show = function () {\n    if (this.transitioning || this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('show.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var actives = this.$parent && this.$parent.find('> .panel > .in')\n\n    if (actives && actives.length) {\n      var hasData = actives.data('bs.collapse')\n      if (hasData && hasData.transitioning) return\n      actives.collapse('hide')\n      hasData || actives.data('bs.collapse', null)\n    }\n\n    var dimension = this.dimension()\n\n    this.$element\n      .removeClass('collapse')\n      .addClass('collapsing')\n      [dimension](0)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse in')\n        [dimension]('auto')\n      this.transitioning = 0\n      this.$element.trigger('shown.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\n\n    this.$element\n      .one($.support.transition.end, $.proxy(complete, this))\n      .emulateTransitionEnd(350)\n      [dimension](this.$element[0][scrollSize])\n  }\n\n  Collapse.prototype.hide = function () {\n    if (this.transitioning || !this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('hide.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var dimension = this.dimension()\n\n    this.$element\n      [dimension](this.$element[dimension]())\n      [0].offsetHeight\n\n    this.$element\n      .addClass('collapsing')\n      .removeClass('collapse')\n      .removeClass('in')\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.transitioning = 0\n      this.$element\n        .trigger('hidden.bs.collapse')\n        .removeClass('collapsing')\n        .addClass('collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    this.$element\n      [dimension](0)\n      .one($.support.transition.end, $.proxy(complete, this))\n      .emulateTransitionEnd(350)\n  }\n\n  Collapse.prototype.toggle = function () {\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  var old = $.fn.collapse\n\n  $.fn.collapse = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && option == 'show') option = !option\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.collapse.Constructor = Collapse\n\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=collapse]', function (e) {\n    var $this   = $(this), href\n    var target  = $this.attr('data-target')\n        || e.preventDefault()\n        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') //strip for ie7\n    var $target = $(target)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n    var parent  = $this.attr('data-parent')\n    var $parent = parent && $(parent)\n\n    if (!data || !data.transitioning) {\n      if ($parent) $parent.find('[data-toggle=collapse][data-parent=\"' + parent + '\"]').not($this).addClass('collapsed')\n      $this[$target.hasClass('in') ? 'addClass' : 'removeClass']('collapsed')\n    }\n\n    $target.collapse(option)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: scrollspy.js v3.1.1\n * http://getbootstrap.com/javascript/#scrollspy\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // SCROLLSPY CLASS DEFINITION\n  // ==========================\n\n  function ScrollSpy(element, options) {\n    var href\n    var process  = $.proxy(this.process, this)\n\n    this.$element       = $(element).is('body') ? $(window) : $(element)\n    this.$body          = $('body')\n    this.$scrollElement = this.$element.on('scroll.bs.scroll-spy.data-api', process)\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\n    this.selector       = (this.options.target\n      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      || '') + ' .nav li > a'\n    this.offsets        = $([])\n    this.targets        = $([])\n    this.activeTarget   = null\n\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.DEFAULTS = {\n    offset: 10\n  }\n\n  ScrollSpy.prototype.refresh = function () {\n    var offsetMethod = this.$element[0] == window ? 'offset' : 'position'\n\n    this.offsets = $([])\n    this.targets = $([])\n\n    var self     = this\n    var $targets = this.$body\n      .find(this.selector)\n      .map(function () {\n        var $el   = $(this)\n        var href  = $el.data('target') || $el.attr('href')\n        var $href = /^#./.test(href) && $(href)\n\n        return ($href\n          && $href.length\n          && $href.is(':visible')\n          && [[ $href[offsetMethod]().top + (!$.isWindow(self.$scrollElement.get(0)) && self.$scrollElement.scrollTop()), href ]]) || null\n      })\n      .sort(function (a, b) { return a[0] - b[0] })\n      .each(function () {\n        self.offsets.push(this[0])\n        self.targets.push(this[1])\n      })\n  }\n\n  ScrollSpy.prototype.process = function () {\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\n    var scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\n    var maxScroll    = scrollHeight - this.$scrollElement.height()\n    var offsets      = this.offsets\n    var targets      = this.targets\n    var activeTarget = this.activeTarget\n    var i\n\n    if (scrollTop >= maxScroll) {\n      return activeTarget != (i = targets.last()[0]) && this.activate(i)\n    }\n\n    if (activeTarget && scrollTop <= offsets[0]) {\n      return activeTarget != (i = targets[0]) && this.activate(i)\n    }\n\n    for (i = offsets.length; i--;) {\n      activeTarget != targets[i]\n        && scrollTop >= offsets[i]\n        && (!offsets[i + 1] || scrollTop <= offsets[i + 1])\n        && this.activate( targets[i] )\n    }\n  }\n\n  ScrollSpy.prototype.activate = function (target) {\n    this.activeTarget = target\n\n    $(this.selector)\n      .parentsUntil(this.options.target, '.active')\n      .removeClass('active')\n\n    var selector = this.selector +\n        '[data-target=\"' + target + '\"],' +\n        this.selector + '[href=\"' + target + '\"]'\n\n    var active = $(selector)\n      .parents('li')\n      .addClass('active')\n\n    if (active.parent('.dropdown-menu').length) {\n      active = active\n        .closest('li.dropdown')\n        .addClass('active')\n    }\n\n    active.trigger('activate.bs.scrollspy')\n  }\n\n\n  // SCROLLSPY PLUGIN DEFINITION\n  // ===========================\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy = function (option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.scrollspy')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n\n  // SCROLLSPY NO CONFLICT\n  // =====================\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n  // SCROLLSPY DATA-API\n  // ==================\n\n  $(window).on('load', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      $spy.scrollspy($spy.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: transition.js v3.1.1\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      'WebkitTransition' : 'webkitTransitionEnd',\n      'MozTransition'    : 'transitionend',\n      'OTransition'      : 'oTransitionEnd otransitionend',\n      'transition'       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false, $el = this\n    $(this).one($.support.transition.end, function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n  })\n\n}(jQuery);\n","/**\r\n * jquery.slimmenu.js\r\n * http://adnantopal.github.io/slimmenu/\r\n * Author: @adnantopal\r\n * Copyright 2013, Adnan Topal (atopal.com)\r\n * Licensed under the MIT license.\r\n */\r\n;(function ( $, window, document, undefined )\r\n{\r\n    var pluginName = \"slimmenu\",\r\n        defaults =\r\n        {\r\n            resizeWidth: '768',\r\n            collapserTitle: 'Main Menu',\r\n            animSpeed: 'medium',\r\n            easingEffect: null,\r\n            indentChildren: false,\r\n            childrenIndenter: '&nbsp;&nbsp;'\r\n        };\r\n\r\n    function Plugin( element, options )\r\n    {\r\n        this.element = element;\r\n        this.$elem = $(this.element);\r\n        this.options = $.extend( {}, defaults, options );\r\n        this.init();\r\n    }\r\n\r\n    Plugin.prototype = {\r\n\r\n        init: function()\r\n        {\r\n            var $options = this.options,\r\n                $menu = this.$elem,\r\n                $collapser = '<div class=\"slimmenu-menu-collapser\">'+$options.collapserTitle+'<div class=\"slimmenu-collapse-button\"><span class=\"slimmenu-icon-bar\"></span><span class=\"slimmenu-icon-bar\"></span><span class=\"slimmenu-icon-bar\"></span></div></div>',\r\n                $menu_collapser;\r\n\r\n            $menu.before($collapser);\r\n            $menu_collapser = $menu.prev('.slimmenu-menu-collapser');\r\n\r\n            $menu.on('click', '.slimmenu-sub-collapser', function(e)\r\n            {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                var $parent_li = $(this).closest('li');\r\n\r\n                if ($(this).hasClass('expanded'))\r\n                {\r\n                    $(this).removeClass('expanded');\r\n                    $(this).find('i').addClass('fa fa-angle-down');\r\n                    $parent_li.find('>ul').slideUp($options.animSpeed, $options.easingEffect);\r\n                }\r\n                else\r\n                {\r\n                    $(this).addClass('expanded');\r\n                    $(this).find('i').removeClass('fa-angle-down').addClass('fa fa-angle-up');\r\n                    $parent_li.find('>ul').slideDown($options.animSpeed, $options.easingEffect);\r\n                }\r\n            });\r\n\r\n            $menu_collapser.on('click', '.slimmenu-collapse-button', function(e)\r\n            {\r\n                e.preventDefault();\r\n                $menu.slideToggle($options.animSpeed, $options.easingEffect);\r\n            });\r\n\r\n            this.resizeMenu({ data: { el: this.element, options: this.options } });\r\n            $(window).on('resize', { el: this.element, options: this.options }, this.resizeMenu);\r\n        },\r\n\r\n        resizeMenu: function(event)\r\n        {\r\n            var $window = $(window),\r\n                $options = event.data.options,\r\n                $menu = $(event.data.el),\r\n                $menu_collapser = $('body').find('.slimmenu-menu-collapser');\r\n\r\n            $menu.find('li').each(function()\r\n            {\r\n                if ($(this).has('ul').length)\r\n                {\r\n                    $(this).addClass('slimmenu-sub-menu');\r\n                    if ($(this).has('.slimmenu-sub-collapser').length)\r\n                    {\r\n                        $(this).children('.slimmenu-sub-collapser i').addClass('fa fa-angle-down');\r\n                    }\r\n                    else\r\n                    {\r\n                        $(this).append('<span class=\"slimmenu-sub-collapser\"><i class=\"fa fa-angle-down\"></i></span>');\r\n                    }\r\n                }\r\n\r\n                $(this).children('ul').hide();\r\n                $(this).find('.slimmenu-sub-collapser').removeClass('expanded').children('i').addClass('fa fa-angle-down');\r\n            });\r\n\r\n            if ($options.resizeWidth >= $window.width() || $('body').hasClass('touch'))\r\n            {\r\n                if ($options.indentChildren)\r\n                {\r\n                    $menu.find('ul').each(function()\r\n                    {\r\n                        var $depth = $(this).parents('ul').length;\r\n                        if (!$(this).children('li').children('a').has('i').length)\r\n                        {\r\n                            $(this).children('li').children('a').prepend(Plugin.prototype.indent($depth, $options));\r\n                        }\r\n                    });\r\n                }\r\n\r\n                $menu.find('li').has('ul').off('mouseenter mouseleave');\r\n                $menu.addClass('slimmenu-collapsed').hide();\r\n                $menu_collapser.show();\r\n            }\r\n            else\r\n            {\r\n                $menu.find('li').has('ul').on('mouseenter', function()\r\n                {\r\n                    $(this).find('>ul').stop().slideDown($options.animSpeed, $options.easingEffect);\r\n                })\r\n                .on('mouseleave', function()\r\n                {\r\n                    $(this).find('>ul').stop().slideUp($options.animSpeed, $options.easingEffect);\r\n                });\r\n\r\n                $menu.find('li > a > i').remove();\r\n                $menu.removeClass('slimmenu-collapsed').show();\r\n                $menu_collapser.hide();\r\n            }\r\n        },\r\n\r\n        indent: function(num, options)\r\n        {\r\n            var $indent = '';\r\n            for (var i=0; i < num; i++)\r\n            {\r\n                $indent += options.childrenIndenter;\r\n            }\r\n            return '<i>'+$indent+'</i>';\r\n        }\r\n    };\r\n\r\n    $.fn[pluginName] = function ( options )\r\n    {\r\n        return this.each(function ()\r\n        {\r\n            if (!$.data(this, \"plugin_\" + pluginName))\r\n            {\r\n                $.data(this, \"plugin_\" + pluginName,\r\n                new Plugin( this, options ));\r\n            }\r\n        });\r\n    };\r\n\r\n})( jQuery, window, document );","/* =========================================================\r\n * bootstrap-datepicker.js\r\n * Repo: https://github.com/eternicode/bootstrap-datepicker/\r\n * Demo: http://eternicode.github.io/bootstrap-datepicker/\r\n * Docs: http://bootstrap-datepicker.readthedocs.org/\r\n * Forked from http://www.eyecon.ro/bootstrap-datepicker\r\n * =========================================================\r\n * Started by Stefan Petre; improvements by Andrew Rowls + contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n(function($, undefined) {\r\n\r\n    var $window = $(window);\r\n\r\n    function UTCDate() {\r\n        return new Date(Date.UTC.apply(Date, arguments));\r\n    }\r\n\r\n    function UTCToday() {\r\n        var today = new Date();\r\n        return UTCDate(today.getFullYear(), today.getMonth(), today.getDate());\r\n    }\r\n\r\n    function alias(method) {\r\n        return function() {\r\n            return this[method].apply(this, arguments);\r\n        };\r\n    }\r\n\r\n    var DateArray = (function() {\r\n        var extras = {\r\n            get: function(i) {\r\n                return this.slice(i)[0];\r\n            },\r\n            contains: function(d) {\r\n                // Array.indexOf is not cross-browser;\r\n                // $.inArray doesn't work with Dates\r\n                var val = d && d.valueOf();\r\n                for (var i = 0, l = this.length; i < l; i++)\r\n                    if (this[i].valueOf() === val)\r\n                        return i;\r\n                return -1;\r\n            },\r\n            remove: function(i) {\r\n                this.splice(i, 1);\r\n            },\r\n            replace: function(new_array) {\r\n                if (!new_array)\r\n                    return;\r\n                if (!$.isArray(new_array))\r\n                    new_array = [new_array];\r\n                this.clear();\r\n                this.push.apply(this, new_array);\r\n            },\r\n            clear: function() {\r\n                this.length = 0;\r\n            },\r\n            copy: function() {\r\n                var a = new DateArray();\r\n                a.replace(this);\r\n                return a;\r\n            }\r\n        };\r\n\r\n        return function() {\r\n            var a = [];\r\n            a.push.apply(a, arguments);\r\n            $.extend(a, extras);\r\n            return a;\r\n        };\r\n    })();\r\n\r\n\r\n    // Picker object\r\n\r\n    var Datepicker = function(element, options) {\r\n        this.dates = new DateArray();\r\n        this.viewDate = UTCToday();\r\n        this.focusDate = null;\r\n\r\n        this._process_options(options);\r\n\r\n        this.element = $(element);\r\n        this.isInline = false;\r\n        this.isInput = this.element.is('input');\r\n        this.component = this.element.is('.date') ? this.element.find('.add-on, .input-group-addon, .btn') : false;\r\n        this.hasInput = this.component && this.element.find('input').length;\r\n        if (this.component && this.component.length === 0)\r\n            this.component = false;\r\n\r\n        this.picker = $(DPGlobal.template);\r\n        this._buildEvents();\r\n        this._attachEvents();\r\n\r\n        if (this.isInline) {\r\n            this.picker.addClass('datepicker-inline').appendTo(this.element);\r\n        } else {\r\n            this.picker.addClass('datepicker-dropdown dropdown-menu');\r\n        }\r\n\r\n        if (this.o.rtl) {\r\n            this.picker.addClass('datepicker-rtl');\r\n        }\r\n\r\n        this.viewMode = this.o.startView;\r\n\r\n        if (this.o.calendarWeeks)\r\n            this.picker.find('tfoot th.today')\r\n                .attr('colspan', function(i, val) {\r\n                    return parseInt(val) + 1;\r\n                });\r\n\r\n        this._allow_update = false;\r\n\r\n        this.setStartDate(this._o.startDate);\r\n        this.setEndDate(this._o.endDate);\r\n        this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);\r\n\r\n        this.fillDow();\r\n        this.fillMonths();\r\n\r\n        this._allow_update = true;\r\n\r\n        this.update();\r\n        this.showMode();\r\n\r\n        if (this.isInline) {\r\n            this.show();\r\n        }\r\n    };\r\n\r\n    Datepicker.prototype = {\r\n        constructor: Datepicker,\r\n\r\n        _process_options: function(opts) {\r\n            // Store raw options for reference\r\n            this._o = $.extend({}, this._o, opts);\r\n            // Processed options\r\n            var o = this.o = $.extend({}, this._o);\r\n\r\n            // Check if \"de-DE\" style date is available, if not language should\r\n            // fallback to 2 letter code eg \"de\"\r\n            var lang = o.language;\r\n            if (!dates[lang]) {\r\n                lang = lang.split('-')[0];\r\n                if (!dates[lang])\r\n                    lang = defaults.language;\r\n            }\r\n            o.language = lang;\r\n\r\n            switch (o.startView) {\r\n                case 2:\r\n                case 'decade':\r\n                    o.startView = 2;\r\n                    break;\r\n                case 1:\r\n                case 'year':\r\n                    o.startView = 1;\r\n                    break;\r\n                default:\r\n                    o.startView = 0;\r\n            }\r\n\r\n            switch (o.minViewMode) {\r\n                case 1:\r\n                case 'months':\r\n                    o.minViewMode = 1;\r\n                    break;\r\n                case 2:\r\n                case 'years':\r\n                    o.minViewMode = 2;\r\n                    break;\r\n                default:\r\n                    o.minViewMode = 0;\r\n            }\r\n\r\n            o.startView = Math.max(o.startView, o.minViewMode);\r\n\r\n            // true, false, or Number > 0\r\n            if (o.multidate !== true) {\r\n                o.multidate = Number(o.multidate) || false;\r\n                if (o.multidate !== false)\r\n                    o.multidate = Math.max(0, o.multidate);\r\n                else\r\n                    o.multidate = 1;\r\n            }\r\n            o.multidateSeparator = String(o.multidateSeparator);\r\n\r\n            o.weekStart %= 7;\r\n            o.weekEnd = ((o.weekStart + 6) % 7);\r\n\r\n            var format = DPGlobal.parseFormat(o.format);\r\n            if (o.startDate !== -Infinity) {\r\n                if ( !! o.startDate) {\r\n                    if (o.startDate instanceof Date)\r\n                        o.startDate = this._local_to_utc(this._zero_time(o.startDate));\r\n                    else\r\n                        o.startDate = DPGlobal.parseDate(o.startDate, format, o.language);\r\n                } else {\r\n                    o.startDate = -Infinity;\r\n                }\r\n            }\r\n            if (o.endDate !== Infinity) {\r\n                if ( !! o.endDate) {\r\n                    if (o.endDate instanceof Date)\r\n                        o.endDate = this._local_to_utc(this._zero_time(o.endDate));\r\n                    else\r\n                        o.endDate = DPGlobal.parseDate(o.endDate, format, o.language);\r\n                } else {\r\n                    o.endDate = Infinity;\r\n                }\r\n            }\r\n\r\n            o.daysOfWeekDisabled = o.daysOfWeekDisabled || [];\r\n            if (!$.isArray(o.daysOfWeekDisabled))\r\n                o.daysOfWeekDisabled = o.daysOfWeekDisabled.split(/[,\\s]*/);\r\n            o.daysOfWeekDisabled = $.map(o.daysOfWeekDisabled, function(d) {\r\n                return parseInt(d, 10);\r\n            });\r\n\r\n            var plc = String(o.orientation).toLowerCase().split(/\\s+/g),\r\n                _plc = o.orientation.toLowerCase();\r\n            plc = $.grep(plc, function(word) {\r\n                return (/^auto|left|right|top|bottom$/).test(word);\r\n            });\r\n            o.orientation = {\r\n                x: 'auto',\r\n                y: 'auto'\r\n            };\r\n            if (!_plc || _plc === 'auto')\r\n            ; // no action\r\n            else if (plc.length === 1) {\r\n                switch (plc[0]) {\r\n                    case 'top':\r\n                    case 'bottom':\r\n                        o.orientation.y = plc[0];\r\n                        break;\r\n                    case 'left':\r\n                    case 'right':\r\n                        o.orientation.x = plc[0];\r\n                        break;\r\n                }\r\n            } else {\r\n                _plc = $.grep(plc, function(word) {\r\n                    return (/^left|right$/).test(word);\r\n                });\r\n                o.orientation.x = _plc[0] || 'auto';\r\n\r\n                _plc = $.grep(plc, function(word) {\r\n                    return (/^top|bottom$/).test(word);\r\n                });\r\n                o.orientation.y = _plc[0] || 'auto';\r\n            }\r\n        },\r\n        _events: [],\r\n        _secondaryEvents: [],\r\n        _applyEvents: function(evs) {\r\n            for (var i = 0, el, ch, ev; i < evs.length; i++) {\r\n                el = evs[i][0];\r\n                if (evs[i].length === 2) {\r\n                    ch = undefined;\r\n                    ev = evs[i][1];\r\n                } else if (evs[i].length === 3) {\r\n                    ch = evs[i][1];\r\n                    ev = evs[i][2];\r\n                }\r\n                el.on(ev, ch);\r\n            }\r\n        },\r\n        _unapplyEvents: function(evs) {\r\n            for (var i = 0, el, ev, ch; i < evs.length; i++) {\r\n                el = evs[i][0];\r\n                if (evs[i].length === 2) {\r\n                    ch = undefined;\r\n                    ev = evs[i][1];\r\n                } else if (evs[i].length === 3) {\r\n                    ch = evs[i][1];\r\n                    ev = evs[i][2];\r\n                }\r\n                el.off(ev, ch);\r\n            }\r\n        },\r\n        _buildEvents: function() {\r\n            if (this.isInput) { // single input\r\n                this._events = [\r\n                    [this.element, {\r\n                        focus: $.proxy(this.show, this),\r\n                        keyup: $.proxy(function(e) {\r\n                            if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)\r\n                                this.update();\r\n                        }, this),\r\n                        keydown: $.proxy(this.keydown, this)\r\n                    }]\r\n                ];\r\n            } else if (this.component && this.hasInput) { // component: input + button\r\n                this._events = [\r\n                    // For components that are not readonly, allow keyboard nav\r\n                    [this.element.find('input'), {\r\n                        focus: $.proxy(this.show, this),\r\n                        keyup: $.proxy(function(e) {\r\n                            if ($.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) === -1)\r\n                                this.update();\r\n                        }, this),\r\n                        keydown: $.proxy(this.keydown, this)\r\n                    }],\r\n                    [this.component, {\r\n                        click: $.proxy(this.show, this)\r\n                    }]\r\n                ];\r\n            } else if (this.element.is('div')) { // inline datepicker\r\n                this.isInline = true;\r\n            } else {\r\n                this._events = [\r\n                    [this.element, {\r\n                        click: $.proxy(this.show, this)\r\n                    }]\r\n                ];\r\n            }\r\n            this._events.push(\r\n                // Component: listen for blur on element descendants\r\n                [this.element, '*', {\r\n                    blur: $.proxy(function(e) {\r\n                        this._focused_from = e.target;\r\n                    }, this)\r\n                }],\r\n                // Input: listen for blur on element\r\n                [this.element, {\r\n                    blur: $.proxy(function(e) {\r\n                        this._focused_from = e.target;\r\n                    }, this)\r\n                }]\r\n            );\r\n\r\n            this._secondaryEvents = [\r\n                [this.picker, {\r\n                    click: $.proxy(this.click, this)\r\n                }],\r\n                [$(window), {\r\n                    resize: $.proxy(this.place, this)\r\n                }],\r\n                [$(document), {\r\n                    'mousedown touchstart': $.proxy(function(e) {\r\n                        // Clicked outside the datepicker, hide it\r\n                        if (!(\r\n                            this.element.is(e.target) ||\r\n                            this.element.find(e.target).length ||\r\n                            this.picker.is(e.target) ||\r\n                            this.picker.find(e.target).length\r\n                        )) {\r\n                            this.hide();\r\n                        }\r\n                    }, this)\r\n                }]\r\n            ];\r\n        },\r\n        _attachEvents: function() {\r\n            this._detachEvents();\r\n            this._applyEvents(this._events);\r\n        },\r\n        _detachEvents: function() {\r\n            this._unapplyEvents(this._events);\r\n        },\r\n        _attachSecondaryEvents: function() {\r\n            this._detachSecondaryEvents();\r\n            this._applyEvents(this._secondaryEvents);\r\n        },\r\n        _detachSecondaryEvents: function() {\r\n            this._unapplyEvents(this._secondaryEvents);\r\n        },\r\n        _trigger: function(event, altdate) {\r\n            var date = altdate || this.dates.get(-1),\r\n                local_date = this._utc_to_local(date);\r\n\r\n            this.element.trigger({\r\n                type: event,\r\n                date: local_date,\r\n                dates: $.map(this.dates, this._utc_to_local),\r\n                format: $.proxy(function(ix, format) {\r\n                    if (arguments.length === 0) {\r\n                        ix = this.dates.length - 1;\r\n                        format = this.o.format;\r\n                    } else if (typeof ix === 'string') {\r\n                        format = ix;\r\n                        ix = this.dates.length - 1;\r\n                    }\r\n                    format = format || this.o.format;\r\n                    var date = this.dates.get(ix);\r\n                    return DPGlobal.formatDate(date, format, this.o.language);\r\n                }, this)\r\n            });\r\n        },\r\n\r\n        show: function() {\r\n            if (!this.isInline)\r\n                this.picker.appendTo('body');\r\n            this.picker.show();\r\n            this.place();\r\n            this._attachSecondaryEvents();\r\n            this._trigger('show');\r\n        },\r\n\r\n        hide: function() {\r\n            if (this.isInline)\r\n                return;\r\n            if (!this.picker.is(':visible'))\r\n                return;\r\n            this.focusDate = null;\r\n            this.picker.hide().detach();\r\n            this._detachSecondaryEvents();\r\n            this.viewMode = this.o.startView;\r\n            this.showMode();\r\n\r\n            if (\r\n                this.o.forceParse &&\r\n                (\r\n                    this.isInput && this.element.val() ||\r\n                    this.hasInput && this.element.find('input').val()\r\n                )\r\n            )\r\n                this.setValue();\r\n            this._trigger('hide');\r\n        },\r\n\r\n        remove: function() {\r\n            this.hide();\r\n            this._detachEvents();\r\n            this._detachSecondaryEvents();\r\n            this.picker.remove();\r\n            delete this.element.data().datepicker;\r\n            if (!this.isInput) {\r\n                delete this.element.data().date;\r\n            }\r\n        },\r\n\r\n        _utc_to_local: function(utc) {\r\n            return utc && new Date(utc.getTime() + (utc.getTimezoneOffset() * 60000));\r\n        },\r\n        _local_to_utc: function(local) {\r\n            return local && new Date(local.getTime() - (local.getTimezoneOffset() * 60000));\r\n        },\r\n        _zero_time: function(local) {\r\n            return local && new Date(local.getFullYear(), local.getMonth(), local.getDate());\r\n        },\r\n        _zero_utc_time: function(utc) {\r\n            return utc && new Date(Date.UTC(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate()));\r\n        },\r\n\r\n        getDates: function() {\r\n            return $.map(this.dates, this._utc_to_local);\r\n        },\r\n\r\n        getUTCDates: function() {\r\n            return $.map(this.dates, function(d) {\r\n                return new Date(d);\r\n            });\r\n        },\r\n\r\n        getDate: function() {\r\n            return this._utc_to_local(this.getUTCDate());\r\n        },\r\n\r\n        getUTCDate: function() {\r\n            return new Date(this.dates.get(-1));\r\n        },\r\n\r\n        setDates: function() {\r\n            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n            this.update.apply(this, args);\r\n            this._trigger('changeDate');\r\n            this.setValue();\r\n        },\r\n\r\n        setUTCDates: function() {\r\n            var args = $.isArray(arguments[0]) ? arguments[0] : arguments;\r\n            this.update.apply(this, $.map(args, this._utc_to_local));\r\n            this._trigger('changeDate');\r\n            this.setValue();\r\n        },\r\n\r\n        setDate: alias('setDates'),\r\n        setUTCDate: alias('setUTCDates'),\r\n\r\n        setValue: function() {\r\n            var formatted = this.getFormattedDate();\r\n            if (!this.isInput) {\r\n                if (this.component) {\r\n                    this.element.find('input').val(formatted).change();\r\n                }\r\n            } else {\r\n                this.element.val(formatted).change();\r\n            }\r\n        },\r\n\r\n        getFormattedDate: function(format) {\r\n            if (format === undefined)\r\n                format = this.o.format;\r\n\r\n            var lang = this.o.language;\r\n            return $.map(this.dates, function(d) {\r\n                return DPGlobal.formatDate(d, format, lang);\r\n            }).join(this.o.multidateSeparator);\r\n        },\r\n\r\n        setStartDate: function(startDate) {\r\n            this._process_options({\r\n                startDate: startDate\r\n            });\r\n            this.update();\r\n            this.updateNavArrows();\r\n        },\r\n\r\n        setEndDate: function(endDate) {\r\n            this._process_options({\r\n                endDate: endDate\r\n            });\r\n            this.update();\r\n            this.updateNavArrows();\r\n        },\r\n\r\n        setDaysOfWeekDisabled: function(daysOfWeekDisabled) {\r\n            this._process_options({\r\n                daysOfWeekDisabled: daysOfWeekDisabled\r\n            });\r\n            this.update();\r\n            this.updateNavArrows();\r\n        },\r\n\r\n        place: function() {\r\n            if (this.isInline)\r\n                return;\r\n            var calendarWidth = this.picker.outerWidth(),\r\n                calendarHeight = this.picker.outerHeight(),\r\n                visualPadding = 10,\r\n                windowWidth = $window.width(),\r\n                windowHeight = $window.height(),\r\n                scrollTop = $window.scrollTop();\r\n\r\n            var zIndex = parseInt(this.element.parents().filter(function() {\r\n                return $(this).css('z-index') !== 'auto';\r\n            }).first().css('z-index')) + 9999;\r\n            var offset = this.component ? this.component.parent().offset() : this.element.offset();\r\n            var height = this.component ? this.component.outerHeight(true) : this.element.outerHeight(false);\r\n            var width = this.component ? this.component.outerWidth(true) : this.element.outerWidth(false);\r\n            var left = offset.left,\r\n                top = offset.top;\r\n\r\n            this.picker.removeClass(\r\n                'datepicker-orient-top datepicker-orient-bottom ' +\r\n                'datepicker-orient-right datepicker-orient-left'\r\n            );\r\n\r\n            if (this.o.orientation.x !== 'auto') {\r\n                this.picker.addClass('datepicker-orient-' + this.o.orientation.x);\r\n                if (this.o.orientation.x === 'right')\r\n                    left -= calendarWidth - width;\r\n            }\r\n            // auto x orientation is best-placement: if it crosses a window\r\n            // edge, fudge it sideways\r\n            else {\r\n                // Default to left\r\n                this.picker.addClass('datepicker-orient-left');\r\n                if (offset.left < 0)\r\n                    left -= offset.left - visualPadding;\r\n                else if (offset.left + calendarWidth > windowWidth)\r\n                    left = windowWidth - calendarWidth - visualPadding;\r\n            }\r\n\r\n            // auto y orientation is best-situation: top or bottom, no fudging,\r\n            // decision based on which shows more of the calendar\r\n            var yorient = this.o.orientation.y,\r\n                top_overflow, bottom_overflow;\r\n            if (yorient === 'auto') {\r\n                top_overflow = -scrollTop + offset.top - calendarHeight;\r\n                bottom_overflow = scrollTop + windowHeight - (offset.top + height + calendarHeight);\r\n                if (Math.max(top_overflow, bottom_overflow) === bottom_overflow)\r\n                    yorient = 'top';\r\n                else\r\n                    yorient = 'bottom';\r\n            }\r\n            this.picker.addClass('datepicker-orient-' + yorient);\r\n            if (yorient === 'top')\r\n                top += height;\r\n            else\r\n                top -= calendarHeight + parseInt(this.picker.css('padding-top'));\r\n\r\n            this.picker.css({\r\n                top: top,\r\n                left: left,\r\n                zIndex: zIndex\r\n            });\r\n        },\r\n\r\n        _allow_update: true,\r\n        update: function() {\r\n            if (!this._allow_update)\r\n                return;\r\n\r\n            var oldDates = this.dates.copy(),\r\n                dates = [],\r\n                fromArgs = false;\r\n            if (arguments.length) {\r\n                $.each(arguments, $.proxy(function(i, date) {\r\n                    if (date instanceof Date)\r\n                        date = this._local_to_utc(date);\r\n                    dates.push(date);\r\n                }, this));\r\n                fromArgs = true;\r\n            } else {\r\n                dates = this.isInput ? this.element.val() : this.element.data('date') || this.element.find('input').val();\r\n                if (dates && this.o.multidate)\r\n                    dates = dates.split(this.o.multidateSeparator);\r\n                else\r\n                    dates = [dates];\r\n                delete this.element.data().date;\r\n            }\r\n\r\n            dates = $.map(dates, $.proxy(function(date) {\r\n                return DPGlobal.parseDate(date, this.o.format, this.o.language);\r\n            }, this));\r\n            dates = $.grep(dates, $.proxy(function(date) {\r\n                return (\r\n                    date < this.o.startDate ||\r\n                    date > this.o.endDate || !date\r\n                );\r\n            }, this), true);\r\n            this.dates.replace(dates);\r\n\r\n            if (this.dates.length)\r\n                this.viewDate = new Date(this.dates.get(-1));\r\n            else if (this.viewDate < this.o.startDate)\r\n                this.viewDate = new Date(this.o.startDate);\r\n            else if (this.viewDate > this.o.endDate)\r\n                this.viewDate = new Date(this.o.endDate);\r\n\r\n            if (fromArgs) {\r\n                // setting date by clicking\r\n                this.setValue();\r\n            } else if (dates.length) {\r\n                // setting date by typing\r\n                if (String(oldDates) !== String(this.dates))\r\n                    this._trigger('changeDate');\r\n            }\r\n            if (!this.dates.length && oldDates.length)\r\n                this._trigger('clearDate');\r\n\r\n            this.fill();\r\n        },\r\n\r\n        fillDow: function() {\r\n            var dowCnt = this.o.weekStart,\r\n                html = '<tr>';\r\n            if (this.o.calendarWeeks) {\r\n                var cell = '<th class=\"cw\">&nbsp;</th>';\r\n                html += cell;\r\n                this.picker.find('.datepicker-days thead tr:first-child').prepend(cell);\r\n            }\r\n            while (dowCnt < this.o.weekStart + 7) {\r\n                html += '<th class=\"dow\">' + dates[this.o.language].daysMin[(dowCnt++) % 7] + '</th>';\r\n            }\r\n            html += '</tr>';\r\n            this.picker.find('.datepicker-days thead').append(html);\r\n        },\r\n\r\n        fillMonths: function() {\r\n            var html = '',\r\n                i = 0;\r\n            while (i < 12) {\r\n                html += '<span class=\"month\">' + dates[this.o.language].monthsShort[i++] + '</span>';\r\n            }\r\n            this.picker.find('.datepicker-months td').html(html);\r\n        },\r\n\r\n        setRange: function(range) {\r\n            if (!range || !range.length)\r\n                delete this.range;\r\n            else\r\n                this.range = $.map(range, function(d) {\r\n                    return d.valueOf();\r\n                });\r\n            this.fill();\r\n        },\r\n\r\n        getClassNames: function(date) {\r\n            var cls = [],\r\n                year = this.viewDate.getUTCFullYear(),\r\n                month = this.viewDate.getUTCMonth(),\r\n                today = new Date();\r\n            if (date.getUTCFullYear() < year || (date.getUTCFullYear() === year && date.getUTCMonth() < month)) {\r\n                cls.push('old');\r\n            } else if (date.getUTCFullYear() > year || (date.getUTCFullYear() === year && date.getUTCMonth() > month)) {\r\n                cls.push('new');\r\n            }\r\n            if (this.focusDate && date.valueOf() === this.focusDate.valueOf())\r\n                cls.push('focused');\r\n            // Compare internal UTC date with local today, not UTC today\r\n            if (this.o.todayHighlight &&\r\n                date.getUTCFullYear() === today.getFullYear() &&\r\n                date.getUTCMonth() === today.getMonth() &&\r\n                date.getUTCDate() === today.getDate()) {\r\n                cls.push('today');\r\n            }\r\n            if (this.dates.contains(date) !== -1)\r\n                cls.push('active');\r\n            if (date.valueOf() < this.o.startDate || date.valueOf() > this.o.endDate ||\r\n                $.inArray(date.getUTCDay(), this.o.daysOfWeekDisabled) !== -1) {\r\n                cls.push('disabled');\r\n            }\r\n            if (this.range) {\r\n                if (date > this.range[0] && date < this.range[this.range.length - 1]) {\r\n                    cls.push('range');\r\n                }\r\n                if ($.inArray(date.valueOf(), this.range) !== -1) {\r\n                    cls.push('selected');\r\n                }\r\n            }\r\n            return cls;\r\n        },\r\n\r\n        fill: function() {\r\n            var d = new Date(this.viewDate),\r\n                year = d.getUTCFullYear(),\r\n                month = d.getUTCMonth(),\r\n                startYear = this.o.startDate !== -Infinity ? this.o.startDate.getUTCFullYear() : -Infinity,\r\n                startMonth = this.o.startDate !== -Infinity ? this.o.startDate.getUTCMonth() : -Infinity,\r\n                endYear = this.o.endDate !== Infinity ? this.o.endDate.getUTCFullYear() : Infinity,\r\n                endMonth = this.o.endDate !== Infinity ? this.o.endDate.getUTCMonth() : Infinity,\r\n                todaytxt = dates[this.o.language].today || dates['en'].today || '',\r\n                cleartxt = dates[this.o.language].clear || dates['en'].clear || '',\r\n                tooltip;\r\n            this.picker.find('.datepicker-days thead th.datepicker-switch')\r\n                .text(dates[this.o.language].months[month] + ' ' + year);\r\n            this.picker.find('tfoot th.today')\r\n                .text(todaytxt)\r\n                .toggle(this.o.todayBtn !== false);\r\n            this.picker.find('tfoot th.clear')\r\n                .text(cleartxt)\r\n                .toggle(this.o.clearBtn !== false);\r\n            this.updateNavArrows();\r\n            this.fillMonths();\r\n            var prevMonth = UTCDate(year, month - 1, 28),\r\n                day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\r\n            prevMonth.setUTCDate(day);\r\n            prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.o.weekStart + 7) % 7);\r\n            var nextMonth = new Date(prevMonth);\r\n            nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n            nextMonth = nextMonth.valueOf();\r\n            var html = [];\r\n            var clsName;\r\n            while (prevMonth.valueOf() < nextMonth) {\r\n                if (prevMonth.getUTCDay() === this.o.weekStart) {\r\n                    html.push('<tr>');\r\n                    if (this.o.calendarWeeks) {\r\n                        // ISO 8601: First week contains first thursday.\r\n                        // ISO also states week starts on Monday, but we can be more abstract here.\r\n                        var\r\n                        // Start of current week: based on weekstart/current date\r\n                        ws = new Date(+prevMonth + (this.o.weekStart - prevMonth.getUTCDay() - 7) % 7 * 864e5),\r\n                            // Thursday of this week\r\n                            th = new Date(Number(ws) + (7 + 4 - ws.getUTCDay()) % 7 * 864e5),\r\n                            // First Thursday of year, year from thursday\r\n                            yth = new Date(Number(yth = UTCDate(th.getUTCFullYear(), 0, 1)) + (7 + 4 - yth.getUTCDay()) % 7 * 864e5),\r\n                            // Calendar week: ms between thursdays, div ms per day, div 7 days\r\n                            calWeek = (th - yth) / 864e5 / 7 + 1;\r\n                        html.push('<td class=\"cw\">' + calWeek + '</td>');\r\n\r\n                    }\r\n                }\r\n                clsName = this.getClassNames(prevMonth);\r\n                clsName.push('day');\r\n\r\n                if (this.o.beforeShowDay !== $.noop) {\r\n                    var before = this.o.beforeShowDay(this._utc_to_local(prevMonth));\r\n                    if (before === undefined)\r\n                        before = {};\r\n                    else if (typeof(before) === 'boolean')\r\n                        before = {\r\n                            enabled: before\r\n                        };\r\n                    else if (typeof(before) === 'string')\r\n                        before = {\r\n                            classes: before\r\n                        };\r\n                    if (before.enabled === false)\r\n                        clsName.push('disabled');\r\n                    if (before.classes)\r\n                        clsName = clsName.concat(before.classes.split(/\\s+/));\r\n                    if (before.tooltip)\r\n                        tooltip = before.tooltip;\r\n                }\r\n\r\n                clsName = $.unique(clsName);\r\n                html.push('<td class=\"' + clsName.join(' ') + '\"' + (tooltip ? ' title=\"' + tooltip + '\"' : '') + '>' + prevMonth.getUTCDate() + '</td>');\r\n                if (prevMonth.getUTCDay() === this.o.weekEnd) {\r\n                    html.push('</tr>');\r\n                }\r\n                prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\r\n            }\r\n            this.picker.find('.datepicker-days tbody').empty().append(html.join(''));\r\n\r\n            var months = this.picker.find('.datepicker-months')\r\n                .find('th:eq(1)')\r\n                .text(year)\r\n                .end()\r\n                .find('span').removeClass('active');\r\n\r\n            $.each(this.dates, function(i, d) {\r\n                if (d.getUTCFullYear() === year)\r\n                    months.eq(d.getUTCMonth()).addClass('active');\r\n            });\r\n\r\n            if (year < startYear || year > endYear) {\r\n                months.addClass('disabled');\r\n            }\r\n            if (year === startYear) {\r\n                months.slice(0, startMonth).addClass('disabled');\r\n            }\r\n            if (year === endYear) {\r\n                months.slice(endMonth + 1).addClass('disabled');\r\n            }\r\n\r\n            html = '';\r\n            year = parseInt(year / 10, 10) * 10;\r\n            var yearCont = this.picker.find('.datepicker-years')\r\n                .find('th:eq(1)')\r\n                .text(year + '-' + (year + 9))\r\n                .end()\r\n                .find('td');\r\n            year -= 1;\r\n            var years = $.map(this.dates, function(d) {\r\n                return d.getUTCFullYear();\r\n            }),\r\n                classes;\r\n            for (var i = -1; i < 11; i++) {\r\n                classes = ['year'];\r\n                if (i === -1)\r\n                    classes.push('old');\r\n                else if (i === 10)\r\n                    classes.push('new');\r\n                if ($.inArray(year, years) !== -1)\r\n                    classes.push('active');\r\n                if (year < startYear || year > endYear)\r\n                    classes.push('disabled');\r\n                html += '<span class=\"' + classes.join(' ') + '\">' + year + '</span>';\r\n                year += 1;\r\n            }\r\n            yearCont.html(html);\r\n        },\r\n\r\n        updateNavArrows: function() {\r\n            if (!this._allow_update)\r\n                return;\r\n\r\n            var d = new Date(this.viewDate),\r\n                year = d.getUTCFullYear(),\r\n                month = d.getUTCMonth();\r\n            switch (this.viewMode) {\r\n                case 0:\r\n                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear() && month <= this.o.startDate.getUTCMonth()) {\r\n                        this.picker.find('.prev').css({\r\n                            visibility: 'hidden'\r\n                        });\r\n                    } else {\r\n                        this.picker.find('.prev').css({\r\n                            visibility: 'visible'\r\n                        });\r\n                    }\r\n                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear() && month >= this.o.endDate.getUTCMonth()) {\r\n                        this.picker.find('.next').css({\r\n                            visibility: 'hidden'\r\n                        });\r\n                    } else {\r\n                        this.picker.find('.next').css({\r\n                            visibility: 'visible'\r\n                        });\r\n                    }\r\n                    break;\r\n                case 1:\r\n                case 2:\r\n                    if (this.o.startDate !== -Infinity && year <= this.o.startDate.getUTCFullYear()) {\r\n                        this.picker.find('.prev').css({\r\n                            visibility: 'hidden'\r\n                        });\r\n                    } else {\r\n                        this.picker.find('.prev').css({\r\n                            visibility: 'visible'\r\n                        });\r\n                    }\r\n                    if (this.o.endDate !== Infinity && year >= this.o.endDate.getUTCFullYear()) {\r\n                        this.picker.find('.next').css({\r\n                            visibility: 'hidden'\r\n                        });\r\n                    } else {\r\n                        this.picker.find('.next').css({\r\n                            visibility: 'visible'\r\n                        });\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n\r\n        click: function(e) {\r\n            e.preventDefault();\r\n            var target = $(e.target).closest('span, td, th'),\r\n                year, month, day;\r\n            if (target.length === 1) {\r\n                switch (target[0].nodeName.toLowerCase()) {\r\n                    case 'th':\r\n                        switch (target[0].className) {\r\n                            case 'datepicker-switch':\r\n                                this.showMode(1);\r\n                                break;\r\n                            case 'prev':\r\n                            case 'next':\r\n                                var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className === 'prev' ? -1 : 1);\r\n                                switch (this.viewMode) {\r\n                                    case 0:\r\n                                        this.viewDate = this.moveMonth(this.viewDate, dir);\r\n                                        this._trigger('changeMonth', this.viewDate);\r\n                                        break;\r\n                                    case 1:\r\n                                    case 2:\r\n                                        this.viewDate = this.moveYear(this.viewDate, dir);\r\n                                        if (this.viewMode === 1)\r\n                                            this._trigger('changeYear', this.viewDate);\r\n                                        break;\r\n                                }\r\n                                this.fill();\r\n                                break;\r\n                            case 'today':\r\n                                var date = new Date();\r\n                                date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n\r\n                                this.showMode(-2);\r\n                                var which = this.o.todayBtn === 'linked' ? null : 'view';\r\n                                this._setDate(date, which);\r\n                                break;\r\n                            case 'clear':\r\n                                var element;\r\n                                if (this.isInput)\r\n                                    element = this.element;\r\n                                else if (this.component)\r\n                                    element = this.element.find('input');\r\n                                if (element)\r\n                                    element.val(\"\").change();\r\n                                this.update();\r\n                                this._trigger('changeDate');\r\n                                if (this.o.autoclose)\r\n                                    this.hide();\r\n                                break;\r\n                        }\r\n                        break;\r\n                    case 'span':\r\n                        if (!target.is('.disabled')) {\r\n                            this.viewDate.setUTCDate(1);\r\n                            if (target.is('.month')) {\r\n                                day = 1;\r\n                                month = target.parent().find('span').index(target);\r\n                                year = this.viewDate.getUTCFullYear();\r\n                                this.viewDate.setUTCMonth(month);\r\n                                this._trigger('changeMonth', this.viewDate);\r\n                                if (this.o.minViewMode === 1) {\r\n                                    this._setDate(UTCDate(year, month, day));\r\n                                }\r\n                            } else {\r\n                                day = 1;\r\n                                month = 0;\r\n                                year = parseInt(target.text(), 10) || 0;\r\n                                this.viewDate.setUTCFullYear(year);\r\n                                this._trigger('changeYear', this.viewDate);\r\n                                if (this.o.minViewMode === 2) {\r\n                                    this._setDate(UTCDate(year, month, day));\r\n                                }\r\n                            }\r\n                            this.showMode(-1);\r\n                            this.fill();\r\n                        }\r\n                        break;\r\n                    case 'td':\r\n                        if (target.is('.day') && !target.is('.disabled')) {\r\n                            day = parseInt(target.text(), 10) || 1;\r\n                            year = this.viewDate.getUTCFullYear();\r\n                            month = this.viewDate.getUTCMonth();\r\n                            if (target.is('.old')) {\r\n                                if (month === 0) {\r\n                                    month = 11;\r\n                                    year -= 1;\r\n                                } else {\r\n                                    month -= 1;\r\n                                }\r\n                            } else if (target.is('.new')) {\r\n                                if (month === 11) {\r\n                                    month = 0;\r\n                                    year += 1;\r\n                                } else {\r\n                                    month += 1;\r\n                                }\r\n                            }\r\n                            this._setDate(UTCDate(year, month, day));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            if (this.picker.is(':visible') && this._focused_from) {\r\n                $(this._focused_from).focus();\r\n            }\r\n            delete this._focused_from;\r\n        },\r\n\r\n        _toggle_multidate: function(date) {\r\n            var ix = this.dates.contains(date);\r\n            if (!date) {\r\n                this.dates.clear();\r\n            } else if (ix !== -1) {\r\n                this.dates.remove(ix);\r\n            } else {\r\n                this.dates.push(date);\r\n            }\r\n            if (typeof this.o.multidate === 'number')\r\n                while (this.dates.length > this.o.multidate)\r\n                    this.dates.remove(0);\r\n        },\r\n\r\n        _setDate: function(date, which) {\r\n            if (!which || which === 'date')\r\n                this._toggle_multidate(date && new Date(date));\r\n            if (!which || which === 'view')\r\n                this.viewDate = date && new Date(date);\r\n\r\n            this.fill();\r\n            this.setValue();\r\n            this._trigger('changeDate');\r\n            var element;\r\n            if (this.isInput) {\r\n                element = this.element;\r\n            } else if (this.component) {\r\n                element = this.element.find('input');\r\n            }\r\n            if (element) {\r\n                element.change();\r\n            }\r\n            if (this.o.autoclose && (!which || which === 'date')) {\r\n                this.hide();\r\n            }\r\n        },\r\n\r\n        moveMonth: function(date, dir) {\r\n            if (!date)\r\n                return undefined;\r\n            if (!dir)\r\n                return date;\r\n            var new_date = new Date(date.valueOf()),\r\n                day = new_date.getUTCDate(),\r\n                month = new_date.getUTCMonth(),\r\n                mag = Math.abs(dir),\r\n                new_month, test;\r\n            dir = dir > 0 ? 1 : -1;\r\n            if (mag === 1) {\r\n                test = dir === -1\r\n                // If going back one month, make sure month is not current month\r\n                // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n                ? function() {\r\n                    return new_date.getUTCMonth() === month;\r\n                }\r\n                // If going forward one month, make sure month is as expected\r\n                // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n                : function() {\r\n                    return new_date.getUTCMonth() !== new_month;\r\n                };\r\n                new_month = month + dir;\r\n                new_date.setUTCMonth(new_month);\r\n                // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n                if (new_month < 0 || new_month > 11)\r\n                    new_month = (new_month + 12) % 12;\r\n            } else {\r\n                // For magnitudes >1, move one month at a time...\r\n                for (var i = 0; i < mag; i++)\r\n                // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n                    new_date = this.moveMonth(new_date, dir);\r\n                // ...then reset the day, keeping it in the new month\r\n                new_month = new_date.getUTCMonth();\r\n                new_date.setUTCDate(day);\r\n                test = function() {\r\n                    return new_month !== new_date.getUTCMonth();\r\n                };\r\n            }\r\n            // Common date-resetting loop -- if date is beyond end of month, make it\r\n            // end of month\r\n            while (test()) {\r\n                new_date.setUTCDate(--day);\r\n                new_date.setUTCMonth(new_month);\r\n            }\r\n            return new_date;\r\n        },\r\n\r\n        moveYear: function(date, dir) {\r\n            return this.moveMonth(date, dir * 12);\r\n        },\r\n\r\n        dateWithinRange: function(date) {\r\n            return date >= this.o.startDate && date <= this.o.endDate;\r\n        },\r\n\r\n        keydown: function(e) {\r\n            if (this.picker.is(':not(:visible)')) {\r\n                if (e.keyCode === 27) // allow escape to hide and re-show picker\r\n                    this.show();\r\n                return;\r\n            }\r\n            var dateChanged = false,\r\n                dir, newDate, newViewDate,\r\n                focusDate = this.focusDate || this.viewDate;\r\n            switch (e.keyCode) {\r\n                case 27: // escape\r\n                    if (this.focusDate) {\r\n                        this.focusDate = null;\r\n                        this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                        this.fill();\r\n                    } else\r\n                        this.hide();\r\n                    e.preventDefault();\r\n                    break;\r\n                case 37: // left\r\n                case 39: // right\r\n                    if (!this.o.keyboardNavigation)\r\n                        break;\r\n                    dir = e.keyCode === 37 ? -1 : 1;\r\n                    if (e.ctrlKey) {\r\n                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\r\n                        newViewDate = this.moveYear(focusDate, dir);\r\n                        this._trigger('changeYear', this.viewDate);\r\n                    } else if (e.shiftKey) {\r\n                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\r\n                        newViewDate = this.moveMonth(focusDate, dir);\r\n                        this._trigger('changeMonth', this.viewDate);\r\n                    } else {\r\n                        newDate = new Date(this.dates.get(-1) || UTCToday());\r\n                        newDate.setUTCDate(newDate.getUTCDate() + dir);\r\n                        newViewDate = new Date(focusDate);\r\n                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir);\r\n                    }\r\n                    if (this.dateWithinRange(newDate)) {\r\n                        this.focusDate = this.viewDate = newViewDate;\r\n                        this.setValue();\r\n                        this.fill();\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n                case 38: // up\r\n                case 40: // down\r\n                    if (!this.o.keyboardNavigation)\r\n                        break;\r\n                    dir = e.keyCode === 38 ? -1 : 1;\r\n                    if (e.ctrlKey) {\r\n                        newDate = this.moveYear(this.dates.get(-1) || UTCToday(), dir);\r\n                        newViewDate = this.moveYear(focusDate, dir);\r\n                        this._trigger('changeYear', this.viewDate);\r\n                    } else if (e.shiftKey) {\r\n                        newDate = this.moveMonth(this.dates.get(-1) || UTCToday(), dir);\r\n                        newViewDate = this.moveMonth(focusDate, dir);\r\n                        this._trigger('changeMonth', this.viewDate);\r\n                    } else {\r\n                        newDate = new Date(this.dates.get(-1) || UTCToday());\r\n                        newDate.setUTCDate(newDate.getUTCDate() + dir * 7);\r\n                        newViewDate = new Date(focusDate);\r\n                        newViewDate.setUTCDate(focusDate.getUTCDate() + dir * 7);\r\n                    }\r\n                    if (this.dateWithinRange(newDate)) {\r\n                        this.focusDate = this.viewDate = newViewDate;\r\n                        this.setValue();\r\n                        this.fill();\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n                case 32: // spacebar\r\n                    // Spacebar is used in manually typing dates in some formats.\r\n                    // As such, its behavior should not be hijacked.\r\n                    break;\r\n                case 13: // enter\r\n                    focusDate = this.focusDate || this.dates.get(-1) || this.viewDate;\r\n                    this._toggle_multidate(focusDate);\r\n                    dateChanged = true;\r\n                    this.focusDate = null;\r\n                    this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                    this.setValue();\r\n                    this.fill();\r\n                    if (this.picker.is(':visible')) {\r\n                        e.preventDefault();\r\n                        if (this.o.autoclose)\r\n                            this.hide();\r\n                    }\r\n                    break;\r\n                case 9: // tab\r\n                    this.focusDate = null;\r\n                    this.viewDate = this.dates.get(-1) || this.viewDate;\r\n                    this.fill();\r\n                    this.hide();\r\n                    break;\r\n            }\r\n            if (dateChanged) {\r\n                if (this.dates.length)\r\n                    this._trigger('changeDate');\r\n                else\r\n                    this._trigger('clearDate');\r\n                var element;\r\n                if (this.isInput) {\r\n                    element = this.element;\r\n                } else if (this.component) {\r\n                    element = this.element.find('input');\r\n                }\r\n                if (element) {\r\n                    element.change();\r\n                }\r\n            }\r\n        },\r\n\r\n        showMode: function(dir) {\r\n            if (dir) {\r\n                this.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + dir));\r\n            }\r\n            this.picker\r\n                .find('>div')\r\n                .hide()\r\n                .filter('.datepicker-' + DPGlobal.modes[this.viewMode].clsName)\r\n                .css('display', 'block');\r\n            this.updateNavArrows();\r\n        }\r\n    };\r\n\r\n    var DateRangePicker = function(element, options) {\r\n        this.element = $(element);\r\n        this.inputs = $.map(options.inputs, function(i) {\r\n            return i.jquery ? i[0] : i;\r\n        });\r\n        delete options.inputs;\r\n\r\n        $(this.inputs)\r\n            .datepicker(options)\r\n            .bind('changeDate', $.proxy(this.dateUpdated, this));\r\n\r\n        this.pickers = $.map(this.inputs, function(i) {\r\n            return $(i).data('datepicker');\r\n        });\r\n        this.updateDates();\r\n    };\r\n    DateRangePicker.prototype = {\r\n        updateDates: function() {\r\n            this.dates = $.map(this.pickers, function(i) {\r\n                return i.getUTCDate();\r\n            });\r\n            this.updateRanges();\r\n        },\r\n        updateRanges: function() {\r\n            var range = $.map(this.dates, function(d) {\r\n                return d.valueOf();\r\n            });\r\n            $.each(this.pickers, function(i, p) {\r\n                p.setRange(range);\r\n            });\r\n        },\r\n        dateUpdated: function(e) {\r\n            // `this.updating` is a workaround for preventing infinite recursion\r\n            // between `changeDate` triggering and `setUTCDate` calling.  Until\r\n            // there is a better mechanism.\r\n            if (this.updating)\r\n                return;\r\n            this.updating = true;\r\n\r\n            var dp = $(e.target).data('datepicker'),\r\n                new_date = dp.getUTCDate(),\r\n                i = $.inArray(e.target, this.inputs),\r\n                l = this.inputs.length;\r\n            if (i === -1)\r\n                return;\r\n\r\n            $.each(this.pickers, function(i, p) {\r\n                if (!p.getUTCDate())\r\n                    p.setUTCDate(new_date);\r\n            });\r\n\r\n            if (new_date < this.dates[i]) {\r\n                // Date being moved earlier/left\r\n                while (i >= 0 && new_date < this.dates[i]) {\r\n                    this.pickers[i--].setUTCDate(new_date);\r\n                }\r\n            } else if (new_date > this.dates[i]) {\r\n                // Date being moved later/right\r\n                while (i < l && new_date > this.dates[i]) {\r\n                    this.pickers[i++].setUTCDate(new_date);\r\n                }\r\n            }\r\n            this.updateDates();\r\n\r\n            delete this.updating;\r\n        },\r\n        remove: function() {\r\n            $.map(this.pickers, function(p) {\r\n                p.remove();\r\n            });\r\n            delete this.element.data().datepicker;\r\n        }\r\n    };\r\n\r\n    function opts_from_el(el, prefix) {\r\n        // Derive options from element data-attrs\r\n        var data = $(el).data(),\r\n            out = {}, inkey,\r\n            replace = new RegExp('^' + prefix.toLowerCase() + '([A-Z])');\r\n        prefix = new RegExp('^' + prefix.toLowerCase());\r\n\r\n        function re_lower(_, a) {\r\n            return a.toLowerCase();\r\n        }\r\n        for (var key in data)\r\n            if (prefix.test(key)) {\r\n                inkey = key.replace(replace, re_lower);\r\n                out[inkey] = data[key];\r\n            }\r\n        return out;\r\n    }\r\n\r\n    function opts_from_locale(lang) {\r\n        // Derive options from locale plugins\r\n        var out = {};\r\n        // Check if \"de-DE\" style date is available, if not language should\r\n        // fallback to 2 letter code eg \"de\"\r\n        if (!dates[lang]) {\r\n            lang = lang.split('-')[0];\r\n            if (!dates[lang])\r\n                return;\r\n        }\r\n        var d = dates[lang];\r\n        $.each(locale_opts, function(i, k) {\r\n            if (k in d)\r\n                out[k] = d[k];\r\n        });\r\n        return out;\r\n    }\r\n\r\n    var old = $.fn.datepicker;\r\n    $.fn.datepicker = function(option) {\r\n        var args = Array.apply(null, arguments);\r\n        args.shift();\r\n        var internal_return;\r\n        this.each(function() {\r\n            var $this = $(this),\r\n                data = $this.data('datepicker'),\r\n                options = typeof option === 'object' && option;\r\n            if (!data) {\r\n                var elopts = opts_from_el(this, 'date'),\r\n                    // Preliminary otions\r\n                    xopts = $.extend({}, defaults, elopts, options),\r\n                    locopts = opts_from_locale(xopts.language),\r\n                    // Options priority: js args, data-attrs, locales, defaults\r\n                    opts = $.extend({}, defaults, locopts, elopts, options);\r\n                if ($this.is('.input-daterange') || opts.inputs) {\r\n                    var ropts = {\r\n                        inputs: opts.inputs || $this.find('input[name=\"start\"], input[name=\"end\"]').toArray()\r\n                    };\r\n                    $this.data('datepicker', (data = new DateRangePicker(this, $.extend(opts, ropts))));\r\n                } else {\r\n                    $this.data('datepicker', (data = new Datepicker(this, opts)));\r\n                }\r\n            }\r\n            if (typeof option === 'string' && typeof data[option] === 'function') {\r\n                internal_return = data[option].apply(data, args);\r\n                if (internal_return !== undefined)\r\n                    return false;\r\n            }\r\n        });\r\n        if (internal_return !== undefined)\r\n            return internal_return;\r\n        else\r\n            return this;\r\n    };\r\n\r\n    var defaults = $.fn.datepicker.defaults = {\r\n        autoclose: false,\r\n        beforeShowDay: $.noop,\r\n        calendarWeeks: false,\r\n        clearBtn: false,\r\n        daysOfWeekDisabled: [],\r\n        endDate: Infinity,\r\n        forceParse: true,\r\n        format: 'mm/dd/yyyy',\r\n        keyboardNavigation: true,\r\n        language: 'en',\r\n        minViewMode: 0,\r\n        multidate: false,\r\n        multidateSeparator: ',',\r\n        orientation: \"auto\",\r\n        rtl: false,\r\n        startDate: -Infinity,\r\n        startView: 0,\r\n        todayBtn: false,\r\n        todayHighlight: false,\r\n        weekStart: 0\r\n    };\r\n    var locale_opts = $.fn.datepicker.locale_opts = [\r\n        'format',\r\n        'rtl',\r\n        'weekStart'\r\n    ];\r\n    $.fn.datepicker.Constructor = Datepicker;\r\n    var dates = $.fn.datepicker.dates = {\r\n        en: {\r\n            days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n            daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n            daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n            months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n            monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n            today: \"Today\",\r\n            clear: \"Clear\"\r\n        }\r\n    };\r\n\r\n    var DPGlobal = {\r\n        modes: [{\r\n            clsName: 'days',\r\n            navFnc: 'Month',\r\n            navStep: 1\r\n        }, {\r\n            clsName: 'months',\r\n            navFnc: 'FullYear',\r\n            navStep: 1\r\n        }, {\r\n            clsName: 'years',\r\n            navFnc: 'FullYear',\r\n            navStep: 10\r\n        }],\r\n        isLeapYear: function(year) {\r\n            return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\r\n        },\r\n        getDaysInMonth: function(year, month) {\r\n            return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\r\n        },\r\n        validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,\r\n        nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\r\n        parseFormat: function(format) {\r\n            // IE treats \\0 as a string end in inputs (truncating the value),\r\n            // so it's a bad format delimiter, anyway\r\n            var separators = format.replace(this.validParts, '\\0').split('\\0'),\r\n                parts = format.match(this.validParts);\r\n            if (!separators || !separators.length || !parts || parts.length === 0) {\r\n                throw new Error(\"Invalid date format.\");\r\n            }\r\n            return {\r\n                separators: separators,\r\n                parts: parts\r\n            };\r\n        },\r\n        parseDate: function(date, format, language) {\r\n            if (!date)\r\n                return undefined;\r\n            if (date instanceof Date)\r\n                return date;\r\n            if (typeof format === 'string')\r\n                format = DPGlobal.parseFormat(format);\r\n            var part_re = /([\\-+]\\d+)([dmwy])/,\r\n                parts = date.match(/([\\-+]\\d+)([dmwy])/g),\r\n                part, dir, i;\r\n            if (/^[\\-+]\\d+[dmwy]([\\s,]+[\\-+]\\d+[dmwy])*$/.test(date)) {\r\n                date = new Date();\r\n                for (i = 0; i < parts.length; i++) {\r\n                    part = part_re.exec(parts[i]);\r\n                    dir = parseInt(part[1]);\r\n                    switch (part[2]) {\r\n                        case 'd':\r\n                            date.setUTCDate(date.getUTCDate() + dir);\r\n                            break;\r\n                        case 'm':\r\n                            date = Datepicker.prototype.moveMonth.call(Datepicker.prototype, date, dir);\r\n                            break;\r\n                        case 'w':\r\n                            date.setUTCDate(date.getUTCDate() + dir * 7);\r\n                            break;\r\n                        case 'y':\r\n                            date = Datepicker.prototype.moveYear.call(Datepicker.prototype, date, dir);\r\n                            break;\r\n                    }\r\n                }\r\n                return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), 0, 0, 0);\r\n            }\r\n            parts = date && date.match(this.nonpunctuation) || [];\r\n            date = new Date();\r\n            var parsed = {},\r\n                setters_order = ['yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'd', 'dd'],\r\n                setters_map = {\r\n                    yyyy: function(d, v) {\r\n                        return d.setUTCFullYear(v);\r\n                    },\r\n                    yy: function(d, v) {\r\n                        return d.setUTCFullYear(2000 + v);\r\n                    },\r\n                    m: function(d, v) {\r\n                        if (isNaN(d))\r\n                            return d;\r\n                        v -= 1;\r\n                        while (v < 0) v += 12;\r\n                        v %= 12;\r\n                        d.setUTCMonth(v);\r\n                        while (d.getUTCMonth() !== v)\r\n                            d.setUTCDate(d.getUTCDate() - 1);\r\n                        return d;\r\n                    },\r\n                    d: function(d, v) {\r\n                        return d.setUTCDate(v);\r\n                    }\r\n                },\r\n                val, filtered;\r\n            setters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n            setters_map['dd'] = setters_map['d'];\r\n            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0);\r\n            var fparts = format.parts.slice();\r\n            // Remove noop parts\r\n            if (parts.length !== fparts.length) {\r\n                fparts = $(fparts).filter(function(i, p) {\r\n                    return $.inArray(p, setters_order) !== -1;\r\n                }).toArray();\r\n            }\r\n            // Process remainder\r\n            function match_part() {\r\n                var m = this.slice(0, parts[i].length),\r\n                    p = parts[i].slice(0, m.length);\r\n                return m === p;\r\n            }\r\n            if (parts.length === fparts.length) {\r\n                var cnt;\r\n                for (i = 0, cnt = fparts.length; i < cnt; i++) {\r\n                    val = parseInt(parts[i], 10);\r\n                    part = fparts[i];\r\n                    if (isNaN(val)) {\r\n                        switch (part) {\r\n                            case 'MM':\r\n                                filtered = $(dates[language].months).filter(match_part);\r\n                                val = $.inArray(filtered[0], dates[language].months) + 1;\r\n                                break;\r\n                            case 'M':\r\n                                filtered = $(dates[language].monthsShort).filter(match_part);\r\n                                val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n                                break;\r\n                        }\r\n                    }\r\n                    parsed[part] = val;\r\n                }\r\n                var _date, s;\r\n                for (i = 0; i < setters_order.length; i++) {\r\n                    s = setters_order[i];\r\n                    if (s in parsed && !isNaN(parsed[s])) {\r\n                        _date = new Date(date);\r\n                        setters_map[s](_date, parsed[s]);\r\n                        if (!isNaN(_date))\r\n                            date = _date;\r\n                    }\r\n                }\r\n            }\r\n            return date;\r\n        },\r\n        formatDate: function(date, format, language) {\r\n            if (!date)\r\n                return '';\r\n            if (typeof format === 'string')\r\n                format = DPGlobal.parseFormat(format);\r\n            var val = {\r\n                d: date.getUTCDate(),\r\n                D: dates[language].daysShort[date.getUTCDay()],\r\n                DD: dates[language].days[date.getUTCDay()],\r\n                m: date.getUTCMonth() + 1,\r\n                M: dates[language].monthsShort[date.getUTCMonth()],\r\n                MM: dates[language].months[date.getUTCMonth()],\r\n                yy: date.getUTCFullYear().toString().substring(2),\r\n                yyyy: date.getUTCFullYear()\r\n            };\r\n            val.dd = (val.d < 10 ? '0' : '') + val.d;\r\n            val.mm = (val.m < 10 ? '0' : '') + val.m;\r\n            date = [];\r\n            var seps = $.extend([], format.separators);\r\n            for (var i = 0, cnt = format.parts.length; i <= cnt; i++) {\r\n                if (seps.length)\r\n                    date.push(seps.shift());\r\n                date.push(val[format.parts[i]]);\r\n            }\r\n            return date.join('');\r\n        },\r\n        headTemplate: '<thead>' +\r\n            '<tr>' +\r\n            '<th class=\"prev\"></th>' +\r\n            '<th colspan=\"5\" class=\"datepicker-switch\"></th>' +\r\n            '<th class=\"next\"></th>' +\r\n            '</tr>' +\r\n            '</thead>',\r\n        contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n        footTemplate: '<tfoot>' +\r\n            '<tr>' +\r\n            '<th colspan=\"7\" class=\"today\"></th>' +\r\n            '</tr>' +\r\n            '<tr>' +\r\n            '<th colspan=\"7\" class=\"clear\"></th>' +\r\n            '</tr>' +\r\n            '</tfoot>'\r\n    };\r\n    DPGlobal.template = '<div class=\"datepicker\">' +\r\n        '<div class=\"datepicker-days\">' +\r\n        '<table class=\" table-condensed\">' +\r\n        DPGlobal.headTemplate +\r\n        '<tbody></tbody>' +\r\n        DPGlobal.footTemplate +\r\n        '</table>' +\r\n        '</div>' +\r\n        '<div class=\"datepicker-months\">' +\r\n        '<table class=\"table-condensed\">' +\r\n        DPGlobal.headTemplate +\r\n        DPGlobal.contTemplate +\r\n        DPGlobal.footTemplate +\r\n        '</table>' +\r\n        '</div>' +\r\n        '<div class=\"datepicker-years\">' +\r\n        '<table class=\"table-condensed\">' +\r\n        DPGlobal.headTemplate +\r\n        DPGlobal.contTemplate +\r\n        DPGlobal.footTemplate +\r\n        '</table>' +\r\n        '</div>' +\r\n        '</div>';\r\n\r\n    $.fn.datepicker.DPGlobal = DPGlobal;\r\n\r\n\r\n    /* DATEPICKER NO CONFLICT\r\n     * =================== */\r\n\r\n    $.fn.datepicker.noConflict = function() {\r\n        $.fn.datepicker = old;\r\n        return this;\r\n    };\r\n\r\n\r\n    /* DATEPICKER DATA-API\r\n     * ================== */\r\n\r\n    $(document).on(\r\n        'focus.datepicker.data-api click.datepicker.data-api',\r\n        '[data-provide=\"datepicker\"]',\r\n        function(e) {\r\n            var $this = $(this);\r\n            if ($this.data('datepicker'))\r\n                return;\r\n            e.preventDefault();\r\n            // component click requires us to explicitly show it\r\n            $this.datepicker('show');\r\n        }\r\n    );\r\n    $(function() {\r\n        $('[data-provide=\"datepicker-inline\"]').datepicker();\r\n    });\r\n\r\n}(window.jQuery));","/*!\r\n * Timepicker Component for Twitter Bootstrap\r\n *\r\n * Copyright 2013 Joris de Wit\r\n *\r\n * Contributors https://github.com/jdewit/bootstrap-timepicker/graphs/contributors\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n(function($, window, document, undefined) {\r\n    'use strict';\r\n\r\n    // TIMEPICKER PUBLIC CLASS DEFINITION\r\n    var Timepicker = function(element, options) {\r\n        this.widget = '';\r\n        this.$element = $(element);\r\n        this.defaultTime = options.defaultTime;\r\n        this.disableFocus = options.disableFocus;\r\n        this.disableMousewheel = options.disableMousewheel;\r\n        this.isOpen = options.isOpen;\r\n        this.minuteStep = options.minuteStep;\r\n        this.modalBackdrop = options.modalBackdrop;\r\n        this.orientation = options.orientation;\r\n        this.secondStep = options.secondStep;\r\n        this.showInputs = options.showInputs;\r\n        this.showMeridian = options.showMeridian;\r\n        this.showSeconds = options.showSeconds;\r\n        this.template = options.template;\r\n        this.appendWidgetTo = options.appendWidgetTo;\r\n        this.showWidgetOnAddonClick = options.showWidgetOnAddonClick;\r\n\r\n        this._init();\r\n    };\r\n\r\n    Timepicker.prototype = {\r\n\r\n        constructor: Timepicker,\r\n        _init: function() {\r\n            var self = this;\r\n\r\n            if (this.showWidgetOnAddonClick && (this.$element.parent().hasClass('input-append') || this.$element.parent().hasClass('input-prepend'))) {\r\n                this.$element.parent('.input-append, .input-prepend').find('.add-on').on({\r\n                    'click.timepicker': $.proxy(this.showWidget, this)\r\n                });\r\n                this.$element.on({\r\n                    'focus.timepicker': $.proxy(this.highlightUnit, this),\r\n                    'click.timepicker': $.proxy(this.highlightUnit, this),\r\n                    'keydown.timepicker': $.proxy(this.elementKeydown, this),\r\n                    'blur.timepicker': $.proxy(this.blurElement, this),\r\n                    'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n                });\r\n            } else {\r\n                if (this.template) {\r\n                    this.$element.on({\r\n                        'focus.timepicker': $.proxy(this.showWidget, this),\r\n                        'click.timepicker': $.proxy(this.showWidget, this),\r\n                        'blur.timepicker': $.proxy(this.blurElement, this),\r\n                        'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n                    });\r\n                } else {\r\n                    this.$element.on({\r\n                        'focus.timepicker': $.proxy(this.highlightUnit, this),\r\n                        'click.timepicker': $.proxy(this.highlightUnit, this),\r\n                        'keydown.timepicker': $.proxy(this.elementKeydown, this),\r\n                        'blur.timepicker': $.proxy(this.blurElement, this),\r\n                        'mousewheel.timepicker DOMMouseScroll.timepicker': $.proxy(this.mousewheel, this)\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this.template !== false) {\r\n                this.$widget = $(this.getTemplate()).on('click', $.proxy(this.widgetClick, this));\r\n            } else {\r\n                this.$widget = false;\r\n            }\r\n\r\n            if (this.showInputs && this.$widget !== false) {\r\n                this.$widget.find('input').each(function() {\r\n                    $(this).on({\r\n                        'click.timepicker': function() {\r\n                            $(this).select();\r\n                        },\r\n                        'keydown.timepicker': $.proxy(self.widgetKeydown, self),\r\n                        'keyup.timepicker': $.proxy(self.widgetKeyup, self)\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.setDefaultTime(this.defaultTime);\r\n        },\r\n\r\n        blurElement: function() {\r\n            this.highlightedUnit = null;\r\n            this.updateFromElementVal();\r\n        },\r\n\r\n        clear: function() {\r\n            this.hour = '';\r\n            this.minute = '';\r\n            this.second = '';\r\n            this.meridian = '';\r\n\r\n            this.$element.val('');\r\n        },\r\n\r\n        decrementHour: function() {\r\n            if (this.showMeridian) {\r\n                if (this.hour === 1) {\r\n                    this.hour = 12;\r\n                } else if (this.hour === 12) {\r\n                    this.hour--;\r\n\r\n                    return this.toggleMeridian();\r\n                } else if (this.hour === 0) {\r\n                    this.hour = 11;\r\n\r\n                    return this.toggleMeridian();\r\n                } else {\r\n                    this.hour--;\r\n                }\r\n            } else {\r\n                if (this.hour <= 0) {\r\n                    this.hour = 23;\r\n                } else {\r\n                    this.hour--;\r\n                }\r\n            }\r\n        },\r\n\r\n        decrementMinute: function(step) {\r\n            var newVal;\r\n\r\n            if (step) {\r\n                newVal = this.minute - step;\r\n            } else {\r\n                newVal = this.minute - this.minuteStep;\r\n            }\r\n\r\n            if (newVal < 0) {\r\n                this.decrementHour();\r\n                this.minute = newVal + 60;\r\n            } else {\r\n                this.minute = newVal;\r\n            }\r\n        },\r\n\r\n        decrementSecond: function() {\r\n            var newVal = this.second - this.secondStep;\r\n\r\n            if (newVal < 0) {\r\n                this.decrementMinute(true);\r\n                this.second = newVal + 60;\r\n            } else {\r\n                this.second = newVal;\r\n            }\r\n        },\r\n\r\n        elementKeydown: function(e) {\r\n            switch (e.keyCode) {\r\n                case 9: //tab\r\n                case 27: // escape\r\n                    this.updateFromElementVal();\r\n                    break;\r\n                case 37: // left arrow\r\n                    e.preventDefault();\r\n                    this.highlightPrevUnit();\r\n                    break;\r\n                case 38: // up arrow\r\n                    e.preventDefault();\r\n                    switch (this.highlightedUnit) {\r\n                        case 'hour':\r\n                            this.incrementHour();\r\n                            this.highlightHour();\r\n                            break;\r\n                        case 'minute':\r\n                            this.incrementMinute();\r\n                            this.highlightMinute();\r\n                            break;\r\n                        case 'second':\r\n                            this.incrementSecond();\r\n                            this.highlightSecond();\r\n                            break;\r\n                        case 'meridian':\r\n                            this.toggleMeridian();\r\n                            this.highlightMeridian();\r\n                            break;\r\n                    }\r\n                    this.update();\r\n                    break;\r\n                case 39: // right arrow\r\n                    e.preventDefault();\r\n                    this.highlightNextUnit();\r\n                    break;\r\n                case 40: // down arrow\r\n                    e.preventDefault();\r\n                    switch (this.highlightedUnit) {\r\n                        case 'hour':\r\n                            this.decrementHour();\r\n                            this.highlightHour();\r\n                            break;\r\n                        case 'minute':\r\n                            this.decrementMinute();\r\n                            this.highlightMinute();\r\n                            break;\r\n                        case 'second':\r\n                            this.decrementSecond();\r\n                            this.highlightSecond();\r\n                            break;\r\n                        case 'meridian':\r\n                            this.toggleMeridian();\r\n                            this.highlightMeridian();\r\n                            break;\r\n                    }\r\n\r\n                    this.update();\r\n                    break;\r\n            }\r\n        },\r\n\r\n        getCursorPosition: function() {\r\n            var input = this.$element.get(0);\r\n\r\n            if ('selectionStart' in input) { // Standard-compliant browsers\r\n\r\n                return input.selectionStart;\r\n            } else if (document.selection) { // IE fix\r\n                input.focus();\r\n                var sel = document.selection.createRange(),\r\n                    selLen = document.selection.createRange().text.length;\r\n\r\n                sel.moveStart('character', -input.value.length);\r\n\r\n                return sel.text.length - selLen;\r\n            }\r\n        },\r\n\r\n        getTemplate: function() {\r\n            var template,\r\n                hourTemplate,\r\n                minuteTemplate,\r\n                secondTemplate,\r\n                meridianTemplate,\r\n                templateContent;\r\n\r\n            if (this.showInputs) {\r\n                hourTemplate = '<input type=\"text\" class=\"bootstrap-timepicker-hour\" maxlength=\"2\"/>';\r\n                minuteTemplate = '<input type=\"text\" class=\"bootstrap-timepicker-minute\" maxlength=\"2\"/>';\r\n                secondTemplate = '<input type=\"text\" class=\"bootstrap-timepicker-second\" maxlength=\"2\"/>';\r\n                meridianTemplate = '<input type=\"text\" class=\"bootstrap-timepicker-meridian\" maxlength=\"2\"/>';\r\n            } else {\r\n                hourTemplate = '<span class=\"bootstrap-timepicker-hour\"></span>';\r\n                minuteTemplate = '<span class=\"bootstrap-timepicker-minute\"></span>';\r\n                secondTemplate = '<span class=\"bootstrap-timepicker-second\"></span>';\r\n                meridianTemplate = '<span class=\"bootstrap-timepicker-meridian\"></span>';\r\n            }\r\n\r\n            templateContent = '<table>' +\r\n                '<tr>' +\r\n                '<td><a href=\"#\" data-action=\"incrementHour\"><i class=\"fa fa-angle-up\"></i></a></td>' +\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td><a href=\"#\" data-action=\"incrementMinute\"><i class=\"fa fa-angle-up\"></i></a></td>' +\r\n                (this.showSeconds ?\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td><a href=\"#\" data-action=\"incrementSecond\"><i class=\"fa fa-angle-up\"></i></a></td>' : '') +\r\n                (this.showMeridian ?\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td class=\"meridian-column\"><a href=\"#\" data-action=\"toggleMeridian\"><i class=\"fa fa-angle-up\"></i></a></td>' : '') +\r\n                '</tr>' +\r\n                '<tr>' +\r\n                '<td>' + hourTemplate + '</td> ' +\r\n                '<td class=\"separator\">:</td>' +\r\n                '<td>' + minuteTemplate + '</td> ' +\r\n                (this.showSeconds ?\r\n                '<td class=\"separator\">:</td>' +\r\n                '<td>' + secondTemplate + '</td>' : '') +\r\n                (this.showMeridian ?\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td>' + meridianTemplate + '</td>' : '') +\r\n                '</tr>' +\r\n                '<tr>' +\r\n                '<td><a href=\"#\" data-action=\"decrementHour\"><i class=\"fa fa-angle-down\"></i></a></td>' +\r\n                '<td class=\"separator\"></td>' +\r\n                '<td><a href=\"#\" data-action=\"decrementMinute\"><i class=\"fa fa-angle-down\"></i></a></td>' +\r\n                (this.showSeconds ?\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td><a href=\"#\" data-action=\"decrementSecond\"><i class=\"fa fa-angle-down\"></i></a></td>' : '') +\r\n                (this.showMeridian ?\r\n                '<td class=\"separator\">&nbsp;</td>' +\r\n                '<td><a href=\"#\" data-action=\"toggleMeridian\"><i class=\"fa fa-angle-down\"></i></a></td>' : '') +\r\n                '</tr>' +\r\n                '</table>';\r\n\r\n            switch (this.template) {\r\n                case 'modal':\r\n                    template = '<div class=\"bootstrap-timepicker-widget modal hide fade in\" data-backdrop=\"' + (this.modalBackdrop ? 'true' : 'false') + '\">' +\r\n                        '<div class=\"modal-header\">' +\r\n                        '<a href=\"#\" class=\"close\" data-dismiss=\"modal\">×</a>' +\r\n                        '<h3>Pick a Time</h3>' +\r\n                        '</div>' +\r\n                        '<div class=\"modal-content\">' +\r\n                        templateContent +\r\n                        '</div>' +\r\n                        '<div class=\"modal-footer\">' +\r\n                        '<a href=\"#\" class=\"btn btn-primary\" data-dismiss=\"modal\">OK</a>' +\r\n                        '</div>' +\r\n                        '</div>';\r\n                    break;\r\n                case 'dropdown':\r\n                    template = '<div class=\"bootstrap-timepicker-widget dropdown-menu\">' + templateContent + '</div>';\r\n                    break;\r\n            }\r\n\r\n            return template;\r\n        },\r\n\r\n        getTime: function() {\r\n            if (this.hour === '') {\r\n                return '';\r\n            }\r\n\r\n            return this.hour + ':' + (this.minute.toString().length === 1 ? '0' + this.minute : this.minute) + (this.showSeconds ? ':' + (this.second.toString().length === 1 ? '0' + this.second : this.second) : '') + (this.showMeridian ? ' ' + this.meridian : '');\r\n        },\r\n\r\n        hideWidget: function() {\r\n            if (this.isOpen === false) {\r\n                return;\r\n            }\r\n\r\n            this.$element.trigger({\r\n                'type': 'hide.timepicker',\r\n                'time': {\r\n                    'value': this.getTime(),\r\n                    'hours': this.hour,\r\n                    'minutes': this.minute,\r\n                    'seconds': this.second,\r\n                    'meridian': this.meridian\r\n                }\r\n            });\r\n\r\n            if (this.template === 'modal' && this.$widget.modal) {\r\n                this.$widget.modal('hide');\r\n            } else {\r\n                this.$widget.removeClass('open');\r\n            }\r\n\r\n            $(document).off('mousedown.timepicker, touchend.timepicker');\r\n\r\n            this.isOpen = false;\r\n            // show/hide approach taken by datepicker\r\n            this.$widget.detach();\r\n        },\r\n\r\n        highlightUnit: function() {\r\n            this.position = this.getCursorPosition();\r\n            if (this.position >= 0 && this.position <= 2) {\r\n                this.highlightHour();\r\n            } else if (this.position >= 3 && this.position <= 5) {\r\n                this.highlightMinute();\r\n            } else if (this.position >= 6 && this.position <= 8) {\r\n                if (this.showSeconds) {\r\n                    this.highlightSecond();\r\n                } else {\r\n                    this.highlightMeridian();\r\n                }\r\n            } else if (this.position >= 9 && this.position <= 11) {\r\n                this.highlightMeridian();\r\n            }\r\n        },\r\n\r\n        highlightNextUnit: function() {\r\n            switch (this.highlightedUnit) {\r\n                case 'hour':\r\n                    this.highlightMinute();\r\n                    break;\r\n                case 'minute':\r\n                    if (this.showSeconds) {\r\n                        this.highlightSecond();\r\n                    } else if (this.showMeridian) {\r\n                        this.highlightMeridian();\r\n                    } else {\r\n                        this.highlightHour();\r\n                    }\r\n                    break;\r\n                case 'second':\r\n                    if (this.showMeridian) {\r\n                        this.highlightMeridian();\r\n                    } else {\r\n                        this.highlightHour();\r\n                    }\r\n                    break;\r\n                case 'meridian':\r\n                    this.highlightHour();\r\n                    break;\r\n            }\r\n        },\r\n\r\n        highlightPrevUnit: function() {\r\n            switch (this.highlightedUnit) {\r\n                case 'hour':\r\n                    if (this.showMeridian) {\r\n                        this.highlightMeridian();\r\n                    } else if (this.showSeconds) {\r\n                        this.highlightSecond();\r\n                    } else {\r\n                        this.highlightMinute();\r\n                    }\r\n                    break;\r\n                case 'minute':\r\n                    this.highlightHour();\r\n                    break;\r\n                case 'second':\r\n                    this.highlightMinute();\r\n                    break;\r\n                case 'meridian':\r\n                    if (this.showSeconds) {\r\n                        this.highlightSecond();\r\n                    } else {\r\n                        this.highlightMinute();\r\n                    }\r\n                    break;\r\n            }\r\n        },\r\n\r\n        highlightHour: function() {\r\n            var $element = this.$element.get(0),\r\n                self = this;\r\n\r\n            this.highlightedUnit = 'hour';\r\n\r\n            if ($element.setSelectionRange) {\r\n                setTimeout(function() {\r\n                    if (self.hour < 10) {\r\n                        $element.setSelectionRange(0, 1);\r\n                    } else {\r\n                        $element.setSelectionRange(0, 2);\r\n                    }\r\n                }, 0);\r\n            }\r\n        },\r\n\r\n        highlightMinute: function() {\r\n            var $element = this.$element.get(0),\r\n                self = this;\r\n\r\n            this.highlightedUnit = 'minute';\r\n\r\n            if ($element.setSelectionRange) {\r\n                setTimeout(function() {\r\n                    if (self.hour < 10) {\r\n                        $element.setSelectionRange(2, 4);\r\n                    } else {\r\n                        $element.setSelectionRange(3, 5);\r\n                    }\r\n                }, 0);\r\n            }\r\n        },\r\n\r\n        highlightSecond: function() {\r\n            var $element = this.$element.get(0),\r\n                self = this;\r\n\r\n            this.highlightedUnit = 'second';\r\n\r\n            if ($element.setSelectionRange) {\r\n                setTimeout(function() {\r\n                    if (self.hour < 10) {\r\n                        $element.setSelectionRange(5, 7);\r\n                    } else {\r\n                        $element.setSelectionRange(6, 8);\r\n                    }\r\n                }, 0);\r\n            }\r\n        },\r\n\r\n        highlightMeridian: function() {\r\n            var $element = this.$element.get(0),\r\n                self = this;\r\n\r\n            this.highlightedUnit = 'meridian';\r\n\r\n            if ($element.setSelectionRange) {\r\n                if (this.showSeconds) {\r\n                    setTimeout(function() {\r\n                        if (self.hour < 10) {\r\n                            $element.setSelectionRange(8, 10);\r\n                        } else {\r\n                            $element.setSelectionRange(9, 11);\r\n                        }\r\n                    }, 0);\r\n                } else {\r\n                    setTimeout(function() {\r\n                        if (self.hour < 10) {\r\n                            $element.setSelectionRange(5, 7);\r\n                        } else {\r\n                            $element.setSelectionRange(6, 8);\r\n                        }\r\n                    }, 0);\r\n                }\r\n            }\r\n        },\r\n\r\n        incrementHour: function() {\r\n            if (this.showMeridian) {\r\n                if (this.hour === 11) {\r\n                    this.hour++;\r\n                    return this.toggleMeridian();\r\n                } else if (this.hour === 12) {\r\n                    this.hour = 0;\r\n                }\r\n            }\r\n            if (this.hour === 23) {\r\n                this.hour = 0;\r\n\r\n                return;\r\n            }\r\n            this.hour++;\r\n        },\r\n\r\n        incrementMinute: function(step) {\r\n            var newVal;\r\n\r\n            if (step) {\r\n                newVal = this.minute + step;\r\n            } else {\r\n                newVal = this.minute + this.minuteStep - (this.minute % this.minuteStep);\r\n            }\r\n\r\n            if (newVal > 59) {\r\n                this.incrementHour();\r\n                this.minute = newVal - 60;\r\n            } else {\r\n                this.minute = newVal;\r\n            }\r\n        },\r\n\r\n        incrementSecond: function() {\r\n            var newVal = this.second + this.secondStep - (this.second % this.secondStep);\r\n\r\n            if (newVal > 59) {\r\n                this.incrementMinute(true);\r\n                this.second = newVal - 60;\r\n            } else {\r\n                this.second = newVal;\r\n            }\r\n        },\r\n\r\n        mousewheel: function(e) {\r\n            if (this.disableMousewheel) {\r\n                return;\r\n            }\r\n\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail,\r\n                scrollTo = null;\r\n\r\n            if (e.type === 'mousewheel') {\r\n                scrollTo = (e.originalEvent.wheelDelta * -1);\r\n            } else if (e.type === 'DOMMouseScroll') {\r\n                scrollTo = 40 * e.originalEvent.detail;\r\n            }\r\n\r\n            if (scrollTo) {\r\n                e.preventDefault();\r\n                $(this).scrollTop(scrollTo + $(this).scrollTop());\r\n            }\r\n\r\n            switch (this.highlightedUnit) {\r\n                case 'minute':\r\n                    if (delta > 0) {\r\n                        this.incrementMinute();\r\n                    } else {\r\n                        this.decrementMinute();\r\n                    }\r\n                    this.highlightMinute();\r\n                    break;\r\n                case 'second':\r\n                    if (delta > 0) {\r\n                        this.incrementSecond();\r\n                    } else {\r\n                        this.decrementSecond();\r\n                    }\r\n                    this.highlightSecond();\r\n                    break;\r\n                case 'meridian':\r\n                    this.toggleMeridian();\r\n                    this.highlightMeridian();\r\n                    break;\r\n                default:\r\n                    if (delta > 0) {\r\n                        this.incrementHour();\r\n                    } else {\r\n                        this.decrementHour();\r\n                    }\r\n                    this.highlightHour();\r\n                    break;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        // This method was adapted from bootstrap-datepicker.\r\n        place: function() {\r\n            if (this.isInline) {\r\n                return;\r\n            }\r\n            var widgetWidth = this.$widget.outerWidth(),\r\n                widgetHeight = this.$widget.outerHeight(),\r\n                visualPadding = 10,\r\n                windowWidth =\r\n                    $(window).width(),\r\n                windowHeight = $(window).height(),\r\n                scrollTop = $(window).scrollTop();\r\n\r\n            var zIndex = parseInt(this.$element.parents().filter(function() {}).first().css('z-index'), 10) + 10;\r\n            var offset = this.component ? this.component.parent().offset() : this.$element.offset();\r\n            var height = this.component ? this.component.outerHeight(true) : this.$element.outerHeight(false);\r\n            var width = this.component ? this.component.outerWidth(true) : this.$element.outerWidth(false);\r\n            var left = offset.left,\r\n                top = offset.top;\r\n\r\n            this.$widget.removeClass('timepicker-orient-top timepicker-orient-bottom timepicker-orient-right timepicker-orient-left');\r\n\r\n            if (this.orientation.x !== 'auto') {\r\n                this.picker.addClass('datepicker-orient-' + this.orientation.x);\r\n                if (this.orientation.x === 'right') {\r\n                    left -= widgetWidth - width;\r\n                }\r\n            } else {\r\n                // auto x orientation is best-placement: if it crosses a window edge, fudge it sideways\r\n                // Default to left\r\n                this.$widget.addClass('timepicker-orient-left');\r\n                if (offset.left < 0) {\r\n                    left -= offset.left - visualPadding;\r\n                } else if (offset.left + widgetWidth > windowWidth) {\r\n                    left = windowWidth - widgetWidth - visualPadding;\r\n                }\r\n            }\r\n            // auto y orientation is best-situation: top or bottom, no fudging, decision based on which shows more of the widget\r\n            var yorient = this.orientation.y,\r\n                topOverflow, bottomOverflow;\r\n            if (yorient === 'auto') {\r\n                topOverflow = -scrollTop + offset.top - widgetHeight;\r\n                bottomOverflow = scrollTop + windowHeight - (offset.top + height + widgetHeight);\r\n                if (Math.max(topOverflow, bottomOverflow) === bottomOverflow) {\r\n                    yorient = 'top';\r\n                } else {\r\n                    yorient = 'bottom';\r\n                }\r\n            }\r\n            this.$widget.addClass('timepicker-orient-' + yorient);\r\n            if (yorient === 'top') {\r\n                top += height;\r\n            } else {\r\n                top -= widgetHeight + parseInt(this.$widget.css('padding-top'), 10);\r\n            }\r\n\r\n            this.$widget.css({\r\n                top: top,\r\n                left: left,\r\n                zIndex: zIndex\r\n            });\r\n        },\r\n\r\n        remove: function() {\r\n            $('document').off('.timepicker');\r\n            if (this.$widget) {\r\n                this.$widget.remove();\r\n            }\r\n            delete this.$element.data().timepicker;\r\n        },\r\n\r\n        setDefaultTime: function(defaultTime) {\r\n            if (!this.$element.val()) {\r\n                if (defaultTime === 'current') {\r\n                    var dTime = new Date(),\r\n                        hours = dTime.getHours(),\r\n                        minutes = dTime.getMinutes(),\r\n                        seconds = dTime.getSeconds(),\r\n                        meridian = 'AM';\r\n\r\n                    if (seconds !== 0) {\r\n                        seconds = Math.ceil(dTime.getSeconds() / this.secondStep) * this.secondStep;\r\n                        if (seconds === 60) {\r\n                            minutes += 1;\r\n                            seconds = 0;\r\n                        }\r\n                    }\r\n\r\n                    if (minutes !== 0) {\r\n                        minutes = Math.ceil(dTime.getMinutes() / this.minuteStep) * this.minuteStep;\r\n                        if (minutes === 60) {\r\n                            hours += 1;\r\n                            minutes = 0;\r\n                        }\r\n                    }\r\n\r\n                    if (this.showMeridian) {\r\n                        if (hours === 0) {\r\n                            hours = 12;\r\n                        } else if (hours >= 12) {\r\n                            if (hours > 12) {\r\n                                hours = hours - 12;\r\n                            }\r\n                            meridian = 'PM';\r\n                        } else {\r\n                            meridian = 'AM';\r\n                        }\r\n                    }\r\n\r\n                    this.hour = hours;\r\n                    this.minute = minutes;\r\n                    this.second = seconds;\r\n                    this.meridian = meridian;\r\n\r\n                    this.update();\r\n\r\n                } else if (defaultTime === false) {\r\n                    this.hour = 0;\r\n                    this.minute = 0;\r\n                    this.second = 0;\r\n                    this.meridian = 'AM';\r\n                } else {\r\n                    this.setTime(defaultTime);\r\n                }\r\n            } else {\r\n                this.updateFromElementVal();\r\n            }\r\n        },\r\n\r\n        setTime: function(time, ignoreWidget) {\r\n            if (!time) {\r\n                this.clear();\r\n                return;\r\n            }\r\n\r\n            var timeArray,\r\n                hour,\r\n                minute,\r\n                second,\r\n                meridian;\r\n\r\n            if (typeof time === 'object' && time.getMonth) {\r\n                // this is a date object\r\n                hour = time.getHours();\r\n                minute = time.getMinutes();\r\n                second = time.getSeconds();\r\n\r\n                if (this.showMeridian) {\r\n                    meridian = 'AM';\r\n                    if (hour > 12) {\r\n                        meridian = 'PM';\r\n                        hour = hour % 12;\r\n                    }\r\n\r\n                    if (hour === 12) {\r\n                        meridian = 'PM';\r\n                    }\r\n                }\r\n            } else {\r\n                if (time.match(/p/i) !== null) {\r\n                    meridian = 'PM';\r\n                } else {\r\n                    meridian = 'AM';\r\n                }\r\n\r\n                time = time.replace(/[^0-9\\:]/g, '');\r\n\r\n                timeArray = time.split(':');\r\n\r\n                hour = timeArray[0] ? timeArray[0].toString() : timeArray.toString();\r\n                minute = timeArray[1] ? timeArray[1].toString() : '';\r\n                second = timeArray[2] ? timeArray[2].toString() : '';\r\n\r\n                // idiot proofing\r\n                if (hour.length > 4) {\r\n                    second = hour.substr(4, 2);\r\n                }\r\n                if (hour.length > 2) {\r\n                    minute = hour.substr(2, 2);\r\n                    hour = hour.substr(0, 2);\r\n                }\r\n                if (minute.length > 2) {\r\n                    second = minute.substr(2, 2);\r\n                    minute = minute.substr(0, 2);\r\n                }\r\n                if (second.length > 2) {\r\n                    second = second.substr(2, 2);\r\n                }\r\n\r\n                hour = parseInt(hour, 10);\r\n                minute = parseInt(minute, 10);\r\n                second = parseInt(second, 10);\r\n\r\n                if (isNaN(hour)) {\r\n                    hour = 0;\r\n                }\r\n                if (isNaN(minute)) {\r\n                    minute = 0;\r\n                }\r\n                if (isNaN(second)) {\r\n                    second = 0;\r\n                }\r\n\r\n                if (this.showMeridian) {\r\n                    if (hour < 1) {\r\n                        hour = 1;\r\n                    } else if (hour > 12) {\r\n                        hour = 12;\r\n                    }\r\n                } else {\r\n                    if (hour >= 24) {\r\n                        hour = 23;\r\n                    } else if (hour < 0) {\r\n                        hour = 0;\r\n                    }\r\n                    if (hour < 13 && meridian === 'PM') {\r\n                        hour = hour + 12;\r\n                    }\r\n                }\r\n\r\n                if (minute < 0) {\r\n                    minute = 0;\r\n                } else if (minute >= 60) {\r\n                    minute = 59;\r\n                }\r\n\r\n                if (this.showSeconds) {\r\n                    if (isNaN(second)) {\r\n                        second = 0;\r\n                    } else if (second < 0) {\r\n                        second = 0;\r\n                    } else if (second >= 60) {\r\n                        second = 59;\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.hour = hour;\r\n            this.minute = minute;\r\n            this.second = second;\r\n            this.meridian = meridian;\r\n\r\n            this.update(ignoreWidget);\r\n        },\r\n\r\n        showWidget: function() {\r\n            if (this.isOpen) {\r\n                return;\r\n            }\r\n\r\n            if (this.$element.is(':disabled')) {\r\n                return;\r\n            }\r\n\r\n            // show/hide approach taken by datepicker\r\n            this.$widget.appendTo(this.appendWidgetTo);\r\n            var self = this;\r\n            $(document).on('mousedown.timepicker, touchend.timepicker', function(e) {\r\n                // This condition was inspired by bootstrap-datepicker.\r\n                // The element the timepicker is invoked on is the input but it has a sibling for addon/button.\r\n                if (!(self.$element.parent().find(e.target).length ||\r\n                    self.$widget.is(e.target) ||\r\n                    self.$widget.find(e.target).length)) {\r\n                    self.hideWidget();\r\n                }\r\n            });\r\n\r\n            this.$element.trigger({\r\n                'type': 'show.timepicker',\r\n                'time': {\r\n                    'value': this.getTime(),\r\n                    'hours': this.hour,\r\n                    'minutes': this.minute,\r\n                    'seconds': this.second,\r\n                    'meridian': this.meridian\r\n                }\r\n            });\r\n\r\n            this.place();\r\n            if (this.disableFocus) {\r\n                this.$element.blur();\r\n            }\r\n\r\n            // widget shouldn't be empty on open\r\n            if (this.hour === '') {\r\n                if (this.defaultTime) {\r\n                    this.setDefaultTime(this.defaultTime);\r\n                } else {\r\n                    this.setTime('0:0:0');\r\n                }\r\n            }\r\n\r\n            if (this.template === 'modal' && this.$widget.modal) {\r\n                this.$widget.modal('show').on('hidden', $.proxy(this.hideWidget, this));\r\n            } else {\r\n                if (this.isOpen === false) {\r\n                    this.$widget.addClass('open');\r\n                }\r\n            }\r\n\r\n            this.isOpen = true;\r\n        },\r\n\r\n        toggleMeridian: function() {\r\n            this.meridian = this.meridian === 'AM' ? 'PM' : 'AM';\r\n        },\r\n\r\n        update: function(ignoreWidget) {\r\n            this.updateElement();\r\n            if (!ignoreWidget) {\r\n                this.updateWidget();\r\n            }\r\n\r\n            this.$element.trigger({\r\n                'type': 'changeTime.timepicker',\r\n                'time': {\r\n                    'value': this.getTime(),\r\n                    'hours': this.hour,\r\n                    'minutes': this.minute,\r\n                    'seconds': this.second,\r\n                    'meridian': this.meridian\r\n                }\r\n            });\r\n        },\r\n\r\n        updateElement: function() {\r\n            this.$element.val(this.getTime()).change();\r\n        },\r\n\r\n        updateFromElementVal: function() {\r\n            this.setTime(this.$element.val());\r\n        },\r\n\r\n        updateWidget: function() {\r\n            if (this.$widget === false) {\r\n                return;\r\n            }\r\n\r\n            var hour = this.hour,\r\n                minute = this.minute.toString().length === 1 ? '0' + this.minute : this.minute,\r\n                second = this.second.toString().length === 1 ? '0' + this.second : this.second;\r\n\r\n            if (this.showInputs) {\r\n                this.$widget.find('input.bootstrap-timepicker-hour').val(hour);\r\n                this.$widget.find('input.bootstrap-timepicker-minute').val(minute);\r\n\r\n                if (this.showSeconds) {\r\n                    this.$widget.find('input.bootstrap-timepicker-second').val(second);\r\n                }\r\n                if (this.showMeridian) {\r\n                    this.$widget.find('input.bootstrap-timepicker-meridian').val(this.meridian);\r\n                }\r\n            } else {\r\n                this.$widget.find('span.bootstrap-timepicker-hour').text(hour);\r\n                this.$widget.find('span.bootstrap-timepicker-minute').text(minute);\r\n\r\n                if (this.showSeconds) {\r\n                    this.$widget.find('span.bootstrap-timepicker-second').text(second);\r\n                }\r\n                if (this.showMeridian) {\r\n                    this.$widget.find('span.bootstrap-timepicker-meridian').text(this.meridian);\r\n                }\r\n            }\r\n        },\r\n\r\n        updateFromWidgetInputs: function() {\r\n            if (this.$widget === false) {\r\n                return;\r\n            }\r\n\r\n            var t = this.$widget.find('input.bootstrap-timepicker-hour').val() + ':' +\r\n                this.$widget.find('input.bootstrap-timepicker-minute').val() +\r\n                (this.showSeconds ? ':' + this.$widget.find('input.bootstrap-timepicker-second').val() : '') +\r\n                (this.showMeridian ? this.$widget.find('input.bootstrap-timepicker-meridian').val() : '');\r\n\r\n            this.setTime(t, true);\r\n        },\r\n\r\n        widgetClick: function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            var $input = $(e.target),\r\n                action = $input.closest('a').data('action');\r\n\r\n            if (action) {\r\n                this[action]();\r\n            }\r\n            this.update();\r\n\r\n            if ($input.is('input')) {\r\n                $input.get(0).setSelectionRange(0, 2);\r\n            }\r\n        },\r\n\r\n        widgetKeydown: function(e) {\r\n            var $input = $(e.target),\r\n                name = $input.attr('class').replace('bootstrap-timepicker-', '');\r\n\r\n            switch (e.keyCode) {\r\n                case 9: //tab\r\n                    if ((this.showMeridian && name === 'meridian') || (this.showSeconds && name === 'second') || (!this.showMeridian && !this.showSeconds && name === 'minute')) {\r\n                        return this.hideWidget();\r\n                    }\r\n                    break;\r\n                case 27: // escape\r\n                    this.hideWidget();\r\n                    break;\r\n                case 38: // up arrow\r\n                    e.preventDefault();\r\n                    switch (name) {\r\n                        case 'hour':\r\n                            this.incrementHour();\r\n                            break;\r\n                        case 'minute':\r\n                            this.incrementMinute();\r\n                            break;\r\n                        case 'second':\r\n                            this.incrementSecond();\r\n                            break;\r\n                        case 'meridian':\r\n                            this.toggleMeridian();\r\n                            break;\r\n                    }\r\n                    this.setTime(this.getTime());\r\n                    $input.get(0).setSelectionRange(0, 2);\r\n                    break;\r\n                case 40: // down arrow\r\n                    e.preventDefault();\r\n                    switch (name) {\r\n                        case 'hour':\r\n                            this.decrementHour();\r\n                            break;\r\n                        case 'minute':\r\n                            this.decrementMinute();\r\n                            break;\r\n                        case 'second':\r\n                            this.decrementSecond();\r\n                            break;\r\n                        case 'meridian':\r\n                            this.toggleMeridian();\r\n                            break;\r\n                    }\r\n                    this.setTime(this.getTime());\r\n                    $input.get(0).setSelectionRange(0, 2);\r\n                    break;\r\n            }\r\n        },\r\n\r\n        widgetKeyup: function(e) {\r\n            if ((e.keyCode === 65) || (e.keyCode === 77) || (e.keyCode === 80) || (e.keyCode === 46) || (e.keyCode === 8) || (e.keyCode >= 46 && e.keyCode <= 57)) {\r\n                this.updateFromWidgetInputs();\r\n            }\r\n        }\r\n    };\r\n\r\n    //TIMEPICKER PLUGIN DEFINITION\r\n    $.fn.timepicker = function(option) {\r\n        var args = Array.apply(null, arguments);\r\n        args.shift();\r\n        return this.each(function() {\r\n            var $this = $(this),\r\n                data = $this.data('timepicker'),\r\n                options = typeof option === 'object' && option;\r\n\r\n            if (!data) {\r\n                $this.data('timepicker', (data = new Timepicker(this, $.extend({}, $.fn.timepicker.defaults, options, $(this).data()))));\r\n            }\r\n\r\n            if (typeof option === 'string') {\r\n                data[option].apply(data, args);\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.timepicker.defaults = {\r\n        defaultTime: 'current',\r\n        disableFocus: false,\r\n        disableMousewheel: false,\r\n        isOpen: false,\r\n        minuteStep: 15,\r\n        modalBackdrop: false,\r\n        orientation: {\r\n            x: 'auto',\r\n            y: 'auto'\r\n        },\r\n        secondStep: 15,\r\n        showSeconds: false,\r\n        showInputs: true,\r\n        showMeridian: true,\r\n        template: 'dropdown',\r\n        appendWidgetTo: 'body',\r\n        showWidgetOnAddonClick: true\r\n    };\r\n\r\n    $.fn.timepicker.Constructor = Timepicker;\r\n\r\n})(jQuery, window, document);","/*\r\n * Dropit v1.0\r\n * http://dev7studios.com/dropit\r\n *\r\n * Copyright 2012, Dev7studios\r\n * Free to use and abuse under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n */\r\n\r\n;\r\n(function($) {\r\n\r\n    $.fn.dropit = function(method) {\r\n\r\n        var methods = {\r\n\r\n            init: function(options) {\r\n                this.dropit.settings = $.extend({}, this.dropit.defaults, options);\r\n                return this.each(function() {\r\n                    var $el = $(this),\r\n                        el = this,\r\n                        settings = $.fn.dropit.settings;\r\n\r\n                    // // Hide initial submenus\r\n                    // $el.addClass('dropit')\r\n                    //     .find('>' + settings.triggerParentEl + ':has(' + settings.submenuEl + ')').addClass('dropit-trigger')\r\n\r\n                    // Open on click\r\n                    $el.on(settings.action, settings.this, function() {\r\n                        if ($(this).hasClass('active-drop')) {\r\n                            $(this).removeClass('active-drop');\r\n                            return false;\r\n                        }\r\n                        settings.beforeHide.call(this);\r\n                        $('.active-drop').removeClass('active-drop');\r\n                        settings.afterHide.call(this);\r\n                        settings.beforeShow.call(this);\r\n                        $(this).addClass('active-drop');\r\n                        settings.afterShow.call(this);\r\n                        return false;\r\n                    });\r\n\r\n                    // Close if outside click\r\n                    $(document).on('click', function() {\r\n                        settings.beforeHide.call(this);\r\n                        $('.active-drop').removeClass('active-drop').find('.dropit-submenu').hide();\r\n                        settings.afterHide.call(this);\r\n                    });\r\n\r\n                    settings.afterLoad.call(this);\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n        if (methods[method]) {\r\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n        } else if (typeof method === 'object' || !method) {\r\n            return methods.init.apply(this, arguments);\r\n        } else {\r\n            $.error('Method \"' + method + '\" does not exist in dropit plugin!');\r\n        }\r\n\r\n    }\r\n\r\n    $.fn.dropit.defaults = {\r\n        action: 'click', // The open action for the trigger\r\n        submenuEl: 'ul', // The submenu element\r\n        triggerEl: 'a', // The trigger element\r\n        triggerParentEl: 'li', // The trigger parent element\r\n        afterLoad: function() {}, // Triggers when plugin has loaded\r\n        beforeShow: function() {}, // Triggers before submenu is shown\r\n        afterShow: function() {}, // Triggers after submenu is shown\r\n        beforeHide: function() {}, // Triggers before submenu is hidden\r\n        afterHide: function() {} // Triggers before submenu is hidden\r\n    }\r\n\r\n    $.fn.dropit.settings = {}\r\n\r\n})(jQuery);","// Ion.RangeSlider\r\n// version 1.9.0 Build: 167\r\n// © 2013-2014 Denis Ineshin | IonDen.com\r\n//\r\n// Project page:    http://ionden.com/a/plugins/ion.rangeSlider/\r\n// GitHub page:     https://github.com/IonDen/ion.rangeSlider\r\n//\r\n// Released under MIT licence:\r\n// http://ionden.com/a/plugins/licence-en.html\r\n// =====================================================================================================================\r\n\r\n(function($, document, window, navigator) {\r\n    \"use strict\";\r\n\r\n    var pluginCount = 0,\r\n        current;\r\n\r\n    var isOldie = (function() {\r\n        var n = navigator.userAgent,\r\n            r = /msie\\s\\d+/i,\r\n            v;\r\n        if (n.search(r) > 0) {\r\n            v = r.exec(n).toString();\r\n            v = v.split(\" \")[1];\r\n            if (v < 9) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }());\r\n    var isTouch = (('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0));\r\n\r\n    var testNumber = function(num) {\r\n        if (typeof num === \"Number\") {\r\n            if (isNaN(num)) {\r\n                return null;\r\n            } else {\r\n                return num;\r\n            }\r\n        } else {\r\n            num = parseFloat(num);\r\n            if (isNaN(num)) {\r\n                return null;\r\n            } else {\r\n                return num;\r\n            }\r\n        }\r\n    };\r\n\r\n    var methods = {\r\n        init: function(options) {\r\n\r\n            // irs = ion range slider css prefix\r\n            var baseHTML =\r\n                '<span class=\"irs\">' +\r\n                '<span class=\"irs-line\"><span class=\"irs-line-left\"></span><span class=\"irs-line-mid\"></span><span class=\"irs-line-right\"></span></span>' +\r\n                '<span class=\"irs-min\">0</span><span class=\"irs-max\">1</span>' +\r\n                '<span class=\"irs-from\">0</span><span class=\"irs-to\">0</span><span class=\"irs-single\">0</span>' +\r\n                '</span>' +\r\n                '<span class=\"irs-grid\"></span>';\r\n\r\n            var singleHTML =\r\n                '<span class=\"irs-slider single\"></span>';\r\n\r\n            var doubleHTML =\r\n                '<span class=\"irs-diapason\"></span>' +\r\n                '<span class=\"irs-slider from\"></span>' +\r\n                '<span class=\"irs-slider to\"></span>';\r\n\r\n            var disableHTML =\r\n                '<span class=\"irs-disable-mask\"></span>';\r\n\r\n\r\n\r\n            return this.each(function() {\r\n                var settings = $.extend({\r\n                    min: null,\r\n                    max: null,\r\n                    from: null,\r\n                    to: null,\r\n                    type: \"single\",\r\n                    step: null,\r\n                    prefix: \"\",\r\n                    postfix: \"\",\r\n                    maxPostfix: \"\",\r\n                    hasGrid: false,\r\n                    hideMinMax: false,\r\n                    hideFromTo: false,\r\n                    prettify: true,\r\n                    disable: false,\r\n                    values: null,\r\n                    onChange: null,\r\n                    onLoad: null,\r\n                    onFinish: null\r\n                }, options);\r\n\r\n\r\n\r\n                var slider = $(this),\r\n                    self = this,\r\n                    allow_values = false,\r\n                    value_array = null;\r\n\r\n                if (slider.data(\"isActive\")) {\r\n                    return;\r\n                }\r\n                slider.data(\"isActive\", true);\r\n\r\n                pluginCount += 1;\r\n                this.pluginCount = pluginCount;\r\n\r\n\r\n\r\n                // check default values\r\n                if (slider.prop(\"value\")) {\r\n                    value_array = slider.prop(\"value\").split(\";\");\r\n                }\r\n\r\n                if (settings.type === \"single\") {\r\n\r\n                    if (value_array && value_array.length > 1) {\r\n\r\n                        if (typeof settings.min !== \"number\") {\r\n                            settings.min = parseFloat(value_array[0]);\r\n                        } else {\r\n                            if (typeof settings.from !== \"number\") {\r\n                                settings.from = parseFloat(value_array[0]);\r\n                            }\r\n                        }\r\n\r\n                        if (typeof settings.max !== \"number\") {\r\n                            settings.max = parseFloat(value_array[1]);\r\n                        }\r\n\r\n                    } else if (value_array && value_array.length === 1) {\r\n\r\n                        if (typeof settings.from !== \"number\") {\r\n                            settings.from = parseFloat(value_array[0]);\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if (settings.type === \"double\") {\r\n\r\n                    if (value_array && value_array.length > 1) {\r\n\r\n                        if (typeof settings.min !== \"number\") {\r\n                            settings.min = parseFloat(value_array[0]);\r\n                        } else {\r\n                            if (typeof settings.from !== \"number\") {\r\n                                settings.from = parseFloat(value_array[0]);\r\n                            }\r\n                        }\r\n\r\n                        if (typeof settings.max !== \"number\") {\r\n                            settings.max = parseFloat(value_array[1]);\r\n                        } else {\r\n                            if (typeof settings.to !== \"number\") {\r\n                                settings.to = parseFloat(value_array[1]);\r\n                            }\r\n                        }\r\n\r\n                    } else if (value_array && value_array.length === 1) {\r\n\r\n                        if (typeof settings.min !== \"number\") {\r\n                            settings.min = parseFloat(value_array[0]);\r\n                        } else {\r\n                            if (typeof settings.from !== \"number\") {\r\n                                settings.from = parseFloat(value_array[0]);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n\r\n\r\n                // extend from data-*\r\n                if (typeof slider.data(\"min\") === \"number\") {\r\n                    settings.min = parseFloat(slider.data(\"min\"));\r\n                }\r\n                if (typeof slider.data(\"max\") === \"number\") {\r\n                    settings.max = parseFloat(slider.data(\"max\"));\r\n                }\r\n                if (typeof slider.data(\"from\") === \"number\") {\r\n                    settings.from = parseFloat(slider.data(\"from\"));\r\n                }\r\n                if (typeof slider.data(\"to\") === \"number\") {\r\n                    settings.to = parseFloat(slider.data(\"to\"));\r\n                }\r\n                if (slider.data(\"step\")) {\r\n                    settings.step = parseFloat(slider.data(\"step\"));\r\n                }\r\n                if (slider.data(\"type\")) {\r\n                    settings.type = slider.data(\"type\");\r\n                }\r\n                if (slider.data(\"prefix\")) {\r\n                    settings.prefix = slider.data(\"prefix\");\r\n                }\r\n                if (slider.data(\"postfix\")) {\r\n                    settings.postfix = slider.data(\"postfix\");\r\n                }\r\n                if (slider.data(\"maxpostfix\")) {\r\n                    settings.maxPostfix = slider.data(\"maxpostfix\");\r\n                }\r\n                if (slider.data(\"hasgrid\")) {\r\n                    settings.hasGrid = slider.data(\"hasgrid\");\r\n                }\r\n                if (slider.data(\"hideminmax\")) {\r\n                    settings.hideMinMax = slider.data(\"hideminmax\");\r\n                }\r\n                if (slider.data(\"hidefromto\")) {\r\n                    settings.hideFromTo = slider.data(\"hidefromto\");\r\n                }\r\n                if (slider.data(\"prettify\")) {\r\n                    settings.prettify = slider.data(\"prettify\");\r\n                }\r\n                if (slider.data(\"disable\")) {\r\n                    settings.disable = slider.data(\"disable\");\r\n                }\r\n                if (slider.data(\"values\")) {\r\n                    settings.values = slider.data(\"values\").split(\",\");\r\n                }\r\n\r\n\r\n\r\n                // Set Min and Max if no\r\n                settings.min = testNumber(settings.min);\r\n                if (!settings.min && settings.min !== 0) {\r\n                    settings.min = 10;\r\n                }\r\n\r\n                settings.max = testNumber(settings.max);\r\n                if (!settings.max && settings.max !== 0) {\r\n                    settings.max = 100;\r\n                }\r\n\r\n\r\n\r\n                // Set values\r\n                if (Object.prototype.toString.call(settings.values) !== \"[object Array]\") {\r\n                    settings.values = null;\r\n                }\r\n                if (settings.values && settings.values.length > 0) {\r\n                    settings.min = 0;\r\n                    settings.max = settings.values.length - 1;\r\n                    settings.step = 1;\r\n                    allow_values = true;\r\n                }\r\n\r\n\r\n\r\n                // Set From and To if no\r\n                settings.from = testNumber(settings.from);\r\n                if (!settings.from && settings.from !== 0) {\r\n                    settings.from = settings.min;\r\n                }\r\n\r\n                settings.to = testNumber(settings.to);\r\n                if (!settings.to && settings.to !== 0) {\r\n                    settings.to = settings.max;\r\n                }\r\n\r\n\r\n                // Set step\r\n                settings.step = testNumber(settings.step);\r\n                if (!settings.step) {\r\n                    settings.step = 1;\r\n                }\r\n\r\n\r\n\r\n                // fix diapason\r\n                if (settings.from < settings.min) {\r\n                    settings.from = settings.min;\r\n                }\r\n                if (settings.from > settings.max) {\r\n                    settings.from = settings.min;\r\n                }\r\n\r\n                if (settings.to < settings.min) {\r\n                    settings.to = settings.max;\r\n                }\r\n                if (settings.to > settings.max) {\r\n                    settings.to = settings.max;\r\n                }\r\n\r\n                if (settings.type === \"double\") {\r\n                    if (settings.from > settings.to) {\r\n                        settings.from = settings.to;\r\n                    }\r\n                    if (settings.to < settings.from) {\r\n                        settings.to = settings.from;\r\n                    }\r\n                }\r\n\r\n\r\n                var prettify = function(num) {\r\n                    var n = num.toString();\r\n                    if (settings.prettify) {\r\n                        n = n.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1 \");\r\n                    }\r\n                    return n;\r\n                };\r\n\r\n\r\n                var containerHTML = '<span class=\"irs\" id=\"irs-' + this.pluginCount + '\"></span>';\r\n                slider[0].style.display = \"none\";\r\n                slider.before(containerHTML);\r\n\r\n                var $container = slider.prev(),\r\n                    $body = $(document.body),\r\n                    $window = $(window),\r\n                    $rangeSlider,\r\n                    $fieldMin,\r\n                    $fieldMax,\r\n                    $fieldFrom,\r\n                    $fieldTo,\r\n                    $fieldSingle,\r\n                    $singleSlider,\r\n                    $fromSlider,\r\n                    $toSlider,\r\n                    $activeSlider,\r\n                    $diapason,\r\n                    $grid;\r\n\r\n                var allowDrag = false,\r\n                    sliderIsActive = false,\r\n                    firstStart = true,\r\n                    numbers = {};\r\n\r\n                var mouseX = 0,\r\n                    fieldMinWidth = 0,\r\n                    fieldMaxWidth = 0,\r\n                    normalWidth = 0,\r\n                    fullWidth = 0,\r\n                    sliderWidth = 0,\r\n                    width = 0,\r\n                    left = 0,\r\n                    right = 0,\r\n                    minusX = 0,\r\n                    stepFloat = 0;\r\n\r\n\r\n                if (parseInt(settings.step, 10) !== parseFloat(settings.step)) {\r\n                    stepFloat = settings.step.toString().split(\".\")[1];\r\n                    stepFloat = Math.pow(10, stepFloat.length);\r\n                }\r\n\r\n\r\n\r\n                // public methods\r\n                this.updateData = function(options) {\r\n                    firstStart = true;\r\n                    settings = $.extend(settings, options);\r\n                    removeHTML();\r\n                };\r\n                this.removeSlider = function() {\r\n                    $container.find(\"*\").off();\r\n                    $window.off(\"mouseup.irs\" + self.pluginCount);\r\n                    $body.off(\"mouseup.irs\" + self.pluginCount);\r\n                    $body.off(\"mousemove.irs\" + self.pluginCount);\r\n                    $container.html(\"\").remove();\r\n                    slider.data(\"isActive\", false);\r\n                    slider.show();\r\n                };\r\n\r\n\r\n\r\n\r\n\r\n                // private methods\r\n                var removeHTML = function() {\r\n                    $container.find(\"*\").off();\r\n                    $window.off(\"mouseup.irs\" + self.pluginCount);\r\n                    $body.off(\"mouseup.irs\" + self.pluginCount);\r\n                    $body.off(\"mousemove.irs\" + self.pluginCount);\r\n                    $container.html(\"\");\r\n\r\n                    placeHTML();\r\n                };\r\n                var placeHTML = function() {\r\n                    $container.html(baseHTML);\r\n                    $rangeSlider = $container.find(\".irs\");\r\n\r\n                    $fieldMin = $rangeSlider.find(\".irs-min\");\r\n                    $fieldMax = $rangeSlider.find(\".irs-max\");\r\n                    $fieldFrom = $rangeSlider.find(\".irs-from\");\r\n                    $fieldTo = $rangeSlider.find(\".irs-to\");\r\n                    $fieldSingle = $rangeSlider.find(\".irs-single\");\r\n                    $grid = $container.find(\".irs-grid\");\r\n\r\n                    if (settings.hideMinMax) {\r\n                        $fieldMin[0].style.display = \"none\";\r\n                        $fieldMax[0].style.display = \"none\";\r\n\r\n                        fieldMinWidth = 0;\r\n                        fieldMaxWidth = 0;\r\n                    }\r\n                    if (settings.hideFromTo) {\r\n                        $fieldFrom[0].style.display = \"none\";\r\n                        $fieldTo[0].style.display = \"none\";\r\n                        $fieldSingle[0].style.display = \"none\";\r\n                    }\r\n                    if (!settings.hideMinMax) {\r\n                        if (settings.values) {\r\n                            $fieldMin.html(settings.prefix + settings.values[0] + settings.postfix);\r\n                            $fieldMax.html(settings.prefix + settings.values[settings.values.length - 1] + settings.maxPostfix + settings.postfix);\r\n                        } else {\r\n                            $fieldMin.html(settings.prefix + prettify(settings.min) + settings.postfix);\r\n                            $fieldMax.html(settings.prefix + prettify(settings.max) + settings.maxPostfix + settings.postfix);\r\n                        }\r\n\r\n                        fieldMinWidth = $fieldMin.outerWidth();\r\n                        fieldMaxWidth = $fieldMax.outerWidth();\r\n                    }\r\n\r\n                    if (settings.type === \"single\") {\r\n                        $rangeSlider.append(singleHTML);\r\n\r\n                        $singleSlider = $rangeSlider.find(\".single\");\r\n\r\n                        $singleSlider.on(\"mousedown\", function(e) {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n\r\n                            calcDimensions(e, $(this), null);\r\n\r\n                            allowDrag = true;\r\n                            sliderIsActive = true;\r\n                            current = self.pluginCount;\r\n\r\n                            if (isOldie) {\r\n                                $(\"*\").prop(\"unselectable\", true);\r\n                            }\r\n                        });\r\n                        if (isTouch) {\r\n                            $singleSlider.on(\"touchstart\", function(e) {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n\r\n                                calcDimensions(e.originalEvent.touches[0], $(this), null);\r\n\r\n                                allowDrag = true;\r\n                                sliderIsActive = true;\r\n                                current = self.pluginCount;\r\n                            });\r\n                        }\r\n\r\n                    } else if (settings.type === \"double\") {\r\n                        $rangeSlider.append(doubleHTML);\r\n\r\n                        $fromSlider = $rangeSlider.find(\".from\");\r\n                        $toSlider = $rangeSlider.find(\".to\");\r\n                        $diapason = $rangeSlider.find(\".irs-diapason\");\r\n\r\n                        setDiapason();\r\n\r\n                        $fromSlider.on(\"mousedown\", function(e) {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n\r\n                            $(this).addClass(\"last\");\r\n                            $toSlider.removeClass(\"last\");\r\n                            calcDimensions(e, $(this), \"from\");\r\n\r\n                            allowDrag = true;\r\n                            sliderIsActive = true;\r\n                            current = self.pluginCount;\r\n\r\n                            if (isOldie) {\r\n                                $(\"*\").prop(\"unselectable\", true);\r\n                            }\r\n                        });\r\n                        $toSlider.on(\"mousedown\", function(e) {\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n\r\n                            $(this).addClass(\"last\");\r\n                            $fromSlider.removeClass(\"last\");\r\n                            calcDimensions(e, $(this), \"to\");\r\n\r\n                            allowDrag = true;\r\n                            sliderIsActive = true;\r\n                            current = self.pluginCount;\r\n\r\n                            if (isOldie) {\r\n                                $(\"*\").prop(\"unselectable\", true);\r\n                            }\r\n                        });\r\n\r\n                        if (isTouch) {\r\n                            $fromSlider.on(\"touchstart\", function(e) {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n\r\n                                $(this).addClass(\"last\");\r\n                                $toSlider.removeClass(\"last\");\r\n                                calcDimensions(e.originalEvent.touches[0], $(this), \"from\");\r\n\r\n                                allowDrag = true;\r\n                                sliderIsActive = true;\r\n                                current = self.pluginCount;\r\n                            });\r\n                            $toSlider.on(\"touchstart\", function(e) {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n\r\n                                $(this).addClass(\"last\");\r\n                                $fromSlider.removeClass(\"last\");\r\n                                calcDimensions(e.originalEvent.touches[0], $(this), \"to\");\r\n\r\n                                allowDrag = true;\r\n                                sliderIsActive = true;\r\n                                current = self.pluginCount;\r\n                            });\r\n                        }\r\n\r\n                        if (settings.to === settings.max) {\r\n                            $fromSlider.addClass(\"last\");\r\n                        }\r\n                    }\r\n\r\n                    var mouseup = function() {\r\n                        if (current !== self.pluginCount) {\r\n                            return;\r\n                        }\r\n\r\n                        if (allowDrag) {\r\n                            sliderIsActive = false;\r\n                            allowDrag = false;\r\n                            $activeSlider.removeAttr(\"id\");\r\n                            $activeSlider = null;\r\n                            if (settings.type === \"double\") {\r\n                                setDiapason();\r\n                            }\r\n                            getNumbers();\r\n\r\n                            if (isOldie) {\r\n                                $(\"*\").prop(\"unselectable\", false);\r\n                            }\r\n                        }\r\n                    };\r\n                    $window.on(\"mouseup.irs\" + self.pluginCount, function() {\r\n                        mouseup();\r\n                    });\r\n\r\n\r\n                    $body.on(\"mousemove.irs\" + self.pluginCount, function(e) {\r\n                        if (allowDrag) {\r\n                            mouseX = e.pageX;\r\n                            dragSlider();\r\n                        }\r\n                    });\r\n\r\n                    $container.on(\"mousedown\", function() {\r\n                        current = self.pluginCount;\r\n                    });\r\n\r\n                    $container.on(\"mouseup\", function(e) {\r\n                        if (current !== self.pluginCount) {\r\n                            return;\r\n                        }\r\n\r\n                        if (allowDrag || settings.disable) {\r\n                            return;\r\n                        }\r\n\r\n                        moveByClick(e.pageX);\r\n                    });\r\n\r\n                    if (isTouch) {\r\n                        $window.on(\"touchend\", function() {\r\n                            if (allowDrag) {\r\n                                sliderIsActive = false;\r\n                                allowDrag = false;\r\n                                $activeSlider.removeAttr(\"id\");\r\n                                $activeSlider = null;\r\n                                if (settings.type === \"double\") {\r\n                                    setDiapason();\r\n                                }\r\n                                getNumbers();\r\n                            }\r\n                        });\r\n                        $window.on(\"touchmove\", function(e) {\r\n                            if (allowDrag) {\r\n                                mouseX = e.originalEvent.touches[0].pageX;\r\n                                dragSlider();\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    getSize();\r\n                    setNumbers();\r\n                    if (settings.hasGrid) {\r\n                        setGrid();\r\n                    }\r\n                    if (settings.disable) {\r\n                        setMask();\r\n                    } else {\r\n                        removeMask();\r\n                    }\r\n                };\r\n\r\n                var getSize = function() {\r\n                    normalWidth = $rangeSlider.width();\r\n                    if ($singleSlider) {\r\n                        sliderWidth = $singleSlider.width();\r\n                    } else {\r\n                        sliderWidth = $fromSlider.width();\r\n                    }\r\n                    fullWidth = normalWidth - sliderWidth;\r\n                };\r\n\r\n                var calcDimensions = function(e, currentSlider, whichSlider) {\r\n                    getSize();\r\n\r\n                    firstStart = false;\r\n                    $activeSlider = currentSlider;\r\n                    $activeSlider.attr(\"id\", \"irs-active-slider\");\r\n\r\n                    var _x1 = $activeSlider.offset().left,\r\n                        _x2 = e.pageX - _x1;\r\n                    minusX = _x1 + _x2 - $activeSlider.position().left;\r\n\r\n                    if (settings.type === \"single\") {\r\n\r\n                        width = $rangeSlider.width() - sliderWidth;\r\n\r\n                    } else if (settings.type === \"double\") {\r\n\r\n                        if (whichSlider === \"from\") {\r\n                            left = 0;\r\n                            right = parseInt($toSlider.css(\"left\"), 10);\r\n                        } else {\r\n                            left = parseInt($fromSlider.css(\"left\"), 10);\r\n                            right = $rangeSlider.width() - sliderWidth;\r\n                        }\r\n\r\n                    }\r\n                };\r\n\r\n                var setDiapason = function() {\r\n                    var _w = $fromSlider.width(),\r\n                        _x = $.data($fromSlider[0], \"x\") || parseInt($fromSlider[0].style.left, 10) || $fromSlider.position().left,\r\n                        _width = $.data($toSlider[0], \"x\") || parseInt($toSlider[0].style.left, 10) || $toSlider.position().left,\r\n                        x = _x + (_w / 2),\r\n                        w = _width - _x;\r\n                    $diapason[0].style.left = x + \"px\";\r\n                    $diapason[0].style.width = w + \"px\";\r\n                };\r\n\r\n                var dragSlider = function(manual_x) {\r\n                    var x_pure = mouseX - minusX,\r\n                        x;\r\n\r\n                    if (manual_x) {\r\n                        x_pure = manual_x;\r\n                    } else {\r\n                        x_pure = mouseX - minusX;\r\n                    }\r\n\r\n                    if (settings.type === \"single\") {\r\n\r\n                        if (x_pure < 0) {\r\n                            x_pure = 0;\r\n                        }\r\n                        if (x_pure > width) {\r\n                            x_pure = width;\r\n                        }\r\n\r\n                    } else if (settings.type === \"double\") {\r\n\r\n                        if (x_pure < left) {\r\n                            x_pure = left;\r\n                        }\r\n                        if (x_pure > right) {\r\n                            x_pure = right;\r\n                        }\r\n                        setDiapason();\r\n\r\n                    }\r\n\r\n                    $.data($activeSlider[0], \"x\", x_pure);\r\n                    getNumbers();\r\n\r\n                    x = Math.round(x_pure);\r\n                    $activeSlider[0].style.left = x + \"px\";\r\n                };\r\n\r\n                var getNumbers = function() {\r\n                    var nums = {\r\n                        input: slider,\r\n                        slider: $container,\r\n                        min: settings.min,\r\n                        max: settings.max,\r\n                        fromNumber: 0,\r\n                        toNumber: 0,\r\n                        fromPers: 0,\r\n                        toPers: 0,\r\n                        fromX: 0,\r\n                        fromX_pure: 0,\r\n                        toX: 0,\r\n                        toX_pure: 0\r\n                    };\r\n                    var diapason = settings.max - settings.min,\r\n                        _from, _to;\r\n\r\n                    if (settings.type === \"single\") {\r\n\r\n                        nums.fromX = $.data($singleSlider[0], \"x\") || parseInt($singleSlider[0].style.left, 10) || $singleSlider.position().left;\r\n                        nums.fromPers = nums.fromX / fullWidth * 100;\r\n                        _from = (diapason / 100 * nums.fromPers) + settings.min;\r\n                        nums.fromNumber = Math.round(_from / settings.step) * settings.step;\r\n                        if (nums.fromNumber < settings.min) {\r\n                            nums.fromNumber = settings.min;\r\n                        }\r\n                        if (nums.fromNumber > settings.max) {\r\n                            nums.fromNumber = settings.max;\r\n                        }\r\n\r\n                        if (stepFloat) {\r\n                            nums.fromNumber = parseInt(nums.fromNumber * stepFloat, 10) / stepFloat;\r\n                        }\r\n\r\n                        if (allow_values) {\r\n                            nums.fromValue = settings.values[nums.fromNumber];\r\n                        }\r\n\r\n                    } else if (settings.type === \"double\") {\r\n\r\n                        nums.fromX = $.data($fromSlider[0], \"x\") || parseInt($fromSlider[0].style.left, 10) || $fromSlider.position().left;\r\n                        nums.fromPers = nums.fromX / fullWidth * 100;\r\n                        _from = (diapason / 100 * nums.fromPers) + settings.min;\r\n                        nums.fromNumber = Math.round(_from / settings.step) * settings.step;\r\n                        if (nums.fromNumber < settings.min) {\r\n                            nums.fromNumber = settings.min;\r\n                        }\r\n\r\n                        nums.toX = $.data($toSlider[0], \"x\") || parseInt($toSlider[0].style.left, 10) || $toSlider.position().left;\r\n                        nums.toPers = nums.toX / fullWidth * 100;\r\n                        _to = (diapason / 100 * nums.toPers) + settings.min;\r\n                        nums.toNumber = Math.round(_to / settings.step) * settings.step;\r\n                        if (nums.toNumber > settings.max) {\r\n                            nums.toNumber = settings.max;\r\n                        }\r\n\r\n                        if (stepFloat) {\r\n                            nums.fromNumber = parseInt(nums.fromNumber * stepFloat, 10) / stepFloat;\r\n                            nums.toNumber = parseInt(nums.toNumber * stepFloat, 10) / stepFloat;\r\n                        }\r\n\r\n                        if (allow_values) {\r\n                            nums.fromValue = settings.values[nums.fromNumber];\r\n                            nums.toValue = settings.values[nums.toNumber];\r\n                        }\r\n\r\n                    }\r\n\r\n                    numbers = nums;\r\n                    setFields();\r\n                };\r\n\r\n                var setNumbers = function() {\r\n                    var nums = {\r\n                        input: slider,\r\n                        slider: $container,\r\n                        min: settings.min,\r\n                        max: settings.max,\r\n                        fromNumber: settings.from,\r\n                        toNumber: settings.to,\r\n                        fromPers: 0,\r\n                        toPers: 0,\r\n                        fromX: 0,\r\n                        fromX_pure: 0,\r\n                        toX: 0,\r\n                        toX_pure: 0\r\n                    };\r\n                    var diapason = settings.max - settings.min;\r\n\r\n                    if (settings.type === \"single\") {\r\n\r\n                        nums.fromPers = (diapason !== 0) ? (nums.fromNumber - settings.min) / diapason * 100 : 0;\r\n                        nums.fromX_pure = fullWidth / 100 * nums.fromPers;\r\n                        nums.fromX = Math.round(nums.fromX_pure);\r\n                        $singleSlider[0].style.left = nums.fromX + \"px\";\r\n                        $.data($singleSlider[0], \"x\", nums.fromX_pure);\r\n\r\n                    } else if (settings.type === \"double\") {\r\n\r\n                        nums.fromPers = (diapason !== 0) ? (nums.fromNumber - settings.min) / diapason * 100 : 0;\r\n                        nums.fromX_pure = fullWidth / 100 * nums.fromPers;\r\n                        nums.fromX = Math.round(nums.fromX_pure);\r\n                        $fromSlider[0].style.left = nums.fromX + \"px\";\r\n                        $.data($fromSlider[0], \"x\", nums.fromX_pure);\r\n\r\n                        nums.toPers = (diapason !== 0) ? (nums.toNumber - settings.min) / diapason * 100 : 1;\r\n                        nums.toX_pure = fullWidth / 100 * nums.toPers;\r\n                        nums.toX = Math.round(nums.toX_pure);\r\n                        $toSlider[0].style.left = nums.toX + \"px\";\r\n                        $.data($toSlider[0], \"x\", nums.toX_pure);\r\n\r\n                        setDiapason();\r\n\r\n                    }\r\n\r\n                    numbers = nums;\r\n                    setFields();\r\n                };\r\n\r\n                var moveByClick = function(page_x) {\r\n                    var x = page_x - $container.offset().left,\r\n                        d = numbers.toX - numbers.fromX,\r\n                        zero_point = numbers.fromX + (d / 2);\r\n\r\n                    left = 0;\r\n                    width = $rangeSlider.width() - sliderWidth;\r\n                    right = $rangeSlider.width() - sliderWidth;\r\n\r\n                    if (settings.type === \"single\") {\r\n                        $activeSlider = $singleSlider;\r\n                        $activeSlider.attr(\"id\", \"irs-active-slider\");\r\n                        dragSlider(x);\r\n                    } else if (settings.type === \"double\") {\r\n                        if (x <= zero_point) {\r\n                            $activeSlider = $fromSlider;\r\n                        } else {\r\n                            $activeSlider = $toSlider;\r\n                        }\r\n                        $activeSlider.attr(\"id\", \"irs-active-slider\");\r\n                        dragSlider(x);\r\n                        setDiapason();\r\n                    }\r\n\r\n                    $activeSlider.removeAttr(\"id\");\r\n                    $activeSlider = null;\r\n                };\r\n\r\n                var setFields = function() {\r\n                    var _from, _fromW, _fromX,\r\n                        _to, _toW, _toX,\r\n                        _single, _singleW, _singleX,\r\n                        _slW = (sliderWidth / 2),\r\n                        maxPostfix = \"\";\r\n\r\n                    if (settings.type === \"single\") {\r\n\r\n                        if (numbers.fromNumber === settings.max) {\r\n                            maxPostfix = settings.maxPostfix;\r\n                        } else {\r\n                            maxPostfix = \"\";\r\n                        }\r\n\r\n                        if (!settings.hideText) {\r\n                            $fieldFrom[0].style.display = \"none\";\r\n                            $fieldTo[0].style.display = \"none\";\r\n\r\n                            if (allow_values) {\r\n                                _single =\r\n                                    settings.prefix +\r\n                                    settings.values[numbers.fromNumber] +\r\n                                    maxPostfix +\r\n                                    settings.postfix;\r\n                            } else {\r\n                                _single =\r\n                                    settings.prefix +\r\n                                    prettify(numbers.fromNumber) +\r\n                                    maxPostfix +\r\n                                    settings.postfix;\r\n                            }\r\n\r\n                            $fieldSingle.html(_single);\r\n\r\n                            _singleW = $fieldSingle.outerWidth();\r\n                            _singleX = numbers.fromX - (_singleW / 2) + _slW;\r\n                            if (_singleX < 0) {\r\n                                _singleX = 0;\r\n                            }\r\n                            if (_singleX > normalWidth - _singleW) {\r\n                                _singleX = normalWidth - _singleW;\r\n                            }\r\n                            $fieldSingle[0].style.left = _singleX + \"px\";\r\n\r\n                            if (!settings.hideMinMax && !settings.hideFromTo) {\r\n                                if (_singleX < fieldMinWidth) {\r\n                                    $fieldMin[0].style.display = \"none\";\r\n                                } else {\r\n                                    $fieldMin[0].style.display = \"block\";\r\n                                }\r\n\r\n                                if (_singleX + _singleW > normalWidth - fieldMaxWidth) {\r\n                                    $fieldMax[0].style.display = \"none\";\r\n                                } else {\r\n                                    $fieldMax[0].style.display = \"block\";\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        slider.attr(\"value\", parseFloat(numbers.fromNumber));\r\n\r\n                    } else if (settings.type === \"double\") {\r\n\r\n                        if (numbers.fromNumber === settings.max) {\r\n                            maxPostfix = settings.maxPostfix;\r\n                        } else {\r\n                            maxPostfix = \"\";\r\n                        }\r\n\r\n                        if (numbers.toNumber === settings.max) {\r\n                            maxPostfix = settings.maxPostfix;\r\n                        } else {\r\n                            maxPostfix = \"\";\r\n                        }\r\n\r\n                        if (!settings.hideText) {\r\n                            if (allow_values) {\r\n                                _from =\r\n                                    settings.prefix +\r\n                                    settings.values[numbers.fromNumber] +\r\n                                    settings.postfix;\r\n\r\n                                _to =\r\n                                    settings.prefix +\r\n                                    settings.values[numbers.toNumber] +\r\n                                    maxPostfix +\r\n                                    settings.postfix;\r\n\r\n                                if (numbers.fromNumber !== numbers.toNumber) {\r\n                                    _single =\r\n                                        settings.prefix +\r\n                                        settings.values[numbers.fromNumber] +\r\n                                        \" — \" + settings.prefix +\r\n                                        settings.values[numbers.toNumber] +\r\n                                        maxPostfix +\r\n                                        settings.postfix;\r\n                                } else {\r\n                                    _single =\r\n                                        settings.prefix +\r\n                                        settings.values[numbers.fromNumber] +\r\n                                        maxPostfix +\r\n                                        settings.postfix;\r\n                                }\r\n                            } else {\r\n                                _from =\r\n                                    settings.prefix +\r\n                                    prettify(numbers.fromNumber) +\r\n                                    settings.postfix;\r\n\r\n                                _to =\r\n                                    settings.prefix +\r\n                                    prettify(numbers.toNumber) +\r\n                                    maxPostfix +\r\n                                    settings.postfix;\r\n\r\n                                if (numbers.fromNumber !== numbers.toNumber) {\r\n                                    _single =\r\n                                        settings.prefix +\r\n                                        prettify(numbers.fromNumber) +\r\n                                        \" — \" + settings.prefix +\r\n                                        prettify(numbers.toNumber) +\r\n                                        maxPostfix +\r\n                                        settings.postfix;\r\n                                } else {\r\n                                    _single =\r\n                                        settings.prefix +\r\n                                        prettify(numbers.fromNumber) +\r\n                                        maxPostfix +\r\n                                        settings.postfix;\r\n                                }\r\n                            }\r\n\r\n                            $fieldFrom.html(_from);\r\n                            $fieldTo.html(_to);\r\n                            $fieldSingle.html(_single);\r\n\r\n                            _fromW = $fieldFrom.outerWidth();\r\n                            _fromX = numbers.fromX - (_fromW / 2) + _slW;\r\n                            if (_fromX < 0) {\r\n                                _fromX = 0;\r\n                            }\r\n                            if (_fromX > normalWidth - _fromW) {\r\n                                _fromX = normalWidth - _fromW;\r\n                            }\r\n                            $fieldFrom[0].style.left = _fromX + \"px\";\r\n\r\n                            _toW = $fieldTo.outerWidth();\r\n                            _toX = numbers.toX - (_toW / 2) + _slW;\r\n                            if (_toX < 0) {\r\n                                _toX = 0;\r\n                            }\r\n                            if (_toX > normalWidth - _toW) {\r\n                                _toX = normalWidth - _toW;\r\n                            }\r\n                            $fieldTo[0].style.left = _toX + \"px\";\r\n\r\n                            _singleW = $fieldSingle.outerWidth();\r\n                            _singleX = numbers.fromX + ((numbers.toX - numbers.fromX) / 2) - (_singleW / 2) + _slW;\r\n                            if (_singleX < 0) {\r\n                                _singleX = 0;\r\n                            }\r\n                            if (_singleX > normalWidth - _singleW) {\r\n                                _singleX = normalWidth - _singleW;\r\n                            }\r\n                            $fieldSingle[0].style.left = _singleX + \"px\";\r\n\r\n                            if (_fromX + _fromW < _toX) {\r\n                                $fieldSingle[0].style.display = \"none\";\r\n                                $fieldFrom[0].style.display = \"block\";\r\n                                $fieldTo[0].style.display = \"block\";\r\n                            } else {\r\n                                $fieldSingle[0].style.display = \"block\";\r\n                                $fieldFrom[0].style.display = \"none\";\r\n                                $fieldTo[0].style.display = \"none\";\r\n                            }\r\n\r\n                            if (!settings.hideMinMax && !settings.hideFromTo) {\r\n                                if (_singleX < fieldMinWidth || _fromX < fieldMinWidth) {\r\n                                    $fieldMin[0].style.display = \"none\";\r\n                                } else {\r\n                                    $fieldMin[0].style.display = \"block\";\r\n                                }\r\n\r\n                                if (_singleX + _singleW > normalWidth - fieldMaxWidth || _toX + _toW > normalWidth - fieldMaxWidth) {\r\n                                    $fieldMax[0].style.display = \"none\";\r\n                                } else {\r\n                                    $fieldMax[0].style.display = \"block\";\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        slider.attr(\"value\", parseFloat(numbers.fromNumber) + \";\" + parseFloat(numbers.toNumber));\r\n\r\n                    }\r\n\r\n\r\n\r\n                    // trigger onFinish function\r\n                    if (typeof settings.onFinish === \"function\" && !sliderIsActive && !firstStart) {\r\n                        settings.onFinish.call(this, numbers);\r\n                    }\r\n\r\n                    // trigger onChange function\r\n                    if (typeof settings.onChange === \"function\" && !firstStart) {\r\n                        settings.onChange.call(this, numbers);\r\n                    }\r\n\r\n                    // trigger onLoad function\r\n                    if (typeof settings.onLoad === \"function\" && !sliderIsActive && firstStart) {\r\n                        settings.onLoad.call(this, numbers);\r\n                        firstStart = false;\r\n                    }\r\n                };\r\n\r\n                var setGrid = function() {\r\n                    $container.addClass(\"irs-with-grid\");\r\n\r\n                    var i,\r\n                        text = '',\r\n                        step = 0,\r\n                        tStep = 0,\r\n                        gridHTML = '',\r\n                        smNum = 20,\r\n                        bigNum = 4;\r\n\r\n                    for (i = 0; i <= smNum; i += 1) {\r\n                        step = Math.floor(normalWidth / smNum * i);\r\n\r\n                        if (step >= normalWidth) {\r\n                            step = normalWidth - 1;\r\n                        }\r\n                        gridHTML += '<span class=\"irs-grid-pol small\" style=\"left: ' + step + 'px;\"></span>';\r\n                    }\r\n                    for (i = 0; i <= bigNum; i += 1) {\r\n                        step = Math.floor(normalWidth / bigNum * i);\r\n\r\n                        if (step >= normalWidth) {\r\n                            step = normalWidth - 1;\r\n                        }\r\n                        gridHTML += '<span class=\"irs-grid-pol\" style=\"left: ' + step + 'px;\"></span>';\r\n\r\n                        if (stepFloat) {\r\n                            text = (settings.min + ((settings.max - settings.min) / bigNum * i));\r\n                            text = (text / settings.step) * settings.step;\r\n                            text = parseInt(text * stepFloat, 10) / stepFloat;\r\n                        } else {\r\n                            text = Math.round(settings.min + ((settings.max - settings.min) / bigNum * i));\r\n                            text = Math.round(text / settings.step) * settings.step;\r\n                            text = prettify(text);\r\n                        }\r\n\r\n                        if (allow_values) {\r\n                            if (settings.hideMinMax) {\r\n                                text = Math.round(settings.min + ((settings.max - settings.min) / bigNum * i));\r\n                                text = Math.round(text / settings.step) * settings.step;\r\n                                if (i === 0 || i === bigNum) {\r\n                                    text = settings.values[text];\r\n                                } else {\r\n                                    text = \"\";\r\n                                }\r\n                            } else {\r\n                                text = \"\";\r\n                            }\r\n                        }\r\n\r\n                        if (i === 0) {\r\n                            tStep = step;\r\n                            gridHTML += '<span class=\"irs-grid-text\" style=\"left: ' + tStep + 'px; text-align: left;\">' + text + '</span>';\r\n                        } else if (i === bigNum) {\r\n                            tStep = step - 100;\r\n                            gridHTML += '<span class=\"irs-grid-text\" style=\"left: ' + tStep + 'px; text-align: right;\">' + text + '</span>';\r\n                        } else {\r\n                            tStep = step - 50;\r\n                            gridHTML += '<span class=\"irs-grid-text\" style=\"left: ' + tStep + 'px;\">' + text + '</span>';\r\n                        }\r\n                    }\r\n\r\n                    $grid.html(gridHTML);\r\n                };\r\n\r\n\r\n\r\n                // Disable state\r\n                var setMask = function() {\r\n                    $container.addClass(\"irs-disabled\");\r\n                    $container.append(disableHTML);\r\n                };\r\n\r\n                var removeMask = function() {\r\n                    $container.removeClass(\"irs-disabled\");\r\n                    $container.find(\".irs-disable-mask\").remove();\r\n                };\r\n\r\n\r\n\r\n                placeHTML();\r\n            });\r\n        },\r\n        update: function(options) {\r\n            return this.each(function() {\r\n                this.updateData(options);\r\n            });\r\n        },\r\n        remove: function() {\r\n            return this.each(function() {\r\n                this.removeSlider();\r\n            });\r\n        }\r\n    };\r\n\r\n    $.fn.ionRangeSlider = function(method) {\r\n        if (methods[method]) {\r\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n        } else if (typeof method === 'object' || !method) {\r\n            return methods.init.apply(this, arguments);\r\n        } else {\r\n            $.error('Method ' + method + ' does not exist for jQuery.ionRangeSlider');\r\n        }\r\n    };\r\n\r\n}(jQuery, document, window, navigator));","/*!\r\n * iCheck v1.0.2, http://git.io/arlzeA\r\n * ===================================\r\n * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization\r\n *\r\n * (c) 2013 Damir Sultanov, http://fronteed.com\r\n * MIT Licensed\r\n */\r\n\r\n(function($) {\r\n\r\n    // Cached vars\r\n    var _iCheck = 'iCheck',\r\n        _iCheckHelper = _iCheck + '-helper',\r\n        _checkbox = 'checkbox',\r\n        _radio = 'radio',\r\n        _checked = 'checked',\r\n        _unchecked = 'un' + _checked,\r\n        _disabled = 'disabled',\r\n        a\r\n        _determinate = 'determinate',\r\n        _indeterminate = 'in' + _determinate,\r\n        _update = 'update',\r\n        _type = 'type',\r\n        _click = 'click',\r\n        _touch = 'touchbegin.i touchend.i',\r\n        _add = 'addClass',\r\n        _remove = 'removeClass',\r\n        _callback = 'trigger',\r\n        _label = 'label',\r\n        _cursor = 'cursor',\r\n        _mobile = /ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);\r\n\r\n    // Plugin init\r\n    $.fn[_iCheck] = function(options, fire) {\r\n\r\n        // Walker\r\n        var handle = 'input[type=\"' + _checkbox + '\"], input[type=\"' + _radio + '\"]',\r\n            stack = $(),\r\n            walker = function(object) {\r\n                object.each(function() {\r\n                    var self = $(this);\r\n\r\n                    if (self.is(handle)) {\r\n                        stack = stack.add(self);\r\n                    } else {\r\n                        stack = stack.add(self.find(handle));\r\n                    }\r\n                });\r\n            };\r\n\r\n        // Check if we should operate with some method\r\n        if (/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(options)) {\r\n\r\n            // Normalize method's name\r\n            options = options.toLowerCase();\r\n\r\n            // Find checkboxes and radio buttons\r\n            walker(this);\r\n\r\n            return stack.each(function() {\r\n                var self = $(this);\r\n\r\n                if (options == 'destroy') {\r\n                    tidy(self, 'ifDestroyed');\r\n                } else {\r\n                    operate(self, true, options);\r\n                }\r\n\r\n                // Fire method's callback\r\n                if ($.isFunction(fire)) {\r\n                    fire();\r\n                }\r\n            });\r\n\r\n            // Customization\r\n        } else if (typeof options == 'object' || !options) {\r\n\r\n            // Check if any options were passed\r\n            var settings = $.extend({\r\n                checkedClass: _checked,\r\n                disabledClass: _disabled,\r\n                indeterminateClass: _indeterminate,\r\n                labelHover: true\r\n            }, options),\r\n\r\n                selector = settings.handle,\r\n                hoverClass = settings.hoverClass || 'hover',\r\n                focusClass = settings.focusClass || 'focus',\r\n                activeClass = settings.activeClass || 'active',\r\n                labelHover = !! settings.labelHover,\r\n                labelHoverClass = settings.labelHoverClass || 'hover',\r\n\r\n                // Setup clickable area\r\n                area = ('' + settings.increaseArea).replace('%', '') | 0;\r\n\r\n            // Selector limit\r\n            if (selector == _checkbox || selector == _radio) {\r\n                handle = 'input[type=\"' + selector + '\"]';\r\n            }\r\n\r\n            // Clickable area limit\r\n            if (area < -50) {\r\n                area = -50;\r\n            }\r\n\r\n            // Walk around the selector\r\n            walker(this);\r\n\r\n            return stack.each(function() {\r\n                var self = $(this);\r\n\r\n                // If already customized\r\n                tidy(self);\r\n\r\n                var node = this,\r\n                    id = node.id,\r\n\r\n                    // Layer styles\r\n                    offset = -area + '%',\r\n                    size = 100 + (area * 2) + '%',\r\n                    layer = {\r\n                        position: 'absolute',\r\n                        top: offset,\r\n                        left: offset,\r\n                        display: 'block',\r\n                        width: size,\r\n                        height: size,\r\n                        margin: 0,\r\n                        padding: 0,\r\n                        background: '#fff',\r\n                        border: 0,\r\n                        opacity: 0\r\n                    },\r\n\r\n                    // Choose how to hide input\r\n                    hide = _mobile ? {\r\n                        position: 'absolute',\r\n                        visibility: 'hidden'\r\n                    } : area ? layer : {\r\n                        position: 'absolute',\r\n                        opacity: 0\r\n                    },\r\n\r\n                    // Get proper class\r\n                    className = node[_type] == _checkbox ? settings.checkboxClass || 'i' + _checkbox : settings.radioClass || 'i' + _radio,\r\n\r\n                    // Find assigned labels\r\n                    label = $(_label + '[for=\"' + id + '\"]').add(self.closest(_label)),\r\n\r\n                    // Check ARIA option\r\n                    aria = !! settings.aria,\r\n\r\n                    // Set ARIA placeholder\r\n                    ariaID = _iCheck + '-' + Math.random().toString(36).substr(2, 6),\r\n\r\n                    // Parent & helper\r\n                    parent = '<div class=\"' + className + '\" ' + (aria ? 'role=\"' + node[_type] + '\" ' : ''),\r\n                    helper;\r\n\r\n                // Set ARIA \"labelledby\"\r\n                if (aria) {\r\n                    label.each(function() {\r\n                        parent += 'aria-labelledby=\"';\r\n\r\n                        if (this.id) {\r\n                            parent += this.id;\r\n                        } else {\r\n                            this.id = ariaID;\r\n                            parent += ariaID;\r\n                        }\r\n\r\n                        parent += '\"';\r\n                    });\r\n                }\r\n\r\n                // Wrap input\r\n                parent = self.wrap(parent + '/>')[_callback]('ifCreated').parent().append(settings.insert);\r\n\r\n                // Layer addition\r\n                helper = $('<ins class=\"' + _iCheckHelper + '\"/>').css(layer).appendTo(parent);\r\n\r\n                // Finalize customization\r\n                self.data(_iCheck, {\r\n                    o: settings,\r\n                    s: self.attr('style')\r\n                }).css(hide); !! settings.inheritClass && parent[_add](node.className || ''); !! settings.inheritID && id && parent.attr('id', _iCheck + '-' + id);\r\n                parent.css('position') == 'static' && parent.css('position', 'relative');\r\n                operate(self, true, _update);\r\n\r\n                // Label events\r\n                if (label.length) {\r\n                    label.on(_click + '.i mouseover.i mouseout.i ' + _touch, function(event) {\r\n                        var type = event[_type],\r\n                            item = $(this);\r\n\r\n                        // Do nothing if input is disabled\r\n                        if (!node[_disabled]) {\r\n\r\n                            // Click\r\n                            if (type == _click) {\r\n                                if ($(event.target).is('a')) {\r\n                                    return;\r\n                                }\r\n                                operate(self, false, true);\r\n\r\n                                // Hover state\r\n                            } else if (labelHover) {\r\n\r\n                                // mouseout|touchend\r\n                                if (/ut|nd/.test(type)) {\r\n                                    parent[_remove](hoverClass);\r\n                                    item[_remove](labelHoverClass);\r\n                                } else {\r\n                                    parent[_add](hoverClass);\r\n                                    item[_add](labelHoverClass);\r\n                                }\r\n                            }\r\n\r\n                            if (_mobile) {\r\n                                event.stopPropagation();\r\n                            } else {\r\n                                return false;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Input events\r\n                self.on(_click + '.i focus.i blur.i keyup.i keydown.i keypress.i', function(event) {\r\n                    var type = event[_type],\r\n                        key = event.keyCode;\r\n\r\n                    // Click\r\n                    if (type == _click) {\r\n                        return false;\r\n\r\n                        // Keydown\r\n                    } else if (type == 'keydown' && key == 32) {\r\n                        if (!(node[_type] == _radio && node[_checked])) {\r\n                            if (node[_checked]) {\r\n                                off(self, _checked);\r\n                            } else {\r\n                                on(self, _checked);\r\n                            }\r\n                        }\r\n\r\n                        return false;\r\n\r\n                        // Keyup\r\n                    } else if (type == 'keyup' && node[_type] == _radio) {\r\n                        !node[_checked] && on(self, _checked);\r\n\r\n                        // Focus/blur\r\n                    } else if (/us|ur/.test(type)) {\r\n                        parent[type == 'blur' ? _remove : _add](focusClass);\r\n                    }\r\n                });\r\n\r\n                // Helper events\r\n                helper.on(_click + ' mousedown mouseup mouseover mouseout ' + _touch, function(event) {\r\n                    var type = event[_type],\r\n\r\n                        // mousedown|mouseup\r\n                        toggle = /wn|up/.test(type) ? activeClass : hoverClass;\r\n\r\n                    // Do nothing if input is disabled\r\n                    if (!node[_disabled]) {\r\n\r\n                        // Click\r\n                        if (type == _click) {\r\n                            operate(self, false, true);\r\n\r\n                            // Active and hover states\r\n                        } else {\r\n\r\n                            // State is on\r\n                            if (/wn|er|in/.test(type)) {\r\n\r\n                                // mousedown|mouseover|touchbegin\r\n                                parent[_add](toggle);\r\n\r\n                                // State is off\r\n                            } else {\r\n                                parent[_remove](toggle + ' ' + activeClass);\r\n                            }\r\n\r\n                            // Label hover\r\n                            if (label.length && labelHover && toggle == hoverClass) {\r\n\r\n                                // mouseout|touchend\r\n                                label[/ut|nd/.test(type) ? _remove : _add](labelHoverClass);\r\n                            }\r\n                        }\r\n\r\n                        if (_mobile) {\r\n                            event.stopPropagation();\r\n                        } else {\r\n                            return false;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        } else {\r\n            return this;\r\n        }\r\n    };\r\n\r\n    // Do something with inputs\r\n    function operate(input, direct, method) {\r\n        var node = input[0],\r\n            state = /er/.test(method) ? _indeterminate : /bl/.test(method) ? _disabled : _checked,\r\n            active = method == _update ? {\r\n                checked: node[_checked],\r\n                disabled: node[_disabled],\r\n                indeterminate: input.attr(_indeterminate) == 'true' || input.attr(_determinate) == 'false'\r\n            } : node[state];\r\n\r\n        // Check, disable or indeterminate\r\n        if (/^(ch|di|in)/.test(method) && !active) {\r\n            on(input, state);\r\n\r\n            // Uncheck, enable or determinate\r\n        } else if (/^(un|en|de)/.test(method) && active) {\r\n            off(input, state);\r\n\r\n            // Update\r\n        } else if (method == _update) {\r\n\r\n            // Handle states\r\n            for (var each in active) {\r\n                if (active[each]) {\r\n                    on(input, each, true);\r\n                } else {\r\n                    off(input, each, true);\r\n                }\r\n            }\r\n\r\n        } else if (!direct || method == 'toggle') {\r\n\r\n            // Helper or label was clicked\r\n            if (!direct) {\r\n                input[_callback]('ifClicked');\r\n            }\r\n\r\n            // Toggle checked state\r\n            if (active) {\r\n                if (node[_type] !== _radio) {\r\n                    off(input, state);\r\n                }\r\n            } else {\r\n                on(input, state);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Add checked, disabled or indeterminate state\r\n    function on(input, state, keep) {\r\n        var node = input[0],\r\n            parent = input.parent(),\r\n            checked = state == _checked,\r\n            indeterminate = state == _indeterminate,\r\n            disabled = state == _disabled,\r\n            callback = indeterminate ? _determinate : checked ? _unchecked : 'enabled',\r\n            regular = option(input, callback + capitalize(node[_type])),\r\n            specific = option(input, state + capitalize(node[_type]));\r\n\r\n        // Prevent unnecessary actions\r\n        if (node[state] !== true) {\r\n\r\n            // Toggle assigned radio buttons\r\n            if (!keep && state == _checked && node[_type] == _radio && node.name) {\r\n                var form = input.closest('form'),\r\n                    inputs = 'input[name=\"' + node.name + '\"]';\r\n\r\n                inputs = form.length ? form.find(inputs) : $(inputs);\r\n\r\n                inputs.each(function() {\r\n                    if (this !== node && $(this).data(_iCheck)) {\r\n                        off($(this), state);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Indeterminate state\r\n            if (indeterminate) {\r\n\r\n                // Add indeterminate state\r\n                node[state] = true;\r\n\r\n                // Remove checked state\r\n                if (node[_checked]) {\r\n                    off(input, _checked, 'force');\r\n                }\r\n\r\n                // Checked or disabled state\r\n            } else {\r\n\r\n                // Add checked or disabled state\r\n                if (!keep) {\r\n                    node[state] = true;\r\n                }\r\n\r\n                // Remove indeterminate state\r\n                if (checked && node[_indeterminate]) {\r\n                    off(input, _indeterminate, false);\r\n                }\r\n            }\r\n\r\n            // Trigger callbacks\r\n            callbacks(input, checked, state, keep);\r\n        }\r\n\r\n        // Add proper cursor\r\n        if (node[_disabled] && !! option(input, _cursor, true)) {\r\n            parent.find('.' + _iCheckHelper).css(_cursor, 'default');\r\n        }\r\n\r\n        // Add state class\r\n        parent[_add](specific || option(input, state) || '');\r\n\r\n        // Set ARIA attribute\r\n        if ( !! parent.attr('role') && !indeterminate) {\r\n            parent.attr('aria-' + (disabled ? _disabled : _checked), 'true');\r\n        }\r\n\r\n        // Remove regular state class\r\n        parent[_remove](regular || option(input, callback) || '');\r\n    }\r\n\r\n    // Remove checked, disabled or indeterminate state\r\n    function off(input, state, keep) {\r\n        var node = input[0],\r\n            parent = input.parent(),\r\n            checked = state == _checked,\r\n            indeterminate = state == _indeterminate,\r\n            disabled = state == _disabled,\r\n            callback = indeterminate ? _determinate : checked ? _unchecked : 'enabled',\r\n            regular = option(input, callback + capitalize(node[_type])),\r\n            specific = option(input, state + capitalize(node[_type]));\r\n\r\n        // Prevent unnecessary actions\r\n        if (node[state] !== false) {\r\n\r\n            // Toggle state\r\n            if (indeterminate || !keep || keep == 'force') {\r\n                node[state] = false;\r\n            }\r\n\r\n            // Trigger callbacks\r\n            callbacks(input, checked, callback, keep);\r\n        }\r\n\r\n        // Add proper cursor\r\n        if (!node[_disabled] && !! option(input, _cursor, true)) {\r\n            parent.find('.' + _iCheckHelper).css(_cursor, 'pointer');\r\n        }\r\n\r\n        // Remove state class\r\n        parent[_remove](specific || option(input, state) || '');\r\n\r\n        // Set ARIA attribute\r\n        if ( !! parent.attr('role') && !indeterminate) {\r\n            parent.attr('aria-' + (disabled ? _disabled : _checked), 'false');\r\n        }\r\n\r\n        // Add regular state class\r\n        parent[_add](regular || option(input, callback) || '');\r\n    }\r\n\r\n    // Remove all traces\r\n    function tidy(input, callback) {\r\n        if (input.data(_iCheck)) {\r\n\r\n            // Remove everything except input\r\n            input.parent().html(input.attr('style', input.data(_iCheck).s || ''));\r\n\r\n            // Callback\r\n            if (callback) {\r\n                input[_callback](callback);\r\n            }\r\n\r\n            // Unbind events\r\n            input.off('.i').unwrap();\r\n            $(_label + '[for=\"' + input[0].id + '\"]').add(input.closest(_label)).off('.i');\r\n        }\r\n    }\r\n\r\n    // Get some option\r\n    function option(input, state, regular) {\r\n        if (input.data(_iCheck)) {\r\n            return input.data(_iCheck).o[state + (regular ? '' : 'Class')];\r\n        }\r\n    }\r\n\r\n    // Capitalize some string\r\n    function capitalize(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n\r\n    // Executable handlers\r\n    function callbacks(input, checked, callback, keep) {\r\n        if (!keep) {\r\n            if (checked) {\r\n                input[_callback]('ifToggled');\r\n            }\r\n\r\n            input[_callback]('ifChanged')[_callback]('if' + capitalize(callback));\r\n        }\r\n    }\r\n})(window.jQuery || window.Zepto);","/*!\r\n * Fotorama 4.5.1 | http://fotorama.io/license/\r\n */\r\n! function(a, b, c, d, e) {\r\n    \"use strict\";\r\n\r\n    function f(a) {\r\n        var b = \"bez_\" + d.makeArray(arguments).join(\"_\").replace(\".\", \"p\");\r\n        if (\"function\" != typeof d.easing[b]) {\r\n            var c = function(a, b) {\r\n                var c = [null, null],\r\n                    d = [null, null],\r\n                    e = [null, null],\r\n                    f = function(f, g) {\r\n                        return e[g] = 3 * a[g], d[g] = 3 * (b[g] - a[g]) - e[g], c[g] = 1 - e[g] - d[g], f * (e[g] + f * (d[g] + f * c[g]))\r\n                    }, g = function(a) {\r\n                        return e[0] + a * (2 * d[0] + 3 * c[0] * a)\r\n                    }, h = function(a) {\r\n                        for (var b, c = a, d = 0; ++d < 14 && (b = f(c, 0) - a, !(Math.abs(b) < .001));) c -= b / g(c);\r\n                        return c\r\n                    };\r\n                return function(a) {\r\n                    return f(h(a), 1)\r\n                }\r\n            };\r\n            d.easing[b] = function(b, d, e, f, g) {\r\n                return f * c([a[0], a[1]], [a[2], a[3]])(d / g) + e\r\n            }\r\n        }\r\n        return b\r\n    }\r\n\r\n    function g() {}\r\n\r\n    function h(a, b, c) {\r\n        return Math.max(isNaN(b) ? -1 / 0 : b, Math.min(isNaN(c) ? 1 / 0 : c, a))\r\n    }\r\n\r\n    function i(a) {\r\n        return a.match(/ma/) && a.match(/-?\\d+(?!d)/g)[a.match(/3d/) ? 12 : 4]\r\n    }\r\n\r\n    function j(a) {\r\n        return Ec ? +i(a.css(\"transform\")) : +a.css(\"left\").replace(\"px\", \"\")\r\n    }\r\n\r\n    function k(a, b) {\r\n        var c = {};\r\n        return Ec ? c.transform = \"translate3d(\" + (a + (b ? .001 : 0)) + \"px,0,0)\" : c.left = a, c\r\n    }\r\n\r\n    function l(a) {\r\n        return {\r\n            \"transition-duration\": a + \"ms\"\r\n        }\r\n    }\r\n\r\n    function m(a, b) {\r\n        return +String(a).replace(b || \"px\", \"\") || e\r\n    }\r\n\r\n    function n(a) {\r\n        return /%$/.test(a) && m(a, \"%\")\r\n    }\r\n\r\n    function o(a, b) {\r\n        return n(a) / 100 * b || m(a)\r\n    }\r\n\r\n    function p(a) {\r\n        return ( !! m(a) || !! m(a, \"%\")) && a\r\n    }\r\n\r\n    function q(a, b, c, d) {\r\n        return (a - (d || 0)) * (b + (c || 0))\r\n    }\r\n\r\n    function r(a, b, c, d) {\r\n        return -Math.round(a / (b + (c || 0)) - (d || 0))\r\n    }\r\n\r\n    function s(a) {\r\n        var b = a.data();\r\n        if (!b.tEnd) {\r\n            var c = a[0],\r\n                d = {\r\n                    WebkitTransition: \"webkitTransitionEnd\",\r\n                    MozTransition: \"transitionend\",\r\n                    OTransition: \"oTransitionEnd otransitionend\",\r\n                    msTransition: \"MSTransitionEnd\",\r\n                    transition: \"transitionend\"\r\n                };\r\n            c.addEventListener(d[mc.prefixed(\"transition\")], function(a) {\r\n                b.tProp && a.propertyName.match(b.tProp) && b.onEndFn()\r\n            }, !1), b.tEnd = !0\r\n        }\r\n    }\r\n\r\n    function t(a, b, c, d) {\r\n        var e, f = a.data();\r\n        f && (f.onEndFn = function() {\r\n            e || (e = !0, clearTimeout(f.tT), c())\r\n        }, f.tProp = b, clearTimeout(f.tT), f.tT = setTimeout(function() {\r\n            f.onEndFn()\r\n        }, 1.5 * d), s(a))\r\n    }\r\n\r\n    function u(a, b, c) {\r\n        if (a.length) {\r\n            var d = a.data();\r\n            Ec ? (a.css(l(0)), d.onEndFn = g, clearTimeout(d.tT)) : a.stop();\r\n            var e = v(b, function() {\r\n                return j(a)\r\n            });\r\n            return a.css(k(e, c)), e\r\n        }\r\n    }\r\n\r\n    function v() {\r\n        for (var a, b = 0, c = arguments.length; c > b && (a = b ? arguments[b]() : arguments[b], \"number\" != typeof a); b++);\r\n        return a\r\n    }\r\n\r\n    function w(a, b) {\r\n        return Math.round(a + (b - a) / 1.5)\r\n    }\r\n\r\n    function x() {\r\n        return x.p = x.p || (\"https:\" === c.protocol ? \"https://\" : \"http://\"), x.p\r\n    }\r\n\r\n    function y(a) {\r\n        var c = b.createElement(\"a\");\r\n        return c.href = a, c\r\n    }\r\n\r\n    function z(a, b) {\r\n        if (\"string\" != typeof a) return a;\r\n        a = y(a);\r\n        var c, d;\r\n        if (a.host.match(/youtube\\.com/) && a.search) {\r\n            if (c = a.search.split(\"v=\")[1]) {\r\n                var e = c.indexOf(\"&\"); - 1 !== e && (c = c.substring(0, e)), d = \"youtube\"\r\n            }\r\n        } else a.host.match(/youtube\\.com|youtu\\.be/) ? (c = a.pathname.replace(/^\\/(embed\\/|v\\/)?/, \"\").replace(/\\/.*/, \"\"), d = \"youtube\") : a.host.match(/vimeo\\.com/) && (d = \"vimeo\", c = a.pathname.replace(/^\\/(video\\/)?/, \"\").replace(/\\/.*/, \"\"));\r\n        return c && d || !b || (c = a.href, d = \"custom\"), c ? {\r\n            id: c,\r\n            type: d,\r\n            s: a.search.replace(/^\\?/, \"\")\r\n        } : !1\r\n    }\r\n\r\n    function A(a, b, c) {\r\n        var e, f, g = a.video;\r\n        return \"youtube\" === g.type ? (f = x() + \"img.youtube.com/vi/\" + g.id + \"/default.jpg\", e = f.replace(/\\/default.jpg$/, \"/hqdefault.jpg\"), a.thumbsReady = !0) : \"vimeo\" === g.type ? d.ajax({\r\n            url: x() + \"vimeo.com/api/v2/video/\" + g.id + \".json\",\r\n            dataType: \"jsonp\",\r\n            success: function(d) {\r\n                a.thumbsReady = !0, B(b, {\r\n                    img: d[0].thumbnail_large,\r\n                    thumb: d[0].thumbnail_small\r\n                }, a.i, c)\r\n            }\r\n        }) : a.thumbsReady = !0, {\r\n            img: e,\r\n            thumb: f\r\n        }\r\n    }\r\n\r\n    function B(a, b, c, e) {\r\n        for (var f = 0, g = a.length; g > f; f++) {\r\n            var h = a[f];\r\n            if (h.i === c && h.thumbsReady) {\r\n                var i = {\r\n                    videoReady: !0\r\n                };\r\n                i[Uc] = i[Wc] = i[Vc] = !1, e.splice(f, 1, d.extend({}, h, i, b));\r\n                break\r\n            }\r\n        }\r\n    }\r\n\r\n    function C(a) {\r\n        function b(a, b, e) {\r\n            var f = a.children(\"img\").eq(0),\r\n                g = a.attr(\"href\"),\r\n                h = a.attr(\"src\"),\r\n                i = f.attr(\"src\"),\r\n                j = b.video,\r\n                k = e ? z(g, j === !0) : !1;\r\n            k ? g = !1 : k = j, c(a, f, d.extend(b, {\r\n                video: k,\r\n                img: b.img || g || h || i,\r\n                thumb: b.thumb || i || h || g\r\n            }))\r\n        }\r\n\r\n        function c(a, b, c) {\r\n            var e = c.thumb && c.img !== c.thumb,\r\n                f = m(c.width || a.attr(\"width\")),\r\n                g = m(c.height || a.attr(\"height\"));\r\n            d.extend(c, {\r\n                width: f,\r\n                height: g,\r\n                thumbratio: R(c.thumbratio || m(c.thumbwidth || b && b.attr(\"width\") || e || f) / m(c.thumbheight || b && b.attr(\"height\") || e || g))\r\n            })\r\n        }\r\n        var e = [];\r\n        return a.children().each(function() {\r\n            var a = d(this),\r\n                f = Q(d.extend(a.data(), {\r\n                    id: a.attr(\"id\")\r\n                }));\r\n            if (a.is(\"a, img\")) b(a, f, !0);\r\n            else {\r\n                if (a.is(\":empty\")) return;\r\n                c(a, null, d.extend(f, {\r\n                    html: this,\r\n                    _html: a.html()\r\n                }))\r\n            }\r\n            e.push(f)\r\n        }), e\r\n    }\r\n\r\n    function D(a) {\r\n        return 0 === a.offsetWidth && 0 === a.offsetHeight\r\n    }\r\n\r\n    function E(a) {\r\n        return !d.contains(b.documentElement, a)\r\n    }\r\n\r\n    function F(a, b, c) {\r\n        a() ? b() : setTimeout(function() {\r\n            F(a, b)\r\n        }, c || 100)\r\n    }\r\n\r\n    function G(a) {\r\n        c.replace(c.protocol + \"//\" + c.host + c.pathname.replace(/^\\/?/, \"/\") + c.search + \"#\" + a)\r\n    }\r\n\r\n    function H(a, b, c) {\r\n        var d = a.data(),\r\n            e = d.measures;\r\n        if (e && (!d.l || d.l.W !== e.width || d.l.H !== e.height || d.l.r !== e.ratio || d.l.w !== b.w || d.l.h !== b.h || d.l.m !== c)) {\r\n            var f = e.width,\r\n                g = e.height,\r\n                i = b.w / b.h,\r\n                j = e.ratio >= i,\r\n                k = \"scaledown\" === c,\r\n                l = \"contain\" === c,\r\n                m = \"cover\" === c;\r\n            j && (k || l) || !j && m ? (f = h(b.w, 0, k ? f : 1 / 0), g = f / e.ratio) : (j && m || !j && (k || l)) && (g = h(b.h, 0, k ? g : 1 / 0), f = g * e.ratio), a.css({\r\n                width: Math.ceil(f),\r\n                height: Math.ceil(g),\r\n                marginLeft: Math.floor(-f / 2),\r\n                marginTop: Math.floor(-g / 2)\r\n            }), d.l = {\r\n                W: e.width,\r\n                H: e.height,\r\n                r: e.ratio,\r\n                w: b.w,\r\n                h: b.h,\r\n                m: c\r\n            }\r\n        }\r\n        return !0\r\n    }\r\n\r\n    function I(a, b) {\r\n        var c = a[0];\r\n        c.styleSheet ? c.styleSheet.cssText = b : a.html(b)\r\n    }\r\n\r\n    function J(a, b, c) {\r\n        return b === c ? !1 : b >= a ? \"left\" : a >= c ? \"right\" : \"left right\"\r\n    }\r\n\r\n    function K(a, b, c, d) {\r\n        if (!c) return !1;\r\n        if (!isNaN(a)) return a - (d ? 0 : 1);\r\n        for (var e, f = 0, g = b.length; g > f; f++) {\r\n            var h = b[f];\r\n            if (h.id === a) {\r\n                e = f;\r\n                break\r\n            }\r\n        }\r\n        return e\r\n    }\r\n\r\n    function L(a, b, c) {\r\n        c = c || {}, a.each(function() {\r\n            var a, e = d(this),\r\n                f = e.data();\r\n            f.clickOn || (f.clickOn = !0, d.extend(X(e, {\r\n                onStart: function(b) {\r\n                    a = b, (c.onStart || g).call(this, b)\r\n                },\r\n                onMove: c.onMove || g,\r\n                onTouchEnd: c.onTouchEnd || g,\r\n                onEnd: function(c) {\r\n                    c.moved || b.call(this, a)\r\n                }\r\n            }), {\r\n                noMove: !0\r\n            }))\r\n        })\r\n    }\r\n\r\n    function M(a, b) {\r\n        return '<div class=\"' + a + '\">' + (b || \"\") + \"</div>\"\r\n    }\r\n\r\n    function N(a) {\r\n        for (var b = a.length; b;) {\r\n            var c = Math.floor(Math.random() * b--),\r\n                d = a[b];\r\n            a[b] = a[c], a[c] = d\r\n        }\r\n        return a\r\n    }\r\n\r\n    function O(a) {\r\n        return \"[object Array]\" == Object.prototype.toString.call(a) && d.map(a, function(a) {\r\n            return d.extend({}, a)\r\n        })\r\n    }\r\n\r\n    function P(a, b) {\r\n        Ac.scrollLeft(a).scrollTop(b)\r\n    }\r\n\r\n    function Q(a) {\r\n        if (a) {\r\n            var b = {};\r\n            return d.each(a, function(a, c) {\r\n                b[a.toLowerCase()] = c\r\n            }), b\r\n        }\r\n    }\r\n\r\n    function R(a) {\r\n        if (a) {\r\n            var b = +a;\r\n            return isNaN(b) ? (b = a.split(\"/\"), +b[0] / +b[1] || e) : b\r\n        }\r\n    }\r\n\r\n    function S(a, b) {\r\n        a.preventDefault(), b && a.stopPropagation()\r\n    }\r\n\r\n    function T(a) {\r\n        return a ? \">\" : \"<\"\r\n    }\r\n\r\n    function U(a, b) {\r\n        var c = a.data(),\r\n            e = Math.round(b.pos),\r\n            f = function() {\r\n                c.sliding = !1, (b.onEnd || g)()\r\n            };\r\n        \"undefined\" != typeof b.overPos && b.overPos !== b.pos && (e = b.overPos, f = function() {\r\n            U(a, d.extend({}, b, {\r\n                overPos: b.pos,\r\n                time: Math.max(Nc, b.time / 2)\r\n            }))\r\n        });\r\n        var h = d.extend(k(e, b._001), b.width && {\r\n            width: b.width\r\n        });\r\n        c.sliding = !0, Ec ? (a.css(d.extend(l(b.time), h)), b.time > 10 ? t(a, \"transform\", f, b.time) : f()) : a.stop().animate(h, b.time, Xc, f)\r\n    }\r\n\r\n    function V(a, b, c, e, f, h) {\r\n        var i = \"undefined\" != typeof h;\r\n        if (i || (f.push(arguments), Array.prototype.push.call(arguments, f.length), !(f.length > 1))) {\r\n            a = a || d(a), b = b || d(b);\r\n            var j = a[0],\r\n                k = b[0],\r\n                l = \"crossfade\" === e.method,\r\n                m = function() {\r\n                    if (!m.done) {\r\n                        m.done = !0;\r\n                        var a = (i || f.shift()) && f.shift();\r\n                        a && V.apply(this, a), (e.onEnd || g)( !! a)\r\n                    }\r\n                }, n = e.time / (h || 1);\r\n            c.removeClass(Kb + \" \" + Jb), a.stop().addClass(Kb), b.stop().addClass(Jb), l && k && a.fadeTo(0, 0), a.fadeTo(l ? n : 0, 1, l && m), b.fadeTo(n, 0, m), j && l || k || m()\r\n        }\r\n    }\r\n\r\n    function W(a) {\r\n        var b = (a.touches || [])[0] || a;\r\n        a._x = b.pageX, a._y = b.clientY, a._now = d.now()\r\n    }\r\n\r\n    function X(c, e) {\r\n        function f(a) {\r\n            return n = d(a.target), v.checked = q = r = t = !1, l || v.flow || a.touches && a.touches.length > 1 || a.which > 1 || wc && wc.type !== a.type && yc || (q = e.select && n.is(e.select, u)) ? q : (p = \"touchstart\" === a.type, r = n.is(\"a, a *\", u), o = v.control, s = v.noMove || v.noSwipe || o ? 16 : v.snap ? 0 : 4, W(a), m = wc = a, xc = a.type.replace(/down|start/, \"move\").replace(/Down/, \"Move\"), (e.onStart || g).call(u, a, {\r\n                control: o,\r\n                $target: n\r\n            }), l = v.flow = !0, void((!p || v.go) && S(a)))\r\n        }\r\n\r\n        function h(a) {\r\n            if (a.touches && a.touches.length > 1 || Kc && !a.isPrimary || xc !== a.type || !l) return l && i(), void(e.onTouchEnd || g)();\r\n            W(a);\r\n            var b = Math.abs(a._x - m._x),\r\n                c = Math.abs(a._y - m._y),\r\n                d = b - c,\r\n                f = (v.go || v.x || d >= 0) && !v.noSwipe,\r\n                h = 0 > d;\r\n            p && !v.checked ? (l = f) && S(a) : (S(a), (e.onMove || g).call(u, a, {\r\n                touch: p\r\n            })), !t && Math.sqrt(Math.pow(b, 2) + Math.pow(c, 2)) > s && (t = !0), v.checked = v.checked || f || h\r\n        }\r\n\r\n        function i(a) {\r\n            (e.onTouchEnd || g)();\r\n            var b = l;\r\n            v.control = l = !1, b && (v.flow = !1), !b || r && !v.checked || (a && S(a), yc = !0, clearTimeout(zc), zc = setTimeout(function() {\r\n                yc = !1\r\n            }, 1e3), (e.onEnd || g).call(u, {\r\n                moved: t,\r\n                $target: n,\r\n                control: o,\r\n                touch: p,\r\n                startEvent: m,\r\n                aborted: !a || \"MSPointerCancel\" === a.type\r\n            }))\r\n        }\r\n\r\n        function j() {\r\n            v.flow || setTimeout(function() {\r\n                v.flow = !0\r\n            }, 10)\r\n        }\r\n\r\n        function k() {\r\n            v.flow && setTimeout(function() {\r\n                v.flow = !1\r\n            }, Mc)\r\n        }\r\n        var l, m, n, o, p, q, r, s, t, u = c[0],\r\n            v = {};\r\n        return Kc ? (u[Jc](\"MSPointerDown\", f, !1), b[Jc](\"MSPointerMove\", h, !1), b[Jc](\"MSPointerCancel\", i, !1), b[Jc](\"MSPointerUp\", i, !1)) : (u[Jc] && (u[Jc](\"touchstart\", f, !1), u[Jc](\"touchmove\", h, !1), u[Jc](\"touchend\", i, !1), b[Jc](\"touchstart\", j, !1), b[Jc](\"touchend\", k, !1), b[Jc](\"touchcancel\", k, !1), a[Jc](\"scroll\", k, !1)), c.on(\"mousedown\", f), Bc.on(\"mousemove\", h).on(\"mouseup\", i)), c.on(\"click\", \"a\", function(a) {\r\n            v.checked && S(a)\r\n        }), v\r\n    }\r\n\r\n    function Y(a, b) {\r\n        function c(c, d) {\r\n            A = !0, j = l = c._x, q = c._now, p = [\r\n                [q, j]\r\n            ], m = n = D.noMove || d ? 0 : u(a, (b.getPos || g)(), b._001), (b.onStart || g).call(B, c)\r\n        }\r\n\r\n        function e(a, b) {\r\n            s = D.min, t = D.max, v = D.snap, x = a.altKey, A = z = !1, y = b.control, y || C.sliding || c(a)\r\n        }\r\n\r\n        function f(d, e) {\r\n            D.noSwipe || (A || c(d), l = d._x, p.push([d._now, l]), n = m - (j - l), o = J(n, s, t), s >= n ? n = w(n, s) : n >= t && (n = w(n, t)), D.noMove || (a.css(k(n, b._001)), z || (z = !0, e.touch || Kc || a.addClass(Zb)), (b.onMove || g).call(B, d, {\r\n                pos: n,\r\n                edge: o\r\n            })))\r\n        }\r\n\r\n        function i(e) {\r\n            if (!D.noSwipe || !e.moved) {\r\n                A || c(e.startEvent, !0), e.touch || Kc || a.removeClass(Zb), r = d.now();\r\n                for (var f, i, j, k, o, q, u, w, y, z = r - Mc, C = null, E = Nc, F = b.friction, G = p.length - 1; G >= 0; G--) {\r\n                    if (f = p[G][0], i = Math.abs(f - z), null === C || j > i) C = f, k = p[G][1];\r\n                    else if (C === z || i > j) break;\r\n                    j = i\r\n                }\r\n                u = h(n, s, t);\r\n                var H = k - l,\r\n                    I = H >= 0,\r\n                    J = r - C,\r\n                    K = J > Mc,\r\n                    L = !K && n !== m && u === n;\r\n                v && (u = h(Math[L ? I ? \"floor\" : \"ceil\" : \"round\"](n / v) * v, s, t), s = t = u), L && (v || u === n) && (y = -(H / J), E *= h(Math.abs(y), b.timeLow, b.timeHigh), o = Math.round(n + y * E / F), v || (u = o), (!I && o > t || I && s > o) && (q = I ? s : t, w = o - q, v || (u = q), w = h(u + .03 * w, q - 50, q + 50), E = Math.abs((n - w) / (y / F)))), E *= x ? 10 : 1, (b.onEnd || g).call(B, d.extend(e, {\r\n                    moved: e.moved || K && v,\r\n                    pos: n,\r\n                    newPos: u,\r\n                    overPos: w,\r\n                    time: E\r\n                }))\r\n            }\r\n        }\r\n        var j, l, m, n, o, p, q, r, s, t, v, x, y, z, A, B = a[0],\r\n            C = a.data(),\r\n            D = {};\r\n        return D = d.extend(X(b.$wrap, {\r\n            onStart: e,\r\n            onMove: f,\r\n            onTouchEnd: b.onTouchEnd,\r\n            onEnd: i,\r\n            select: b.select\r\n        }), D)\r\n    }\r\n\r\n    function Z(a, b) {\r\n        var c, e, f, h = a[0],\r\n            i = {\r\n                prevent: {}\r\n            };\r\n        return h[Jc] && h[Jc](Lc, function(a) {\r\n            var h = a.wheelDeltaY || -1 * a.deltaY || 0,\r\n                j = a.wheelDeltaX || -1 * a.deltaX || 0,\r\n                k = Math.abs(j) > Math.abs(h),\r\n                l = T(0 > j),\r\n                m = e === l,\r\n                n = d.now(),\r\n                o = Mc > n - f;\r\n            e = l, f = n, k && i.ok && (!i.prevent[l] || c) && (S(a, !0), c && m && o || (b.shift && (c = !0, clearTimeout(i.t), i.t = setTimeout(function() {\r\n                c = !1\r\n            }, Oc)), (b.onEnd || g)(a, b.shift ? l : j)))\r\n        }, !1), i\r\n    }\r\n\r\n    function $() {\r\n        d.each(d.Fotorama.instances, function(a, b) {\r\n            b.index = a\r\n        })\r\n    }\r\n\r\n    function _(a) {\r\n        d.Fotorama.instances.push(a), $()\r\n    }\r\n\r\n    function ab(a) {\r\n        d.Fotorama.instances.splice(a.index, 1), $()\r\n    }\r\n    var bb = \"fotorama\",\r\n        cb = \"fullscreen\",\r\n        db = bb + \"__wrap\",\r\n        eb = db + \"--css2\",\r\n        fb = db + \"--css3\",\r\n        gb = db + \"--video\",\r\n        hb = db + \"--fade\",\r\n        ib = db + \"--slide\",\r\n        jb = db + \"--no-controls\",\r\n        kb = db + \"--no-shadows\",\r\n        lb = db + \"--pan-y\",\r\n        mb = db + \"--rtl\",\r\n        nb = db + \"--only-active\",\r\n        ob = db + \"--no-captions\",\r\n        pb = db + \"--toggle-arrows\",\r\n        qb = bb + \"__stage\",\r\n        rb = qb + \"__frame\",\r\n        sb = rb + \"--video\",\r\n        tb = qb + \"__shaft\",\r\n        ub = bb + \"__grab\",\r\n        vb = bb + \"__pointer\",\r\n        wb = bb + \"__arr\",\r\n        xb = wb + \"--disabled\",\r\n        yb = wb + \"--prev\",\r\n        zb = wb + \"--next\",\r\n        Ab = bb + \"__nav\",\r\n        Bb = Ab + \"-wrap\",\r\n        Cb = Ab + \"__shaft\",\r\n        Db = Ab + \"--dots\",\r\n        Eb = Ab + \"--thumbs\",\r\n        Fb = Ab + \"__frame\",\r\n        Gb = Fb + \"--dot\",\r\n        Hb = Fb + \"--thumb\",\r\n        Ib = bb + \"__fade\",\r\n        Jb = Ib + \"-front\",\r\n        Kb = Ib + \"-rear\",\r\n        Lb = bb + \"__shadow\",\r\n        Mb = Lb + \"s\",\r\n        Nb = Mb + \"--left\",\r\n        Ob = Mb + \"--right\",\r\n        Pb = bb + \"__active\",\r\n        Qb = bb + \"__select\",\r\n        Rb = bb + \"--hidden\",\r\n        Sb = bb + \"--fullscreen\",\r\n        Tb = bb + \"__fullscreen-icon\",\r\n        Ub = bb + \"__error\",\r\n        Vb = bb + \"__loading\",\r\n        Wb = bb + \"__loaded\",\r\n        Xb = Wb + \"--full\",\r\n        Yb = Wb + \"--img\",\r\n        Zb = bb + \"__grabbing\",\r\n        $b = bb + \"__img\",\r\n        _b = $b + \"--full\",\r\n        ac = bb + \"__dot\",\r\n        bc = bb + \"__thumb\",\r\n        cc = bc + \"-border\",\r\n        dc = bb + \"__html\",\r\n        ec = bb + \"__video\",\r\n        fc = ec + \"-play\",\r\n        gc = ec + \"-close\",\r\n        hc = bb + \"__caption\",\r\n        ic = bb + \"__caption__wrap\",\r\n        jc = bb + \"__spinner\",\r\n        kc = d && d.fn.jquery.split(\".\");\r\n    if (!kc || kc[0] < 1 || 1 == kc[0] && kc[1] < 8) throw \"Fotorama requires jQuery 1.8 or later and will not run without it.\";\r\n    var lc = {}, mc = function(a, b, c) {\r\n            function d(a) {\r\n                r.cssText = a\r\n            }\r\n\r\n            function e(a, b) {\r\n                return typeof a === b\r\n            }\r\n\r\n            function f(a, b) {\r\n                return !!~(\"\" + a).indexOf(b)\r\n            }\r\n\r\n            function g(a, b) {\r\n                for (var d in a) {\r\n                    var e = a[d];\r\n                    if (!f(e, \"-\") && r[e] !== c) return \"pfx\" == b ? e : !0\r\n                }\r\n                return !1\r\n            }\r\n\r\n            function h(a, b, d) {\r\n                for (var f in a) {\r\n                    var g = b[a[f]];\r\n                    if (g !== c) return d === !1 ? a[f] : e(g, \"function\") ? g.bind(d || b) : g\r\n                }\r\n                return !1\r\n            }\r\n\r\n            function i(a, b, c) {\r\n                var d = a.charAt(0).toUpperCase() + a.slice(1),\r\n                    f = (a + \" \" + u.join(d + \" \") + d).split(\" \");\r\n                return e(b, \"string\") || e(b, \"undefined\") ? g(f, b) : (f = (a + \" \" + v.join(d + \" \") + d).split(\" \"), h(f, b, c))\r\n            }\r\n            var j, k, l, m = \"2.6.2\",\r\n                n = {}, o = b.documentElement,\r\n                p = \"modernizr\",\r\n                q = b.createElement(p),\r\n                r = q.style,\r\n                s = ({}.toString, \" -webkit- -moz- -o- -ms- \".split(\" \")),\r\n                t = \"Webkit Moz O ms\",\r\n                u = t.split(\" \"),\r\n                v = t.toLowerCase().split(\" \"),\r\n                w = {}, x = [],\r\n                y = x.slice,\r\n                z = function(a, c, d, e) {\r\n                    var f, g, h, i, j = b.createElement(\"div\"),\r\n                        k = b.body,\r\n                        l = k || b.createElement(\"body\");\r\n                    if (parseInt(d, 10))\r\n                        for (; d--;) h = b.createElement(\"div\"), h.id = e ? e[d] : p + (d + 1), j.appendChild(h);\r\n                    return f = [\"&#173;\", '<style id=\"s', p, '\">', a, \"</style>\"].join(\"\"), j.id = p, (k ? j : l).innerHTML += f, l.appendChild(j), k || (l.style.background = \"\", l.style.overflow = \"hidden\", i = o.style.overflow, o.style.overflow = \"hidden\", o.appendChild(l)), g = c(j, a), k ? j.parentNode.removeChild(j) : (l.parentNode.removeChild(l), o.style.overflow = i), !! g\r\n                }, A = {}.hasOwnProperty;\r\n            l = e(A, \"undefined\") || e(A.call, \"undefined\") ? function(a, b) {\r\n                return b in a && e(a.constructor.prototype[b], \"undefined\")\r\n            } : function(a, b) {\r\n                return A.call(a, b)\r\n            }, Function.prototype.bind || (Function.prototype.bind = function(a) {\r\n                var b = this;\r\n                if (\"function\" != typeof b) throw new TypeError;\r\n                var c = y.call(arguments, 1),\r\n                    d = function() {\r\n                        if (this instanceof d) {\r\n                            var e = function() {};\r\n                            e.prototype = b.prototype;\r\n                            var f = new e,\r\n                                g = b.apply(f, c.concat(y.call(arguments)));\r\n                            return Object(g) === g ? g : f\r\n                        }\r\n                        return b.apply(a, c.concat(y.call(arguments)))\r\n                    };\r\n                return d\r\n            }), w.csstransforms3d = function() {\r\n                var a = !! i(\"perspective\");\r\n                return a\r\n            };\r\n            for (var B in w) l(w, B) && (k = B.toLowerCase(), n[k] = w[B](), x.push((n[k] ? \"\" : \"no-\") + k));\r\n            return n.addTest = function(a, b) {\r\n                if (\"object\" == typeof a)\r\n                    for (var d in a) l(a, d) && n.addTest(d, a[d]);\r\n                else {\r\n                    if (a = a.toLowerCase(), n[a] !== c) return n;\r\n                    b = \"function\" == typeof b ? b() : b, \"undefined\" != typeof enableClasses && enableClasses && (o.className += \" \" + (b ? \"\" : \"no-\") + a), n[a] = b\r\n                }\r\n                return n\r\n            }, d(\"\"), q = j = null, n._version = m, n._prefixes = s, n._domPrefixes = v, n._cssomPrefixes = u, n.testProp = function(a) {\r\n                return g([a])\r\n            }, n.testAllProps = i, n.testStyles = z, n.prefixed = function(a, b, c) {\r\n                return b ? i(a, b, c) : i(a, \"pfx\")\r\n            }, n\r\n        }(a, b),\r\n        nc = {\r\n            ok: !1,\r\n            is: function() {\r\n                return !1\r\n            },\r\n            request: function() {},\r\n            cancel: function() {},\r\n            event: \"\",\r\n            prefix: \"\"\r\n        }, oc = \"webkit moz o ms khtml\".split(\" \");\r\n    if (\"undefined\" != typeof b.cancelFullScreen) nc.ok = !0;\r\n    else\r\n        for (var pc = 0, qc = oc.length; qc > pc; pc++)\r\n            if (nc.prefix = oc[pc], \"undefined\" != typeof b[nc.prefix + \"CancelFullScreen\"]) {\r\n                nc.ok = !0;\r\n                break\r\n            } nc.ok && (nc.event = nc.prefix + \"fullscreenchange\", nc.is = function() {\r\n        switch (this.prefix) {\r\n            case \"\":\r\n                return b.fullScreen;\r\n            case \"webkit\":\r\n                return b.webkitIsFullScreen;\r\n            default:\r\n                return b[this.prefix + \"FullScreen\"]\r\n        }\r\n    }, nc.request = function(a) {\r\n        return \"\" === this.prefix ? a.requestFullScreen() : a[this.prefix + \"RequestFullScreen\"]()\r\n    }, nc.cancel = function() {\r\n        return \"\" === this.prefix ? b.cancelFullScreen() : b[this.prefix + \"CancelFullScreen\"]()\r\n    });\r\n    var rc, sc = {\r\n            lines: 12,\r\n            length: 5,\r\n            width: 2,\r\n            radius: 7,\r\n            corners: 1,\r\n            rotate: 15,\r\n            color: \"rgba(128, 128, 128, .75)\",\r\n            hwaccel: !0\r\n        }, tc = {\r\n            top: \"auto\",\r\n            left: \"auto\",\r\n            className: \"\"\r\n        };\r\n    ! function(a, b) {\r\n        rc = b()\r\n    }(this, function() {\r\n        function a(a, c) {\r\n            var d, e = b.createElement(a || \"div\");\r\n            for (d in c) e[d] = c[d];\r\n            return e\r\n        }\r\n\r\n        function c(a) {\r\n            for (var b = 1, c = arguments.length; c > b; b++) a.appendChild(arguments[b]);\r\n            return a\r\n        }\r\n\r\n        function d(a, b, c, d) {\r\n            var e = [\"opacity\", b, ~~ (100 * a), c, d].join(\"-\"),\r\n                f = .01 + c / d * 100,\r\n                g = Math.max(1 - (1 - a) / b * (100 - f), a),\r\n                h = m.substring(0, m.indexOf(\"Animation\")).toLowerCase(),\r\n                i = h && \"-\" + h + \"-\" || \"\";\r\n            return o[e] || (p.insertRule(\"@\" + i + \"keyframes \" + e + \"{0%{opacity:\" + g + \"}\" + f + \"%{opacity:\" + a + \"}\" + (f + .01) + \"%{opacity:1}\" + (f + b) % 100 + \"%{opacity:\" + a + \"}100%{opacity:\" + g + \"}}\", p.cssRules.length), o[e] = 1), e\r\n        }\r\n\r\n        function f(a, b) {\r\n            var c, d, f = a.style;\r\n            for (b = b.charAt(0).toUpperCase() + b.slice(1), d = 0; d < n.length; d++)\r\n                if (c = n[d] + b, f[c] !== e) return c;\r\n            return f[b] !== e ? b : void 0\r\n        }\r\n\r\n        function g(a, b) {\r\n            for (var c in b) a.style[f(a, c) || c] = b[c];\r\n            return a\r\n        }\r\n\r\n        function h(a) {\r\n            for (var b = 1; b < arguments.length; b++) {\r\n                var c = arguments[b];\r\n                for (var d in c) a[d] === e && (a[d] = c[d])\r\n            }\r\n            return a\r\n        }\r\n\r\n        function i(a) {\r\n            for (var b = {\r\n                x: a.offsetLeft,\r\n                y: a.offsetTop\r\n            }; a = a.offsetParent;) b.x += a.offsetLeft, b.y += a.offsetTop;\r\n            return b\r\n        }\r\n\r\n        function j(a, b) {\r\n            return \"string\" == typeof a ? a : a[b % a.length]\r\n        }\r\n\r\n        function k(a) {\r\n            return \"undefined\" == typeof this ? new k(a) : void(this.opts = h(a || {}, k.defaults, q))\r\n        }\r\n\r\n        function l() {\r\n            function b(b, c) {\r\n                return a(\"<\" + b + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">', c)\r\n            }\r\n            p.addRule(\".spin-vml\", \"behavior:url(#default#VML)\"), k.prototype.lines = function(a, d) {\r\n                function e() {\r\n                    return g(b(\"group\", {\r\n                        coordsize: k + \" \" + k,\r\n                        coordorigin: -i + \" \" + -i\r\n                    }), {\r\n                        width: k,\r\n                        height: k\r\n                    })\r\n                }\r\n\r\n                function f(a, f, h) {\r\n                    c(m, c(g(e(), {\r\n                        rotation: 360 / d.lines * a + \"deg\",\r\n                        left: ~~f\r\n                    }), c(g(b(\"roundrect\", {\r\n                        arcsize: d.corners\r\n                    }), {\r\n                        width: i,\r\n                        height: d.width,\r\n                        left: d.radius,\r\n                        top: -d.width >> 1,\r\n                        filter: h\r\n                    }), b(\"fill\", {\r\n                        color: j(d.color, a),\r\n                        opacity: d.opacity\r\n                    }), b(\"stroke\", {\r\n                        opacity: 0\r\n                    }))))\r\n                }\r\n                var h, i = d.length + d.width,\r\n                    k = 2 * i,\r\n                    l = 2 * -(d.width + d.length) + \"px\",\r\n                    m = g(e(), {\r\n                        position: \"absolute\",\r\n                        top: l,\r\n                        left: l\r\n                    });\r\n                if (d.shadow)\r\n                    for (h = 1; h <= d.lines; h++) f(h, -2, \"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\");\r\n                for (h = 1; h <= d.lines; h++) f(h);\r\n                return c(a, m)\r\n            }, k.prototype.opacity = function(a, b, c, d) {\r\n                var e = a.firstChild;\r\n                d = d.shadow && d.lines || 0, e && b + d < e.childNodes.length && (e = e.childNodes[b + d], e = e && e.firstChild, e = e && e.firstChild, e && (e.opacity = c))\r\n            }\r\n        }\r\n        var m, n = [\"webkit\", \"Moz\", \"ms\", \"O\"],\r\n            o = {}, p = function() {\r\n                var d = a(\"style\", {\r\n                    type: \"text/css\"\r\n                });\r\n                return c(b.getElementsByTagName(\"head\")[0], d), d.sheet || d.styleSheet\r\n            }(),\r\n            q = {\r\n                lines: 12,\r\n                length: 7,\r\n                width: 5,\r\n                radius: 10,\r\n                rotate: 0,\r\n                corners: 1,\r\n                color: \"#000\",\r\n                direction: 1,\r\n                speed: 1,\r\n                trail: 100,\r\n                opacity: .25,\r\n                fps: 20,\r\n                zIndex: 2e9,\r\n                className: \"spinner\",\r\n                top: \"auto\",\r\n                left: \"auto\",\r\n                position: \"relative\"\r\n            };\r\n        k.defaults = {}, h(k.prototype, {\r\n            spin: function(b) {\r\n                this.stop();\r\n                var c, d, e = this,\r\n                    f = e.opts,\r\n                    h = e.el = g(a(0, {\r\n                        className: f.className\r\n                    }), {\r\n                        position: f.position,\r\n                        width: 0,\r\n                        zIndex: f.zIndex\r\n                    }),\r\n                    j = f.radius + f.length + f.width;\r\n                if (b && (b.insertBefore(h, b.firstChild || null), d = i(b), c = i(h), g(h, {\r\n                    left: (\"auto\" == f.left ? d.x - c.x + (b.offsetWidth >> 1) : parseInt(f.left, 10) + j) + \"px\",\r\n                    top: (\"auto\" == f.top ? d.y - c.y + (b.offsetHeight >> 1) : parseInt(f.top, 10) + j) + \"px\"\r\n                })), h.setAttribute(\"role\", \"progressbar\"), e.lines(h, e.opts), !m) {\r\n                    var k, l = 0,\r\n                        n = (f.lines - 1) * (1 - f.direction) / 2,\r\n                        o = f.fps,\r\n                        p = o / f.speed,\r\n                        q = (1 - f.opacity) / (p * f.trail / 100),\r\n                        r = p / f.lines;\r\n                    ! function s() {\r\n                        l++;\r\n                        for (var a = 0; a < f.lines; a++) k = Math.max(1 - (l + (f.lines - a) * r) % p * q, f.opacity), e.opacity(h, a * f.direction + n, k, f);\r\n                        e.timeout = e.el && setTimeout(s, ~~ (1e3 / o))\r\n                    }()\r\n                }\r\n                return e\r\n            },\r\n            stop: function() {\r\n                var a = this.el;\r\n                return a && (clearTimeout(this.timeout), a.parentNode && a.parentNode.removeChild(a), this.el = e), this\r\n            },\r\n            lines: function(b, e) {\r\n                function f(b, c) {\r\n                    return g(a(), {\r\n                        position: \"absolute\",\r\n                        width: e.length + e.width + \"px\",\r\n                        height: e.width + \"px\",\r\n                        background: b,\r\n                        boxShadow: c,\r\n                        transformOrigin: \"left\",\r\n                        transform: \"rotate(\" + ~~(360 / e.lines * i + e.rotate) + \"deg) translate(\" + e.radius + \"px,0)\",\r\n                        borderRadius: (e.corners * e.width >> 1) + \"px\"\r\n                    })\r\n                }\r\n                for (var h, i = 0, k = (e.lines - 1) * (1 - e.direction) / 2; i < e.lines; i++) h = g(a(), {\r\n                    position: \"absolute\",\r\n                    top: 1 + ~(e.width / 2) + \"px\",\r\n                    transform: e.hwaccel ? \"translate3d(0,0,0)\" : \"\",\r\n                    opacity: e.opacity,\r\n                    animation: m && d(e.opacity, e.trail, k + i * e.direction, e.lines) + \" \" + 1 / e.speed + \"s linear infinite\"\r\n                }), e.shadow && c(h, g(f(\"#000\", \"0 0 4px #000\"), {\r\n                    top: \"2px\"\r\n                })), c(b, c(h, f(j(e.color, i), \"0 0 1px rgba(0,0,0,.1)\")));\r\n                return b\r\n            },\r\n            opacity: function(a, b, c) {\r\n                b < a.childNodes.length && (a.childNodes[b].style.opacity = c)\r\n            }\r\n        });\r\n        var r = g(a(\"group\"), {\r\n            behavior: \"url(#default#VML)\"\r\n        });\r\n        return !f(r, \"transform\") && r.adj ? l() : m = f(r, \"animation\"), k\r\n    });\r\n    var uc, vc, wc, xc, yc, zc, Ac = d(a),\r\n        Bc = d(b),\r\n        Cc = \"quirks\" === c.hash.replace(\"#\", \"\"),\r\n        Dc = mc.csstransforms3d,\r\n        Ec = Dc && !Cc,\r\n        Fc = Dc || \"CSS1Compat\" === b.compatMode,\r\n        Gc = nc.ok,\r\n        Hc = navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),\r\n        Ic = !Ec || Hc,\r\n        Jc = \"addEventListener\",\r\n        Kc = navigator.msPointerEnabled,\r\n        Lc = \"onwheel\" in b.createElement(\"div\") ? \"wheel\" : b.onmousewheel !== e ? \"mousewheel\" : \"DOMMouseScroll\",\r\n        Mc = 250,\r\n        Nc = 300,\r\n        Oc = 1400,\r\n        Pc = 5e3,\r\n        Qc = 2,\r\n        Rc = 64,\r\n        Sc = 500,\r\n        Tc = 333,\r\n        Uc = \"$stageFrame\",\r\n        Vc = \"$navDotFrame\",\r\n        Wc = \"$navThumbFrame\",\r\n        Xc = f([.1, 0, .25, 1]),\r\n        Yc = 99999,\r\n        Zc = {\r\n            width: null,\r\n            minwidth: null,\r\n            maxwidth: \"100%\",\r\n            height: null,\r\n            minheight: null,\r\n            maxheight: null,\r\n            ratio: null,\r\n            margin: Qc,\r\n            glimpse: 0,\r\n            nav: \"dots\",\r\n            navposition: \"bottom\",\r\n            navwidth: null,\r\n            thumbwidth: Rc,\r\n            thumbheight: Rc,\r\n            thumbmargin: Qc,\r\n            thumbborderwidth: Qc,\r\n            allowfullscreen: !1,\r\n            fit: \"contain\",\r\n            transition: \"slide\",\r\n            clicktransition: null,\r\n            transitionduration: Nc,\r\n            captions: !0,\r\n            hash: !1,\r\n            startindex: 0,\r\n            loop: !1,\r\n            autoplay: !1,\r\n            stopautoplayontouch: !0,\r\n            keyboard: !1,\r\n            arrows: !0,\r\n            click: !0,\r\n            swipe: !0,\r\n            trackpad: !0,\r\n            shuffle: !1,\r\n            direction: \"ltr\",\r\n            shadows: !0,\r\n            spinner: null\r\n        }, $c = {\r\n            left: !0,\r\n            right: !0,\r\n            down: !1,\r\n            up: !1,\r\n            space: !1,\r\n            home: !1,\r\n            end: !1\r\n        };\r\n    jQuery.Fotorama = function(a, e) {\r\n        function f() {\r\n            d.each(pd, function(a, b) {\r\n                if (!b.i) {\r\n                    b.i = ce++;\r\n                    var c = z(b.video, !0);\r\n                    if (c) {\r\n                        var d = {};\r\n                        b.video = c, b.img || b.thumb ? b.thumbsReady = !0 : d = A(b, pd, $d), B(pd, {\r\n                            img: d.img,\r\n                            thumb: d.thumb\r\n                        }, b.i, $d)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        function g(a) {\r\n            return Pd[a] || $d.fullScreen\r\n        }\r\n\r\n        function i(a) {\r\n            var b = \"keydown.\" + bb,\r\n                c = \"keydown.\" + bb + _d,\r\n                d = \"resize.\" + bb + _d;\r\n            a ? (Bc.on(c, function(a) {\r\n                var b, c;\r\n                td && 27 === a.keyCode ? (b = !0, fd(td, !0, !0)) : ($d.fullScreen || e.keyboard && !$d.index) && (27 === a.keyCode ? (b = !0, $d.cancelFullScreen()) : a.shiftKey && 32 === a.keyCode && g(\"space\") || 37 === a.keyCode && g(\"left\") || 38 === a.keyCode && g(\"up\") ? c = \"<\" : 32 === a.keyCode && g(\"space\") || 39 === a.keyCode && g(\"right\") || 40 === a.keyCode && g(\"down\") ? c = \">\" : 36 === a.keyCode && g(\"home\") ? c = \"<<\" : 35 === a.keyCode && g(\"end\") && (c = \">>\")), (b || c) && S(a), c && $d.show({\r\n                    index: c,\r\n                    slow: a.altKey,\r\n                    user: !0\r\n                })\r\n            }), $d.index || Bc.off(b).on(b, \"textarea, input, select\", function(a) {\r\n                !vc.hasClass(cb) && a.stopPropagation()\r\n            }), Ac.on(d, $d.resize)) : (Bc.off(c), Ac.off(d))\r\n        }\r\n\r\n        function j(b) {\r\n            b !== j.f && (b ? (a.html(\"\").addClass(bb + \" \" + ae).append(ge).before(ee).before(fe), _($d)) : (ge.detach(), ee.detach(), fe.detach(), a.html(de.urtext).removeClass(ae), ab($d)), i(b), j.f = b)\r\n        }\r\n\r\n        function n() {\r\n            pd = $d.data = pd || O(e.data) || C(a), qd = $d.size = pd.length, !od.ok && e.shuffle && N(pd), f(), ze = y(ze), qd && j(!0)\r\n        }\r\n\r\n        function s() {\r\n            var a = 2 > qd || td;\r\n            Ce.noMove = a || Id, Ce.noSwipe = a || !e.swipe, !Md && ie.toggleClass(ub, !Ce.noMove && !Ce.noSwipe), Kc && ge.toggleClass(lb, !Ce.noSwipe)\r\n        }\r\n\r\n        function t(a) {\r\n            a === !0 && (a = \"\"), e.autoplay = Math.max(+a || Pc, 1.5 * Ld)\r\n        }\r\n\r\n        function w() {\r\n            function a(a, c) {\r\n                b[a ? \"add\" : \"remove\"].push(c)\r\n            }\r\n            $d.options = e = Q(e), Id = \"crossfade\" === e.transition || \"dissolve\" === e.transition, Cd = e.loop && (qd > 2 || Id) && (!Md || \"slide\" !== Md), Ld = +e.transitionduration || Nc, Od = \"rtl\" === e.direction, Pd = d.extend({}, e.keyboard && $c, e.keyboard);\r\n            var b = {\r\n                add: [],\r\n                remove: []\r\n            };\r\n            qd > 1 ? (Dd = e.nav, Fd = \"top\" === e.navposition, b.remove.push(Qb), me.toggle( !! e.arrows)) : (Dd = !1, me.hide()), ec(), sd = new rc(d.extend(sc, e.spinner, tc, {\r\n                direction: Od ? -1 : 1\r\n            })), yc(), zc(), e.autoplay && t(e.autoplay), Jd = m(e.thumbwidth) || Rc, Kd = m(e.thumbheight) || Rc, De.ok = Fe.ok = e.trackpad && !Ic, s(), Xc(e, [Be]), Ed = \"thumbs\" === Dd, Ed ? (lc(qd, \"navThumb\"), rd = re, Zd = Wc, I(ee, d.Fotorama.jst.style({\r\n                w: Jd,\r\n                h: Kd,\r\n                b: e.thumbborderwidth,\r\n                m: e.thumbmargin,\r\n                s: _d,\r\n                q: !Fc\r\n            })), oe.addClass(Eb).removeClass(Db)) : \"dots\" === Dd ? (lc(qd, \"navDot\"), rd = qe, Zd = Vc, oe.addClass(Db).removeClass(Eb)) : (Dd = !1, oe.removeClass(Eb + \" \" + Db)), Dd && (Fd ? ne.insertBefore(he) : ne.insertAfter(he), qc.nav = !1, qc(rd, pe, \"nav\")), Gd = e.allowfullscreen, Gd ? (te.appendTo(he), Hd = Gc && \"native\" === Gd) : (te.detach(), Hd = !1), a(Id, hb), a(!Id, ib), a(!e.captions, ob), a(Od, mb), a(\"always\" !== e.arrows, pb), Nd = e.shadows && !Ic, a(!Nd, kb), ge.addClass(b.add.join(\" \")).removeClass(b.remove.join(\" \")), Ae = d.extend({}, e)\r\n        }\r\n\r\n        function x(a) {\r\n            return 0 > a ? (qd + a % qd) % qd : a >= qd ? a % qd : a\r\n        }\r\n\r\n        function y(a) {\r\n            return h(a, 0, qd - 1)\r\n        }\r\n\r\n        function D(a) {\r\n            return Cd ? x(a) : y(a)\r\n        }\r\n\r\n        function W(a) {\r\n            return a > 0 || Cd ? a - 1 : !1\r\n        }\r\n\r\n        function X(a) {\r\n            return qd - 1 > a || Cd ? a + 1 : !1\r\n        }\r\n\r\n        function $() {\r\n            Ce.min = Cd ? -1 / 0 : -q(qd - 1, Be.w, e.margin, wd), Ce.max = Cd ? 1 / 0 : -q(0, Be.w, e.margin, wd), Ce.snap = Be.w + e.margin\r\n        }\r\n\r\n        function Ib() {\r\n            Ee.min = Math.min(0, Be.nw - pe.width()), Ee.max = 0, pe.toggleClass(ub, !(Ee.noMove = Ee.min === Ee.max))\r\n        }\r\n\r\n        function Jb(a, b, c) {\r\n            if (\"number\" == typeof a) {\r\n                a = new Array(a);\r\n                var e = !0\r\n            }\r\n            return d.each(a, function(a, d) {\r\n                if (e && (d = a), \"number\" == typeof d) {\r\n                    var f = pd[x(d)];\r\n                    if (f) {\r\n                        var g = \"$\" + b + \"Frame\",\r\n                            h = f[g];\r\n                        c.call(this, a, d, f, h, g, h && h.data())\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        function Kb(a, b, c, d) {\r\n            (!Qd || \"*\" === Qd && d === Bd) && (a = p(e.width) || p(a) || Sc, b = p(e.height) || p(b) || Tc, $d.resize({\r\n                width: a,\r\n                ratio: e.ratio || c || a / b\r\n            }, 0, d === Bd ? !0 : \"*\"))\r\n        }\r\n\r\n        function Lb(a, b, c, f, g) {\r\n            Jb(a, b, function(a, h, i, j, k, l) {\r\n                function m(a) {\r\n                    var b = x(h);\r\n                    Zc(a, {\r\n                        index: b,\r\n                        src: v,\r\n                        frame: pd[b]\r\n                    })\r\n                }\r\n\r\n                function n() {\r\n                    s.remove(), d.Fotorama.cache[v] = \"error\", i.html && \"stage\" === b || !w || w === v ? (!v || i.html || q ? \"stage\" === b && (j.trigger(\"f:load\").removeClass(Vb + \" \" + Ub).addClass(Wb), m(\"load\"), Kb()) : (j.trigger(\"f:error\").removeClass(Vb).addClass(Ub), m(\"error\")), l.state = \"error\", !(qd > 1 && pd[h] === i) || i.html || i.deleted || i.video || q || (i.deleted = !0, $d.splice(h, 1))) : (i[u] = v = w, Lb([h], b, c, f, !0))\r\n                }\r\n\r\n                function o() {\r\n                    d.Fotorama.measures[v] = t.measures = d.Fotorama.measures[v] || {\r\n                        width: r.width,\r\n                        height: r.height,\r\n                        ratio: r.width / r.height\r\n                    }, Kb(t.measures.width, t.measures.height, t.measures.ratio, h), s.off(\"load error\").addClass($b + (q ? \" \" + _b : \"\")).prependTo(j), H(s, c || Be, f || i.fit || e.fit), d.Fotorama.cache[v] = l.state = \"loaded\", setTimeout(function() {\r\n                        j.trigger(\"f:load\").removeClass(Vb + \" \" + Ub).addClass(Wb + \" \" + (q ? Xb : Yb)), \"stage\" === b && m(\"load\")\r\n                    }, 5)\r\n                }\r\n\r\n                function p() {\r\n                    var a = 10;\r\n                    F(function() {\r\n                        return !Xd || !a-- && !Ic\r\n                    }, function() {\r\n                        o()\r\n                    })\r\n                }\r\n                if (j) {\r\n                    var q = $d.fullScreen && i.full && i.full !== i.img && !l.$full && \"stage\" === b;\r\n                    if (!l.$img || g || q) {\r\n                        var r = new Image,\r\n                            s = d(r),\r\n                            t = s.data();\r\n                        l[q ? \"$full\" : \"$img\"] = s;\r\n                        var u = \"stage\" === b ? q ? \"full\" : \"img\" : \"thumb\",\r\n                            v = i[u],\r\n                            w = q ? null : i[\"stage\" === b ? \"thumb\" : \"img\"];\r\n                        if (\"navThumb\" === b && (j = l.$wrap), !v) return void n();\r\n                        d.Fotorama.cache[v] ? ! function y() {\r\n                            \"error\" === d.Fotorama.cache[v] ? n() : \"loaded\" === d.Fotorama.cache[v] ? setTimeout(p, 0) : setTimeout(y, 100)\r\n                        }() : (d.Fotorama.cache[v] = \"*\", s.on(\"load\", p).on(\"error\", n)), l.state = \"\", r.src = v\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        function Zb(a) {\r\n            ye.append(sd.spin().el).appendTo(a)\r\n        }\r\n\r\n        function ec() {\r\n            ye.detach(), sd && sd.stop()\r\n        }\r\n\r\n        function kc() {\r\n            var a = $d.activeFrame[Uc];\r\n            a && !a.data().state && (Zb(a), a.on(\"f:load f:error\", function() {\r\n                a.off(\"f:load f:error\"), ec()\r\n            }))\r\n        }\r\n\r\n        function lc(a, b) {\r\n            Jb(a, b, function(a, c, f, g, h, i) {\r\n                g || (g = f[h] = ge[h].clone(), i = g.data(), i.data = f, \"stage\" === b ? (f.html && d('<div class=\"' + dc + '\"></div>').append(f._html ? d(f.html).removeAttr(\"id\").html(f._html) : f.html).appendTo(g), e.captions && f.caption && d(M(hc, M(ic, f.caption))).appendTo(g), f.video && g.addClass(sb).append(ve.clone()), je = je.add(g)) : \"navDot\" === b ? qe = qe.add(g) : \"navThumb\" === b && (i.$wrap = g.children(\":first\"), re = re.add(g), f.video && g.append(ve.clone())))\r\n            })\r\n        }\r\n\r\n        function mc(a, b, c) {\r\n            return a && a.length && H(a, b, c)\r\n        }\r\n\r\n        function oc(a) {\r\n            Jb(a, \"stage\", function(a, b, c, f, g, h) {\r\n                if (f) {\r\n                    He[Uc][x(b)] = f.css(d.extend({\r\n                        left: Id ? 0 : q(b, Be.w, e.margin, wd)\r\n                    }, Id && l(0))), E(f[0]) && (f.appendTo(ie), fd(c.$video));\r\n                    var i = c.fit || e.fit;\r\n                    mc(h.$img, Be, i), mc(h.$full, Be, i)\r\n                }\r\n            })\r\n        }\r\n\r\n        function pc(a, b) {\r\n            if (\"thumbs\" === Dd && !isNaN(a)) {\r\n                var c = -a,\r\n                    e = -a + Be.nw;\r\n                re.each(function() {\r\n                    var a = d(this),\r\n                        f = a.data(),\r\n                        g = f.eq,\r\n                        h = {\r\n                            h: Kd\r\n                        }, i = \"cover\";\r\n                    h.w = f.w, f.l + f.w < c || f.l > e || mc(f.$img, h, i) || b && Lb([g], \"navThumb\", h, i)\r\n                })\r\n            }\r\n        }\r\n\r\n        function qc(a, b, c) {\r\n            if (!qc[c]) {\r\n                var f = \"nav\" === c && Ed,\r\n                    g = 0;\r\n                b.append(a.filter(function() {\r\n                    for (var a, b = d(this), c = b.data(), e = 0, f = pd.length; f > e; e++)\r\n                        if (c.data === pd[e]) {\r\n                            a = !0, c.eq = e;\r\n                            break\r\n                        }\r\n                    return a || b.remove() && !1\r\n                }).sort(function(a, b) {\r\n                    return d(a).data().eq - d(b).data().eq\r\n                }).each(function() {\r\n                    if (f) {\r\n                        var a = d(this),\r\n                            b = a.data(),\r\n                            c = Math.round(Kd * b.data.thumbratio) || Jd;\r\n                        b.l = g, b.w = c, a.css({\r\n                            width: c\r\n                        }), g += c + e.thumbmargin\r\n                    }\r\n                })), qc[c] = !0\r\n            }\r\n        }\r\n\r\n        function wc(a) {\r\n            return a - Ie > Be.w / 3\r\n        }\r\n\r\n        function xc(a) {\r\n            return !(Cd || ze + a && ze - qd + a || td)\r\n        }\r\n\r\n        function yc() {\r\n            ke.toggleClass(xb, xc(0)), le.toggleClass(xb, xc(1))\r\n        }\r\n\r\n        function zc() {\r\n            De.ok && (De.prevent = {\r\n                \"<\": xc(0),\r\n                \">\": xc(1)\r\n            })\r\n        }\r\n\r\n        function Cc(a) {\r\n            var b, c, d = a.data();\r\n            return Ed ? (b = d.l, c = d.w) : (b = a.position().left, c = a.width()), {\r\n                c: b + c / 2,\r\n                min: -b + 10 * e.thumbmargin,\r\n                max: -b + Be.w - c - 10 * e.thumbmargin\r\n            }\r\n        }\r\n\r\n        function Dc(a) {\r\n            var b = $d.activeFrame[Zd].data();\r\n            U(se, {\r\n                time: .9 * a,\r\n                pos: b.l,\r\n                width: b.w - 2 * e.thumbborderwidth\r\n            })\r\n        }\r\n\r\n        function Hc(a) {\r\n            var b = pd[a.guessIndex][Zd];\r\n            if (b) {\r\n                var c = Ee.min !== Ee.max,\r\n                    d = c && Cc($d.activeFrame[Zd]),\r\n                    e = c && (a.keep && Hc.l ? Hc.l : h((a.coo || Be.nw / 2) - Cc(b).c, d.min, d.max)),\r\n                    f = c && h(e, Ee.min, Ee.max),\r\n                    g = .9 * a.time;\r\n                U(pe, {\r\n                    time: g,\r\n                    pos: f || 0,\r\n                    onEnd: function() {\r\n                        pc(f, !0)\r\n                    }\r\n                }), ed(oe, J(f, Ee.min, Ee.max)), Hc.l = e\r\n            }\r\n        }\r\n\r\n        function Jc() {\r\n            Lc(Zd), Ge[Zd].push($d.activeFrame[Zd].addClass(Pb))\r\n        }\r\n\r\n        function Lc(a) {\r\n            for (var b = Ge[a]; b.length;) b.shift().removeClass(Pb)\r\n        }\r\n\r\n        function Oc(a) {\r\n            var b = He[a];\r\n            d.each(vd, function(a, c) {\r\n                delete b[x(c)]\r\n            }), d.each(b, function(a, c) {\r\n                delete b[a], c.detach()\r\n            })\r\n        }\r\n\r\n        function Qc(a) {\r\n            wd = xd = ze;\r\n            var b = $d.activeFrame,\r\n                c = b[Uc];\r\n            c && (Lc(Uc), Ge[Uc].push(c.addClass(Pb)), a || $d.show.onEnd(!0), u(ie, 0, !0), Oc(Uc), oc(vd), $(), Ib())\r\n        }\r\n\r\n        function Xc(a, b) {\r\n            a && d.each(b, function(b, c) {\r\n                c && d.extend(c, {\r\n                    width: a.width || c.width,\r\n                    height: a.height,\r\n                    minwidth: a.minwidth,\r\n                    maxwidth: a.maxwidth,\r\n                    minheight: a.minheight,\r\n                    maxheight: a.maxheight,\r\n                    ratio: R(a.ratio)\r\n                })\r\n            })\r\n        }\r\n\r\n        function Zc(b, c) {\r\n            a.trigger(bb + \":\" + b, [$d, c])\r\n        }\r\n\r\n        function _c() {\r\n            clearTimeout(ad.t), Xd = 1, e.stopautoplayontouch ? $d.stopAutoplay() : Ud = !0\r\n        }\r\n\r\n        function ad() {\r\n            e.stopautoplayontouch || (bd(), cd()), ad.t = setTimeout(function() {\r\n                Xd = 0\r\n            }, Nc + Mc)\r\n        }\r\n\r\n        function bd() {\r\n            Ud = !(!td && !Vd)\r\n        }\r\n\r\n        function cd() {\r\n            if (clearTimeout(cd.t), !e.autoplay || Ud) return void($d.autoplay && ($d.autoplay = !1, Zc(\"stopautoplay\")));\r\n            $d.autoplay || ($d.autoplay = !0, Zc(\"startautoplay\"));\r\n            var a = ze,\r\n                b = $d.activeFrame[Uc].data();\r\n            F(function() {\r\n                return b.state || a !== ze\r\n            }, function() {\r\n                cd.t = setTimeout(function() {\r\n                    Ud || a !== ze || $d.show(Cd ? T(!Od) : x(ze + (Od ? -1 : 1)))\r\n                }, e.autoplay)\r\n            })\r\n        }\r\n\r\n        function dd() {\r\n            $d.fullScreen && ($d.fullScreen = !1, Gc && nc.cancel(be), vc.removeClass(cb), uc.removeClass(cb), a.removeClass(Sb).insertAfter(fe), Be = d.extend({}, Wd), fd(td, !0, !0), kd(\"x\", !1), $d.resize(), Lb(vd, \"stage\"), P(Sd, Rd), Zc(\"fullscreenexit\"))\r\n        }\r\n\r\n        function ed(a, b) {\r\n            Nd && (a.removeClass(Nb + \" \" + Ob), b && !td && a.addClass(b.replace(/^|\\s/g, \" \" + Mb + \"--\")))\r\n        }\r\n\r\n        function fd(a, b, c) {\r\n            b && (ge.removeClass(gb), td = !1, s()), a && a !== td && (a.remove(), Zc(\"unloadvideo\")), c && (bd(), cd())\r\n        }\r\n\r\n        function gd(a) {\r\n            ge.toggleClass(jb, a)\r\n        }\r\n\r\n        function hd(a) {\r\n            if (!Ce.flow) {\r\n                var b = a ? a.pageX : hd.x,\r\n                    c = b && !xc(wc(b)) && e.click;\r\n                hd.p === c || !Id && e.swipe || !he.toggleClass(vb, c) || (hd.p = c, hd.x = b)\r\n            }\r\n        }\r\n\r\n        function id(a) {\r\n            clearTimeout(id.t), e.clicktransition && e.clicktransition !== e.transition ? (Md = e.transition, $d.setOptions({\r\n                transition: e.clicktransition\r\n            }), id.t = setTimeout(function() {\r\n                $d.show(a)\r\n            }, 10)) : $d.show(a)\r\n        }\r\n\r\n        function jd(a, b) {\r\n            var c = a.target,\r\n                f = d(c);\r\n            f.hasClass(fc) ? $d.playVideo() : c === ue ? $d[($d.fullScreen ? \"cancel\" : \"request\") + \"FullScreen\"]() : td ? c === xe && fd(td, !0, !0) : b ? gd() : e.click && id({\r\n                index: a.shiftKey || T(wc(a._x)),\r\n                slow: a.altKey,\r\n                user: !0\r\n            })\r\n        }\r\n\r\n        function kd(a, b) {\r\n            Ce[a] = Ee[a] = b\r\n        }\r\n\r\n        function ld(a, b) {\r\n            var c = d(this).data().eq;\r\n            id({\r\n                index: c,\r\n                slow: a.altKey,\r\n                user: !0,\r\n                coo: a._x - oe.offset().left,\r\n                time: b\r\n            })\r\n        }\r\n\r\n        function md() {\r\n            if (n(), w(), !md.i) {\r\n                md.i = !0;\r\n                var a = e.startindex;\r\n                (a || e.hash && c.hash) && (Bd = K(a || c.hash.replace(/^#/, \"\"), pd, 0 === $d.index || a, a)), ze = wd = xd = yd = Bd = D(Bd) || 0\r\n            }\r\n            if (qd) {\r\n                if (nd()) return;\r\n                td && fd(td, !0), vd = [], Oc(Uc), $d.show({\r\n                    index: ze,\r\n                    time: 0,\r\n                    reset: md.ok\r\n                }), $d.resize()\r\n            } else $d.destroy();\r\n            md.ok = !0\r\n        }\r\n\r\n        function nd() {\r\n            return !nd.f === Od ? (nd.f = Od, ze = qd - 1 - ze, $d.reverse(), !0) : void 0\r\n        }\r\n\r\n        function od() {\r\n            od.ok || (od.ok = !0, Zc(\"ready\"))\r\n        }\r\n        uc = uc || d(\"html\"), vc = vc || d(\"body\");\r\n        var pd, qd, rd, sd, td, ud, vd, wd, xd, yd, zd, Ad, Bd, Cd, Dd, Ed, Fd, Gd, Hd, Id, Jd, Kd, Ld, Md, Nd, Od, Pd, Qd, Rd, Sd, Td, Ud, Vd, Wd, Xd, Yd, Zd, $d = this,\r\n            _d = d.now(),\r\n            ae = bb + _d,\r\n            be = a[0],\r\n            ce = 1,\r\n            de = a.data(),\r\n            ee = d(\"<style></style>\"),\r\n            fe = d(M(Rb)),\r\n            ge = d(M(db)),\r\n            he = d(M(qb)).appendTo(ge),\r\n            ie = (he[0], d(M(tb)).appendTo(he)),\r\n            je = d(),\r\n            ke = d(M(wb + \" \" + yb)),\r\n            le = d(M(wb + \" \" + zb)),\r\n            me = ke.add(le).appendTo(he),\r\n            ne = d(M(Bb)),\r\n            oe = d(M(Ab)).appendTo(ne),\r\n            pe = d(M(Cb)).appendTo(oe),\r\n            qe = d(),\r\n            re = d(),\r\n            se = (ie.data(), pe.data(), d(M(cc)).appendTo(pe)),\r\n            te = d(M(Tb)),\r\n            ue = te[0],\r\n            ve = d(M(fc)),\r\n            we = d(M(gc)).appendTo(he),\r\n            xe = we[0],\r\n            ye = d(M(jc)),\r\n            ze = !1,\r\n            Ae = {}, Be = {}, Ce = {}, De = {}, Ee = {}, Fe = {}, Ge = {}, He = {}, Ie = 0,\r\n            Je = [];\r\n        ge[Uc] = d(M(rb)), ge[Wc] = d(M(Fb + \" \" + Hb, M(bc))), ge[Vc] = d(M(Fb + \" \" + Gb, M(ac))), Ge[Uc] = [], Ge[Wc] = [], Ge[Vc] = [], He[Uc] = {}, ge.addClass(Ec ? fb : eb), de.fotorama = this, $d.startAutoplay = function(a) {\r\n            return $d.autoplay ? this : (Ud = Vd = !1, t(a || e.autoplay), cd(), this)\r\n        }, $d.stopAutoplay = function() {\r\n            return $d.autoplay && (Ud = Vd = !0, cd()), this\r\n        }, $d.show = function(a) {\r\n            var b;\r\n            \"object\" != typeof a ? (b = a, a = {}) : b = a.index, b = \">\" === b ? xd + 1 : \"<\" === b ? xd - 1 : \"<<\" === b ? 0 : \">>\" === b ? qd - 1 : b, b = isNaN(b) ? K(b, pd, !0) : b, b = \"undefined\" == typeof b ? ze || 0 : b, $d.activeIndex = ze = D(b), zd = W(ze), Ad = X(ze), vd = [ze, zd, Ad], xd = Cd ? b : ze;\r\n            var c = Math.abs(yd - xd),\r\n                d = v(a.time, function() {\r\n                    return Math.min(Ld * (1 + (c - 1) / 12), 2 * Ld)\r\n                }),\r\n                f = a.overPos;\r\n            a.slow && (d *= 10), $d.activeFrame = ud = pd[ze], fd(td, ud.i !== pd[x(wd)].i), lc(vd, \"stage\"), oc(Ic ? [xd] : [xd, W(xd), X(xd)]), kd(\"go\", !0), a.reset || Zc(\"show\", {\r\n                user: a.user,\r\n                time: d\r\n            }), Ud = !0;\r\n            var g = $d.show.onEnd = function(b) {\r\n                if (!g.ok) {\r\n                    if (g.ok = !0, b || Qc(!0), !a.reset && (Zc(\"showend\", {\r\n                        user: a.user\r\n                    }), !b && Md && Md !== e.transition)) return $d.setOptions({\r\n                        transition: Md\r\n                    }), void(Md = !1);\r\n                    kc(), Lb(vd, \"stage\"), kd(\"go\", !1), zc(), hd(), bd(), cd()\r\n                }\r\n            };\r\n            if (Id) {\r\n                var i = ud[Uc],\r\n                    j = ze !== yd ? pd[yd][Uc] : null;\r\n                V(i, j, je, {\r\n                    time: d,\r\n                    method: e.transition,\r\n                    onEnd: g\r\n                }, Je)\r\n            } else U(ie, {\r\n                pos: -q(xd, Be.w, e.margin, wd),\r\n                overPos: f,\r\n                time: d,\r\n                onEnd: g,\r\n                _001: !0\r\n            }); if (yc(), Dd) {\r\n                Jc();\r\n                var k = y(ze + h(xd - yd, -1, 1));\r\n                Hc({\r\n                    time: d,\r\n                    coo: k !== ze && a.coo,\r\n                    guessIndex: \"undefined\" != typeof a.coo ? k : ze,\r\n                    keep: a.reset\r\n                }), Ed && Dc(d)\r\n            }\r\n            return Td = \"undefined\" != typeof yd && yd !== ze, yd = ze, e.hash && Td && !$d.eq && G(ud.id || ze + 1), this\r\n        }, $d.requestFullScreen = function() {\r\n            return Gd && !$d.fullScreen && (Rd = Ac.scrollTop(), Sd = Ac.scrollLeft(), P(0, 0), kd(\"x\", !0), Wd = d.extend({}, Be), a.addClass(Sb).appendTo(vc.addClass(cb)), uc.addClass(cb), fd(td, !0, !0), $d.fullScreen = !0, Hd && nc.request(be), $d.resize(), Lb(vd, \"stage\"), kc(), Zc(\"fullscreenenter\")), this\r\n        }, $d.cancelFullScreen = function() {\r\n            return Hd && nc.is() ? nc.cancel(b) : dd(), this\r\n        }, b.addEventListener && b.addEventListener(nc.event, function() {\r\n            !pd || nc.is() || td || dd()\r\n        }, !1), $d.resize = function(a) {\r\n            if (!pd) return this;\r\n            Xc($d.fullScreen ? {\r\n                width: \"100%\",\r\n                maxwidth: null,\r\n                minwidth: null,\r\n                height: \"100%\",\r\n                maxheight: null,\r\n                minheight: null\r\n            } : Q(a), [Be, $d.fullScreen || e]);\r\n            var b = arguments[1] || 0,\r\n                c = arguments[2],\r\n                d = Be.width,\r\n                f = Be.height,\r\n                g = Be.ratio,\r\n                i = Ac.height() - (Dd ? oe.height() : 0);\r\n            return p(d) && (ge.addClass(nb).css({\r\n                width: d,\r\n                minWidth: Be.minwidth || 0,\r\n                maxWidth: Be.maxwidth || Yc\r\n            }), d = Be.W = Be.w = ge.width(), Be.nw = Dd && o(e.navwidth, d) || d, e.glimpse && (Be.w -= Math.round(2 * (o(e.glimpse, d) || 0))), ie.css({\r\n                width: Be.w,\r\n                marginLeft: (Be.W - Be.w) / 2\r\n            }), f = o(f, i), f = f || g && d / g, f && (d = Math.round(d), f = Be.h = Math.round(h(f, o(Be.minheight, i), o(Be.maxheight, i))), he.stop().animate({\r\n                width: d,\r\n                height: f\r\n            }, b, function() {\r\n                ge.removeClass(nb)\r\n            }), Qc(), Dd && (oe.stop().animate({\r\n                width: Be.nw\r\n            }, b), Hc({\r\n                guessIndex: ze,\r\n                time: b,\r\n                keep: !0\r\n            }), Ed && qc.nav && Dc(b)), Qd = c || !0, od())), Ie = he.offset().left, this\r\n        }, $d.setOptions = function(a) {\r\n            return d.extend(e, a), md(), this\r\n        }, $d.shuffle = function() {\r\n            return pd && N(pd) && md(), this\r\n        }, $d.destroy = function() {\r\n            return $d.cancelFullScreen(), $d.stopAutoplay(), pd = $d.data = null, j(), vd = [], Oc(Uc), this\r\n        }, $d.playVideo = function() {\r\n            var a = $d.activeFrame,\r\n                b = a.video,\r\n                c = ze;\r\n            return \"object\" == typeof b && a.videoReady && (Hd && $d.fullScreen && $d.cancelFullScreen(), F(function() {\r\n                return !nc.is() || c !== ze\r\n            }, function() {\r\n                c === ze && (a.$video = a.$video || d(d.Fotorama.jst.video(b)), a.$video.appendTo(a[Uc]), ge.addClass(gb), td = a.$video, s(), Zc(\"loadvideo\"))\r\n            })), this\r\n        }, $d.stopVideo = function() {\r\n            return fd(td, !0, !0), this\r\n        }, he.on(\"mousemove\", hd), Ce = Y(ie, {\r\n            onStart: _c,\r\n            onMove: function(a, b) {\r\n                ed(he, b.edge)\r\n            },\r\n            onTouchEnd: ad,\r\n            onEnd: function(a) {\r\n                ed(he);\r\n                var b = (Kc && !Yd || a.touch) && e.arrows && \"always\" !== e.arrows;\r\n                if (a.moved || b && a.pos !== a.newPos && !a.control) {\r\n                    var c = r(a.newPos, Be.w, e.margin, wd);\r\n                    $d.show({\r\n                        index: c,\r\n                        time: Id ? Ld : a.time,\r\n                        overPos: a.overPos,\r\n                        user: !0\r\n                    })\r\n                } else a.aborted || a.control || jd(a.startEvent, b)\r\n            },\r\n            _001: !0,\r\n            timeLow: 1,\r\n            timeHigh: 1,\r\n            friction: 2,\r\n            select: \".\" + Qb + \", .\" + Qb + \" *\",\r\n            $wrap: he\r\n        }), Ee = Y(pe, {\r\n            onStart: _c,\r\n            onMove: function(a, b) {\r\n                ed(oe, b.edge)\r\n            },\r\n            onTouchEnd: ad,\r\n            onEnd: function(a) {\r\n                function b() {\r\n                    Hc.l = a.newPos, bd(), cd(), pc(a.newPos, !0)\r\n                }\r\n                if (a.moved) a.pos !== a.newPos ? (Ud = !0, U(pe, {\r\n                    time: a.time,\r\n                    pos: a.newPos,\r\n                    overPos: a.overPos,\r\n                    onEnd: b\r\n                }), pc(a.newPos), Nd && ed(oe, J(a.newPos, Ee.min, Ee.max))) : b();\r\n                else {\r\n                    var c = a.$target.closest(\".\" + Fb, pe)[0];\r\n                    c && ld.call(c, a.startEvent)\r\n                }\r\n            },\r\n            timeLow: .5,\r\n            timeHigh: 2,\r\n            friction: 5,\r\n            $wrap: oe\r\n        }), De = Z(he, {\r\n            shift: !0,\r\n            onEnd: function(a, b) {\r\n                _c(), ad(), $d.show({\r\n                    index: b,\r\n                    slow: a.altKey\r\n                })\r\n            }\r\n        }), Fe = Z(oe, {\r\n            onEnd: function(a, b) {\r\n                _c(), ad();\r\n                var c = u(pe) + .25 * b;\r\n                pe.css(k(h(c, Ee.min, Ee.max))), Nd && ed(oe, J(c, Ee.min, Ee.max)), Fe.prevent = {\r\n                    \"<\": c >= Ee.max,\r\n                    \">\": c <= Ee.min\r\n                }, clearTimeout(Fe.t), Fe.t = setTimeout(function() {\r\n                    pc(c, !0)\r\n                }, Mc), pc(c)\r\n            }\r\n        }), ge.hover(function() {\r\n            setTimeout(function() {\r\n                Xd || (Yd = !0, gd(!Yd))\r\n            }, 0)\r\n        }, function() {\r\n            Yd && (Yd = !1, gd(!Yd))\r\n        }), L(me, function(a) {\r\n            S(a), id({\r\n                index: me.index(this) ? \">\" : \"<\",\r\n                slow: a.altKey,\r\n                user: !0\r\n            })\r\n        }, {\r\n            onStart: function() {\r\n                _c(), Ce.control = !0\r\n            },\r\n            onTouchEnd: ad\r\n        }), d.each(\"load push pop shift unshift reverse sort splice\".split(\" \"), function(a, b) {\r\n            $d[b] = function() {\r\n                return pd = pd || [], \"load\" !== b ? Array.prototype[b].apply(pd, arguments) : arguments[0] && \"object\" == typeof arguments[0] && arguments[0].length && (pd = O(arguments[0])), md(), $d\r\n            }\r\n        }), md()\r\n    }, d.fn.fotorama = function(b) {\r\n        return this.each(function() {\r\n            var c = this,\r\n                e = d(this),\r\n                f = e.data(),\r\n                g = f.fotorama;\r\n            g ? g.setOptions(b) : F(function() {\r\n                return !D(c)\r\n            }, function() {\r\n                f.urtext = e.html(), new d.Fotorama(e, d.extend({}, Zc, a.fotoramaDefaults, b, f))\r\n            })\r\n        })\r\n    }, d.Fotorama.instances = [], d.Fotorama.cache = {}, d.Fotorama.measures = {}, d = d || {}, d.Fotorama = d.Fotorama || {}, d.Fotorama.jst = d.Fotorama.jst || {}, d.Fotorama.jst.style = function(a) {\r\n        {\r\n            var b, c = \"\";\r\n            lc.escape\r\n        }\r\n        return c += \".fotorama\" + (null == (b = a.s) ? \"\" : b) + \" .fotorama__nav--thumbs .fotorama__nav__frame{\\npadding:\" + (null == (b = a.m) ? \"\" : b) + \"px;\\nheight:\" + (null == (b = a.h) ? \"\" : b) + \"px}\\n.fotorama\" + (null == (b = a.s) ? \"\" : b) + \" .fotorama__thumb-border{\\nheight:\" + (null == (b = a.h - a.b * (a.q ? 0 : 2)) ? \"\" : b) + \"px;\\nborder-width:\" + (null == (b = a.b) ? \"\" : b) + \"px;\\nmargin-top:\" + (null == (b = a.m) ? \"\" : b) + \"px}\"\r\n    }, d.Fotorama.jst.video = function(a) {\r\n        function b() {\r\n            c += d.call(arguments, \"\")\r\n        }\r\n        var c = \"\",\r\n            d = (lc.escape, Array.prototype.join);\r\n        return c += '<div class=\"fotorama__video\"><iframe src=\"', b((\"youtube\" == a.type ? \"http://youtube.com/embed/\" + a.id + \"?autoplay=1\" : \"vimeo\" == a.type ? \"http://player.vimeo.com/video/\" + a.id + \"?autoplay=1&badge=0\" : a.id) + (a.s && \"custom\" != a.type ? \"&\" + a.s : \"\")), c += '\" frameborder=\"0\" allowfullscreen></iframe></div>'\r\n    }, d(function() {\r\n        d(\".\" + bb + ':not([data-auto=\"false\"])').fotorama()\r\n    })\r\n}(window, document, location, \"undefined\" != typeof jQuery && jQuery);","/*! Magnific Popup - v0.9.2 - 2013-07-15\r\n * http://dimsemenov.com/plugins/magnific-popup/\r\n * Copyright (c) 2013 Dmitry Semenov; */\r\n;\r\n(function($) {\r\n\r\n    /*>>core*/\r\n    /**\r\n     *\r\n     * Magnific Popup Core JS file\r\n     *\r\n     */\r\n\r\n\r\n    /**\r\n     * Private static constants\r\n     */\r\n    var CLOSE_EVENT = 'Close',\r\n        BEFORE_CLOSE_EVENT = 'BeforeClose',\r\n        AFTER_CLOSE_EVENT = 'AfterClose',\r\n        BEFORE_APPEND_EVENT = 'BeforeAppend',\r\n        MARKUP_PARSE_EVENT = 'MarkupParse',\r\n        OPEN_EVENT = 'Open',\r\n        CHANGE_EVENT = 'Change',\r\n        NS = 'mfp',\r\n        EVENT_NS = '.' + NS,\r\n        READY_CLASS = 'mfp-ready',\r\n        REMOVING_CLASS = 'mfp-removing',\r\n        PREVENT_CLOSE_CLASS = 'mfp-prevent-close';\r\n\r\n\r\n    /**\r\n     * Private vars\r\n     */\r\n    var mfp, // As we have only one instance of MagnificPopup object, we define it locally to not to use 'this'\r\n        MagnificPopup = function() {},\r\n        _isJQ = !! (window.jQuery),\r\n        _prevStatus,\r\n        _window = $(window),\r\n        _body,\r\n        _document,\r\n        _prevContentType,\r\n        _wrapClasses,\r\n        _currPopupType;\r\n\r\n\r\n    /**\r\n     * Private functions\r\n     */\r\n    var _mfpOn = function(name, f) {\r\n        mfp.ev.on(NS + name + EVENT_NS, f);\r\n    },\r\n        _getEl = function(className, appendTo, html, raw) {\r\n            var el = document.createElement('div');\r\n            el.className = 'mfp-' + className;\r\n            if (html) {\r\n                el.innerHTML = html;\r\n            }\r\n            if (!raw) {\r\n                el = $(el);\r\n                if (appendTo) {\r\n                    el.appendTo(appendTo);\r\n                }\r\n            } else if (appendTo) {\r\n                appendTo.appendChild(el);\r\n            }\r\n            return el;\r\n        },\r\n        _mfpTrigger = function(e, data) {\r\n            mfp.ev.triggerHandler(NS + e, data);\r\n\r\n            if (mfp.st.callbacks) {\r\n                // converts \"mfpEventName\" to \"eventName\" callback and triggers it if it's present\r\n                e = e.charAt(0).toLowerCase() + e.slice(1);\r\n                if (mfp.st.callbacks[e]) {\r\n                    mfp.st.callbacks[e].apply(mfp, $.isArray(data) ? data : [data]);\r\n                }\r\n            }\r\n        },\r\n        _setFocus = function() {\r\n            (mfp.st.focus ? mfp.content.find(mfp.st.focus).eq(0) : mfp.wrap).trigger('focus');\r\n        },\r\n        _getCloseBtn = function(type) {\r\n            if (type !== _currPopupType || !mfp.currTemplate.closeBtn) {\r\n                mfp.currTemplate.closeBtn = $(mfp.st.closeMarkup.replace('%title%', mfp.st.tClose));\r\n                _currPopupType = type;\r\n            }\r\n            return mfp.currTemplate.closeBtn;\r\n        },\r\n        // Initialize Magnific Popup only when called at least once\r\n        _checkInstance = function() {\r\n            if (!$.magnificPopup.instance) {\r\n                mfp = new MagnificPopup();\r\n                mfp.init();\r\n                $.magnificPopup.instance = mfp;\r\n            }\r\n        },\r\n        // Check to close popup or not\r\n        // \"target\" is an element that was clicked\r\n        _checkIfClose = function(target) {\r\n\r\n            if ($(target).hasClass(PREVENT_CLOSE_CLASS)) {\r\n                return;\r\n            }\r\n\r\n            var closeOnContent = mfp.st.closeOnContentClick;\r\n            var closeOnBg = mfp.st.closeOnBgClick;\r\n\r\n            if (closeOnContent && closeOnBg) {\r\n                return true;\r\n            } else {\r\n\r\n                // We close the popup if click is on close button or on preloader. Or if there is no content.\r\n                if (!mfp.content || $(target).hasClass('mfp-close') || (mfp.preloader && target === mfp.preloader[0])) {\r\n                    return true;\r\n                }\r\n\r\n                // if click is outside the content\r\n                if ((target !== mfp.content[0] && !$.contains(mfp.content[0], target))) {\r\n                    if (closeOnBg) {\r\n                        // last check, if the clicked element is in DOM, (in case it's removed onclick)\r\n                        if ($.contains(document, target)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                } else if (closeOnContent) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n            return false;\r\n        },\r\n        // CSS transition detection, http://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr\r\n        supportsTransitions = function() {\r\n            var s = document.createElement('p').style, // 's' for style. better to create an element if body yet to exist\r\n                v = ['ms', 'O', 'Moz', 'Webkit']; // 'v' for vendor\r\n\r\n            if (s['transition'] !== undefined) {\r\n                return true;\r\n            }\r\n\r\n            while (v.length) {\r\n                if (v.pop() + 'Transition' in s) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n\r\n\r\n    /**\r\n     * Public functions\r\n     */\r\n    MagnificPopup.prototype = {\r\n\r\n        constructor: MagnificPopup,\r\n\r\n        /**\r\n         * Initializes Magnific Popup plugin.\r\n         * This function is triggered only once when $.fn.magnificPopup or $.magnificPopup is executed\r\n         */\r\n        init: function() {\r\n            var appVersion = navigator.appVersion;\r\n            mfp.isIE7 = appVersion.indexOf(\"MSIE 7.\") !== -1;\r\n            mfp.isIE8 = appVersion.indexOf(\"MSIE 8.\") !== -1;\r\n            mfp.isLowIE = mfp.isIE7 || mfp.isIE8;\r\n            mfp.isAndroid = (/android/gi).test(appVersion);\r\n            mfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);\r\n            mfp.supportsTransition = supportsTransitions();\r\n\r\n            // We disable fixed positioned lightbox on devices that don't handle it nicely.\r\n            // If you know a better way of detecting this - let me know.\r\n            mfp.probablyMobile = (mfp.isAndroid || mfp.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent));\r\n            _body = $(document.body);\r\n            _document = $(document);\r\n\r\n            mfp.popupsCache = {};\r\n        },\r\n\r\n        /**\r\n         * Opens popup\r\n         * @param  data [description]\r\n         */\r\n        open: function(data) {\r\n\r\n            var i;\r\n\r\n            if (data.isObj === false) {\r\n                // convert jQuery collection to array to avoid conflicts later\r\n                mfp.items = data.items.toArray();\r\n\r\n                mfp.index = 0;\r\n                var items = data.items,\r\n                    item;\r\n                for (i = 0; i < items.length; i++) {\r\n                    item = items[i];\r\n                    if (item.parsed) {\r\n                        item = item.el[0];\r\n                    }\r\n                    if (item === data.el[0]) {\r\n                        mfp.index = i;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                mfp.items = $.isArray(data.items) ? data.items : [data.items];\r\n                mfp.index = data.index || 0;\r\n            }\r\n\r\n            // if popup is already opened - we just update the content\r\n            if (mfp.isOpen) {\r\n                mfp.updateItemHTML();\r\n                return;\r\n            }\r\n\r\n            mfp.types = [];\r\n            _wrapClasses = '';\r\n            if (data.mainEl && data.mainEl.length) {\r\n                mfp.ev = data.mainEl.eq(0);\r\n            } else {\r\n                mfp.ev = _document;\r\n            }\r\n\r\n            if (data.key) {\r\n                if (!mfp.popupsCache[data.key]) {\r\n                    mfp.popupsCache[data.key] = {};\r\n                }\r\n                mfp.currTemplate = mfp.popupsCache[data.key];\r\n            } else {\r\n                mfp.currTemplate = {};\r\n            }\r\n\r\n\r\n\r\n            mfp.st = $.extend(true, {}, $.magnificPopup.defaults, data);\r\n            mfp.fixedContentPos = mfp.st.fixedContentPos === 'auto' ? !mfp.probablyMobile : mfp.st.fixedContentPos;\r\n\r\n            if (mfp.st.modal) {\r\n                mfp.st.closeOnContentClick = false;\r\n                mfp.st.closeOnBgClick = false;\r\n                mfp.st.showCloseBtn = false;\r\n                mfp.st.enableEscapeKey = false;\r\n            }\r\n\r\n\r\n            // Building markup\r\n            // main containers are created only once\r\n            if (!mfp.bgOverlay) {\r\n\r\n                // Dark overlay\r\n                mfp.bgOverlay = _getEl('bg').on('click' + EVENT_NS, function() {\r\n                    mfp.close();\r\n                });\r\n\r\n                mfp.wrap = _getEl('wrap').attr('tabindex', -1).on('click' + EVENT_NS, function(e) {\r\n                    if (_checkIfClose(e.target)) {\r\n                        mfp.close();\r\n                    }\r\n                });\r\n\r\n                mfp.container = _getEl('container', mfp.wrap);\r\n            }\r\n\r\n            mfp.contentContainer = _getEl('content');\r\n            if (mfp.st.preloader) {\r\n                mfp.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);\r\n            }\r\n\r\n\r\n            // Initializing modules\r\n            var modules = $.magnificPopup.modules;\r\n            for (i = 0; i < modules.length; i++) {\r\n                var n = modules[i];\r\n                n = n.charAt(0).toUpperCase() + n.slice(1);\r\n                mfp['init' + n].call(mfp);\r\n            }\r\n            _mfpTrigger('BeforeOpen');\r\n\r\n\r\n            if (mfp.st.showCloseBtn) {\r\n                // Close button\r\n                if (!mfp.st.closeBtnInside) {\r\n                    mfp.wrap.append(_getCloseBtn());\r\n                } else {\r\n                    _mfpOn(MARKUP_PARSE_EVENT, function(e, template, values, item) {\r\n                        values.close_replaceWith = _getCloseBtn(item.type);\r\n                    });\r\n                    _wrapClasses += ' mfp-close-btn-in';\r\n                }\r\n            }\r\n\r\n            if (mfp.st.alignTop) {\r\n                _wrapClasses += ' mfp-align-top';\r\n            }\r\n\r\n\r\n\r\n            if (mfp.fixedContentPos) {\r\n                mfp.wrap.css({\r\n                    overflow: mfp.st.overflowY,\r\n                    overflowX: 'hidden',\r\n                    overflowY: mfp.st.overflowY\r\n                });\r\n            } else {\r\n                mfp.wrap.css({\r\n                    top: _window.scrollTop(),\r\n                    position: 'absolute'\r\n                });\r\n            }\r\n            if (mfp.st.fixedBgPos === false || (mfp.st.fixedBgPos === 'auto' && !mfp.fixedContentPos)) {\r\n                mfp.bgOverlay.css({\r\n                    height: _document.height(),\r\n                    position: 'absolute'\r\n                });\r\n            }\r\n\r\n\r\n\r\n            if (mfp.st.enableEscapeKey) {\r\n                // Close on ESC key\r\n                _document.on('keyup' + EVENT_NS, function(e) {\r\n                    if (e.keyCode === 27) {\r\n                        mfp.close();\r\n                    }\r\n                });\r\n            }\r\n\r\n            _window.on('resize' + EVENT_NS, function() {\r\n                mfp.updateSize();\r\n            });\r\n\r\n\r\n            if (!mfp.st.closeOnContentClick) {\r\n                _wrapClasses += ' mfp-auto-cursor';\r\n            }\r\n\r\n            if (_wrapClasses)\r\n                mfp.wrap.addClass(_wrapClasses);\r\n\r\n\r\n            // this triggers recalculation of layout, so we get it once to not to trigger twice\r\n            var windowHeight = mfp.wH = _window.height();\r\n\r\n\r\n            var windowStyles = {};\r\n\r\n            // if (mfp.fixedContentPos) {\r\n            //     if (mfp._hasScrollBar(windowHeight)) {\r\n            //         var s = mfp._getScrollbarSize();\r\n            //         if (s) {\r\n            //             windowStyles.paddingRight = s;\r\n            //         }\r\n            //     }\r\n            // }\r\n\r\n            // if (mfp.fixedContentPos) {\r\n            //     if (!mfp.isIE7) {\r\n            //         windowStyles.overflow = 'hidden';\r\n            //     } else {\r\n            //         // ie7 double-scroll bug\r\n            //         $('body, html').css('overflow', 'hidden');\r\n            //     }\r\n            // }\r\n\r\n\r\n\r\n            var classesToadd = mfp.st.mainClass;\r\n            if (mfp.isIE7) {\r\n                classesToadd += ' mfp-ie7';\r\n            }\r\n            if (classesToadd) {\r\n                mfp._addClassToMFP(classesToadd);\r\n            }\r\n\r\n            // add content\r\n            mfp.updateItemHTML();\r\n\r\n            _mfpTrigger('BuildControls');\r\n\r\n\r\n            // remove scrollbar, add padding e.t.c\r\n            $('html').css(windowStyles);\r\n\r\n            // add everything to DOM\r\n            mfp.bgOverlay.add(mfp.wrap).prependTo(document.body);\r\n\r\n\r\n\r\n            // Save last focused element\r\n            mfp._lastFocusedEl = document.activeElement;\r\n\r\n            // Wait for next cycle to allow CSS transition\r\n            setTimeout(function() {\r\n\r\n                if (mfp.content) {\r\n                    mfp._addClassToMFP(READY_CLASS);\r\n                    _setFocus();\r\n                } else {\r\n                    // if content is not defined (not loaded e.t.c) we add class only for BG\r\n                    mfp.bgOverlay.addClass(READY_CLASS);\r\n                }\r\n\r\n                // Trap the focus in popup\r\n                _document.on('focusin' + EVENT_NS, function(e) {\r\n                    if (e.target !== mfp.wrap[0] && !$.contains(mfp.wrap[0], e.target)) {\r\n                        _setFocus();\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n            }, 16);\r\n\r\n            mfp.isOpen = true;\r\n            mfp.updateSize(windowHeight);\r\n            _mfpTrigger(OPEN_EVENT);\r\n        },\r\n\r\n        /**\r\n         * Closes the popup\r\n         */\r\n        close: function() {\r\n            if (!mfp.isOpen) return;\r\n            _mfpTrigger(BEFORE_CLOSE_EVENT);\r\n\r\n            mfp.isOpen = false;\r\n            // for CSS3 animation\r\n            if (mfp.st.removalDelay && !mfp.isLowIE && mfp.supportsTransition) {\r\n                mfp._addClassToMFP(REMOVING_CLASS);\r\n                setTimeout(function() {\r\n                    mfp._close();\r\n                }, mfp.st.removalDelay);\r\n            } else {\r\n                mfp._close();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Helper for close() function\r\n         */\r\n        _close: function() {\r\n            _mfpTrigger(CLOSE_EVENT);\r\n\r\n            var classesToRemove = REMOVING_CLASS + ' ' + READY_CLASS + ' ';\r\n\r\n            mfp.bgOverlay.detach();\r\n            mfp.wrap.detach();\r\n            mfp.container.empty();\r\n\r\n            if (mfp.st.mainClass) {\r\n                classesToRemove += mfp.st.mainClass + ' ';\r\n            }\r\n\r\n            mfp._removeClassFromMFP(classesToRemove);\r\n\r\n            if (mfp.fixedContentPos) {\r\n                var windowStyles = {\r\n                    paddingRight: ''\r\n                };\r\n                // if (mfp.isIE7) {\r\n                //     $('body, html').css('overflow', '');\r\n                // } else {\r\n                //     windowStyles.overflow = '';\r\n                // }\r\n                $('html').css(windowStyles);\r\n            }\r\n\r\n            _document.off('keyup' + EVENT_NS + ' focusin' + EVENT_NS);\r\n            mfp.ev.off(EVENT_NS);\r\n\r\n            // clean up DOM elements that aren't removed\r\n            mfp.wrap.attr('class', 'mfp-wrap').removeAttr('style');\r\n            mfp.bgOverlay.attr('class', 'mfp-bg');\r\n            mfp.container.attr('class', 'mfp-container');\r\n\r\n            // remove close button from target element\r\n            if (mfp.st.showCloseBtn &&\r\n                (!mfp.st.closeBtnInside || mfp.currTemplate[mfp.currItem.type] === true)) {\r\n                if (mfp.currTemplate.closeBtn)\r\n                    mfp.currTemplate.closeBtn.detach();\r\n            }\r\n\r\n\r\n            if (mfp._lastFocusedEl) {\r\n                $(mfp._lastFocusedEl).trigger('focus'); // put tab focus back\r\n            }\r\n            mfp.currItem = null;\r\n            mfp.content = null;\r\n            mfp.currTemplate = null;\r\n            mfp.prevHeight = 0;\r\n\r\n            _mfpTrigger(AFTER_CLOSE_EVENT);\r\n        },\r\n\r\n        updateSize: function(winHeight) {\r\n\r\n            if (mfp.isIOS) {\r\n                // fixes iOS nav bars https://github.com/dimsemenov/Magnific-Popup/issues/2\r\n                var zoomLevel = document.documentElement.clientWidth / window.innerWidth;\r\n                var height = window.innerHeight * zoomLevel;\r\n                mfp.wrap.css('height', height);\r\n                mfp.wH = height;\r\n            } else {\r\n                mfp.wH = winHeight || _window.height();\r\n            }\r\n            // Fixes #84: popup incorrectly positioned with position:relative on body\r\n            if (!mfp.fixedContentPos) {\r\n                mfp.wrap.css('height', mfp.wH);\r\n            }\r\n\r\n            _mfpTrigger('Resize');\r\n\r\n        },\r\n\r\n        /**\r\n         * Set content of popup based on current index\r\n         */\r\n        updateItemHTML: function() {\r\n            var item = mfp.items[mfp.index];\r\n\r\n            // Detach and perform modifications\r\n            mfp.contentContainer.detach();\r\n\r\n            if (mfp.content)\r\n                mfp.content.detach();\r\n\r\n            if (!item.parsed) {\r\n                item = mfp.parseEl(mfp.index);\r\n            }\r\n\r\n            var type = item.type;\r\n\r\n            _mfpTrigger('BeforeChange', [mfp.currItem ? mfp.currItem.type : '', type]);\r\n            // BeforeChange event works like so:\r\n            // _mfpOn('BeforeChange', function(e, prevType, newType) { });\r\n\r\n            mfp.currItem = item;\r\n\r\n\r\n\r\n\r\n\r\n            if (!mfp.currTemplate[type]) {\r\n                var markup = mfp.st[type] ? mfp.st[type].markup : false;\r\n\r\n                // allows to modify markup\r\n                _mfpTrigger('FirstMarkupParse', markup);\r\n\r\n                if (markup) {\r\n                    mfp.currTemplate[type] = $(markup);\r\n                } else {\r\n                    // if there is no markup found we just define that template is parsed\r\n                    mfp.currTemplate[type] = true;\r\n                }\r\n            }\r\n\r\n            if (_prevContentType && _prevContentType !== item.type) {\r\n                mfp.container.removeClass('mfp-' + _prevContentType + '-holder');\r\n            }\r\n\r\n            var newContent = mfp['get' + type.charAt(0).toUpperCase() + type.slice(1)](item, mfp.currTemplate[type]);\r\n            mfp.appendContent(newContent, type);\r\n\r\n            item.preloaded = true;\r\n\r\n            _mfpTrigger(CHANGE_EVENT, item);\r\n            _prevContentType = item.type;\r\n\r\n            // Append container back after its content changed\r\n            mfp.container.prepend(mfp.contentContainer);\r\n\r\n            _mfpTrigger('AfterChange');\r\n        },\r\n\r\n\r\n        /**\r\n         * Set HTML content of popup\r\n         */\r\n        appendContent: function(newContent, type) {\r\n            mfp.content = newContent;\r\n\r\n            if (newContent) {\r\n                if (mfp.st.showCloseBtn && mfp.st.closeBtnInside &&\r\n                    mfp.currTemplate[type] === true) {\r\n                    // if there is no markup, we just append close button element inside\r\n                    if (!mfp.content.find('.mfp-close').length) {\r\n                        mfp.content.append(_getCloseBtn());\r\n                    }\r\n                } else {\r\n                    mfp.content = newContent;\r\n                }\r\n            } else {\r\n                mfp.content = '';\r\n            }\r\n\r\n            _mfpTrigger(BEFORE_APPEND_EVENT);\r\n            mfp.container.addClass('mfp-' + type + '-holder');\r\n\r\n            mfp.contentContainer.append(mfp.content);\r\n        },\r\n\r\n\r\n\r\n\r\n        /**\r\n         * Creates Magnific Popup data object based on given data\r\n         * @param  {int} index Index of item to parse\r\n         */\r\n        parseEl: function(index) {\r\n            var item = mfp.items[index],\r\n                type = item.type;\r\n\r\n            if (item.tagName) {\r\n                item = {\r\n                    el: $(item)\r\n                };\r\n            } else {\r\n                item = {\r\n                    data: item,\r\n                    src: item.src\r\n                };\r\n            }\r\n\r\n            if (item.el) {\r\n                var types = mfp.types;\r\n\r\n                // check for 'mfp-TYPE' class\r\n                for (var i = 0; i < types.length; i++) {\r\n                    if (item.el.hasClass('mfp-' + types[i])) {\r\n                        type = types[i];\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                item.src = item.el.attr('data-mfp-src');\r\n                if (!item.src) {\r\n                    item.src = item.el.attr('href');\r\n                }\r\n            }\r\n\r\n            item.type = type || mfp.st.type || 'inline';\r\n            item.index = index;\r\n            item.parsed = true;\r\n            mfp.items[index] = item;\r\n            _mfpTrigger('ElementParse', item);\r\n\r\n            return mfp.items[index];\r\n        },\r\n\r\n\r\n        /**\r\n         * Initializes single popup or a group of popups\r\n         */\r\n        addGroup: function(el, options) {\r\n            var eHandler = function(e) {\r\n                e.mfpEl = this;\r\n                mfp._openClick(e, el, options);\r\n            };\r\n\r\n            if (!options) {\r\n                options = {};\r\n            }\r\n\r\n            var eName = 'click.magnificPopup';\r\n            options.mainEl = el;\r\n\r\n            if (options.items) {\r\n                options.isObj = true;\r\n                el.off(eName).on(eName, eHandler);\r\n            } else {\r\n                options.isObj = false;\r\n                if (options.delegate) {\r\n                    el.off(eName).on(eName, options.delegate, eHandler);\r\n                } else {\r\n                    options.items = el;\r\n                    el.off(eName).on(eName, eHandler);\r\n                }\r\n            }\r\n        },\r\n        _openClick: function(e, el, options) {\r\n            var midClick = options.midClick !== undefined ? options.midClick : $.magnificPopup.defaults.midClick;\r\n\r\n\r\n            if (!midClick && (e.which === 2 || e.ctrlKey || e.metaKey)) {\r\n                return;\r\n            }\r\n\r\n            var disableOn = options.disableOn !== undefined ? options.disableOn : $.magnificPopup.defaults.disableOn;\r\n\r\n            if (disableOn) {\r\n                if ($.isFunction(disableOn)) {\r\n                    if (!disableOn.call(mfp)) {\r\n                        return true;\r\n                    }\r\n                } else { // else it's number\r\n                    if (_window.width() < disableOn) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (e.type) {\r\n                e.preventDefault();\r\n\r\n                // This will prevent popup from closing if element is inside and popup is already opened\r\n                if (mfp.isOpen) {\r\n                    e.stopPropagation();\r\n                }\r\n            }\r\n\r\n\r\n            options.el = $(e.mfpEl);\r\n            if (options.delegate) {\r\n                options.items = el.find(options.delegate);\r\n            }\r\n            mfp.open(options);\r\n        },\r\n\r\n\r\n        /**\r\n         * Updates text on preloader\r\n         */\r\n        updateStatus: function(status, text) {\r\n\r\n            if (mfp.preloader) {\r\n                if (_prevStatus !== status) {\r\n                    mfp.container.removeClass('mfp-s-' + _prevStatus);\r\n                }\r\n\r\n                if (!text && status === 'loading') {\r\n                    text = mfp.st.tLoading;\r\n                }\r\n\r\n                var data = {\r\n                    status: status,\r\n                    text: text\r\n                };\r\n                // allows to modify status\r\n                _mfpTrigger('UpdateStatus', data);\r\n\r\n                status = data.status;\r\n                text = data.text;\r\n\r\n                mfp.preloader.html(text);\r\n\r\n                mfp.preloader.find('a').on('click', function(e) {\r\n                    e.stopImmediatePropagation();\r\n                });\r\n\r\n                mfp.container.addClass('mfp-s-' + status);\r\n                _prevStatus = status;\r\n            }\r\n        },\r\n\r\n\r\n        /*\r\n\t\t\"Private\" helpers that aren't private at all\r\n\t */\r\n        _addClassToMFP: function(cName) {\r\n            mfp.bgOverlay.addClass(cName);\r\n            mfp.wrap.addClass(cName);\r\n        },\r\n        _removeClassFromMFP: function(cName) {\r\n            this.bgOverlay.removeClass(cName);\r\n            mfp.wrap.removeClass(cName);\r\n        },\r\n        _hasScrollBar: function(winHeight) {\r\n            return ((mfp.isIE7 ? _document.height() : document.body.scrollHeight) > (winHeight || _window.height()));\r\n        },\r\n        _parseMarkup: function(template, values, item) {\r\n            var arr;\r\n            if (item.data) {\r\n                values = $.extend(item.data, values);\r\n            }\r\n            _mfpTrigger(MARKUP_PARSE_EVENT, [template, values, item]);\r\n\r\n            $.each(values, function(key, value) {\r\n                if (value === undefined || value === false) {\r\n                    return true;\r\n                }\r\n                arr = key.split('_');\r\n                if (arr.length > 1) {\r\n                    var el = template.find(EVENT_NS + '-' + arr[0]);\r\n\r\n                    if (el.length > 0) {\r\n                        var attr = arr[1];\r\n                        if (attr === 'replaceWith') {\r\n                            if (el[0] !== value[0]) {\r\n                                el.replaceWith(value);\r\n                            }\r\n                        } else if (attr === 'img') {\r\n                            if (el.is('img')) {\r\n                                el.attr('src', value);\r\n                            } else {\r\n                                el.replaceWith('<img src=\"' + value + '\" class=\"' + el.attr('class') + '\" />');\r\n                            }\r\n                        } else {\r\n                            el.attr(arr[1], value);\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    template.find(EVENT_NS + '-' + key).html(value);\r\n                }\r\n            });\r\n        },\r\n\r\n        _getScrollbarSize: function() {\r\n            // thx David\r\n            if (mfp.scrollbarSize === undefined) {\r\n                var scrollDiv = document.createElement(\"div\");\r\n                scrollDiv.id = \"mfp-sbm\";\r\n                scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';\r\n                document.body.appendChild(scrollDiv);\r\n                mfp.scrollbarSize = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n                document.body.removeChild(scrollDiv);\r\n            }\r\n            return mfp.scrollbarSize;\r\n        }\r\n\r\n    }; /* MagnificPopup core prototype end */\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Public static functions\r\n     */\r\n    $.magnificPopup = {\r\n        instance: null,\r\n        proto: MagnificPopup.prototype,\r\n        modules: [],\r\n\r\n        open: function(options, index) {\r\n            _checkInstance();\r\n\r\n            if (!options)\r\n                options = {};\r\n\r\n            options.isObj = true;\r\n            options.index = index || 0;\r\n            return this.instance.open(options);\r\n        },\r\n\r\n        close: function() {\r\n            return $.magnificPopup.instance.close();\r\n        },\r\n\r\n        registerModule: function(name, module) {\r\n            if (module.options) {\r\n                $.magnificPopup.defaults[name] = module.options;\r\n            }\r\n            $.extend(this.proto, module.proto);\r\n            this.modules.push(name);\r\n        },\r\n\r\n        defaults: {\r\n\r\n            // Info about options is in docs:\r\n            // http://dimsemenov.com/plugins/magnific-popup/documentation.html#options\r\n\r\n            disableOn: 0,\r\n\r\n            key: null,\r\n\r\n            midClick: true,\r\n\r\n            mainClass: '',\r\n\r\n            preloader: true,\r\n\r\n            focus: '', // CSS selector of input to focus after popup is opened\r\n\r\n            closeOnContentClick: false,\r\n\r\n            closeOnBgClick: true,\r\n\r\n            closeBtnInside: false,\r\n\r\n            showCloseBtn: true,\r\n\r\n            enableEscapeKey: true,\r\n\r\n            modal: false,\r\n\r\n            alignTop: false,\r\n\r\n            removalDelay: 300,\r\n\r\n            fixedContentPos: 'auto',\r\n\r\n            fixedBgPos: 'auto',\r\n\r\n            overflowY: 'auto',\r\n\r\n            closeMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&times;</button>',\r\n\r\n            tClose: 'Close (Esc)',\r\n\r\n            tLoading: 'Loading...',\r\n\r\n            callbacks: {\r\n                beforeOpen: function() {\r\n                    this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');\r\n                    this.st.mainClass = this.st.el.attr('data-effect');\r\n                }\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n\r\n\r\n    $.fn.magnificPopup = function(options) {\r\n        _checkInstance();\r\n\r\n        var jqEl = $(this);\r\n\r\n        // We call some API method of first param is a string\r\n        if (typeof options === \"string\") {\r\n\r\n            if (options === 'open') {\r\n                var items,\r\n                    itemOpts = _isJQ ? jqEl.data('magnificPopup') : jqEl[0].magnificPopup,\r\n                    index = parseInt(arguments[1], 10) || 0;\r\n\r\n                if (itemOpts.items) {\r\n                    items = itemOpts.items[index];\r\n                } else {\r\n                    items = jqEl;\r\n                    if (itemOpts.delegate) {\r\n                        items = items.find(itemOpts.delegate);\r\n                    }\r\n                    items = items.eq(index);\r\n                }\r\n                mfp._openClick({\r\n                    mfpEl: items\r\n                }, jqEl, itemOpts);\r\n            } else {\r\n                if (mfp.isOpen)\r\n                    mfp[options].apply(mfp, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n\r\n        } else {\r\n\r\n            /*\r\n             * As Zepto doesn't support .data() method for objects\r\n             * and it works only in normal browsers\r\n             * we assign \"options\" object directly to the DOM element. FTW!\r\n             */\r\n            if (_isJQ) {\r\n                jqEl.data('magnificPopup', options);\r\n            } else {\r\n                jqEl[0].magnificPopup = options;\r\n            }\r\n\r\n            mfp.addGroup(jqEl, options);\r\n\r\n        }\r\n        return jqEl;\r\n    };\r\n\r\n\r\n    //Quick benchmark\r\n    /*\r\nvar start = performance.now(),\r\n\ti,\r\n\trounds = 1000;\r\n\r\nfor(i = 0; i < rounds; i++) {\r\n\r\n}\r\nconsole.log('Test #1:', performance.now() - start);\r\n\r\nstart = performance.now();\r\nfor(i = 0; i < rounds; i++) {\r\n\r\n}\r\nconsole.log('Test #2:', performance.now() - start);\r\n*/\r\n\r\n\r\n    /*>>core*/\r\n\r\n    /*>>inline*/\r\n\r\n    var INLINE_NS = 'inline',\r\n        _hiddenClass,\r\n        _inlinePlaceholder,\r\n        _lastInlineElement,\r\n        _putInlineElementsBack = function() {\r\n            if (_lastInlineElement) {\r\n                _inlinePlaceholder.after(_lastInlineElement.addClass(_hiddenClass)).detach();\r\n                _lastInlineElement = null;\r\n            }\r\n        };\r\n\r\n    $.magnificPopup.registerModule(INLINE_NS, {\r\n        options: {\r\n            hiddenClass: 'hide', // will be appended with `mfp-` prefix\r\n            markup: '',\r\n            tNotFound: 'Content not found'\r\n        },\r\n        proto: {\r\n\r\n            initInline: function() {\r\n                mfp.types.push(INLINE_NS);\r\n\r\n                _mfpOn(CLOSE_EVENT + '.' + INLINE_NS, function() {\r\n                    _putInlineElementsBack();\r\n                });\r\n            },\r\n\r\n            getInline: function(item, template) {\r\n\r\n                _putInlineElementsBack();\r\n\r\n                if (item.src) {\r\n                    var inlineSt = mfp.st.inline,\r\n                        el = $(item.src);\r\n\r\n                    if (el.length) {\r\n\r\n                        // If target element has parent - we replace it with placeholder and put it back after popup is closed\r\n                        var parent = el[0].parentNode;\r\n                        if (parent && parent.tagName) {\r\n                            if (!_inlinePlaceholder) {\r\n                                _hiddenClass = inlineSt.hiddenClass;\r\n                                _inlinePlaceholder = _getEl(_hiddenClass);\r\n                                _hiddenClass = 'mfp-' + _hiddenClass;\r\n                            }\r\n                            // replace target inline element with placeholder\r\n                            _lastInlineElement = el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass);\r\n                        }\r\n\r\n                        mfp.updateStatus('ready');\r\n                    } else {\r\n                        mfp.updateStatus('error', inlineSt.tNotFound);\r\n                        el = $('<div>');\r\n                    }\r\n\r\n                    item.inlineElement = el;\r\n                    return el;\r\n                }\r\n\r\n                mfp.updateStatus('ready');\r\n                mfp._parseMarkup(template, {}, item);\r\n                return template;\r\n            }\r\n        }\r\n    });\r\n\r\n    /*>>inline*/\r\n\r\n    /*>>ajax*/\r\n    var AJAX_NS = 'ajax',\r\n        _ajaxCur,\r\n        _removeAjaxCursor = function() {\r\n            if (_ajaxCur) {\r\n                _body.removeClass(_ajaxCur);\r\n            }\r\n        };\r\n\r\n    $.magnificPopup.registerModule(AJAX_NS, {\r\n\r\n        options: {\r\n            settings: null,\r\n            cursor: 'mfp-ajax-cur',\r\n            tError: '<a href=\"%url%\">The content</a> could not be loaded.'\r\n        },\r\n\r\n        proto: {\r\n            initAjax: function() {\r\n                mfp.types.push(AJAX_NS);\r\n                _ajaxCur = mfp.st.ajax.cursor;\r\n\r\n                _mfpOn(CLOSE_EVENT + '.' + AJAX_NS, function() {\r\n                    _removeAjaxCursor();\r\n                    if (mfp.req) {\r\n                        mfp.req.abort();\r\n                    }\r\n                });\r\n            },\r\n\r\n            getAjax: function(item) {\r\n\r\n                if (_ajaxCur)\r\n                    _body.addClass(_ajaxCur);\r\n\r\n                mfp.updateStatus('loading');\r\n\r\n                var opts = $.extend({\r\n                    url: item.src,\r\n                    success: function(data, textStatus, jqXHR) {\r\n                        var temp = {\r\n                            data: data,\r\n                            xhr: jqXHR\r\n                        };\r\n\r\n                        _mfpTrigger('ParseAjax', temp);\r\n\r\n                        mfp.appendContent($(temp.data), AJAX_NS);\r\n\r\n                        item.finished = true;\r\n\r\n                        _removeAjaxCursor();\r\n\r\n                        _setFocus();\r\n\r\n                        setTimeout(function() {\r\n                            mfp.wrap.addClass(READY_CLASS);\r\n                        }, 16);\r\n\r\n                        mfp.updateStatus('ready');\r\n\r\n                        _mfpTrigger('AjaxContentAdded');\r\n                    },\r\n                    error: function() {\r\n                        _removeAjaxCursor();\r\n                        item.finished = item.loadError = true;\r\n                        mfp.updateStatus('error', mfp.st.ajax.tError.replace('%url%', item.src));\r\n                    }\r\n                }, mfp.st.ajax.settings);\r\n\r\n                mfp.req = $.ajax(opts);\r\n\r\n                return '';\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /*>>ajax*/\r\n\r\n    /*>>image*/\r\n    var _imgInterval,\r\n        _getTitle = function(item) {\r\n            if (item.data && item.data.title !== undefined)\r\n                return item.data.title;\r\n\r\n            var src = mfp.st.image.titleSrc;\r\n\r\n            if (src) {\r\n                if ($.isFunction(src)) {\r\n                    return src.call(mfp, item);\r\n                } else if (item.el) {\r\n                    return item.el.attr(src) || '';\r\n                }\r\n            }\r\n            return '';\r\n        };\r\n\r\n    $.magnificPopup.registerModule('image', {\r\n\r\n        options: {\r\n            markup: '<div class=\"mfp-figure\">' +\r\n                '<div class=\"mfp-close\"></div>' +\r\n                '<div class=\"mfp-img\"></div>' +\r\n                '<div class=\"mfp-bottom-bar\">' +\r\n                '<div class=\"mfp-title\"></div>' +\r\n                '<div class=\"mfp-counter\"></div>' +\r\n                '</div>' +\r\n                '</div>',\r\n            cursor: 'mfp-zoom-out-cur',\r\n            titleSrc: 'title',\r\n            verticalFit: true,\r\n            tError: '<a href=\"%url%\">The image</a> could not be loaded.'\r\n        },\r\n\r\n        proto: {\r\n            initImage: function() {\r\n                var imgSt = mfp.st.image,\r\n                    ns = '.image';\r\n\r\n                mfp.types.push('image');\r\n\r\n                _mfpOn(OPEN_EVENT + ns, function() {\r\n                    if (mfp.currItem.type === 'image' && imgSt.cursor) {\r\n                        _body.addClass(imgSt.cursor);\r\n                    }\r\n                });\r\n\r\n                _mfpOn(CLOSE_EVENT + ns, function() {\r\n                    if (imgSt.cursor) {\r\n                        _body.removeClass(imgSt.cursor);\r\n                    }\r\n                    _window.off('resize' + EVENT_NS);\r\n                });\r\n\r\n                _mfpOn('Resize' + ns, mfp.resizeImage);\r\n                if (mfp.isLowIE) {\r\n                    _mfpOn('AfterChange', mfp.resizeImage);\r\n                }\r\n            },\r\n            resizeImage: function() {\r\n                var item = mfp.currItem;\r\n                if (!item.img) return;\r\n\r\n                if (mfp.st.image.verticalFit) {\r\n                    var decr = 0;\r\n                    // fix box-sizing in ie7/8\r\n                    if (mfp.isLowIE) {\r\n                        decr = parseInt(item.img.css('padding-top'), 10) + parseInt(item.img.css('padding-bottom'), 10);\r\n                    }\r\n                    item.img.css('max-height', mfp.wH - decr);\r\n                }\r\n            },\r\n            _onImageHasSize: function(item) {\r\n                if (item.img) {\r\n\r\n                    item.hasSize = true;\r\n\r\n                    if (_imgInterval) {\r\n                        clearInterval(_imgInterval);\r\n                    }\r\n\r\n                    item.isCheckingImgSize = false;\r\n\r\n                    _mfpTrigger('ImageHasSize', item);\r\n\r\n                    if (item.imgHidden) {\r\n                        if (mfp.content)\r\n                            mfp.content.removeClass('mfp-loading');\r\n\r\n                        item.imgHidden = false;\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Function that loops until the image has size to display elements that rely on it asap\r\n             */\r\n            findImageSize: function(item) {\r\n\r\n                var counter = 0,\r\n                    img = item.img[0],\r\n                    mfpSetInterval = function(delay) {\r\n\r\n                        if (_imgInterval) {\r\n                            clearInterval(_imgInterval);\r\n                        }\r\n                        // decelerating interval that checks for size of an image\r\n                        _imgInterval = setInterval(function() {\r\n                            if (img.naturalWidth > 0) {\r\n                                mfp._onImageHasSize(item);\r\n                                return;\r\n                            }\r\n\r\n                            if (counter > 200) {\r\n                                clearInterval(_imgInterval);\r\n                            }\r\n\r\n                            counter++;\r\n                            if (counter === 3) {\r\n                                mfpSetInterval(10);\r\n                            } else if (counter === 40) {\r\n                                mfpSetInterval(50);\r\n                            } else if (counter === 100) {\r\n                                mfpSetInterval(500);\r\n                            }\r\n                        }, delay);\r\n                    };\r\n\r\n                mfpSetInterval(1);\r\n            },\r\n\r\n            getImage: function(item, template) {\r\n\r\n                var guard = 0,\r\n\r\n                    // image load complete handler\r\n                    onLoadComplete = function() {\r\n                        if (item) {\r\n                            if (item.img[0].complete) {\r\n                                item.img.off('.mfploader');\r\n\r\n                                if (item === mfp.currItem) {\r\n                                    mfp._onImageHasSize(item);\r\n\r\n                                    mfp.updateStatus('ready');\r\n                                }\r\n\r\n                                item.hasSize = true;\r\n                                item.loaded = true;\r\n\r\n                                _mfpTrigger('ImageLoadComplete');\r\n\r\n                            } else {\r\n                                // if image complete check fails 200 times (20 sec), we assume that there was an error.\r\n                                guard++;\r\n                                if (guard < 200) {\r\n                                    setTimeout(onLoadComplete, 100);\r\n                                } else {\r\n                                    onLoadError();\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    // image error handler\r\n                    onLoadError = function() {\r\n                        if (item) {\r\n                            item.img.off('.mfploader');\r\n                            if (item === mfp.currItem) {\r\n                                mfp._onImageHasSize(item);\r\n                                mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src));\r\n                            }\r\n\r\n                            item.hasSize = true;\r\n                            item.loaded = true;\r\n                            item.loadError = true;\r\n                        }\r\n                    },\r\n                    imgSt = mfp.st.image;\r\n\r\n\r\n                var el = template.find('.mfp-img');\r\n                if (el.length) {\r\n                    var img = new Image();\r\n                    img.className = 'mfp-img';\r\n                    item.img = $(img).on('load.mfploader', onLoadComplete).on('error.mfploader', onLoadError);\r\n                    img.src = item.src;\r\n\r\n                    // without clone() \"error\" event is not firing when IMG is replaced by new IMG\r\n                    // TODO: find a way to avoid such cloning\r\n                    if (el.is('img')) {\r\n                        item.img = item.img.clone();\r\n                    }\r\n                    if (item.img[0].naturalWidth > 0) {\r\n                        item.hasSize = true;\r\n                    }\r\n                }\r\n\r\n                mfp._parseMarkup(template, {\r\n                    title: _getTitle(item),\r\n                    img_replaceWith: item.img\r\n                }, item);\r\n\r\n                mfp.resizeImage();\r\n\r\n                if (item.hasSize) {\r\n                    if (_imgInterval) clearInterval(_imgInterval);\r\n\r\n                    if (item.loadError) {\r\n                        template.addClass('mfp-loading');\r\n                        mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src));\r\n                    } else {\r\n                        template.removeClass('mfp-loading');\r\n                        mfp.updateStatus('ready');\r\n                    }\r\n                    return template;\r\n                }\r\n\r\n                mfp.updateStatus('loading');\r\n                item.loading = true;\r\n\r\n                if (!item.hasSize) {\r\n                    item.imgHidden = true;\r\n                    template.addClass('mfp-loading');\r\n                    mfp.findImageSize(item);\r\n                }\r\n\r\n                return template;\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n    /*>>image*/\r\n\r\n    /*>>zoom*/\r\n    var hasMozTransform,\r\n        getHasMozTransform = function() {\r\n            if (hasMozTransform === undefined) {\r\n                hasMozTransform = document.createElement('p').style.MozTransform !== undefined;\r\n            }\r\n            return hasMozTransform;\r\n        };\r\n\r\n    $.magnificPopup.registerModule('zoom', {\r\n\r\n        options: {\r\n            enabled: false,\r\n            easing: 'ease-in-out',\r\n            duration: 300,\r\n            opener: function(element) {\r\n                return element.is('img') ? element : element.find('img');\r\n            }\r\n        },\r\n\r\n        proto: {\r\n\r\n            initZoom: function() {\r\n                var zoomSt = mfp.st.zoom,\r\n                    ns = '.zoom';\r\n\r\n                if (!zoomSt.enabled || !mfp.supportsTransition) {\r\n                    return;\r\n                }\r\n\r\n                var duration = zoomSt.duration,\r\n                    getElToAnimate = function(image) {\r\n                        var newImg = image.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),\r\n                            transition = 'all ' + (zoomSt.duration / 1000) + 's ' + zoomSt.easing,\r\n                            cssObj = {\r\n                                position: 'fixed',\r\n                                zIndex: 9999,\r\n                                left: 0,\r\n                                top: 0,\r\n                                '-webkit-backface-visibility': 'hidden'\r\n                            },\r\n                            t = 'transition';\r\n\r\n                        cssObj['-webkit-' + t] = cssObj['-moz-' + t] = cssObj['-o-' + t] = cssObj[t] = transition;\r\n\r\n                        newImg.css(cssObj);\r\n                        return newImg;\r\n                    },\r\n                    showMainContent = function() {\r\n                        mfp.content.css('visibility', 'visible');\r\n                    },\r\n                    openTimeout,\r\n                    animatedImg;\r\n\r\n                _mfpOn('BuildControls' + ns, function() {\r\n                    if (mfp._allowZoom()) {\r\n\r\n                        clearTimeout(openTimeout);\r\n                        mfp.content.css('visibility', 'hidden');\r\n\r\n                        // Basically, all code below does is clones existing image, puts in on top of the current one and animated it\r\n\r\n                        image = mfp._getItemToZoom();\r\n\r\n                        if (!image) {\r\n                            showMainContent();\r\n                            return;\r\n                        }\r\n\r\n                        animatedImg = getElToAnimate(image);\r\n\r\n                        animatedImg.css(mfp._getOffset());\r\n\r\n                        mfp.wrap.append(animatedImg);\r\n\r\n                        openTimeout = setTimeout(function() {\r\n                            animatedImg.css(mfp._getOffset(true));\r\n                            openTimeout = setTimeout(function() {\r\n\r\n                                showMainContent();\r\n\r\n                                setTimeout(function() {\r\n                                    animatedImg.remove();\r\n                                    image = animatedImg = null;\r\n                                    _mfpTrigger('ZoomAnimationEnded');\r\n                                }, 16); // avoid blink when switching images \r\n\r\n                            }, duration); // this timeout equals animation duration\r\n\r\n                        }, 16); // by adding this timeout we avoid short glitch at the beginning of animation\r\n\r\n\r\n                        // Lots of timeouts...\r\n                    }\r\n                });\r\n                _mfpOn(BEFORE_CLOSE_EVENT + ns, function() {\r\n                    if (mfp._allowZoom()) {\r\n\r\n                        clearTimeout(openTimeout);\r\n\r\n                        mfp.st.removalDelay = duration;\r\n\r\n                        if (!image) {\r\n                            image = mfp._getItemToZoom();\r\n                            if (!image) {\r\n                                return;\r\n                            }\r\n                            animatedImg = getElToAnimate(image);\r\n                        }\r\n\r\n\r\n                        animatedImg.css(mfp._getOffset(true));\r\n                        mfp.wrap.append(animatedImg);\r\n                        mfp.content.css('visibility', 'hidden');\r\n\r\n                        setTimeout(function() {\r\n                            animatedImg.css(mfp._getOffset());\r\n                        }, 16);\r\n                    }\r\n\r\n                });\r\n\r\n                _mfpOn(CLOSE_EVENT + ns, function() {\r\n                    if (mfp._allowZoom()) {\r\n                        showMainContent();\r\n                        if (animatedImg) {\r\n                            animatedImg.remove();\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n\r\n            _allowZoom: function() {\r\n                return mfp.currItem.type === 'image';\r\n            },\r\n\r\n            _getItemToZoom: function() {\r\n                if (mfp.currItem.hasSize) {\r\n                    return mfp.currItem.img;\r\n                } else {\r\n                    return false;\r\n                }\r\n            },\r\n\r\n            // Get element postion relative to viewport\r\n            _getOffset: function(isLarge) {\r\n                var el;\r\n                if (isLarge) {\r\n                    el = mfp.currItem.img;\r\n                } else {\r\n                    el = mfp.st.zoom.opener(mfp.currItem.el || mfp.currItem);\r\n                }\r\n\r\n                var offset = el.offset();\r\n                var paddingTop = parseInt(el.css('padding-top'), 10);\r\n                var paddingBottom = parseInt(el.css('padding-bottom'), 10);\r\n                offset.top -= ($(window).scrollTop() - paddingTop);\r\n\r\n\r\n                /*\r\n\t\t\t\r\n\t\t\tAnimating left + top + width/height looks glitchy in Firefox, but perfect in Chrome. And vice-versa.\r\n\r\n\t\t\t */\r\n                var obj = {\r\n                    width: el.width(),\r\n                    // fix Zepto height+padding issue\r\n                    height: (_isJQ ? el.innerHeight() : el[0].offsetHeight) - paddingBottom - paddingTop\r\n                };\r\n\r\n                // I hate to do this, but there is no another option\r\n                if (getHasMozTransform()) {\r\n                    obj['-moz-transform'] = obj['transform'] = 'translate(' + offset.left + 'px,' + offset.top + 'px)';\r\n                } else {\r\n                    obj.left = offset.left;\r\n                    obj.top = offset.top;\r\n                }\r\n                return obj;\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n\r\n\r\n    /*>>zoom*/\r\n\r\n    /*>>iframe*/\r\n\r\n    var IFRAME_NS = 'iframe',\r\n        _emptyPage = '//about:blank',\r\n\r\n        _fixIframeBugs = function(isShowing) {\r\n            if (mfp.currTemplate[IFRAME_NS]) {\r\n                var el = mfp.currTemplate[IFRAME_NS].find('iframe');\r\n                if (el.length) {\r\n                    // reset src after the popup is closed to avoid \"video keeps playing after popup is closed\" bug\r\n                    if (!isShowing) {\r\n                        el[0].src = _emptyPage;\r\n                    }\r\n\r\n                    // IE8 black screen bug fix\r\n                    if (mfp.isIE8) {\r\n                        el.css('display', isShowing ? 'block' : 'none');\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n    $.magnificPopup.registerModule(IFRAME_NS, {\r\n\r\n        options: {\r\n            markup: '<div class=\"mfp-iframe-scaler\">' +\r\n                '<div class=\"mfp-close\"></div>' +\r\n                '<iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe>' +\r\n                '</div>',\r\n\r\n            srcAction: 'iframe_src',\r\n\r\n            // we don't care and support only one default type of URL by default\r\n            patterns: {\r\n                youtube: {\r\n                    index: 'youtube.com',\r\n                    id: 'v=',\r\n                    src: '//www.youtube.com/embed/%id%?autoplay=1'\r\n                },\r\n                vimeo: {\r\n                    index: 'vimeo.com/',\r\n                    id: '/',\r\n                    src: '//player.vimeo.com/video/%id%?autoplay=1'\r\n                },\r\n                gmaps: {\r\n                    index: '//maps.google.',\r\n                    src: '%id%&output=embed'\r\n                }\r\n            }\r\n        },\r\n\r\n        proto: {\r\n            initIframe: function() {\r\n                mfp.types.push(IFRAME_NS);\r\n\r\n                _mfpOn('BeforeChange', function(e, prevType, newType) {\r\n                    if (prevType !== newType) {\r\n                        if (prevType === IFRAME_NS) {\r\n                            _fixIframeBugs(); // iframe if removed\r\n                        } else if (newType === IFRAME_NS) {\r\n                            _fixIframeBugs(true); // iframe is showing\r\n                        }\r\n                    } // else {\r\n                    // iframe source is switched, don't do anything\r\n                    //}\r\n                });\r\n\r\n                _mfpOn(CLOSE_EVENT + '.' + IFRAME_NS, function() {\r\n                    _fixIframeBugs();\r\n                });\r\n            },\r\n\r\n            getIframe: function(item, template) {\r\n                var embedSrc = item.src;\r\n                var iframeSt = mfp.st.iframe;\r\n\r\n                $.each(iframeSt.patterns, function() {\r\n                    if (embedSrc.indexOf(this.index) > -1) {\r\n                        if (this.id) {\r\n                            if (typeof this.id === 'string') {\r\n                                embedSrc = embedSrc.substr(embedSrc.lastIndexOf(this.id) + this.id.length, embedSrc.length);\r\n                            } else {\r\n                                embedSrc = this.id.call(this, embedSrc);\r\n                            }\r\n                        }\r\n                        embedSrc = this.src.replace('%id%', embedSrc);\r\n                        return false; // break;\r\n                    }\r\n                });\r\n\r\n                var dataObj = {};\r\n                if (iframeSt.srcAction) {\r\n                    dataObj[iframeSt.srcAction] = embedSrc;\r\n                }\r\n                mfp._parseMarkup(template, dataObj, item);\r\n\r\n                mfp.updateStatus('ready');\r\n\r\n                return template;\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n    /*>>iframe*/\r\n\r\n    /*>>gallery*/\r\n    /**\r\n     * Get looped index depending on number of slides\r\n     */\r\n    var _getLoopedId = function(index) {\r\n        var numSlides = mfp.items.length;\r\n        if (index > numSlides - 1) {\r\n            return index - numSlides;\r\n        } else if (index < 0) {\r\n            return numSlides + index;\r\n        }\r\n        return index;\r\n    },\r\n        _replaceCurrTotal = function(text, curr, total) {\r\n            return text.replace('%curr%', curr + 1).replace('%total%', total);\r\n        };\r\n\r\n    $.magnificPopup.registerModule('gallery', {\r\n\r\n        options: {\r\n            enabled: false,\r\n            arrowMarkup: '<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',\r\n            preload: [0, 2],\r\n            navigateByImgClick: true,\r\n            arrows: true,\r\n\r\n            tPrev: 'Previous (Left arrow key)',\r\n            tNext: 'Next (Right arrow key)',\r\n            tCounter: '%curr% of %total%'\r\n        },\r\n\r\n        proto: {\r\n            initGallery: function() {\r\n\r\n                var gSt = mfp.st.gallery,\r\n                    ns = '.mfp-gallery',\r\n                    supportsFastClick = Boolean($.fn.mfpFastClick);\r\n\r\n                mfp.direction = true; // true - next, false - prev\r\n\r\n                if (!gSt || !gSt.enabled) return false;\r\n\r\n                _wrapClasses += ' mfp-gallery';\r\n\r\n                _mfpOn(OPEN_EVENT + ns, function() {\r\n\r\n                    if (gSt.navigateByImgClick) {\r\n                        mfp.wrap.on('click' + ns, '.mfp-img', function() {\r\n                            if (mfp.items.length > 1) {\r\n                                mfp.next();\r\n                                return false;\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    _document.on('keydown' + ns, function(e) {\r\n                        if (e.keyCode === 37) {\r\n                            mfp.prev();\r\n                        } else if (e.keyCode === 39) {\r\n                            mfp.next();\r\n                        }\r\n                    });\r\n                });\r\n\r\n                _mfpOn('UpdateStatus' + ns, function(e, data) {\r\n                    if (data.text) {\r\n                        data.text = _replaceCurrTotal(data.text, mfp.currItem.index, mfp.items.length);\r\n                    }\r\n                });\r\n\r\n                _mfpOn(MARKUP_PARSE_EVENT + ns, function(e, element, values, item) {\r\n                    var l = mfp.items.length;\r\n                    values.counter = l > 1 ? _replaceCurrTotal(gSt.tCounter, item.index, l) : '';\r\n                });\r\n\r\n                _mfpOn('BuildControls' + ns, function() {\r\n                    if (mfp.items.length > 1 && gSt.arrows && !mfp.arrowLeft) {\r\n                        var markup = gSt.arrowMarkup,\r\n                            arrowLeft = mfp.arrowLeft = $(markup.replace('%title%', gSt.tPrev).replace('%dir%', 'left')).addClass(PREVENT_CLOSE_CLASS),\r\n                            arrowRight = mfp.arrowRight = $(markup.replace('%title%', gSt.tNext).replace('%dir%', 'right')).addClass(PREVENT_CLOSE_CLASS);\r\n\r\n                        var eName = supportsFastClick ? 'mfpFastClick' : 'click';\r\n                        arrowLeft[eName](function() {\r\n                            mfp.prev();\r\n                        });\r\n                        arrowRight[eName](function() {\r\n                            mfp.next();\r\n                        });\r\n\r\n                        // Polyfill for :before and :after (adds elements with classes mfp-a and mfp-b)\r\n                        if (mfp.isIE7) {\r\n                            _getEl('b', arrowLeft[0], false, true);\r\n                            _getEl('a', arrowLeft[0], false, true);\r\n                            _getEl('b', arrowRight[0], false, true);\r\n                            _getEl('a', arrowRight[0], false, true);\r\n                        }\r\n\r\n                        mfp.container.append(arrowLeft.add(arrowRight));\r\n                    }\r\n                });\r\n\r\n                _mfpOn(CHANGE_EVENT + ns, function() {\r\n                    if (mfp._preloadTimeout) clearTimeout(mfp._preloadTimeout);\r\n\r\n                    mfp._preloadTimeout = setTimeout(function() {\r\n                        mfp.preloadNearbyImages();\r\n                        mfp._preloadTimeout = null;\r\n                    }, 16);\r\n                });\r\n\r\n\r\n                _mfpOn(CLOSE_EVENT + ns, function() {\r\n                    _document.off(ns);\r\n                    mfp.wrap.off('click' + ns);\r\n\r\n                    if (mfp.arrowLeft && supportsFastClick) {\r\n                        mfp.arrowLeft.add(mfp.arrowRight).destroyMfpFastClick();\r\n                    }\r\n                    mfp.arrowRight = mfp.arrowLeft = null;\r\n                });\r\n\r\n            },\r\n            next: function() {\r\n                mfp.direction = true;\r\n                mfp.index = _getLoopedId(mfp.index + 1);\r\n                mfp.updateItemHTML();\r\n            },\r\n            prev: function() {\r\n                mfp.direction = false;\r\n                mfp.index = _getLoopedId(mfp.index - 1);\r\n                mfp.updateItemHTML();\r\n            },\r\n            goTo: function(newIndex) {\r\n                mfp.direction = (newIndex >= mfp.index);\r\n                mfp.index = newIndex;\r\n                mfp.updateItemHTML();\r\n            },\r\n            preloadNearbyImages: function() {\r\n                var p = mfp.st.gallery.preload,\r\n                    preloadBefore = Math.min(p[0], mfp.items.length),\r\n                    preloadAfter = Math.min(p[1], mfp.items.length),\r\n                    i;\r\n\r\n                for (i = 1; i <= (mfp.direction ? preloadAfter : preloadBefore); i++) {\r\n                    mfp._preloadItem(mfp.index + i);\r\n                }\r\n                for (i = 1; i <= (mfp.direction ? preloadBefore : preloadAfter); i++) {\r\n                    mfp._preloadItem(mfp.index - i);\r\n                }\r\n            },\r\n            _preloadItem: function(index) {\r\n                index = _getLoopedId(index);\r\n\r\n                if (mfp.items[index].preloaded) {\r\n                    return;\r\n                }\r\n\r\n                var item = mfp.items[index];\r\n                if (!item.parsed) {\r\n                    item = mfp.parseEl(index);\r\n                }\r\n\r\n                _mfpTrigger('LazyLoad', item);\r\n\r\n                if (item.type === 'image') {\r\n                    item.img = $('<img class=\"mfp-img\" />').on('load.mfploader', function() {\r\n                        item.hasSize = true;\r\n                    }).on('error.mfploader', function() {\r\n                        item.hasSize = true;\r\n                        item.loadError = true;\r\n                    }).attr('src', item.src);\r\n                }\r\n\r\n\r\n                item.preloaded = true;\r\n            }\r\n        }\r\n    });\r\n\r\n    /*\r\nTouch Support that might be implemented some day\r\n\r\naddSwipeGesture: function() {\r\n\tvar startX,\r\n\t\tmoved,\r\n\t\tmultipleTouches;\r\n\r\n\t\treturn;\r\n\r\n\tvar namespace = '.mfp',\r\n\t\taddEventNames = function(pref, down, move, up, cancel) {\r\n\t\t\tmfp._tStart = pref + down + namespace;\r\n\t\t\tmfp._tMove = pref + move + namespace;\r\n\t\t\tmfp._tEnd = pref + up + namespace;\r\n\t\t\tmfp._tCancel = pref + cancel + namespace;\r\n\t\t};\r\n\r\n\tif(window.navigator.msPointerEnabled) {\r\n\t\taddEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\r\n\t} else if('ontouchstart' in window) {\r\n\t\taddEventNames('touch', 'start', 'move', 'end', 'cancel');\r\n\t} else {\r\n\t\treturn;\r\n\t}\r\n\t_window.on(mfp._tStart, function(e) {\r\n\t\tvar oE = e.originalEvent;\r\n\t\tmultipleTouches = moved = false;\r\n\t\tstartX = oE.pageX || oE.changedTouches[0].pageX;\r\n\t}).on(mfp._tMove, function(e) {\r\n\t\tif(e.originalEvent.touches.length > 1) {\r\n\t\t\tmultipleTouches = e.originalEvent.touches.length;\r\n\t\t} else {\r\n\t\t\t//e.preventDefault();\r\n\t\t\tmoved = true;\r\n\t\t}\r\n\t}).on(mfp._tEnd + ' ' + mfp._tCancel, function(e) {\r\n\t\tif(moved && !multipleTouches) {\r\n\t\t\tvar oE = e.originalEvent,\r\n\t\t\t\tdiff = startX - (oE.pageX || oE.changedTouches[0].pageX);\r\n\r\n\t\t\tif(diff > 20) {\r\n\t\t\t\tmfp.next();\r\n\t\t\t} else if(diff < -20) {\r\n\t\t\t\tmfp.prev();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n},\r\n*/\r\n\r\n\r\n    /*>>gallery*/\r\n\r\n    /*>>retina*/\r\n\r\n    var RETINA_NS = 'retina';\r\n\r\n    $.magnificPopup.registerModule(RETINA_NS, {\r\n        options: {\r\n            replaceSrc: function(item) {\r\n                return item.src.replace(/\\.\\w+$/, function(m) {\r\n                    return '@2x' + m;\r\n                });\r\n            },\r\n            ratio: 1 // Function or number.  Set to 1 to disable.\r\n        },\r\n        proto: {\r\n            initRetina: function() {\r\n                if (window.devicePixelRatio > 1) {\r\n\r\n                    var st = mfp.st.retina,\r\n                        ratio = st.ratio;\r\n\r\n                    ratio = !isNaN(ratio) ? ratio : ratio();\r\n\r\n                    if (ratio > 1) {\r\n                        _mfpOn('ImageHasSize' + '.' + RETINA_NS, function(e, item) {\r\n                            item.img.css({\r\n                                'max-width': item.img[0].naturalWidth / ratio,\r\n                                'width': '100%'\r\n                            });\r\n                        });\r\n                        _mfpOn('ElementParse' + '.' + RETINA_NS, function(e, item) {\r\n                            item.src = st.replaceSrc(item, ratio);\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    });\r\n\r\n    /*>>retina*/\r\n\r\n    /*>>fastclick*/\r\n    /**\r\n     * FastClick event implementation. (removes 300ms delay on touch devices)\r\n     * Based on https://developers.google.com/mobile/articles/fast_buttons\r\n     *\r\n     * You may use it outside the Magnific Popup by calling just:\r\n     *\r\n     * $('.your-el').mfpFastClick(function() {\r\n     *     console.log('Clicked!');\r\n     * });\r\n     *\r\n     * To unbind:\r\n     * $('.your-el').destroyMfpFastClick();\r\n     *\r\n     *\r\n     * Note that it's a very basic and simple implementation, it blocks ghost click on the same element where it was bound.\r\n     * If you need something more advanced, use plugin by FT Labs https://github.com/ftlabs/fastclick\r\n     *\r\n     */\r\n\r\n    (function() {\r\n        var ghostClickDelay = 1000,\r\n            supportsTouch = 'ontouchstart' in window,\r\n            unbindTouchMove = function() {\r\n                _window.off('touchmove' + ns + ' touchend' + ns);\r\n            },\r\n            eName = 'mfpFastClick',\r\n            ns = '.' + eName;\r\n\r\n\r\n        // As Zepto.js doesn't have an easy way to add custom events (like jQuery), so we implement it in this way\r\n        $.fn.mfpFastClick = function(callback) {\r\n\r\n            return $(this).each(function() {\r\n\r\n                var elem = $(this),\r\n                    lock;\r\n\r\n                if (supportsTouch) {\r\n\r\n                    var timeout,\r\n                        startX,\r\n                        startY,\r\n                        pointerMoved,\r\n                        point,\r\n                        numPointers;\r\n\r\n                    elem.on('touchstart' + ns, function(e) {\r\n                        pointerMoved = false;\r\n                        numPointers = 1;\r\n\r\n                        point = e.originalEvent ? e.originalEvent.touches[0] : e.touches[0];\r\n                        startX = point.clientX;\r\n                        startY = point.clientY;\r\n\r\n                        _window.on('touchmove' + ns, function(e) {\r\n                            point = e.originalEvent ? e.originalEvent.touches : e.touches;\r\n                            numPointers = point.length;\r\n                            point = point[0];\r\n                            if (Math.abs(point.clientX - startX) > 10 ||\r\n                                Math.abs(point.clientY - startY) > 10) {\r\n                                pointerMoved = true;\r\n                                unbindTouchMove();\r\n                            }\r\n                        }).on('touchend' + ns, function(e) {\r\n                            unbindTouchMove();\r\n                            if (pointerMoved || numPointers > 1) {\r\n                                return;\r\n                            }\r\n                            lock = true;\r\n                            e.preventDefault();\r\n                            clearTimeout(timeout);\r\n                            timeout = setTimeout(function() {\r\n                                lock = false;\r\n                            }, ghostClickDelay);\r\n                            callback();\r\n                        });\r\n                    });\r\n\r\n                }\r\n\r\n                elem.on('click' + ns, function() {\r\n                    if (!lock) {\r\n                        callback();\r\n                    }\r\n                });\r\n            });\r\n        };\r\n\r\n        $.fn.destroyMfpFastClick = function() {\r\n            $(this).off('touchstart' + ns + ' click' + ns);\r\n            if (supportsTouch) _window.off('touchmove' + ns + ' touchend' + ns);\r\n        };\r\n    })();\r\n\r\n    /*>>fastclick*/\r\n})(window.jQuery || window.Zepto);","/*\r\n *  jQuery OwlCarousel v1.3.2\r\n *\r\n *  Copyright (c) 2013 Bartosz Wojciechowski\r\n *  http://www.owlgraphic.com/owlcarousel/\r\n *\r\n *  Licensed under MIT\r\n *\r\n */\r\n\r\n/*JS Lint helpers: */\r\n/*global dragMove: false, dragEnd: false, $, jQuery, alert, window, document */\r\n/*jslint nomen: true, continue:true */\r\n\r\nif (typeof Object.create !== \"function\") {\r\n    Object.create = function(obj) {\r\n        function F() {}\r\n        F.prototype = obj;\r\n        return new F();\r\n    };\r\n}\r\n(function($, window, document) {\r\n\r\n    var Carousel = {\r\n        init: function(options, el) {\r\n            var base = this;\r\n\r\n            base.$elem = $(el);\r\n            base.options = $.extend({}, $.fn.owlCarousel.options, base.$elem.data(), options);\r\n\r\n            base.userOptions = options;\r\n            base.loadContent();\r\n        },\r\n\r\n        loadContent: function() {\r\n            var base = this,\r\n                url;\r\n\r\n            function getData(data) {\r\n                var i, content = \"\";\r\n                if (typeof base.options.jsonSuccess === \"function\") {\r\n                    base.options.jsonSuccess.apply(this, [data]);\r\n                } else {\r\n                    for (i in data.owl) {\r\n                        if (data.owl.hasOwnProperty(i)) {\r\n                            content += data.owl[i].item;\r\n                        }\r\n                    }\r\n                    base.$elem.html(content);\r\n                }\r\n                base.logIn();\r\n            }\r\n\r\n            if (typeof base.options.beforeInit === \"function\") {\r\n                base.options.beforeInit.apply(this, [base.$elem]);\r\n            }\r\n\r\n            if (typeof base.options.jsonPath === \"string\") {\r\n                url = base.options.jsonPath;\r\n                $.getJSON(url, getData);\r\n            } else {\r\n                base.logIn();\r\n            }\r\n        },\r\n\r\n        logIn: function() {\r\n            var base = this;\r\n\r\n            base.$elem.data({\r\n                \"owl-originalStyles\": base.$elem.attr(\"style\"),\r\n                \"owl-originalClasses\": base.$elem.attr(\"class\")\r\n            });\r\n\r\n            base.$elem.css({\r\n                opacity: 0\r\n            });\r\n            base.orignalItems = base.options.items;\r\n            base.checkBrowser();\r\n            base.wrapperWidth = 0;\r\n            base.checkVisible = null;\r\n            base.setVars();\r\n        },\r\n\r\n        setVars: function() {\r\n            var base = this;\r\n            if (base.$elem.children().length === 0) {\r\n                return false;\r\n            }\r\n            base.baseClass();\r\n            base.eventTypes();\r\n            base.$userItems = base.$elem.children();\r\n            base.itemsAmount = base.$userItems.length;\r\n            base.wrapItems();\r\n            base.$owlItems = base.$elem.find(\".owl-item\");\r\n            base.$owlWrapper = base.$elem.find(\".owl-wrapper\");\r\n            base.playDirection = \"next\";\r\n            base.prevItem = 0;\r\n            base.prevArr = [0];\r\n            base.currentItem = 0;\r\n            base.customEvents();\r\n            base.onStartup();\r\n        },\r\n\r\n        onStartup: function() {\r\n            var base = this;\r\n            base.updateItems();\r\n            base.calculateAll();\r\n            base.buildControls();\r\n            base.updateControls();\r\n            base.response();\r\n            base.moveEvents();\r\n            base.stopOnHover();\r\n            base.owlStatus();\r\n\r\n            if (base.options.transitionStyle !== false) {\r\n                base.transitionTypes(base.options.transitionStyle);\r\n            }\r\n            if (base.options.autoPlay === true) {\r\n                base.options.autoPlay = 5000;\r\n            }\r\n            base.play();\r\n\r\n            base.$elem.find(\".owl-wrapper\").css(\"display\", \"block\");\r\n\r\n            if (!base.$elem.is(\":visible\")) {\r\n                base.watchVisibility();\r\n            } else {\r\n                base.$elem.css(\"opacity\", 1);\r\n            }\r\n            base.onstartup = false;\r\n            base.eachMoveUpdate();\r\n            if (typeof base.options.afterInit === \"function\") {\r\n                base.options.afterInit.apply(this, [base.$elem]);\r\n            }\r\n        },\r\n\r\n        eachMoveUpdate: function() {\r\n            var base = this;\r\n\r\n            if (base.options.lazyLoad === true) {\r\n                base.lazyLoad();\r\n            }\r\n            if (base.options.autoHeight === true) {\r\n                base.autoHeight();\r\n            }\r\n            base.onVisibleItems();\r\n\r\n            if (typeof base.options.afterAction === \"function\") {\r\n                base.options.afterAction.apply(this, [base.$elem]);\r\n            }\r\n        },\r\n\r\n        updateVars: function() {\r\n            var base = this;\r\n            if (typeof base.options.beforeUpdate === \"function\") {\r\n                base.options.beforeUpdate.apply(this, [base.$elem]);\r\n            }\r\n            base.watchVisibility();\r\n            base.updateItems();\r\n            base.calculateAll();\r\n            base.updatePosition();\r\n            base.updateControls();\r\n            base.eachMoveUpdate();\r\n            if (typeof base.options.afterUpdate === \"function\") {\r\n                base.options.afterUpdate.apply(this, [base.$elem]);\r\n            }\r\n        },\r\n\r\n        reload: function() {\r\n            var base = this;\r\n            window.setTimeout(function() {\r\n                base.updateVars();\r\n            }, 0);\r\n        },\r\n\r\n        watchVisibility: function() {\r\n            var base = this;\r\n\r\n            if (base.$elem.is(\":visible\") === false) {\r\n                base.$elem.css({\r\n                    opacity: 0\r\n                });\r\n                window.clearInterval(base.autoPlayInterval);\r\n                window.clearInterval(base.checkVisible);\r\n            } else {\r\n                return false;\r\n            }\r\n            base.checkVisible = window.setInterval(function() {\r\n                if (base.$elem.is(\":visible\")) {\r\n                    base.reload();\r\n                    base.$elem.animate({\r\n                        opacity: 1\r\n                    }, 200);\r\n                    window.clearInterval(base.checkVisible);\r\n                }\r\n            }, 500);\r\n        },\r\n\r\n        wrapItems: function() {\r\n            var base = this;\r\n            base.$userItems.wrapAll(\"<div class=\\\"owl-wrapper\\\">\").wrap(\"<div class=\\\"owl-item\\\"></div>\");\r\n            base.$elem.find(\".owl-wrapper\").wrap(\"<div class=\\\"owl-wrapper-outer\\\">\");\r\n            base.wrapperOuter = base.$elem.find(\".owl-wrapper-outer\");\r\n            base.$elem.css(\"display\", \"block\");\r\n        },\r\n\r\n        baseClass: function() {\r\n            var base = this,\r\n                hasBaseClass = base.$elem.hasClass(base.options.baseClass),\r\n                hasThemeClass = base.$elem.hasClass(base.options.theme);\r\n\r\n            if (!hasBaseClass) {\r\n                base.$elem.addClass(base.options.baseClass);\r\n            }\r\n\r\n            if (!hasThemeClass) {\r\n                base.$elem.addClass(base.options.theme);\r\n            }\r\n        },\r\n\r\n        updateItems: function() {\r\n            var base = this,\r\n                width, i;\r\n\r\n            if (base.options.responsive === false) {\r\n                return false;\r\n            }\r\n            if (base.options.singleItem === true) {\r\n                base.options.items = base.orignalItems = 1;\r\n                base.options.itemsCustom = false;\r\n                base.options.itemsDesktop = false;\r\n                base.options.itemsDesktopSmall = false;\r\n                base.options.itemsTablet = false;\r\n                base.options.itemsTabletSmall = false;\r\n                base.options.itemsMobile = false;\r\n                return false;\r\n            }\r\n\r\n            width = $(base.options.responsiveBaseWidth).width();\r\n\r\n            if (width > (base.options.itemsDesktop[0] || base.orignalItems)) {\r\n                base.options.items = base.orignalItems;\r\n            }\r\n            if (base.options.itemsCustom !== false) {\r\n                //Reorder array by screen size\r\n                base.options.itemsCustom.sort(function(a, b) {\r\n                    return a[0] - b[0];\r\n                });\r\n\r\n                for (i = 0; i < base.options.itemsCustom.length; i += 1) {\r\n                    if (base.options.itemsCustom[i][0] <= width) {\r\n                        base.options.items = base.options.itemsCustom[i][1];\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                if (width <= base.options.itemsDesktop[0] && base.options.itemsDesktop !== false) {\r\n                    base.options.items = base.options.itemsDesktop[1];\r\n                }\r\n\r\n                if (width <= base.options.itemsDesktopSmall[0] && base.options.itemsDesktopSmall !== false) {\r\n                    base.options.items = base.options.itemsDesktopSmall[1];\r\n                }\r\n\r\n                if (width <= base.options.itemsTablet[0] && base.options.itemsTablet !== false) {\r\n                    base.options.items = base.options.itemsTablet[1];\r\n                }\r\n\r\n                if (width <= base.options.itemsTabletSmall[0] && base.options.itemsTabletSmall !== false) {\r\n                    base.options.items = base.options.itemsTabletSmall[1];\r\n                }\r\n\r\n                if (width <= base.options.itemsMobile[0] && base.options.itemsMobile !== false) {\r\n                    base.options.items = base.options.itemsMobile[1];\r\n                }\r\n            }\r\n\r\n            //if number of items is less than declared\r\n            if (base.options.items > base.itemsAmount && base.options.itemsScaleUp === true) {\r\n                base.options.items = base.itemsAmount;\r\n            }\r\n        },\r\n\r\n        response: function() {\r\n            var base = this,\r\n                smallDelay,\r\n                lastWindowWidth;\r\n\r\n            if (base.options.responsive !== true) {\r\n                return false;\r\n            }\r\n            lastWindowWidth = $(window).width();\r\n\r\n            base.resizer = function() {\r\n                if ($(window).width() !== lastWindowWidth) {\r\n                    if (base.options.autoPlay !== false) {\r\n                        window.clearInterval(base.autoPlayInterval);\r\n                    }\r\n                    window.clearTimeout(smallDelay);\r\n                    smallDelay = window.setTimeout(function() {\r\n                        lastWindowWidth = $(window).width();\r\n                        base.updateVars();\r\n                    }, base.options.responsiveRefreshRate);\r\n                }\r\n            };\r\n            $(window).resize(base.resizer);\r\n        },\r\n\r\n        updatePosition: function() {\r\n            var base = this;\r\n            base.jumpTo(base.currentItem);\r\n            if (base.options.autoPlay !== false) {\r\n                base.checkAp();\r\n            }\r\n        },\r\n\r\n        appendItemsSizes: function() {\r\n            var base = this,\r\n                roundPages = 0,\r\n                lastItem = base.itemsAmount - base.options.items;\r\n\r\n            base.$owlItems.each(function(index) {\r\n                var $this = $(this);\r\n                $this\r\n                    .css({\r\n                        \"width\": base.itemWidth\r\n                    })\r\n                    .data(\"owl-item\", Number(index));\r\n\r\n                if (index % base.options.items === 0 || index === lastItem) {\r\n                    if (!(index > lastItem)) {\r\n                        roundPages += 1;\r\n                    }\r\n                }\r\n                $this.data(\"owl-roundPages\", roundPages);\r\n            });\r\n        },\r\n\r\n        appendWrapperSizes: function() {\r\n            var base = this,\r\n                width = base.$owlItems.length * base.itemWidth;\r\n\r\n            base.$owlWrapper.css({\r\n                \"width\": width * 2,\r\n                \"left\": 0\r\n            });\r\n            base.appendItemsSizes();\r\n        },\r\n\r\n        calculateAll: function() {\r\n            var base = this;\r\n            base.calculateWidth();\r\n            base.appendWrapperSizes();\r\n            base.loops();\r\n            base.max();\r\n        },\r\n\r\n        calculateWidth: function() {\r\n            var base = this;\r\n            base.itemWidth = Math.round(base.$elem.width() / base.options.items);\r\n        },\r\n\r\n        max: function() {\r\n            var base = this,\r\n                maximum = ((base.itemsAmount * base.itemWidth) - base.options.items * base.itemWidth) * -1;\r\n            if (base.options.items > base.itemsAmount) {\r\n                base.maximumItem = 0;\r\n                maximum = 0;\r\n                base.maximumPixels = 0;\r\n            } else {\r\n                base.maximumItem = base.itemsAmount - base.options.items;\r\n                base.maximumPixels = maximum;\r\n            }\r\n            return maximum;\r\n        },\r\n\r\n        min: function() {\r\n            return 0;\r\n        },\r\n\r\n        loops: function() {\r\n            var base = this,\r\n                prev = 0,\r\n                elWidth = 0,\r\n                i,\r\n                item,\r\n                roundPageNum;\r\n\r\n            base.positionsInArray = [0];\r\n            base.pagesInArray = [];\r\n\r\n            for (i = 0; i < base.itemsAmount; i += 1) {\r\n                elWidth += base.itemWidth;\r\n                base.positionsInArray.push(-elWidth);\r\n\r\n                if (base.options.scrollPerPage === true) {\r\n                    item = $(base.$owlItems[i]);\r\n                    roundPageNum = item.data(\"owl-roundPages\");\r\n                    if (roundPageNum !== prev) {\r\n                        base.pagesInArray[prev] = base.positionsInArray[i];\r\n                        prev = roundPageNum;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        buildControls: function() {\r\n            var base = this;\r\n            if (base.options.navigation === true || base.options.pagination === true) {\r\n                base.owlControls = $(\"<div class=\\\"owl-controls\\\"/>\").toggleClass(\"clickable\", !base.browser.isTouch).appendTo(base.$elem);\r\n            }\r\n            if (base.options.pagination === true) {\r\n                base.buildPagination();\r\n            }\r\n            if (base.options.navigation === true) {\r\n                base.buildButtons();\r\n            }\r\n        },\r\n\r\n        buildButtons: function() {\r\n            var base = this,\r\n                buttonsWrapper = $(\"<div class=\\\"owl-buttons\\\"/>\");\r\n            base.owlControls.append(buttonsWrapper);\r\n\r\n            base.buttonPrev = $(\"<div/>\", {\r\n                \"class\": \"owl-prev\",\r\n                \"html\": base.options.navigationText[0] || \"\"\r\n            });\r\n\r\n            base.buttonNext = $(\"<div/>\", {\r\n                \"class\": \"owl-next\",\r\n                \"html\": base.options.navigationText[1] || \"\"\r\n            });\r\n\r\n            buttonsWrapper\r\n                .append(base.buttonPrev)\r\n                .append(base.buttonNext);\r\n\r\n            buttonsWrapper.on(\"touchstart.owlControls mousedown.owlControls\", \"div[class^=\\\"owl\\\"]\", function(event) {\r\n                event.preventDefault();\r\n            });\r\n\r\n            buttonsWrapper.on(\"touchend.owlControls mouseup.owlControls\", \"div[class^=\\\"owl\\\"]\", function(event) {\r\n                event.preventDefault();\r\n                if ($(this).hasClass(\"owl-next\")) {\r\n                    base.next();\r\n                } else {\r\n                    base.prev();\r\n                }\r\n            });\r\n        },\r\n\r\n        buildPagination: function() {\r\n            var base = this;\r\n\r\n            base.paginationWrapper = $(\"<div class=\\\"owl-pagination\\\"/>\");\r\n            base.owlControls.append(base.paginationWrapper);\r\n\r\n            base.paginationWrapper.on(\"touchend.owlControls mouseup.owlControls\", \".owl-page\", function(event) {\r\n                event.preventDefault();\r\n                if (Number($(this).data(\"owl-page\")) !== base.currentItem) {\r\n                    base.goTo(Number($(this).data(\"owl-page\")), true);\r\n                }\r\n            });\r\n        },\r\n\r\n        updatePagination: function() {\r\n            var base = this,\r\n                counter,\r\n                lastPage,\r\n                lastItem,\r\n                i,\r\n                paginationButton,\r\n                paginationButtonInner;\r\n\r\n            if (base.options.pagination === false) {\r\n                return false;\r\n            }\r\n\r\n            base.paginationWrapper.html(\"\");\r\n\r\n            counter = 0;\r\n            lastPage = base.itemsAmount - base.itemsAmount % base.options.items;\r\n\r\n            for (i = 0; i < base.itemsAmount; i += 1) {\r\n                if (i % base.options.items === 0) {\r\n                    counter += 1;\r\n                    if (lastPage === i) {\r\n                        lastItem = base.itemsAmount - base.options.items;\r\n                    }\r\n                    paginationButton = $(\"<div/>\", {\r\n                        \"class\": \"owl-page\"\r\n                    });\r\n                    paginationButtonInner = $(\"<span></span>\", {\r\n                        \"text\": base.options.paginationNumbers === true ? counter : \"\",\r\n                        \"class\": base.options.paginationNumbers === true ? \"owl-numbers\" : \"\"\r\n                    });\r\n                    paginationButton.append(paginationButtonInner);\r\n\r\n                    paginationButton.data(\"owl-page\", lastPage === i ? lastItem : i);\r\n                    paginationButton.data(\"owl-roundPages\", counter);\r\n\r\n                    base.paginationWrapper.append(paginationButton);\r\n                }\r\n            }\r\n            base.checkPagination();\r\n        },\r\n        checkPagination: function() {\r\n            var base = this;\r\n            if (base.options.pagination === false) {\r\n                return false;\r\n            }\r\n            base.paginationWrapper.find(\".owl-page\").each(function() {\r\n                if ($(this).data(\"owl-roundPages\") === $(base.$owlItems[base.currentItem]).data(\"owl-roundPages\")) {\r\n                    base.paginationWrapper\r\n                        .find(\".owl-page\")\r\n                        .removeClass(\"active\");\r\n                    $(this).addClass(\"active\");\r\n                }\r\n            });\r\n        },\r\n\r\n        checkNavigation: function() {\r\n            var base = this;\r\n\r\n            if (base.options.navigation === false) {\r\n                return false;\r\n            }\r\n            if (base.options.rewindNav === false) {\r\n                if (base.currentItem === 0 && base.maximumItem === 0) {\r\n                    base.buttonPrev.addClass(\"disabled\");\r\n                    base.buttonNext.addClass(\"disabled\");\r\n                } else if (base.currentItem === 0 && base.maximumItem !== 0) {\r\n                    base.buttonPrev.addClass(\"disabled\");\r\n                    base.buttonNext.removeClass(\"disabled\");\r\n                } else if (base.currentItem === base.maximumItem) {\r\n                    base.buttonPrev.removeClass(\"disabled\");\r\n                    base.buttonNext.addClass(\"disabled\");\r\n                } else if (base.currentItem !== 0 && base.currentItem !== base.maximumItem) {\r\n                    base.buttonPrev.removeClass(\"disabled\");\r\n                    base.buttonNext.removeClass(\"disabled\");\r\n                }\r\n            }\r\n        },\r\n\r\n        updateControls: function() {\r\n            var base = this;\r\n            base.updatePagination();\r\n            base.checkNavigation();\r\n            if (base.owlControls) {\r\n                if (base.options.items >= base.itemsAmount) {\r\n                    base.owlControls.hide();\r\n                } else {\r\n                    base.owlControls.show();\r\n                }\r\n            }\r\n        },\r\n\r\n        destroyControls: function() {\r\n            var base = this;\r\n            if (base.owlControls) {\r\n                base.owlControls.remove();\r\n            }\r\n        },\r\n\r\n        next: function(speed) {\r\n            var base = this;\r\n\r\n            if (base.isTransition) {\r\n                return false;\r\n            }\r\n\r\n            base.currentItem += base.options.scrollPerPage === true ? base.options.items : 1;\r\n            if (base.currentItem > base.maximumItem + (base.options.scrollPerPage === true ? (base.options.items - 1) : 0)) {\r\n                if (base.options.rewindNav === true) {\r\n                    base.currentItem = 0;\r\n                    speed = \"rewind\";\r\n                } else {\r\n                    base.currentItem = base.maximumItem;\r\n                    return false;\r\n                }\r\n            }\r\n            base.goTo(base.currentItem, speed);\r\n        },\r\n\r\n        prev: function(speed) {\r\n            var base = this;\r\n\r\n            if (base.isTransition) {\r\n                return false;\r\n            }\r\n\r\n            if (base.options.scrollPerPage === true && base.currentItem > 0 && base.currentItem < base.options.items) {\r\n                base.currentItem = 0;\r\n            } else {\r\n                base.currentItem -= base.options.scrollPerPage === true ? base.options.items : 1;\r\n            }\r\n            if (base.currentItem < 0) {\r\n                if (base.options.rewindNav === true) {\r\n                    base.currentItem = base.maximumItem;\r\n                    speed = \"rewind\";\r\n                } else {\r\n                    base.currentItem = 0;\r\n                    return false;\r\n                }\r\n            }\r\n            base.goTo(base.currentItem, speed);\r\n        },\r\n\r\n        goTo: function(position, speed, drag) {\r\n            var base = this,\r\n                goToPixel;\r\n\r\n            if (base.isTransition) {\r\n                return false;\r\n            }\r\n            if (typeof base.options.beforeMove === \"function\") {\r\n                base.options.beforeMove.apply(this, [base.$elem]);\r\n            }\r\n            if (position >= base.maximumItem) {\r\n                position = base.maximumItem;\r\n            } else if (position <= 0) {\r\n                position = 0;\r\n            }\r\n\r\n            base.currentItem = base.owl.currentItem = position;\r\n            if (base.options.transitionStyle !== false && drag !== \"drag\" && base.options.items === 1 && base.browser.support3d === true) {\r\n                base.swapSpeed(0);\r\n                if (base.browser.support3d === true) {\r\n                    base.transition3d(base.positionsInArray[position]);\r\n                } else {\r\n                    base.css2slide(base.positionsInArray[position], 1);\r\n                }\r\n                base.afterGo();\r\n                base.singleItemTransition();\r\n                return false;\r\n            }\r\n            goToPixel = base.positionsInArray[position];\r\n\r\n            if (base.browser.support3d === true) {\r\n                base.isCss3Finish = false;\r\n\r\n                if (speed === true) {\r\n                    base.swapSpeed(\"paginationSpeed\");\r\n                    window.setTimeout(function() {\r\n                        base.isCss3Finish = true;\r\n                    }, base.options.paginationSpeed);\r\n\r\n                } else if (speed === \"rewind\") {\r\n                    base.swapSpeed(base.options.rewindSpeed);\r\n                    window.setTimeout(function() {\r\n                        base.isCss3Finish = true;\r\n                    }, base.options.rewindSpeed);\r\n\r\n                } else {\r\n                    base.swapSpeed(\"slideSpeed\");\r\n                    window.setTimeout(function() {\r\n                        base.isCss3Finish = true;\r\n                    }, base.options.slideSpeed);\r\n                }\r\n                base.transition3d(goToPixel);\r\n            } else {\r\n                if (speed === true) {\r\n                    base.css2slide(goToPixel, base.options.paginationSpeed);\r\n                } else if (speed === \"rewind\") {\r\n                    base.css2slide(goToPixel, base.options.rewindSpeed);\r\n                } else {\r\n                    base.css2slide(goToPixel, base.options.slideSpeed);\r\n                }\r\n            }\r\n            base.afterGo();\r\n        },\r\n\r\n        jumpTo: function(position) {\r\n            var base = this;\r\n            if (typeof base.options.beforeMove === \"function\") {\r\n                base.options.beforeMove.apply(this, [base.$elem]);\r\n            }\r\n            if (position >= base.maximumItem || position === -1) {\r\n                position = base.maximumItem;\r\n            } else if (position <= 0) {\r\n                position = 0;\r\n            }\r\n            base.swapSpeed(0);\r\n            if (base.browser.support3d === true) {\r\n                base.transition3d(base.positionsInArray[position]);\r\n            } else {\r\n                base.css2slide(base.positionsInArray[position], 1);\r\n            }\r\n            base.currentItem = base.owl.currentItem = position;\r\n            base.afterGo();\r\n        },\r\n\r\n        afterGo: function() {\r\n            var base = this;\r\n\r\n            base.prevArr.push(base.currentItem);\r\n            base.prevItem = base.owl.prevItem = base.prevArr[base.prevArr.length - 2];\r\n            base.prevArr.shift(0);\r\n\r\n            if (base.prevItem !== base.currentItem) {\r\n                base.checkPagination();\r\n                base.checkNavigation();\r\n                base.eachMoveUpdate();\r\n\r\n                if (base.options.autoPlay !== false) {\r\n                    base.checkAp();\r\n                }\r\n            }\r\n            if (typeof base.options.afterMove === \"function\" && base.prevItem !== base.currentItem) {\r\n                base.options.afterMove.apply(this, [base.$elem]);\r\n            }\r\n        },\r\n\r\n        stop: function() {\r\n            var base = this;\r\n            base.apStatus = \"stop\";\r\n            window.clearInterval(base.autoPlayInterval);\r\n        },\r\n\r\n        checkAp: function() {\r\n            var base = this;\r\n            if (base.apStatus !== \"stop\") {\r\n                base.play();\r\n            }\r\n        },\r\n\r\n        play: function() {\r\n            var base = this;\r\n            base.apStatus = \"play\";\r\n            if (base.options.autoPlay === false) {\r\n                return false;\r\n            }\r\n            window.clearInterval(base.autoPlayInterval);\r\n            base.autoPlayInterval = window.setInterval(function() {\r\n                base.next(true);\r\n            }, base.options.autoPlay);\r\n        },\r\n\r\n        swapSpeed: function(action) {\r\n            var base = this;\r\n            if (action === \"slideSpeed\") {\r\n                base.$owlWrapper.css(base.addCssSpeed(base.options.slideSpeed));\r\n            } else if (action === \"paginationSpeed\") {\r\n                base.$owlWrapper.css(base.addCssSpeed(base.options.paginationSpeed));\r\n            } else if (typeof action !== \"string\") {\r\n                base.$owlWrapper.css(base.addCssSpeed(action));\r\n            }\r\n        },\r\n\r\n        addCssSpeed: function(speed) {\r\n            return {\r\n                \"-webkit-transition\": \"all \" + speed + \"ms ease\",\r\n                \"-moz-transition\": \"all \" + speed + \"ms ease\",\r\n                \"-o-transition\": \"all \" + speed + \"ms ease\",\r\n                \"transition\": \"all \" + speed + \"ms ease\"\r\n            };\r\n        },\r\n\r\n        removeTransition: function() {\r\n            return {\r\n                \"-webkit-transition\": \"\",\r\n                \"-moz-transition\": \"\",\r\n                \"-o-transition\": \"\",\r\n                \"transition\": \"\"\r\n            };\r\n        },\r\n\r\n        doTranslate: function(pixels) {\r\n            return {\r\n                \"-webkit-transform\": \"translate3d(\" + pixels + \"px, 0px, 0px)\",\r\n                \"-moz-transform\": \"translate3d(\" + pixels + \"px, 0px, 0px)\",\r\n                \"-o-transform\": \"translate3d(\" + pixels + \"px, 0px, 0px)\",\r\n                \"-ms-transform\": \"translate3d(\" + pixels + \"px, 0px, 0px)\",\r\n                \"transform\": \"translate3d(\" + pixels + \"px, 0px,0px)\"\r\n            };\r\n        },\r\n\r\n        transition3d: function(value) {\r\n            var base = this;\r\n            base.$owlWrapper.css(base.doTranslate(value));\r\n        },\r\n\r\n        css2move: function(value) {\r\n            var base = this;\r\n            base.$owlWrapper.css({\r\n                \"left\": value\r\n            });\r\n        },\r\n\r\n        css2slide: function(value, speed) {\r\n            var base = this;\r\n\r\n            base.isCssFinish = false;\r\n            base.$owlWrapper.stop(true, true).animate({\r\n                \"left\": value\r\n            }, {\r\n                duration: speed || base.options.slideSpeed,\r\n                complete: function() {\r\n                    base.isCssFinish = true;\r\n                }\r\n            });\r\n        },\r\n\r\n        checkBrowser: function() {\r\n            var base = this,\r\n                translate3D = \"translate3d(0px, 0px, 0px)\",\r\n                tempElem = document.createElement(\"div\"),\r\n                regex,\r\n                asSupport,\r\n                support3d,\r\n                isTouch;\r\n\r\n            tempElem.style.cssText = \"  -moz-transform:\" + translate3D +\r\n                \"; -ms-transform:\" + translate3D +\r\n                \"; -o-transform:\" + translate3D +\r\n                \"; -webkit-transform:\" + translate3D +\r\n                \"; transform:\" + translate3D;\r\n            regex = /translate3d\\(0px, 0px, 0px\\)/g;\r\n            asSupport = tempElem.style.cssText.match(regex);\r\n            support3d = (asSupport !== null && asSupport.length === 1);\r\n\r\n            isTouch = \"ontouchstart\" in window || window.navigator.msMaxTouchPoints;\r\n\r\n            base.browser = {\r\n                \"support3d\": support3d,\r\n                \"isTouch\": isTouch\r\n            };\r\n        },\r\n\r\n        moveEvents: function() {\r\n            var base = this;\r\n            if (base.options.mouseDrag !== false || base.options.touchDrag !== false) {\r\n                base.gestures();\r\n                base.disabledEvents();\r\n            }\r\n        },\r\n\r\n        eventTypes: function() {\r\n            var base = this,\r\n                types = [\"s\", \"e\", \"x\"];\r\n\r\n            base.ev_types = {};\r\n\r\n            if (base.options.mouseDrag === true && base.options.touchDrag === true) {\r\n                types = [\r\n                    \"touchstart.owl mousedown.owl\",\r\n                    \"touchmove.owl mousemove.owl\",\r\n                    \"touchend.owl touchcancel.owl mouseup.owl\"\r\n                ];\r\n            } else if (base.options.mouseDrag === false && base.options.touchDrag === true) {\r\n                types = [\r\n                    \"touchstart.owl\",\r\n                    \"touchmove.owl\",\r\n                    \"touchend.owl touchcancel.owl\"\r\n                ];\r\n            } else if (base.options.mouseDrag === true && base.options.touchDrag === false) {\r\n                types = [\r\n                    \"mousedown.owl\",\r\n                    \"mousemove.owl\",\r\n                    \"mouseup.owl\"\r\n                ];\r\n            }\r\n\r\n            base.ev_types.start = types[0];\r\n            base.ev_types.move = types[1];\r\n            base.ev_types.end = types[2];\r\n        },\r\n\r\n        disabledEvents: function() {\r\n            var base = this;\r\n            base.$elem.on(\"dragstart.owl\", function(event) {\r\n                event.preventDefault();\r\n            });\r\n            base.$elem.on(\"mousedown.disableTextSelect\", function(e) {\r\n                return $(e.target).is('input, textarea, select, option');\r\n            });\r\n        },\r\n\r\n        gestures: function() {\r\n            /*jslint unparam: true*/\r\n            var base = this,\r\n                locals = {\r\n                    offsetX: 0,\r\n                    offsetY: 0,\r\n                    baseElWidth: 0,\r\n                    relativePos: 0,\r\n                    position: null,\r\n                    minSwipe: null,\r\n                    maxSwipe: null,\r\n                    sliding: null,\r\n                    dargging: null,\r\n                    targetElement: null\r\n                };\r\n\r\n            base.isCssFinish = true;\r\n\r\n            function getTouches(event) {\r\n                if (event.touches !== undefined) {\r\n                    return {\r\n                        x: event.touches[0].pageX,\r\n                        y: event.touches[0].pageY\r\n                    };\r\n                }\r\n\r\n                if (event.touches === undefined) {\r\n                    if (event.pageX !== undefined) {\r\n                        return {\r\n                            x: event.pageX,\r\n                            y: event.pageY\r\n                        };\r\n                    }\r\n                    if (event.pageX === undefined) {\r\n                        return {\r\n                            x: event.clientX,\r\n                            y: event.clientY\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n\r\n            function swapEvents(type) {\r\n                if (type === \"on\") {\r\n                    $(document).on(base.ev_types.move, dragMove);\r\n                    $(document).on(base.ev_types.end, dragEnd);\r\n                } else if (type === \"off\") {\r\n                    $(document).off(base.ev_types.move);\r\n                    $(document).off(base.ev_types.end);\r\n                }\r\n            }\r\n\r\n            function dragStart(event) {\r\n                var ev = event.originalEvent || event || window.event,\r\n                    position;\r\n\r\n                if (ev.which === 3) {\r\n                    return false;\r\n                }\r\n                if (base.itemsAmount <= base.options.items) {\r\n                    return;\r\n                }\r\n                if (base.isCssFinish === false && !base.options.dragBeforeAnimFinish) {\r\n                    return false;\r\n                }\r\n                if (base.isCss3Finish === false && !base.options.dragBeforeAnimFinish) {\r\n                    return false;\r\n                }\r\n\r\n                if (base.options.autoPlay !== false) {\r\n                    window.clearInterval(base.autoPlayInterval);\r\n                }\r\n\r\n                if (base.browser.isTouch !== true && !base.$owlWrapper.hasClass(\"grabbing\")) {\r\n                    base.$owlWrapper.addClass(\"grabbing\");\r\n                }\r\n\r\n                base.newPosX = 0;\r\n                base.newRelativeX = 0;\r\n\r\n                $(this).css(base.removeTransition());\r\n\r\n                position = $(this).position();\r\n                locals.relativePos = position.left;\r\n\r\n                locals.offsetX = getTouches(ev).x - position.left;\r\n                locals.offsetY = getTouches(ev).y - position.top;\r\n\r\n                swapEvents(\"on\");\r\n\r\n                locals.sliding = false;\r\n                locals.targetElement = ev.target || ev.srcElement;\r\n            }\r\n\r\n            function dragMove(event) {\r\n                var ev = event.originalEvent || event || window.event,\r\n                    minSwipe,\r\n                    maxSwipe;\r\n\r\n                base.newPosX = getTouches(ev).x - locals.offsetX;\r\n                base.newPosY = getTouches(ev).y - locals.offsetY;\r\n                base.newRelativeX = base.newPosX - locals.relativePos;\r\n\r\n                if (typeof base.options.startDragging === \"function\" && locals.dragging !== true && base.newRelativeX !== 0) {\r\n                    locals.dragging = true;\r\n                    base.options.startDragging.apply(base, [base.$elem]);\r\n                }\r\n\r\n                if ((base.newRelativeX > 8 || base.newRelativeX < -8) && (base.browser.isTouch === true)) {\r\n                    if (ev.preventDefault !== undefined) {\r\n                        ev.preventDefault();\r\n                    } else {\r\n                        ev.returnValue = false;\r\n                    }\r\n                    locals.sliding = true;\r\n                }\r\n\r\n                if ((base.newPosY > 10 || base.newPosY < -10) && locals.sliding === false) {\r\n                    $(document).off(\"touchmove.owl\");\r\n                }\r\n\r\n                minSwipe = function() {\r\n                    return base.newRelativeX / 5;\r\n                };\r\n\r\n                maxSwipe = function() {\r\n                    return base.maximumPixels + base.newRelativeX / 5;\r\n                };\r\n\r\n                base.newPosX = Math.max(Math.min(base.newPosX, minSwipe()), maxSwipe());\r\n                if (base.browser.support3d === true) {\r\n                    base.transition3d(base.newPosX);\r\n                } else {\r\n                    base.css2move(base.newPosX);\r\n                }\r\n            }\r\n\r\n            function dragEnd(event) {\r\n                var ev = event.originalEvent || event || window.event,\r\n                    newPosition,\r\n                    handlers,\r\n                    owlStopEvent;\r\n\r\n                ev.target = ev.target || ev.srcElement;\r\n\r\n                locals.dragging = false;\r\n\r\n                if (base.browser.isTouch !== true) {\r\n                    base.$owlWrapper.removeClass(\"grabbing\");\r\n                }\r\n\r\n                if (base.newRelativeX < 0) {\r\n                    base.dragDirection = base.owl.dragDirection = \"left\";\r\n                } else {\r\n                    base.dragDirection = base.owl.dragDirection = \"right\";\r\n                }\r\n\r\n                if (base.newRelativeX !== 0) {\r\n                    newPosition = base.getNewPosition();\r\n                    base.goTo(newPosition, false, \"drag\");\r\n                    if (locals.targetElement === ev.target && base.browser.isTouch !== true) {\r\n                        $(ev.target).on(\"click.disable\", function(ev) {\r\n                            ev.stopImmediatePropagation();\r\n                            ev.stopPropagation();\r\n                            ev.preventDefault();\r\n                            $(ev.target).off(\"click.disable\");\r\n                        });\r\n                        handlers = $._data(ev.target, \"events\").click;\r\n                        owlStopEvent = handlers.pop();\r\n                        handlers.splice(0, 0, owlStopEvent);\r\n                    }\r\n                }\r\n                swapEvents(\"off\");\r\n            }\r\n            base.$elem.on(base.ev_types.start, \".owl-wrapper\", dragStart);\r\n        },\r\n\r\n        getNewPosition: function() {\r\n            var base = this,\r\n                newPosition = base.closestItem();\r\n\r\n            if (newPosition > base.maximumItem) {\r\n                base.currentItem = base.maximumItem;\r\n                newPosition = base.maximumItem;\r\n            } else if (base.newPosX >= 0) {\r\n                newPosition = 0;\r\n                base.currentItem = 0;\r\n            }\r\n            return newPosition;\r\n        },\r\n        closestItem: function() {\r\n            var base = this,\r\n                array = base.options.scrollPerPage === true ? base.pagesInArray : base.positionsInArray,\r\n                goal = base.newPosX,\r\n                closest = null;\r\n\r\n            $.each(array, function(i, v) {\r\n                if (goal - (base.itemWidth / 20) > array[i + 1] && goal - (base.itemWidth / 20) < v && base.moveDirection() === \"left\") {\r\n                    closest = v;\r\n                    if (base.options.scrollPerPage === true) {\r\n                        base.currentItem = $.inArray(closest, base.positionsInArray);\r\n                    } else {\r\n                        base.currentItem = i;\r\n                    }\r\n                } else if (goal + (base.itemWidth / 20) < v && goal + (base.itemWidth / 20) > (array[i + 1] || array[i] - base.itemWidth) && base.moveDirection() === \"right\") {\r\n                    if (base.options.scrollPerPage === true) {\r\n                        closest = array[i + 1] || array[array.length - 1];\r\n                        base.currentItem = $.inArray(closest, base.positionsInArray);\r\n                    } else {\r\n                        closest = array[i + 1];\r\n                        base.currentItem = i + 1;\r\n                    }\r\n                }\r\n            });\r\n            return base.currentItem;\r\n        },\r\n\r\n        moveDirection: function() {\r\n            var base = this,\r\n                direction;\r\n            if (base.newRelativeX < 0) {\r\n                direction = \"right\";\r\n                base.playDirection = \"next\";\r\n            } else {\r\n                direction = \"left\";\r\n                base.playDirection = \"prev\";\r\n            }\r\n            return direction;\r\n        },\r\n\r\n        customEvents: function() {\r\n            /*jslint unparam: true*/\r\n            var base = this;\r\n            base.$elem.on(\"owl.next\", function() {\r\n                base.next();\r\n            });\r\n            base.$elem.on(\"owl.prev\", function() {\r\n                base.prev();\r\n            });\r\n            base.$elem.on(\"owl.play\", function(event, speed) {\r\n                base.options.autoPlay = speed;\r\n                base.play();\r\n                base.hoverStatus = \"play\";\r\n            });\r\n            base.$elem.on(\"owl.stop\", function() {\r\n                base.stop();\r\n                base.hoverStatus = \"stop\";\r\n            });\r\n            base.$elem.on(\"owl.goTo\", function(event, item) {\r\n                base.goTo(item);\r\n            });\r\n            base.$elem.on(\"owl.jumpTo\", function(event, item) {\r\n                base.jumpTo(item);\r\n            });\r\n        },\r\n\r\n        stopOnHover: function() {\r\n            var base = this;\r\n            if (base.options.stopOnHover === true && base.browser.isTouch !== true && base.options.autoPlay !== false) {\r\n                base.$elem.on(\"mouseover\", function() {\r\n                    base.stop();\r\n                });\r\n                base.$elem.on(\"mouseout\", function() {\r\n                    if (base.hoverStatus !== \"stop\") {\r\n                        base.play();\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        lazyLoad: function() {\r\n            var base = this,\r\n                i,\r\n                $item,\r\n                itemNumber,\r\n                $lazyImg,\r\n                follow;\r\n\r\n            if (base.options.lazyLoad === false) {\r\n                return false;\r\n            }\r\n            for (i = 0; i < base.itemsAmount; i += 1) {\r\n                $item = $(base.$owlItems[i]);\r\n\r\n                if ($item.data(\"owl-loaded\") === \"loaded\") {\r\n                    continue;\r\n                }\r\n\r\n                itemNumber = $item.data(\"owl-item\");\r\n                $lazyImg = $item.find(\".lazyOwl\");\r\n\r\n                if (typeof $lazyImg.data(\"src\") !== \"string\") {\r\n                    $item.data(\"owl-loaded\", \"loaded\");\r\n                    continue;\r\n                }\r\n                if ($item.data(\"owl-loaded\") === undefined) {\r\n                    $lazyImg.hide();\r\n                    $item.addClass(\"loading\").data(\"owl-loaded\", \"checked\");\r\n                }\r\n                if (base.options.lazyFollow === true) {\r\n                    follow = itemNumber >= base.currentItem;\r\n                } else {\r\n                    follow = true;\r\n                }\r\n                if (follow && itemNumber < base.currentItem + base.options.items && $lazyImg.length) {\r\n                    $lazyImg.each(function() {\r\n                        base.lazyPreload($item, $(this));\r\n                    });\r\n                }\r\n            }\r\n        },\r\n\r\n        lazyPreload: function($item, $lazyImg) {\r\n            var base = this,\r\n                iterations = 0,\r\n                isBackgroundImg;\r\n\r\n            if ($lazyImg.prop(\"tagName\") === \"DIV\") {\r\n                $lazyImg.css(\"background-image\", \"url(\" + $lazyImg.data(\"src\") + \")\");\r\n                isBackgroundImg = true;\r\n            } else {\r\n                $lazyImg[0].src = $lazyImg.data(\"src\");\r\n            }\r\n\r\n            function showImage() {\r\n                $item.data(\"owl-loaded\", \"loaded\").removeClass(\"loading\");\r\n                $lazyImg.removeAttr(\"data-src\");\r\n                if (base.options.lazyEffect === \"fade\") {\r\n                    $lazyImg.fadeIn(400);\r\n                } else {\r\n                    $lazyImg.show();\r\n                }\r\n                if (typeof base.options.afterLazyLoad === \"function\") {\r\n                    base.options.afterLazyLoad.apply(this, [base.$elem]);\r\n                }\r\n            }\r\n\r\n            function checkLazyImage() {\r\n                iterations += 1;\r\n                if (base.completeImg($lazyImg.get(0)) || isBackgroundImg === true) {\r\n                    showImage();\r\n                } else if (iterations <= 100) { //if image loads in less than 10 seconds \r\n                    window.setTimeout(checkLazyImage, 100);\r\n                } else {\r\n                    showImage();\r\n                }\r\n            }\r\n\r\n            checkLazyImage();\r\n        },\r\n\r\n        autoHeight: function() {\r\n            var base = this,\r\n                $currentimg = $(base.$owlItems[base.currentItem]).find(\"img\"),\r\n                iterations;\r\n\r\n            function addHeight() {\r\n                var $currentItem = $(base.$owlItems[base.currentItem]).height();\r\n                base.wrapperOuter.css(\"height\", $currentItem + \"px\");\r\n                if (!base.wrapperOuter.hasClass(\"autoHeight\")) {\r\n                    window.setTimeout(function() {\r\n                        base.wrapperOuter.addClass(\"autoHeight\");\r\n                    }, 0);\r\n                }\r\n            }\r\n\r\n            function checkImage() {\r\n                iterations += 1;\r\n                if (base.completeImg($currentimg.get(0))) {\r\n                    addHeight();\r\n                } else if (iterations <= 100) { //if image loads in less than 10 seconds \r\n                    window.setTimeout(checkImage, 100);\r\n                } else {\r\n                    base.wrapperOuter.css(\"height\", \"\"); //Else remove height attribute\r\n                }\r\n            }\r\n\r\n            if ($currentimg.get(0) !== undefined) {\r\n                iterations = 0;\r\n                checkImage();\r\n            } else {\r\n                addHeight();\r\n            }\r\n        },\r\n\r\n        completeImg: function(img) {\r\n            var naturalWidthType;\r\n\r\n            if (!img.complete) {\r\n                return false;\r\n            }\r\n            naturalWidthType = typeof img.naturalWidth;\r\n            if (naturalWidthType !== \"undefined\" && img.naturalWidth === 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n\r\n        onVisibleItems: function() {\r\n            var base = this,\r\n                i;\r\n\r\n            if (base.options.addClassActive === true) {\r\n                base.$owlItems.removeClass(\"active\");\r\n            }\r\n            base.visibleItems = [];\r\n            for (i = base.currentItem; i < base.currentItem + base.options.items; i += 1) {\r\n                base.visibleItems.push(i);\r\n\r\n                if (base.options.addClassActive === true) {\r\n                    $(base.$owlItems[i]).addClass(\"active\");\r\n                }\r\n            }\r\n            base.owl.visibleItems = base.visibleItems;\r\n        },\r\n\r\n        transitionTypes: function(className) {\r\n            var base = this;\r\n            //Currently available: \"fade\", \"backSlide\", \"goDown\", \"fadeUp\"\r\n            base.outClass = \"owl-\" + className + \"-out\";\r\n            base.inClass = \"owl-\" + className + \"-in\";\r\n        },\r\n\r\n        singleItemTransition: function() {\r\n            var base = this,\r\n                outClass = base.outClass,\r\n                inClass = base.inClass,\r\n                $currentItem = base.$owlItems.eq(base.currentItem),\r\n                $prevItem = base.$owlItems.eq(base.prevItem),\r\n                prevPos = Math.abs(base.positionsInArray[base.currentItem]) + base.positionsInArray[base.prevItem],\r\n                origin = Math.abs(base.positionsInArray[base.currentItem]) + base.itemWidth / 2,\r\n                animEnd = 'webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend';\r\n\r\n            base.isTransition = true;\r\n\r\n            base.$owlWrapper\r\n                .addClass('owl-origin')\r\n                .css({\r\n                    \"-webkit-transform-origin\": origin + \"px\",\r\n                    \"-moz-perspective-origin\": origin + \"px\",\r\n                    \"perspective-origin\": origin + \"px\"\r\n                });\r\n\r\n            function transStyles(prevPos) {\r\n                return {\r\n                    \"position\": \"relative\",\r\n                    \"left\": prevPos + \"px\"\r\n                };\r\n            }\r\n\r\n            $prevItem\r\n                .css(transStyles(prevPos, 10))\r\n                .addClass(outClass)\r\n                .on(animEnd, function() {\r\n                    base.endPrev = true;\r\n                    $prevItem.off(animEnd);\r\n                    base.clearTransStyle($prevItem, outClass);\r\n                });\r\n\r\n            $currentItem\r\n                .addClass(inClass)\r\n                .on(animEnd, function() {\r\n                    base.endCurrent = true;\r\n                    $currentItem.off(animEnd);\r\n                    base.clearTransStyle($currentItem, inClass);\r\n                });\r\n        },\r\n\r\n        clearTransStyle: function(item, classToRemove) {\r\n            var base = this;\r\n            item.css({\r\n                \"position\": \"\",\r\n                \"left\": \"\"\r\n            }).removeClass(classToRemove);\r\n\r\n            if (base.endPrev && base.endCurrent) {\r\n                base.$owlWrapper.removeClass('owl-origin');\r\n                base.endPrev = false;\r\n                base.endCurrent = false;\r\n                base.isTransition = false;\r\n            }\r\n        },\r\n\r\n        owlStatus: function() {\r\n            var base = this;\r\n            base.owl = {\r\n                \"userOptions\": base.userOptions,\r\n                \"baseElement\": base.$elem,\r\n                \"userItems\": base.$userItems,\r\n                \"owlItems\": base.$owlItems,\r\n                \"currentItem\": base.currentItem,\r\n                \"prevItem\": base.prevItem,\r\n                \"visibleItems\": base.visibleItems,\r\n                \"isTouch\": base.browser.isTouch,\r\n                \"browser\": base.browser,\r\n                \"dragDirection\": base.dragDirection\r\n            };\r\n        },\r\n\r\n        clearEvents: function() {\r\n            var base = this;\r\n            base.$elem.off(\".owl owl mousedown.disableTextSelect\");\r\n            $(document).off(\".owl owl\");\r\n            $(window).off(\"resize\", base.resizer);\r\n        },\r\n\r\n        unWrap: function() {\r\n            var base = this;\r\n            if (base.$elem.children().length !== 0) {\r\n                base.$owlWrapper.unwrap();\r\n                base.$userItems.unwrap().unwrap();\r\n                if (base.owlControls) {\r\n                    base.owlControls.remove();\r\n                }\r\n            }\r\n            base.clearEvents();\r\n            base.$elem.attr({\r\n                style: base.$elem.data(\"owl-originalStyles\") || \"\",\r\n                class: base.$elem.data(\"owl-originalClasses\")\r\n            });\r\n        },\r\n\r\n        destroy: function() {\r\n            var base = this;\r\n            base.stop();\r\n            window.clearInterval(base.checkVisible);\r\n            base.unWrap();\r\n            base.$elem.removeData();\r\n        },\r\n\r\n        reinit: function(newOptions) {\r\n            var base = this,\r\n                options = $.extend({}, base.userOptions, newOptions);\r\n            base.unWrap();\r\n            base.init(options, base.$elem);\r\n        },\r\n\r\n        addItem: function(htmlString, targetPosition) {\r\n            var base = this,\r\n                position;\r\n\r\n            if (!htmlString) {\r\n                return false;\r\n            }\r\n\r\n            if (base.$elem.children().length === 0) {\r\n                base.$elem.append(htmlString);\r\n                base.setVars();\r\n                return false;\r\n            }\r\n            base.unWrap();\r\n            if (targetPosition === undefined || targetPosition === -1) {\r\n                position = -1;\r\n            } else {\r\n                position = targetPosition;\r\n            }\r\n            if (position >= base.$userItems.length || position === -1) {\r\n                base.$userItems.eq(-1).after(htmlString);\r\n            } else {\r\n                base.$userItems.eq(position).before(htmlString);\r\n            }\r\n\r\n            base.setVars();\r\n        },\r\n\r\n        removeItem: function(targetPosition) {\r\n            var base = this,\r\n                position;\r\n\r\n            if (base.$elem.children().length === 0) {\r\n                return false;\r\n            }\r\n            if (targetPosition === undefined || targetPosition === -1) {\r\n                position = -1;\r\n            } else {\r\n                position = targetPosition;\r\n            }\r\n\r\n            base.unWrap();\r\n            base.$userItems.eq(position).remove();\r\n            base.setVars();\r\n        }\r\n\r\n    };\r\n\r\n    $.fn.owlCarousel = function(options) {\r\n        return this.each(function() {\r\n            if ($(this).data(\"owl-init\") === true) {\r\n                return false;\r\n            }\r\n            $(this).data(\"owl-init\", true);\r\n            var carousel = Object.create(Carousel);\r\n            carousel.init(options, this);\r\n            $.data(this, \"owlCarousel\", carousel);\r\n        });\r\n    };\r\n\r\n    $.fn.owlCarousel.options = {\r\n\r\n        items: 5,\r\n        itemsCustom: false,\r\n        itemsDesktop: [1199, 4],\r\n        itemsDesktopSmall: [979, 3],\r\n        itemsTablet: [768, 2],\r\n        itemsTabletSmall: false,\r\n        itemsMobile: [479, 1],\r\n        singleItem: false,\r\n        itemsScaleUp: false,\r\n\r\n        slideSpeed: 200,\r\n        paginationSpeed: 800,\r\n        rewindSpeed: 1000,\r\n\r\n        autoPlay: false,\r\n        stopOnHover: false,\r\n\r\n        navigation: false,\r\n        navigationText: [\"prev\", \"next\"],\r\n        rewindNav: true,\r\n        scrollPerPage: false,\r\n\r\n        pagination: true,\r\n        paginationNumbers: false,\r\n\r\n        responsive: true,\r\n        responsiveRefreshRate: 200,\r\n        responsiveBaseWidth: window,\r\n\r\n        baseClass: \"owl-carousel\",\r\n        theme: \"owl-theme\",\r\n\r\n        lazyLoad: false,\r\n        lazyFollow: true,\r\n        lazyEffect: \"fade\",\r\n\r\n        autoHeight: false,\r\n\r\n        jsonPath: false,\r\n        jsonSuccess: false,\r\n\r\n        dragBeforeAnimFinish: true,\r\n        mouseDrag: true,\r\n        touchDrag: true,\r\n\r\n        addClassActive: false,\r\n        transitionStyle: false,\r\n\r\n        beforeUpdate: false,\r\n        afterUpdate: false,\r\n        beforeInit: false,\r\n        afterInit: false,\r\n        beforeMove: false,\r\n        afterMove: false,\r\n        afterAction: false,\r\n        startDragging: false,\r\n        afterLazyLoad: false\r\n    };\r\n}(jQuery, window, document));","/* jquery.nicescroll\r\n-- version 3.5.4\r\n-- copyright 2013-11-13 InuYaksa*2013\r\n-- licensed under the MIT\r\n--\r\n-- http://areaaperta.com/nicescroll\r\n-- https://github.com/inuyaksa/jquery.nicescroll\r\n--\r\n*/\r\n\r\n(function(factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as anonymous module.\r\n        define(['jquery'], factory);\r\n    } else {\r\n        // Browser globals.\r\n        factory(jQuery);\r\n    }\r\n}(function(jQuery) {\r\n\r\n    // globals\r\n    var domfocus = false;\r\n    var mousefocus = false;\r\n    var zoomactive = false;\r\n    var tabindexcounter = 5000;\r\n    var ascrailcounter = 2000;\r\n    var globalmaxzindex = 0;\r\n\r\n    var $ = jQuery; // sandbox\r\n\r\n    // http://stackoverflow.com/questions/2161159/get-script-path\r\n    function getScriptPath() {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var path = scripts[scripts.length - 1].src.split('?')[0];\r\n        return (path.split('/').length > 0) ? path.split('/').slice(0, -1).join('/') + '/' : '';\r\n    }\r\n    //  var scriptpath = getScriptPath();\r\n\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n\r\n    var setAnimationFrame = window.requestAnimationFrame || false;\r\n    var clearAnimationFrame = window.cancelAnimationFrame || false;\r\n\r\n    if (!setAnimationFrame) {\r\n        for (var vx in vendors) {\r\n            var v = vendors[vx];\r\n            if (!setAnimationFrame) setAnimationFrame = window[v + 'RequestAnimationFrame'];\r\n            if (!clearAnimationFrame) clearAnimationFrame = window[v + 'CancelAnimationFrame'] || window[v + 'CancelRequestAnimationFrame'];\r\n        }\r\n    }\r\n\r\n    var clsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;\r\n\r\n    var _globaloptions = {\r\n        zindex: \"auto\",\r\n        cursoropacitymin: 0,\r\n        cursoropacitymax: 1,\r\n        cursorcolor: \"#424242\",\r\n        cursorwidth: \"5px\",\r\n        cursorborder: \"1px solid #fff\",\r\n        cursorborderradius: \"5px\",\r\n        scrollspeed: 60,\r\n        mousescrollstep: 8 * 3,\r\n        touchbehavior: false,\r\n        hwacceleration: true,\r\n        usetransition: true,\r\n        boxzoom: false,\r\n        dblclickzoom: true,\r\n        gesturezoom: true,\r\n        grabcursorenabled: true,\r\n        autohidemode: true,\r\n        background: \"\",\r\n        iframeautoresize: true,\r\n        cursorminheight: 32,\r\n        preservenativescrolling: true,\r\n        railoffset: false,\r\n        bouncescroll: true,\r\n        spacebarenabled: true,\r\n        railpadding: {\r\n            top: 0,\r\n            right: 0,\r\n            left: 0,\r\n            bottom: 0\r\n        },\r\n        disableoutline: true,\r\n        horizrailenabled: true,\r\n        railalign: \"right\",\r\n        railvalign: \"bottom\",\r\n        enabletranslate3d: true,\r\n        enablemousewheel: true,\r\n        enablekeyboard: true,\r\n        smoothscroll: true,\r\n        sensitiverail: true,\r\n        enablemouselockapi: true,\r\n        //      cursormaxheight:false,\r\n        cursorfixedheight: false,\r\n        directionlockdeadzone: 6,\r\n        hidecursordelay: 400,\r\n        nativeparentscrolling: true,\r\n        enablescrollonselection: true,\r\n        overflowx: true,\r\n        overflowy: true,\r\n        cursordragspeed: 0.3,\r\n        rtlmode: \"auto\",\r\n        cursordragontouch: false,\r\n        oneaxismousemode: \"auto\",\r\n        scriptpath: getScriptPath()\r\n    };\r\n\r\n    var browserdetected = false;\r\n\r\n    var getBrowserDetection = function() {\r\n\r\n        if (browserdetected) return browserdetected;\r\n\r\n        var domtest = document.createElement('DIV');\r\n\r\n        var d = {};\r\n\r\n        d.haspointerlock = \"pointerLockElement\" in document || \"mozPointerLockElement\" in document || \"webkitPointerLockElement\" in document;\r\n\r\n        d.isopera = (\"opera\" in window);\r\n        d.isopera12 = (d.isopera && (\"getUserMedia\" in navigator));\r\n        d.isoperamini = (Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\");\r\n\r\n        d.isie = ((\"all\" in document) && (\"attachEvent\" in domtest) && !d.isopera);\r\n        d.isieold = (d.isie && !(\"msInterpolationMode\" in domtest.style)); // IE6 and older\r\n        d.isie7 = d.isie && !d.isieold && (!(\"documentMode\" in document) || (document.documentMode == 7));\r\n        d.isie8 = d.isie && (\"documentMode\" in document) && (document.documentMode == 8);\r\n        d.isie9 = d.isie && (\"performance\" in window) && (document.documentMode >= 9);\r\n        d.isie10 = d.isie && (\"performance\" in window) && (document.documentMode >= 10);\r\n\r\n        d.isie9mobile = /iemobile.9/i.test(navigator.userAgent); //wp 7.1 mango\r\n        if (d.isie9mobile) d.isie9 = false;\r\n        d.isie7mobile = (!d.isie9mobile && d.isie7) && /iemobile/i.test(navigator.userAgent); //wp 7.0\r\n\r\n        d.ismozilla = (\"MozAppearance\" in domtest.style);\r\n\r\n        d.iswebkit = (\"WebkitAppearance\" in domtest.style);\r\n\r\n        d.ischrome = (\"chrome\" in window);\r\n        d.ischrome22 = (d.ischrome && d.haspointerlock);\r\n        d.ischrome26 = (d.ischrome && (\"transition\" in domtest.style)); // issue with transform detection (maintain prefix)\r\n\r\n        d.cantouch = (\"ontouchstart\" in document.documentElement) || (\"ontouchstart\" in window); // detection for Chrome Touch Emulation\r\n        d.hasmstouch = (window.navigator.msPointerEnabled || false); // IE10+ pointer events\r\n\r\n        d.ismac = /^mac$/i.test(navigator.platform);\r\n\r\n        d.isios = (d.cantouch && /iphone|ipad|ipod/i.test(navigator.platform));\r\n        d.isios4 = ((d.isios) && !(\"seal\" in Object));\r\n\r\n        d.isandroid = (/android/i.test(navigator.userAgent));\r\n\r\n        d.trstyle = false;\r\n        d.hastransform = false;\r\n        d.hastranslate3d = false;\r\n        d.transitionstyle = false;\r\n        d.hastransition = false;\r\n        d.transitionend = false;\r\n\r\n        var check = ['transform', 'msTransform', 'webkitTransform', 'MozTransform', 'OTransform'];\r\n        for (var a = 0; a < check.length; a++) {\r\n            if (typeof domtest.style[check[a]] != \"undefined\") {\r\n                d.trstyle = check[a];\r\n                break;\r\n            }\r\n        }\r\n        d.hastransform = (d.trstyle != false);\r\n        if (d.hastransform) {\r\n            domtest.style[d.trstyle] = \"translate3d(1px,2px,3px)\";\r\n            d.hastranslate3d = /translate3d/.test(domtest.style[d.trstyle]);\r\n        }\r\n\r\n        d.transitionstyle = false;\r\n        d.prefixstyle = '';\r\n        d.transitionend = false;\r\n        var check = ['transition', 'webkitTransition', 'MozTransition', 'OTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\r\n        var prefix = ['', '-webkit-', '-moz-', '-o-', '-o', '-ms-', '-khtml-'];\r\n        var evs = ['transitionend', 'webkitTransitionEnd', 'transitionend', 'otransitionend', 'oTransitionEnd', 'msTransitionEnd', 'KhtmlTransitionEnd'];\r\n        for (var a = 0; a < check.length; a++) {\r\n            if (check[a] in domtest.style) {\r\n                d.transitionstyle = check[a];\r\n                d.prefixstyle = prefix[a];\r\n                d.transitionend = evs[a];\r\n                break;\r\n            }\r\n        }\r\n        if (d.ischrome26) { // use always prefix\r\n            d.prefixstyle = prefix[1];\r\n        }\r\n\r\n        d.hastransition = (d.transitionstyle);\r\n\r\n        function detectCursorGrab() {\r\n            var lst = ['-moz-grab', '-webkit-grab', 'grab'];\r\n            if ((d.ischrome && !d.ischrome22) || d.isie) lst = []; // force setting for IE returns false positive and chrome cursor bug\r\n            for (var a = 0; a < lst.length; a++) {\r\n                var p = lst[a];\r\n                domtest.style['cursor'] = p;\r\n                if (domtest.style['cursor'] == p) return p;\r\n            }\r\n            return 'url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize'; // thank you google for custom cursor!\r\n        }\r\n        d.cursorgrabvalue = detectCursorGrab();\r\n\r\n        d.hasmousecapture = (\"setCapture\" in domtest);\r\n\r\n        d.hasMutationObserver = (clsMutationObserver !== false);\r\n\r\n        domtest = null; //memory released\r\n\r\n        browserdetected = d;\r\n\r\n        return d;\r\n    };\r\n\r\n    var NiceScrollClass = function(myopt, me) {\r\n\r\n        var self = this;\r\n\r\n        this.version = '3.5.4';\r\n        this.name = 'nicescroll';\r\n\r\n        this.me = me;\r\n\r\n        this.opt = {\r\n            doc: $(\"body\"),\r\n            win: false\r\n        };\r\n\r\n        $.extend(this.opt, _globaloptions);\r\n\r\n        // Options for internal use\r\n        this.opt.snapbackspeed = 80;\r\n\r\n        if (myopt || false) {\r\n            for (var a in self.opt) {\r\n                if (typeof myopt[a] != \"undefined\") self.opt[a] = myopt[a];\r\n            }\r\n        }\r\n\r\n        this.doc = self.opt.doc;\r\n        this.iddoc = (this.doc && this.doc[0]) ? this.doc[0].id || '' : '';\r\n        this.ispage = /^BODY|HTML/.test((self.opt.win) ? self.opt.win[0].nodeName : this.doc[0].nodeName);\r\n        this.haswrapper = (self.opt.win !== false);\r\n        this.win = self.opt.win || (this.ispage ? $(window) : this.doc);\r\n        this.docscroll = (this.ispage && !this.haswrapper) ? $(window) : this.win;\r\n        this.body = $(\"body\");\r\n        this.viewport = false;\r\n\r\n        this.isfixed = false;\r\n\r\n        this.iframe = false;\r\n        this.isiframe = ((this.doc[0].nodeName == 'IFRAME') && (this.win[0].nodeName == 'IFRAME'));\r\n\r\n        this.istextarea = (this.win[0].nodeName == 'TEXTAREA');\r\n\r\n        this.forcescreen = false; //force to use screen position on events\r\n\r\n        this.canshowonmouseevent = (self.opt.autohidemode != \"scroll\");\r\n\r\n        // Events jump table    \r\n        this.onmousedown = false;\r\n        this.onmouseup = false;\r\n        this.onmousemove = false;\r\n        this.onmousewheel = false;\r\n        this.onkeypress = false;\r\n        this.ongesturezoom = false;\r\n        this.onclick = false;\r\n\r\n        // Nicescroll custom events\r\n        this.onscrollstart = false;\r\n        this.onscrollend = false;\r\n        this.onscrollcancel = false;\r\n\r\n        this.onzoomin = false;\r\n        this.onzoomout = false;\r\n\r\n        // Let's start!  \r\n        this.view = false;\r\n        this.page = false;\r\n\r\n        this.scroll = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.scrollratio = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.cursorheight = 20;\r\n        this.scrollvaluemax = 0;\r\n\r\n        this.isrtlmode = false; //(this.opt.rtlmode==\"auto\") ? (this.win.css(\"direction\")==\"rtl\") : (this.opt.rtlmode===true);\r\n        //    this.checkrtlmode = false;\r\n\r\n        this.scrollrunning = false;\r\n\r\n        this.scrollmom = false;\r\n\r\n        this.observer = false;\r\n        this.observerremover = false; // observer on parent for remove detection\r\n\r\n        do {\r\n            this.id = \"ascrail\" + (ascrailcounter++);\r\n        } while (document.getElementById(this.id));\r\n\r\n        this.rail = false;\r\n        this.cursor = false;\r\n        this.cursorfreezed = false;\r\n        this.selectiondrag = false;\r\n\r\n        this.zoom = false;\r\n        this.zoomactive = false;\r\n\r\n        this.hasfocus = false;\r\n        this.hasmousefocus = false;\r\n\r\n        this.visibility = true;\r\n        this.locked = false;\r\n        this.hidden = false; // rails always hidden\r\n        this.cursoractive = true; // user can interact with cursors\r\n\r\n        this.wheelprevented = false; //prevent mousewheel event\r\n\r\n        this.overflowx = self.opt.overflowx;\r\n        this.overflowy = self.opt.overflowy;\r\n\r\n        this.nativescrollingarea = false;\r\n        this.checkarea = 0;\r\n\r\n        this.events = []; // event list for unbind\r\n\r\n        this.saved = {};\r\n\r\n        this.delaylist = {};\r\n        this.synclist = {};\r\n\r\n        this.lastdeltax = 0;\r\n        this.lastdeltay = 0;\r\n\r\n        this.detected = getBrowserDetection();\r\n\r\n        var cap = $.extend({}, this.detected);\r\n\r\n        this.canhwscroll = (cap.hastransform && self.opt.hwacceleration);\r\n        this.ishwscroll = (this.canhwscroll && self.haswrapper);\r\n\r\n        this.istouchcapable = false; // desktop devices with touch screen support\r\n\r\n        //## Check Chrome desktop with touch support\r\n        if (cap.cantouch && cap.ischrome && !cap.isios && !cap.isandroid) {\r\n            this.istouchcapable = true;\r\n            cap.cantouch = false; // parse normal desktop events\r\n        }\r\n\r\n        //## Firefox 18 nightly build (desktop) false positive (or desktop with touch support)\r\n        if (cap.cantouch && cap.ismozilla && !cap.isios && !cap.isandroid) {\r\n            this.istouchcapable = true;\r\n            cap.cantouch = false; // parse normal desktop events\r\n        }\r\n\r\n        //## disable MouseLock API on user request\r\n\r\n        if (!self.opt.enablemouselockapi) {\r\n            cap.hasmousecapture = false;\r\n            cap.haspointerlock = false;\r\n        }\r\n\r\n        this.delayed = function(name, fn, tm, lazy) {\r\n            var dd = self.delaylist[name];\r\n            var nw = (new Date()).getTime();\r\n            if (!lazy && dd && dd.tt) return false;\r\n            if (dd && dd.tt) clearTimeout(dd.tt);\r\n            if (dd && dd.last + tm > nw && !dd.tt) {\r\n                self.delaylist[name] = {\r\n                    last: nw + tm,\r\n                    tt: setTimeout(function() {\r\n                        if (self || false) {\r\n                            self.delaylist[name].tt = 0;\r\n                            fn.call()\r\n                        }\r\n                    }, tm)\r\n                }\r\n            } else if (!dd || !dd.tt) {\r\n                self.delaylist[name] = {\r\n                    last: nw,\r\n                    tt: 0\r\n                };\r\n                setTimeout(function() {\r\n                    fn.call();\r\n                }, 0);\r\n            }\r\n        };\r\n\r\n        this.debounced = function(name, fn, tm) {\r\n            var dd = self.delaylist[name];\r\n            var nw = (new Date()).getTime();\r\n            self.delaylist[name] = fn;\r\n            if (!dd) {\r\n                setTimeout(function() {\r\n                    var fn = self.delaylist[name];\r\n                    self.delaylist[name] = false;\r\n                    fn.call();\r\n                }, tm);\r\n            }\r\n        };\r\n\r\n        var _onsync = false;\r\n\r\n        this.synched = function(name, fn) {\r\n\r\n            function requestSync() {\r\n                if (_onsync) return;\r\n                setAnimationFrame(function() {\r\n                    _onsync = false;\r\n                    for (name in self.synclist) {\r\n                        var fn = self.synclist[name];\r\n                        if (fn) fn.call(self);\r\n                        self.synclist[name] = false;\r\n                    }\r\n                });\r\n                _onsync = true;\r\n            };\r\n\r\n            self.synclist[name] = fn;\r\n            requestSync();\r\n            return name;\r\n        };\r\n\r\n        this.unsynched = function(name) {\r\n            if (self.synclist[name]) self.synclist[name] = false;\r\n        };\r\n\r\n        this.css = function(el, pars) { // save & set\r\n            for (var n in pars) {\r\n                self.saved.css.push([el, n, el.css(n)]);\r\n                el.css(n, pars[n]);\r\n            }\r\n        };\r\n\r\n        this.scrollTop = function(val) {\r\n            return (typeof val == \"undefined\") ? self.getScrollTop() : self.setScrollTop(val);\r\n        };\r\n\r\n        this.scrollLeft = function(val) {\r\n            return (typeof val == \"undefined\") ? self.getScrollLeft() : self.setScrollLeft(val);\r\n        };\r\n\r\n        // derived by by Dan Pupius www.pupius.net\r\n        BezierClass = function(st, ed, spd, p1, p2, p3, p4) {\r\n            this.st = st;\r\n            this.ed = ed;\r\n            this.spd = spd;\r\n\r\n            this.p1 = p1 || 0;\r\n            this.p2 = p2 || 1;\r\n            this.p3 = p3 || 0;\r\n            this.p4 = p4 || 1;\r\n\r\n            this.ts = (new Date()).getTime();\r\n            this.df = this.ed - this.st;\r\n        };\r\n        BezierClass.prototype = {\r\n            B2: function(t) {\r\n                return 3 * t * t * (1 - t)\r\n            },\r\n            B3: function(t) {\r\n                return 3 * t * (1 - t) * (1 - t)\r\n            },\r\n            B4: function(t) {\r\n                return (1 - t) * (1 - t) * (1 - t)\r\n            },\r\n            getNow: function() {\r\n                var nw = (new Date()).getTime();\r\n                var pc = 1 - ((nw - this.ts) / this.spd);\r\n                var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);\r\n                return (pc < 0) ? this.ed : this.st + Math.round(this.df * bz);\r\n            },\r\n            update: function(ed, spd) {\r\n                this.st = this.getNow();\r\n                this.ed = ed;\r\n                this.spd = spd;\r\n                this.ts = (new Date()).getTime();\r\n                this.df = this.ed - this.st;\r\n                return this;\r\n            }\r\n        };\r\n\r\n        if (this.ishwscroll) {\r\n            // hw accelerated scroll\r\n            this.doc.translate = {\r\n                x: 0,\r\n                y: 0,\r\n                tx: \"0px\",\r\n                ty: \"0px\"\r\n            };\r\n\r\n            //this one can help to enable hw accel on ios6 http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/\r\n            if (cap.hastranslate3d && cap.isios) this.doc.css(\"-webkit-backface-visibility\", \"hidden\"); // prevent flickering http://stackoverflow.com/questions/3461441/      \r\n\r\n            //derived from http://stackoverflow.com/questions/11236090/\r\n            function getMatrixValues() {\r\n                var tr = self.doc.css(cap.trstyle);\r\n                if (tr && (tr.substr(0, 6) == \"matrix\")) {\r\n                    return tr.replace(/^.*\\((.*)\\)$/g, \"$1\").replace(/px/g, '').split(/, +/);\r\n                }\r\n                return false;\r\n            }\r\n\r\n            this.getScrollTop = function(last) {\r\n                if (!last) {\r\n                    var mtx = getMatrixValues();\r\n                    if (mtx) return (mtx.length == 16) ? -mtx[13] : -mtx[5]; //matrix3d 16 on IE10\r\n                    if (self.timerscroll && self.timerscroll.bz) return self.timerscroll.bz.getNow();\r\n                }\r\n                return self.doc.translate.y;\r\n            };\r\n\r\n            this.getScrollLeft = function(last) {\r\n                if (!last) {\r\n                    var mtx = getMatrixValues();\r\n                    if (mtx) return (mtx.length == 16) ? -mtx[12] : -mtx[4]; //matrix3d 16 on IE10\r\n                    if (self.timerscroll && self.timerscroll.bh) return self.timerscroll.bh.getNow();\r\n                }\r\n                return self.doc.translate.x;\r\n            };\r\n\r\n            if (document.createEvent) {\r\n                this.notifyScrollEvent = function(el) {\r\n                    var e = document.createEvent(\"UIEvents\");\r\n                    e.initUIEvent(\"scroll\", false, true, window, 1);\r\n                    el.dispatchEvent(e);\r\n                };\r\n            } else if (document.fireEvent) {\r\n                this.notifyScrollEvent = function(el) {\r\n                    var e = document.createEventObject();\r\n                    el.fireEvent(\"onscroll\");\r\n                    e.cancelBubble = true;\r\n                };\r\n            } else {\r\n                this.notifyScrollEvent = function(el, add) {}; //NOPE\r\n            }\r\n\r\n            var cxscrollleft = -1; //(this.isrtlmode) ? 1 : -1;\r\n\r\n            if (cap.hastranslate3d && self.opt.enabletranslate3d) {\r\n                this.setScrollTop = function(val, silent) {\r\n                    self.doc.translate.y = val;\r\n                    self.doc.translate.ty = (val * -1) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n                this.setScrollLeft = function(val, silent) {\r\n                    self.doc.translate.x = val;\r\n                    self.doc.translate.tx = (val * cxscrollleft) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n            } else {\r\n                this.setScrollTop = function(val, silent) {\r\n                    self.doc.translate.y = val;\r\n                    self.doc.translate.ty = (val * -1) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n                this.setScrollLeft = function(val, silent) {\r\n                    self.doc.translate.x = val;\r\n                    self.doc.translate.tx = (val * cxscrollleft) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n            }\r\n        } else {\r\n            // native scroll\r\n            this.getScrollTop = function() {\r\n                return self.docscroll.scrollTop();\r\n            };\r\n            this.setScrollTop = function(val) {\r\n                return self.docscroll.scrollTop(val);\r\n            };\r\n            this.getScrollLeft = function() {\r\n                return self.docscroll.scrollLeft();\r\n            };\r\n            this.setScrollLeft = function(val) {\r\n                return self.docscroll.scrollLeft(val);\r\n            };\r\n        }\r\n\r\n        this.getTarget = function(e) {\r\n            if (!e) return false;\r\n            if (e.target) return e.target;\r\n            if (e.srcElement) return e.srcElement;\r\n            return false;\r\n        };\r\n\r\n        this.hasParent = function(e, id) {\r\n            if (!e) return false;\r\n            var el = e.target || e.srcElement || e || false;\r\n            while (el && el.id != id) {\r\n                el = el.parentNode || false;\r\n            }\r\n            return (el !== false);\r\n        };\r\n\r\n        function getZIndex() {\r\n            var dom = self.win;\r\n            if (\"zIndex\" in dom) return dom.zIndex(); // use jQuery UI method when available\r\n            while (dom.length > 0) {\r\n                if (dom[0].nodeType == 9) return false;\r\n                var zi = dom.css('zIndex');\r\n                if (!isNaN(zi) && zi != 0) return parseInt(zi);\r\n                dom = dom.parent();\r\n            }\r\n            return false;\r\n        };\r\n\r\n        //inspired by http://forum.jquery.com/topic/width-includes-border-width-when-set-to-thin-medium-thick-in-ie\r\n        var _convertBorderWidth = {\r\n            \"thin\": 1,\r\n            \"medium\": 3,\r\n            \"thick\": 5\r\n        };\r\n\r\n        function getWidthToPixel(dom, prop, chkheight) {\r\n            var wd = dom.css(prop);\r\n            var px = parseFloat(wd);\r\n            if (isNaN(px)) {\r\n                px = _convertBorderWidth[wd] || 0;\r\n                var brd = (px == 3) ? ((chkheight) ? (self.win.outerHeight() - self.win.innerHeight()) : (self.win.outerWidth() - self.win.innerWidth())) : 1; //DON'T TRUST CSS\r\n                if (self.isie8 && px) px += 1;\r\n                return (brd) ? px : 0;\r\n            }\r\n            return px;\r\n        };\r\n\r\n        this.getOffset = function() {\r\n            if (self.isfixed) return {\r\n                top: parseFloat(self.win.css('top')),\r\n                left: parseFloat(self.win.css('left'))\r\n            };\r\n            if (!self.viewport) return self.win.offset();\r\n            var ww = self.win.offset();\r\n            var vp = self.viewport.offset();\r\n            return {\r\n                top: ww.top - vp.top + self.viewport.scrollTop(),\r\n                left: ww.left - vp.left + self.viewport.scrollLeft()\r\n            };\r\n        };\r\n\r\n        this.updateScrollBar = function(len) {\r\n            if (self.ishwscroll) {\r\n                self.rail.css({\r\n                    height: self.win.innerHeight()\r\n                });\r\n                if (self.railh) self.railh.css({\r\n                    width: self.win.innerWidth()\r\n                });\r\n            } else {\r\n                var wpos = self.getOffset();\r\n                var pos = {\r\n                    top: wpos.top,\r\n                    left: wpos.left\r\n                };\r\n                pos.top += getWidthToPixel(self.win, 'border-top-width', true);\r\n                var brd = (self.win.outerWidth() - self.win.innerWidth()) / 2;\r\n                pos.left += (self.rail.align) ? self.win.outerWidth() - getWidthToPixel(self.win, 'border-right-width') - self.rail.width : getWidthToPixel(self.win, 'border-left-width');\r\n\r\n                var off = self.opt.railoffset;\r\n                if (off) {\r\n                    if (off.top) pos.top += off.top;\r\n                    if (self.rail.align && off.left) pos.left += off.left;\r\n                }\r\n\r\n                if (!self.locked) self.rail.css({\r\n                    top: pos.top,\r\n                    left: pos.left,\r\n                    height: (len) ? len.h : self.win.innerHeight()\r\n                });\r\n\r\n                if (self.zoom) {\r\n                    self.zoom.css({\r\n                        top: pos.top + 1,\r\n                        left: (self.rail.align == 1) ? pos.left - 20 : pos.left + self.rail.width + 4\r\n                    });\r\n                }\r\n\r\n                if (self.railh && !self.locked) {\r\n                    var pos = {\r\n                        top: wpos.top,\r\n                        left: wpos.left\r\n                    };\r\n                    var y = (self.railh.align) ? pos.top + getWidthToPixel(self.win, 'border-top-width', true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win, 'border-top-width', true);\r\n                    var x = pos.left + getWidthToPixel(self.win, 'border-left-width');\r\n                    self.railh.css({\r\n                        top: y,\r\n                        left: x,\r\n                        width: self.railh.width\r\n                    });\r\n                }\r\n\r\n\r\n            }\r\n        };\r\n\r\n        this.doRailClick = function(e, dbl, hr) {\r\n\r\n            var fn, pg, cur, pos;\r\n\r\n            //      if (self.rail.drag&&self.rail.drag.pt!=1) return;\r\n            if (self.locked) return;\r\n            //      if (self.rail.drag) return;\r\n\r\n            //      self.cancelScroll();       \r\n\r\n            self.cancelEvent(e);\r\n\r\n            if (dbl) {\r\n                fn = (hr) ? self.doScrollLeft : self.doScrollTop;\r\n                cur = (hr) ? ((e.pageX - self.railh.offset().left - (self.cursorwidth / 2)) * self.scrollratio.x) : ((e.pageY - self.rail.offset().top - (self.cursorheight / 2)) * self.scrollratio.y);\r\n                fn(cur);\r\n            } else {\r\n                fn = (hr) ? self.doScrollLeftBy : self.doScrollBy;\r\n                cur = (hr) ? self.scroll.x : self.scroll.y;\r\n                pos = (hr) ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;\r\n                pg = (hr) ? self.view.w : self.view.h;\r\n                (cur >= pos) ? fn(pg) : fn(-pg);\r\n            }\r\n\r\n        };\r\n\r\n        self.hasanimationframe = (setAnimationFrame);\r\n        self.hascancelanimationframe = (clearAnimationFrame);\r\n\r\n        if (!self.hasanimationframe) {\r\n            setAnimationFrame = function(fn) {\r\n                return setTimeout(fn, 15 - Math.floor((+new Date) / 1000) % 16)\r\n            }; // 1000/60)};\r\n            clearAnimationFrame = clearInterval;\r\n        } else if (!self.hascancelanimationframe) clearAnimationFrame = function() {\r\n            self.cancelAnimationFrame = true\r\n        };\r\n\r\n        this.init = function() {\r\n\r\n            self.saved.css = [];\r\n\r\n            if (cap.isie7mobile) return true; // SORRY, DO NOT WORK!\r\n            if (cap.isoperamini) return true; // SORRY, DO NOT WORK!\r\n\r\n            if (cap.hasmstouch) self.css((self.ispage) ? $(\"html\") : self.win, {\r\n                '-ms-touch-action': 'none'\r\n            });\r\n\r\n            self.zindex = \"auto\";\r\n            if (!self.ispage && self.opt.zindex == \"auto\") {\r\n                self.zindex = getZIndex() || \"auto\";\r\n            } else {\r\n                self.zindex = self.opt.zindex;\r\n            }\r\n\r\n            if (!self.ispage && self.zindex != \"auto\") {\r\n                if (self.zindex > globalmaxzindex) globalmaxzindex = self.zindex;\r\n            }\r\n\r\n            if (self.isie && self.zindex == 0 && self.opt.zindex == \"auto\") { // fix IE auto == 0\r\n                self.zindex = \"auto\";\r\n            }\r\n\r\n            /*      \r\n      self.ispage = true;\r\n      self.haswrapper = true;\r\n//      self.win = $(window);\r\n      self.docscroll = $(\"body\");\r\n//      self.doc = $(\"body\");\r\n*/\r\n\r\n            if (!self.ispage || (!cap.cantouch && !cap.isieold && !cap.isie9mobile)) {\r\n\r\n                var cont = self.docscroll;\r\n                if (self.ispage) cont = (self.haswrapper) ? self.win : self.doc;\r\n\r\n                if (!cap.isie9mobile) self.css(cont, {\r\n                    'overflow-y': 'hidden'\r\n                });\r\n\r\n                if (self.ispage && cap.isie7) {\r\n                    if (self.doc[0].nodeName == 'BODY') self.css($(\"html\"), {\r\n                        'overflow-y': 'hidden'\r\n                    }); //IE7 double scrollbar issue\r\n                    else if (self.doc[0].nodeName == 'HTML') self.css($(\"body\"), {\r\n                        'overflow-y': 'hidden'\r\n                    }); //IE7 double scrollbar issue\r\n                }\r\n\r\n                if (cap.isios && !self.ispage && !self.haswrapper) self.css($(\"body\"), {\r\n                    \"-webkit-overflow-scrolling\": \"touch\"\r\n                }); //force hw acceleration\r\n\r\n                var cursor = $(document.createElement('div'));\r\n                cursor.css({\r\n                    position: \"relative\",\r\n                    top: 0,\r\n                    \"float\": \"right\",\r\n                    width: self.opt.cursorwidth,\r\n                    height: \"0px\",\r\n                    'background-color': self.opt.cursorcolor,\r\n                    border: self.opt.cursorborder,\r\n                    'background-clip': 'padding-box',\r\n                    '-webkit-border-radius': self.opt.cursorborderradius,\r\n                    '-moz-border-radius': self.opt.cursorborderradius,\r\n                    'border-radius': self.opt.cursorborderradius\r\n                });\r\n\r\n                cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());\r\n                self.cursor = cursor;\r\n\r\n                var rail = $(document.createElement('div'));\r\n                rail.attr('id', self.id);\r\n                rail.addClass('nicescroll-rails');\r\n\r\n                var v, a, kp = [\"left\", \"right\"]; //\"top\",\"bottom\"\r\n                for (var n in kp) {\r\n                    a = kp[n];\r\n                    v = self.opt.railpadding[a];\r\n                    (v) ? rail.css(\"padding-\" + a, v + \"px\") : self.opt.railpadding[a] = 0;\r\n                }\r\n\r\n                rail.append(cursor);\r\n\r\n                rail.width = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerWidth()) + self.opt.railpadding['left'] + self.opt.railpadding['right'];\r\n                rail.css({\r\n                    width: rail.width + \"px\",\r\n                    'zIndex': self.zindex,\r\n                    \"background\": self.opt.background,\r\n                    cursor: \"default\"\r\n                });\r\n\r\n                rail.visibility = true;\r\n                rail.scrollable = true;\r\n\r\n                rail.align = (self.opt.railalign == \"left\") ? 0 : 1;\r\n\r\n                self.rail = rail;\r\n\r\n                self.rail.drag = false;\r\n\r\n                var zoom = false;\r\n                if (self.opt.boxzoom && !self.ispage && !cap.isieold) {\r\n                    zoom = document.createElement('div');\r\n                    self.bind(zoom, \"click\", self.doZoom);\r\n                    self.zoom = $(zoom);\r\n                    self.zoom.css({\r\n                        \"cursor\": \"pointer\",\r\n                        'z-index': self.zindex,\r\n                        // 'backgroundImage': 'url(' + self.opt.scriptpath + 'zoomico.png)',\r\n                        'height': 18,\r\n                        'width': 18,\r\n                        'backgroundPosition': '0px 0px'\r\n                    });\r\n                    if (self.opt.dblclickzoom) self.bind(self.win, \"dblclick\", self.doZoom);\r\n                    if (cap.cantouch && self.opt.gesturezoom) {\r\n                        self.ongesturezoom = function(e) {\r\n                            if (e.scale > 1.5) self.doZoomIn(e);\r\n                            if (e.scale < 0.8) self.doZoomOut(e);\r\n                            return self.cancelEvent(e);\r\n                        };\r\n                        self.bind(self.win, \"gestureend\", self.ongesturezoom);\r\n                    }\r\n                }\r\n\r\n                // init HORIZ\r\n\r\n                self.railh = false;\r\n\r\n                if (self.opt.horizrailenabled) {\r\n\r\n                    self.css(cont, {\r\n                        'overflow-x': 'hidden'\r\n                    });\r\n\r\n                    var cursor = $(document.createElement('div'));\r\n                    cursor.css({\r\n                        position: \"relative\",\r\n                        top: 0,\r\n                        height: self.opt.cursorwidth,\r\n                        width: \"0px\",\r\n                        'background-color': self.opt.cursorcolor,\r\n                        border: self.opt.cursorborder,\r\n                        'background-clip': 'padding-box',\r\n                        '-webkit-border-radius': self.opt.cursorborderradius,\r\n                        '-moz-border-radius': self.opt.cursorborderradius,\r\n                        'border-radius': self.opt.cursorborderradius\r\n                    });\r\n\r\n                    cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());\r\n                    self.cursorh = cursor;\r\n\r\n                    var railh = $(document.createElement('div'));\r\n                    railh.attr('id', self.id + '-hr');\r\n                    railh.addClass('nicescroll-rails');\r\n                    railh.height = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerHeight());\r\n                    railh.css({\r\n                        height: railh.height + \"px\",\r\n                        'zIndex': self.zindex,\r\n                        \"background\": self.opt.background\r\n                    });\r\n\r\n                    railh.append(cursor);\r\n\r\n                    railh.visibility = true;\r\n                    railh.scrollable = true;\r\n\r\n                    railh.align = (self.opt.railvalign == \"top\") ? 0 : 1;\r\n\r\n                    self.railh = railh;\r\n\r\n                    self.railh.drag = false;\r\n\r\n                }\r\n\r\n                //        \r\n\r\n                if (self.ispage) {\r\n                    rail.css({\r\n                        position: \"fixed\",\r\n                        top: \"0px\",\r\n                        height: \"100%\"\r\n                    });\r\n                    (rail.align) ? rail.css({\r\n                        right: \"0px\"\r\n                    }) : rail.css({\r\n                        left: \"0px\"\r\n                    });\r\n                    self.body.append(rail);\r\n                    if (self.railh) {\r\n                        railh.css({\r\n                            position: \"fixed\",\r\n                            left: \"0px\",\r\n                            width: \"100%\"\r\n                        });\r\n                        (railh.align) ? railh.css({\r\n                            bottom: \"0px\"\r\n                        }) : railh.css({\r\n                            top: \"0px\"\r\n                        });\r\n                        self.body.append(railh);\r\n                    }\r\n                } else {\r\n                    if (self.ishwscroll) {\r\n                        if (self.win.css('position') == 'static') self.css(self.win, {\r\n                            'position': 'relative'\r\n                        });\r\n                        var bd = (self.win[0].nodeName == 'HTML') ? self.body : self.win;\r\n                        if (self.zoom) {\r\n                            self.zoom.css({\r\n                                position: \"absolute\",\r\n                                top: 1,\r\n                                right: 0,\r\n                                \"margin-right\": rail.width + 4\r\n                            });\r\n                            bd.append(self.zoom);\r\n                        }\r\n                        rail.css({\r\n                            position: \"absolute\",\r\n                            top: 0\r\n                        });\r\n                        (rail.align) ? rail.css({\r\n                            right: 0\r\n                        }) : rail.css({\r\n                            left: 0\r\n                        });\r\n                        bd.append(rail);\r\n                        if (railh) {\r\n                            railh.css({\r\n                                position: \"absolute\",\r\n                                left: 0,\r\n                                bottom: 0\r\n                            });\r\n                            (railh.align) ? railh.css({\r\n                                bottom: 0\r\n                            }) : railh.css({\r\n                                top: 0\r\n                            });\r\n                            bd.append(railh);\r\n                        }\r\n                    } else {\r\n                        self.isfixed = (self.win.css(\"position\") == \"fixed\");\r\n                        var rlpos = (self.isfixed) ? \"fixed\" : \"absolute\";\r\n\r\n                        if (!self.isfixed) self.viewport = self.getViewport(self.win[0]);\r\n                        if (self.viewport) {\r\n                            self.body = self.viewport;\r\n                            if ((/fixed|relative|absolute/.test(self.viewport.css(\"position\"))) == false) self.css(self.viewport, {\r\n                                \"position\": \"relative\"\r\n                            });\r\n                        }\r\n\r\n                        rail.css({\r\n                            position: rlpos\r\n                        });\r\n                        if (self.zoom) self.zoom.css({\r\n                            position: rlpos\r\n                        });\r\n                        self.updateScrollBar();\r\n                        self.body.append(rail);\r\n                        if (self.zoom) self.body.append(self.zoom);\r\n                        if (self.railh) {\r\n                            railh.css({\r\n                                position: rlpos\r\n                            });\r\n                            self.body.append(railh);\r\n                        }\r\n                    }\r\n\r\n                    if (cap.isios) self.css(self.win, {\r\n                        '-webkit-tap-highlight-color': 'rgba(0,0,0,0)',\r\n                        '-webkit-touch-callout': 'none'\r\n                    }); // prevent grey layer on click\r\n\r\n                    if (cap.isie && self.opt.disableoutline) self.win.attr(\"hideFocus\", \"true\"); // IE, prevent dotted rectangle on focused div\r\n                    if (cap.iswebkit && self.opt.disableoutline) self.win.css({\r\n                        \"outline\": \"none\"\r\n                    });\r\n                    //          if (cap.isopera&&self.opt.disableoutline) self.win.css({\"outline\":\"0\"});  // Opera to test [TODO]\r\n\r\n                }\r\n\r\n                if (self.opt.autohidemode === false) {\r\n                    self.autohidedom = false;\r\n                    self.rail.css({\r\n                        opacity: self.opt.cursoropacitymax\r\n                    });\r\n                    if (self.railh) self.railh.css({\r\n                        opacity: self.opt.cursoropacitymax\r\n                    });\r\n                } else if ((self.opt.autohidemode === true) || (self.opt.autohidemode === \"leave\")) {\r\n                    self.autohidedom = $().add(self.rail);\r\n                    if (cap.isie8) self.autohidedom = self.autohidedom.add(self.cursor);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\r\n                    if (self.railh && cap.isie8) self.autohidedom = self.autohidedom.add(self.cursorh);\r\n                } else if (self.opt.autohidemode == \"scroll\") {\r\n                    self.autohidedom = $().add(self.rail);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\r\n                } else if (self.opt.autohidemode == \"cursor\") {\r\n                    self.autohidedom = $().add(self.cursor);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.cursorh);\r\n                } else if (self.opt.autohidemode == \"hidden\") {\r\n                    self.autohidedom = false;\r\n                    self.hide();\r\n                    self.locked = false;\r\n                }\r\n\r\n                if (cap.isie9mobile) {\r\n\r\n                    self.scrollmom = new ScrollMomentumClass2D(self);\r\n\r\n                    /*\r\n          var trace = function(msg) {\r\n            var db = $(\"#debug\");\r\n            if (isNaN(msg)&&(typeof msg != \"string\")) {\r\n              var x = [];\r\n              for(var a in msg) {\r\n                x.push(a+\":\"+msg[a]);\r\n              }\r\n              msg =\"{\"+x.join(\",\")+\"}\";\r\n            }\r\n            if (db.children().length>0) {\r\n              db.children().eq(0).before(\"<div>\"+msg+\"</div>\");\r\n            } else {\r\n              db.append(\"<div>\"+msg+\"</div>\");\r\n            }\r\n          }\r\n          window.onerror = function(msg,url,ln) {\r\n            trace(\"ERR: \"+msg+\" at \"+ln);\r\n          }\r\n*/\r\n\r\n                    self.onmangotouch = function(e) {\r\n                        var py = self.getScrollTop();\r\n                        var px = self.getScrollLeft();\r\n\r\n                        if ((py == self.scrollmom.lastscrolly) && (px == self.scrollmom.lastscrollx)) return true;\r\n                        //            $(\"#debug\").html('DRAG:'+py);\r\n\r\n                        var dfy = py - self.mangotouch.sy;\r\n                        var dfx = px - self.mangotouch.sx;\r\n                        var df = Math.round(Math.sqrt(Math.pow(dfx, 2) + Math.pow(dfy, 2)));\r\n                        if (df == 0) return;\r\n\r\n                        var dry = (dfy < 0) ? -1 : 1;\r\n                        var drx = (dfx < 0) ? -1 : 1;\r\n\r\n                        var tm = +new Date();\r\n                        if (self.mangotouch.lazy) clearTimeout(self.mangotouch.lazy);\r\n\r\n                        if (((tm - self.mangotouch.tm) > 80) || (self.mangotouch.dry != dry) || (self.mangotouch.drx != drx)) {\r\n                            //              trace('RESET+'+(tm-self.mangotouch.tm));\r\n                            self.scrollmom.stop();\r\n                            self.scrollmom.reset(px, py);\r\n                            self.mangotouch.sy = py;\r\n                            self.mangotouch.ly = py;\r\n                            self.mangotouch.sx = px;\r\n                            self.mangotouch.lx = px;\r\n                            self.mangotouch.dry = dry;\r\n                            self.mangotouch.drx = drx;\r\n                            self.mangotouch.tm = tm;\r\n                        } else {\r\n\r\n                            self.scrollmom.stop();\r\n                            self.scrollmom.update(self.mangotouch.sx - dfx, self.mangotouch.sy - dfy);\r\n                            var gap = tm - self.mangotouch.tm;\r\n                            self.mangotouch.tm = tm;\r\n\r\n                            //              trace('MOVE:'+df+\" - \"+gap);\r\n\r\n                            var ds = Math.max(Math.abs(self.mangotouch.ly - py), Math.abs(self.mangotouch.lx - px));\r\n                            self.mangotouch.ly = py;\r\n                            self.mangotouch.lx = px;\r\n\r\n                            if (ds > 2) {\r\n                                self.mangotouch.lazy = setTimeout(function() {\r\n                                    //                  trace('END:'+ds+'+'+gap);                  \r\n                                    self.mangotouch.lazy = false;\r\n                                    self.mangotouch.dry = 0;\r\n                                    self.mangotouch.drx = 0;\r\n                                    self.mangotouch.tm = 0;\r\n                                    self.scrollmom.doMomentum(30);\r\n                                }, 100);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    var top = self.getScrollTop();\r\n                    var lef = self.getScrollLeft();\r\n                    self.mangotouch = {\r\n                        sy: top,\r\n                        ly: top,\r\n                        dry: 0,\r\n                        sx: lef,\r\n                        lx: lef,\r\n                        drx: 0,\r\n                        lazy: false,\r\n                        tm: 0\r\n                    };\r\n\r\n                    self.bind(self.docscroll, \"scroll\", self.onmangotouch);\r\n\r\n                } else {\r\n\r\n                    if (cap.cantouch || self.istouchcapable || self.opt.touchbehavior || cap.hasmstouch) {\r\n\r\n                        self.scrollmom = new ScrollMomentumClass2D(self);\r\n\r\n                        self.ontouchstart = function(e) {\r\n                            if (e.pointerType && e.pointerType != 2) return false;\r\n\r\n                            self.hasmoving = false;\r\n\r\n                            if (!self.locked) {\r\n\r\n                                if (cap.hasmstouch) {\r\n                                    var tg = (e.target) ? e.target : false;\r\n                                    while (tg) {\r\n                                        var nc = $(tg).getNiceScroll();\r\n                                        if ((nc.length > 0) && (nc[0].me == self.me)) break;\r\n                                        if (nc.length > 0) return false;\r\n                                        if ((tg.nodeName == 'DIV') && (tg.id == self.id)) break;\r\n                                        tg = (tg.parentNode) ? tg.parentNode : false;\r\n                                    }\r\n                                }\r\n\r\n                                self.cancelScroll();\r\n\r\n                                var tg = self.getTarget(e);\r\n\r\n                                if (tg) {\r\n                                    var skp = (/INPUT/i.test(tg.nodeName)) && (/range/i.test(tg.type));\r\n                                    if (skp) return self.stopPropagation(e);\r\n                                }\r\n\r\n                                if (!(\"clientX\" in e) && (\"changedTouches\" in e)) {\r\n                                    e.clientX = e.changedTouches[0].clientX;\r\n                                    e.clientY = e.changedTouches[0].clientY;\r\n                                }\r\n\r\n                                if (self.forcescreen) {\r\n                                    var le = e;\r\n                                    var e = {\r\n                                        \"original\": (e.original) ? e.original : e\r\n                                    };\r\n                                    e.clientX = le.screenX;\r\n                                    e.clientY = le.screenY;\r\n                                }\r\n\r\n                                self.rail.drag = {\r\n                                    x: e.clientX,\r\n                                    y: e.clientY,\r\n                                    sx: self.scroll.x,\r\n                                    sy: self.scroll.y,\r\n                                    st: self.getScrollTop(),\r\n                                    sl: self.getScrollLeft(),\r\n                                    pt: 2,\r\n                                    dl: false\r\n                                };\r\n\r\n                                if (self.ispage || !self.opt.directionlockdeadzone) {\r\n                                    self.rail.drag.dl = \"f\";\r\n                                } else {\r\n\r\n                                    var view = {\r\n                                        w: $(window).width(),\r\n                                        h: $(window).height()\r\n                                    };\r\n\r\n                                    var page = {\r\n                                        w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\r\n                                        h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\r\n                                    };\r\n\r\n                                    var maxh = Math.max(0, page.h - view.h);\r\n                                    var maxw = Math.max(0, page.w - view.w);\r\n\r\n                                    if (!self.rail.scrollable && self.railh.scrollable) self.rail.drag.ck = (maxh > 0) ? \"v\" : false;\r\n                                    else if (self.rail.scrollable && !self.railh.scrollable) self.rail.drag.ck = (maxw > 0) ? \"h\" : false;\r\n                                    else self.rail.drag.ck = false;\r\n                                    if (!self.rail.drag.ck) self.rail.drag.dl = \"f\";\r\n                                }\r\n\r\n                                if (self.opt.touchbehavior && self.isiframe && cap.isie) {\r\n                                    var wp = self.win.position();\r\n                                    self.rail.drag.x += wp.left;\r\n                                    self.rail.drag.y += wp.top;\r\n                                }\r\n\r\n                                self.hasmoving = false;\r\n                                self.lastmouseup = false;\r\n                                self.scrollmom.reset(e.clientX, e.clientY);\r\n                                if (!cap.cantouch && !this.istouchcapable && !cap.hasmstouch) {\r\n\r\n                                    var ip = (tg) ? /INPUT|SELECT|TEXTAREA/i.test(tg.nodeName) : false;\r\n                                    if (!ip) {\r\n                                        if (!self.ispage && cap.hasmousecapture) tg.setCapture();\r\n\r\n                                        if (self.opt.touchbehavior) {\r\n                                            if (tg.onclick && !(tg._onclick || false)) { // intercept DOM0 onclick event\r\n                                                tg._onclick = tg.onclick;\r\n                                                tg.onclick = function(e) {\r\n                                                    if (self.hasmoving) return false;\r\n                                                    tg._onclick.call(this, e);\r\n                                                }\r\n                                            }\r\n                                            return self.cancelEvent(e);\r\n                                        }\r\n\r\n                                        return self.stopPropagation(e);\r\n                                    }\r\n\r\n                                    if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))) {\r\n                                        pc = {\r\n                                            \"tg\": tg,\r\n                                            \"click\": false\r\n                                        };\r\n                                        self.preventclick = pc;\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n\r\n                        };\r\n\r\n                        self.ontouchend = function(e) {\r\n                            if (e.pointerType && e.pointerType != 2) return false;\r\n                            if (self.rail.drag && (self.rail.drag.pt == 2)) {\r\n                                self.scrollmom.doMomentum();\r\n                                self.rail.drag = false;\r\n                                if (self.hasmoving) {\r\n                                    self.lastmouseup = true;\r\n                                    self.hideCursor();\r\n                                    if (cap.hasmousecapture) document.releaseCapture();\r\n                                    if (!cap.cantouch) return self.cancelEvent(e);\r\n                                }\r\n                            }\r\n\r\n                        };\r\n\r\n                        var moveneedoffset = (self.opt.touchbehavior && self.isiframe && !cap.hasmousecapture);\r\n\r\n                        self.ontouchmove = function(e, byiframe) {\r\n\r\n                            if (e.pointerType && e.pointerType != 2) return false;\r\n\r\n                            if (self.rail.drag && (self.rail.drag.pt == 2)) {\r\n                                if (cap.cantouch && (typeof e.original == \"undefined\")) return true; // prevent ios \"ghost\" events by clickable elements\r\n\r\n                                self.hasmoving = true;\r\n\r\n                                if (self.preventclick && !self.preventclick.click) {\r\n                                    self.preventclick.click = self.preventclick.tg.onclick || false;\r\n                                    self.preventclick.tg.onclick = self.onpreventclick;\r\n                                }\r\n\r\n                                var ev = $.extend({\r\n                                    \"original\": e\r\n                                }, e);\r\n                                e = ev;\r\n\r\n                                if ((\"changedTouches\" in e)) {\r\n                                    e.clientX = e.changedTouches[0].clientX;\r\n                                    e.clientY = e.changedTouches[0].clientY;\r\n                                }\r\n\r\n                                if (self.forcescreen) {\r\n                                    var le = e;\r\n                                    var e = {\r\n                                        \"original\": (e.original) ? e.original : e\r\n                                    };\r\n                                    e.clientX = le.screenX;\r\n                                    e.clientY = le.screenY;\r\n                                }\r\n\r\n                                var ofx = ofy = 0;\r\n\r\n                                if (moveneedoffset && !byiframe) {\r\n                                    var wp = self.win.position();\r\n                                    ofx = -wp.left;\r\n                                    ofy = -wp.top;\r\n                                }\r\n\r\n                                var fy = e.clientY + ofy;\r\n                                var my = (fy - self.rail.drag.y);\r\n                                var fx = e.clientX + ofx;\r\n                                var mx = (fx - self.rail.drag.x);\r\n\r\n                                var ny = self.rail.drag.st - my;\r\n\r\n                                if (self.ishwscroll && self.opt.bouncescroll) {\r\n                                    if (ny < 0) {\r\n                                        ny = Math.round(ny / 2);\r\n                                        //                    fy = 0;\r\n                                    } else if (ny > self.page.maxh) {\r\n                                        ny = self.page.maxh + Math.round((ny - self.page.maxh) / 2);\r\n                                        //                    fy = 0;\r\n                                    }\r\n                                } else {\r\n                                    if (ny < 0) {\r\n                                        ny = 0;\r\n                                        fy = 0\r\n                                    }\r\n                                    if (ny > self.page.maxh) {\r\n                                        ny = self.page.maxh;\r\n                                        fy = 0\r\n                                    }\r\n                                }\r\n\r\n                                if (self.railh && self.railh.scrollable) {\r\n                                    var nx = self.rail.drag.sl - mx;; //(self.isrtlmode) ? mx-self.rail.drag.sl : self.rail.drag.sl-mx;\r\n\r\n                                    if (self.ishwscroll && self.opt.bouncescroll) {\r\n                                        if (nx < 0) {\r\n                                            nx = Math.round(nx / 2);\r\n                                            //                      fx = 0;\r\n                                        } else if (nx > self.page.maxw) {\r\n                                            nx = self.page.maxw + Math.round((nx - self.page.maxw) / 2);\r\n                                            //                      fx = 0;\r\n                                        }\r\n                                    } else {\r\n                                        if (nx < 0) {\r\n                                            nx = 0;\r\n                                            fx = 0\r\n                                        }\r\n                                        if (nx > self.page.maxw) {\r\n                                            nx = self.page.maxw;\r\n                                            fx = 0\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n\r\n                                var grabbed = false;\r\n                                if (self.rail.drag.dl) {\r\n                                    grabbed = true;\r\n                                    if (self.rail.drag.dl == \"v\") nx = self.rail.drag.sl;\r\n                                    else if (self.rail.drag.dl == \"h\") ny = self.rail.drag.st;\r\n                                } else {\r\n                                    var ay = Math.abs(my);\r\n                                    var ax = Math.abs(mx);\r\n                                    var dz = self.opt.directionlockdeadzone;\r\n                                    if (self.rail.drag.ck == \"v\") {\r\n                                        if (ay > dz && (ax <= (ay * 0.3))) {\r\n                                            self.rail.drag = false;\r\n                                            return true;\r\n                                        } else if (ax > dz) {\r\n                                            self.rail.drag.dl = \"f\";\r\n                                            $(\"body\").scrollTop($(\"body\").scrollTop()); // stop iOS native scrolling (when active javascript has blocked)\r\n                                        }\r\n                                    } else if (self.rail.drag.ck == \"h\") {\r\n                                        if (ax > dz && (ay <= (ax * 0.3))) {\r\n                                            self.rail.drag = false;\r\n                                            return true;\r\n                                        } else if (ay > dz) {\r\n                                            self.rail.drag.dl = \"f\";\r\n                                            $(\"body\").scrollLeft($(\"body\").scrollLeft()); // stop iOS native scrolling (when active javascript has blocked)\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                self.synched(\"touchmove\", function() {\r\n                                    if (self.rail.drag && (self.rail.drag.pt == 2)) {\r\n                                        if (self.prepareTransition) self.prepareTransition(0);\r\n                                        if (self.rail.scrollable) self.setScrollTop(ny);\r\n                                        self.scrollmom.update(fx, fy);\r\n                                        if (self.railh && self.railh.scrollable) {\r\n                                            self.setScrollLeft(nx);\r\n                                            self.showCursor(ny, nx);\r\n                                        } else {\r\n                                            self.showCursor(ny);\r\n                                        }\r\n                                        if (cap.isie10) document.selection.clear();\r\n                                    }\r\n                                });\r\n\r\n                                if (cap.ischrome && self.istouchcapable) grabbed = false; //chrome touch emulation doesn't like!\r\n                                if (grabbed) return self.cancelEvent(e);\r\n                            }\r\n\r\n                        };\r\n\r\n                    }\r\n\r\n                    self.onmousedown = function(e, hronly) {\r\n                        if (self.rail.drag && self.rail.drag.pt != 1) return;\r\n                        if (self.locked) return self.cancelEvent(e);\r\n                        self.cancelScroll();\r\n                        self.rail.drag = {\r\n                            x: e.clientX,\r\n                            y: e.clientY,\r\n                            sx: self.scroll.x,\r\n                            sy: self.scroll.y,\r\n                            pt: 1,\r\n                            hr: ( !! hronly)\r\n                        };\r\n                        var tg = self.getTarget(e);\r\n                        if (!self.ispage && cap.hasmousecapture) tg.setCapture();\r\n                        if (self.isiframe && !cap.hasmousecapture) {\r\n                            self.saved[\"csspointerevents\"] = self.doc.css(\"pointer-events\");\r\n                            self.css(self.doc, {\r\n                                \"pointer-events\": \"none\"\r\n                            });\r\n                        }\r\n                        self.hasmoving = false;\r\n                        return self.cancelEvent(e);\r\n                    };\r\n\r\n                    self.onmouseup = function(e) {\r\n                        if (self.rail.drag) {\r\n                            if (cap.hasmousecapture) document.releaseCapture();\r\n                            if (self.isiframe && !cap.hasmousecapture) self.doc.css(\"pointer-events\", self.saved[\"csspointerevents\"]);\r\n                            if (self.rail.drag.pt != 1) return;\r\n                            self.rail.drag = false;\r\n                            //if (!self.rail.active) self.hideCursor();\r\n                            if (self.hasmoving) self.triggerScrollEnd(); // TODO - check &&!self.scrollrunning\r\n                            return self.cancelEvent(e);\r\n                        }\r\n                    };\r\n\r\n                    self.onmousemove = function(e) {\r\n                        if (self.rail.drag) {\r\n                            if (self.rail.drag.pt != 1) return;\r\n\r\n                            if (cap.ischrome && e.which == 0) return self.onmouseup(e);\r\n\r\n                            self.cursorfreezed = true;\r\n                            self.hasmoving = true;\r\n\r\n                            if (self.rail.drag.hr) {\r\n                                self.scroll.x = self.rail.drag.sx + (e.clientX - self.rail.drag.x);\r\n                                if (self.scroll.x < 0) self.scroll.x = 0;\r\n                                var mw = self.scrollvaluemaxw;\r\n                                if (self.scroll.x > mw) self.scroll.x = mw;\r\n                            } else {\r\n                                self.scroll.y = self.rail.drag.sy + (e.clientY - self.rail.drag.y);\r\n                                if (self.scroll.y < 0) self.scroll.y = 0;\r\n                                var my = self.scrollvaluemax;\r\n                                if (self.scroll.y > my) self.scroll.y = my;\r\n                            }\r\n\r\n                            self.synched('mousemove', function() {\r\n                                if (self.rail.drag && (self.rail.drag.pt == 1)) {\r\n                                    self.showCursor();\r\n                                    if (self.rail.drag.hr) self.doScrollLeft(Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);\r\n                                    else self.doScrollTop(Math.round(self.scroll.y * self.scrollratio.y), self.opt.cursordragspeed);\r\n                                }\r\n                            });\r\n\r\n                            return self.cancelEvent(e);\r\n                        }\r\n                        /*              \r\n            else {\r\n              self.checkarea = true;\r\n            }\r\n*/\r\n                    };\r\n\r\n                    if (cap.cantouch || self.opt.touchbehavior) {\r\n\r\n                        self.onpreventclick = function(e) {\r\n                            if (self.preventclick) {\r\n                                self.preventclick.tg.onclick = self.preventclick.click;\r\n                                self.preventclick = false;\r\n                                return self.cancelEvent(e);\r\n                            }\r\n                        }\r\n\r\n                        //            self.onmousedown = self.ontouchstart;            \r\n                        //            self.onmouseup = self.ontouchend;\r\n                        //            self.onmousemove = self.ontouchmove;\r\n\r\n                        self.bind(self.win, \"mousedown\", self.ontouchstart); // control content dragging\r\n\r\n                        self.onclick = (cap.isios) ? false : function(e) {\r\n                            if (self.lastmouseup) {\r\n                                self.lastmouseup = false;\r\n                                return self.cancelEvent(e);\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n\r\n                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {\r\n                            self.css((self.ispage) ? self.doc : self.win, {\r\n                                'cursor': cap.cursorgrabvalue\r\n                            });\r\n                            self.css(self.rail, {\r\n                                'cursor': cap.cursorgrabvalue\r\n                            });\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        function checkSelectionScroll(e) {\r\n                            if (!self.selectiondrag) return;\r\n\r\n                            if (e) {\r\n                                var ww = self.win.outerHeight();\r\n                                var df = (e.pageY - self.selectiondrag.top);\r\n                                if (df > 0 && df < ww) df = 0;\r\n                                if (df >= ww) df -= ww;\r\n                                self.selectiondrag.df = df;\r\n                            }\r\n                            if (self.selectiondrag.df == 0) return;\r\n\r\n                            var rt = -Math.floor(self.selectiondrag.df / 6) * 2;\r\n                            //              self.doScrollTop(self.getScrollTop(true)+rt);\r\n                            self.doScrollBy(rt);\r\n\r\n                            self.debounced(\"doselectionscroll\", function() {\r\n                                checkSelectionScroll()\r\n                            }, 50);\r\n                        };\r\n\r\n                        if (\"getSelection\" in document) { // A grade - Major browsers\r\n                            self.hasTextSelected = function() {\r\n                                return (document.getSelection().rangeCount > 0);\r\n                            };\r\n                        } else if (\"selection\" in document) { //IE9-\r\n                            self.hasTextSelected = function() {\r\n                                return (document.selection.type != \"None\");\r\n                            };\r\n                        } else {\r\n                            self.hasTextSelected = function() { // no support\r\n                                return false;\r\n                            };\r\n                        }\r\n\r\n                        self.onselectionstart = function(e) {\r\n                            if (self.ispage) return;\r\n                            self.selectiondrag = self.win.offset();\r\n                        };\r\n                        self.onselectionend = function(e) {\r\n                            self.selectiondrag = false;\r\n                        };\r\n                        self.onselectiondrag = function(e) {\r\n                            if (!self.selectiondrag) return;\r\n                            if (self.hasTextSelected()) self.debounced(\"selectionscroll\", function() {\r\n                                checkSelectionScroll(e)\r\n                            }, 250);\r\n                        };\r\n\r\n\r\n                    }\r\n\r\n                    if (cap.hasmstouch) {\r\n                        self.css(self.rail, {\r\n                            '-ms-touch-action': 'none'\r\n                        });\r\n                        self.css(self.cursor, {\r\n                            '-ms-touch-action': 'none'\r\n                        });\r\n\r\n                        self.bind(self.win, \"MSPointerDown\", self.ontouchstart);\r\n                        self.bind(document, \"MSPointerUp\", self.ontouchend);\r\n                        self.bind(document, \"MSPointerMove\", self.ontouchmove);\r\n                        self.bind(self.cursor, \"MSGestureHold\", function(e) {\r\n                            e.preventDefault()\r\n                        });\r\n                        self.bind(self.cursor, \"contextmenu\", function(e) {\r\n                            e.preventDefault()\r\n                        });\r\n                    }\r\n\r\n                    if (this.istouchcapable) { //desktop with screen touch enabled\r\n                        self.bind(self.win, \"touchstart\", self.ontouchstart);\r\n                        self.bind(document, \"touchend\", self.ontouchend);\r\n                        self.bind(document, \"touchcancel\", self.ontouchend);\r\n                        self.bind(document, \"touchmove\", self.ontouchmove);\r\n                    }\r\n\r\n                    self.bind(self.cursor, \"mousedown\", self.onmousedown);\r\n                    self.bind(self.cursor, \"mouseup\", self.onmouseup);\r\n\r\n                    if (self.railh) {\r\n                        self.bind(self.cursorh, \"mousedown\", function(e) {\r\n                            self.onmousedown(e, true)\r\n                        });\r\n\r\n                        self.bind(self.cursorh, \"mouseup\", self.onmouseup);\r\n\r\n\r\n                        /*\t\t\t\t\t\t\r\n            self.bind(self.cursorh,\"mouseup\",function(e){\r\n              if (self.rail.drag&&self.rail.drag.pt==2) return;\r\n              self.rail.drag = false;\r\n              self.hasmoving = false;\r\n              self.hideCursor();\r\n              if (cap.hasmousecapture) document.releaseCapture();\r\n              return self.cancelEvent(e);\r\n            });\r\n*/\r\n\r\n                    }\r\n\r\n                    if (self.opt.cursordragontouch || !cap.cantouch && !self.opt.touchbehavior) {\r\n\r\n                        self.rail.css({\r\n                            \"cursor\": \"default\"\r\n                        });\r\n                        self.railh && self.railh.css({\r\n                            \"cursor\": \"default\"\r\n                        });\r\n\r\n                        self.jqbind(self.rail, \"mouseenter\", function() {\r\n                            if (!self.win.is(\":visible\")) return false;\r\n                            if (self.canshowonmouseevent) self.showCursor();\r\n                            self.rail.active = true;\r\n                        });\r\n                        self.jqbind(self.rail, \"mouseleave\", function() {\r\n                            self.rail.active = false;\r\n                            if (!self.rail.drag) self.hideCursor();\r\n                        });\r\n\r\n                        if (self.opt.sensitiverail) {\r\n                            self.bind(self.rail, \"click\", function(e) {\r\n                                self.doRailClick(e, false, false)\r\n                            });\r\n                            self.bind(self.rail, \"dblclick\", function(e) {\r\n                                self.doRailClick(e, true, false)\r\n                            });\r\n                            self.bind(self.cursor, \"click\", function(e) {\r\n                                self.cancelEvent(e)\r\n                            });\r\n                            self.bind(self.cursor, \"dblclick\", function(e) {\r\n                                self.cancelEvent(e)\r\n                            });\r\n                        }\r\n\r\n                        if (self.railh) {\r\n                            self.jqbind(self.railh, \"mouseenter\", function() {\r\n                                if (!self.win.is(\":visible\")) return false;\r\n                                if (self.canshowonmouseevent) self.showCursor();\r\n                                self.rail.active = true;\r\n                            });\r\n                            self.jqbind(self.railh, \"mouseleave\", function() {\r\n                                self.rail.active = false;\r\n                                if (!self.rail.drag) self.hideCursor();\r\n                            });\r\n\r\n                            if (self.opt.sensitiverail) {\r\n                                self.bind(self.railh, \"click\", function(e) {\r\n                                    self.doRailClick(e, false, true)\r\n                                });\r\n                                self.bind(self.railh, \"dblclick\", function(e) {\r\n                                    self.doRailClick(e, true, true)\r\n                                });\r\n                                self.bind(self.cursorh, \"click\", function(e) {\r\n                                    self.cancelEvent(e)\r\n                                });\r\n                                self.bind(self.cursorh, \"dblclick\", function(e) {\r\n                                    self.cancelEvent(e)\r\n                                });\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (!cap.cantouch && !self.opt.touchbehavior) {\r\n\r\n                        self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.onmouseup);\r\n                        self.bind(document, \"mousemove\", self.onmousemove);\r\n                        if (self.onclick) self.bind(document, \"click\", self.onclick);\r\n\r\n                        if (!self.ispage && self.opt.enablescrollonselection) {\r\n                            self.bind(self.win[0], \"mousedown\", self.onselectionstart);\r\n                            self.bind(document, \"mouseup\", self.onselectionend);\r\n                            self.bind(self.cursor, \"mouseup\", self.onselectionend);\r\n                            if (self.cursorh) self.bind(self.cursorh, \"mouseup\", self.onselectionend);\r\n                            self.bind(document, \"mousemove\", self.onselectiondrag);\r\n                        }\r\n\r\n                        if (self.zoom) {\r\n                            self.jqbind(self.zoom, \"mouseenter\", function() {\r\n                                if (self.canshowonmouseevent) self.showCursor();\r\n                                self.rail.active = true;\r\n                            });\r\n                            self.jqbind(self.zoom, \"mouseleave\", function() {\r\n                                self.rail.active = false;\r\n                                if (!self.rail.drag) self.hideCursor();\r\n                            });\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.ontouchend);\r\n                        self.bind(document, \"mousemove\", self.ontouchmove);\r\n                        if (self.onclick) self.bind(document, \"click\", self.onclick);\r\n\r\n                        if (self.opt.cursordragontouch) {\r\n                            self.bind(self.cursor, \"mousedown\", self.onmousedown);\r\n                            self.bind(self.cursor, \"mousemove\", self.onmousemove);\r\n                            self.cursorh && self.bind(self.cursorh, \"mousedown\", function(e) {\r\n                                self.onmousedown(e, true)\r\n                            });\r\n                            self.cursorh && self.bind(self.cursorh, \"mousemove\", self.onmousemove);\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (self.opt.enablemousewheel) {\r\n                        if (!self.isiframe) self.bind((cap.isie && self.ispage) ? document : self.win /*self.docscroll*/ , \"mousewheel\", self.onmousewheel);\r\n                        self.bind(self.rail, \"mousewheel\", self.onmousewheel);\r\n                        if (self.railh) self.bind(self.railh, \"mousewheel\", self.onmousewheelhr);\r\n                    }\r\n\r\n                    if (!self.ispage && !cap.cantouch && !(/HTML|^BODY/.test(self.win[0].nodeName))) {\r\n                        if (!self.win.attr(\"tabindex\")) self.win.attr({\r\n                            \"tabindex\": tabindexcounter++\r\n                        });\r\n\r\n                        self.jqbind(self.win, \"focus\", function(e) {\r\n                            domfocus = (self.getTarget(e)).id || true;\r\n                            self.hasfocus = true;\r\n                            if (self.canshowonmouseevent) self.noticeCursor();\r\n                        });\r\n                        self.jqbind(self.win, \"blur\", function(e) {\r\n                            domfocus = false;\r\n                            self.hasfocus = false;\r\n                        });\r\n\r\n                        self.jqbind(self.win, \"mouseenter\", function(e) {\r\n                            mousefocus = (self.getTarget(e)).id || true;\r\n                            self.hasmousefocus = true;\r\n                            if (self.canshowonmouseevent) self.noticeCursor();\r\n                        });\r\n                        self.jqbind(self.win, \"mouseleave\", function() {\r\n                            mousefocus = false;\r\n                            self.hasmousefocus = false;\r\n                            if (!self.rail.drag) self.hideCursor();\r\n                        });\r\n\r\n                    };\r\n\r\n                } // !ie9mobile\r\n\r\n                //Thanks to http://www.quirksmode.org !!\r\n                self.onkeypress = function(e) {\r\n                    if (self.locked && self.page.maxh == 0) return true;\r\n\r\n                    e = (e) ? e : window.e;\r\n                    var tg = self.getTarget(e);\r\n                    if (tg && /INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {\r\n                        var tp = tg.getAttribute('type') || tg.type || false;\r\n                        if ((!tp) || !(/submit|button|cancel/i.tp)) return true;\r\n                    }\r\n\r\n                    if ($(tg).attr('contenteditable')) return true;\r\n\r\n                    if (self.hasfocus || (self.hasmousefocus && !domfocus) || (self.ispage && !domfocus && !mousefocus)) {\r\n                        var key = e.keyCode;\r\n\r\n                        if (self.locked && key != 27) return self.cancelEvent(e);\r\n\r\n                        var ctrl = e.ctrlKey || false;\r\n                        var shift = e.shiftKey || false;\r\n\r\n                        var ret = false;\r\n                        switch (key) {\r\n                            case 38:\r\n                            case 63233: //safari\r\n                                self.doScrollBy(24 * 3);\r\n                                ret = true;\r\n                                break;\r\n                            case 40:\r\n                            case 63235: //safari\r\n                                self.doScrollBy(-24 * 3);\r\n                                ret = true;\r\n                                break;\r\n                            case 37:\r\n                            case 63232: //safari\r\n                                if (self.railh) {\r\n                                    (ctrl) ? self.doScrollLeft(0) : self.doScrollLeftBy(24 * 3);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 39:\r\n                            case 63234: //safari\r\n                                if (self.railh) {\r\n                                    (ctrl) ? self.doScrollLeft(self.page.maxw) : self.doScrollLeftBy(-24 * 3);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 33:\r\n                            case 63276: // safari\r\n                                self.doScrollBy(self.view.h);\r\n                                ret = true;\r\n                                break;\r\n                            case 34:\r\n                            case 63277: // safari\r\n                                self.doScrollBy(-self.view.h);\r\n                                ret = true;\r\n                                break;\r\n                            case 36:\r\n                            case 63273: // safari                \r\n                                (self.railh && ctrl) ? self.doScrollPos(0, 0) : self.doScrollTo(0);\r\n                                ret = true;\r\n                                break;\r\n                            case 35:\r\n                            case 63275: // safari\r\n                                (self.railh && ctrl) ? self.doScrollPos(self.page.maxw, self.page.maxh) : self.doScrollTo(self.page.maxh);\r\n                                ret = true;\r\n                                break;\r\n                            case 32:\r\n                                if (self.opt.spacebarenabled) {\r\n                                    (shift) ? self.doScrollBy(self.view.h) : self.doScrollBy(-self.view.h);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 27: // ESC\r\n                                if (self.zoomactive) {\r\n                                    self.doZoom();\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                        }\r\n                        if (ret) return self.cancelEvent(e);\r\n                    }\r\n                };\r\n\r\n                if (self.opt.enablekeyboard) self.bind(document, (cap.isopera && !cap.isopera12) ? \"keypress\" : \"keydown\", self.onkeypress);\r\n\r\n                self.bind(document, \"keydown\", function(e) {\r\n                    var ctrl = e.ctrlKey || false;\r\n                    if (ctrl) self.wheelprevented = true;\r\n                });\r\n                self.bind(document, \"keyup\", function(e) {\r\n                    var ctrl = e.ctrlKey || false;\r\n                    if (!ctrl) self.wheelprevented = false;\r\n                });\r\n\r\n                self.bind(window, 'resize', self.lazyResize);\r\n                self.bind(window, 'orientationchange', self.lazyResize);\r\n\r\n                self.bind(window, \"load\", self.lazyResize);\r\n\r\n                if (cap.ischrome && !self.ispage && !self.haswrapper) { //chrome void scrollbar bug - it persists in version 26\r\n                    var tmp = self.win.attr(\"style\");\r\n                    var ww = parseFloat(self.win.css(\"width\")) + 1;\r\n                    self.win.css('width', ww);\r\n                    self.synched(\"chromefix\", function() {\r\n                        self.win.attr(\"style\", tmp)\r\n                    });\r\n                }\r\n\r\n\r\n                // Trying a cross-browser implementation - good luck!\r\n\r\n                self.onAttributeChange = function(e) {\r\n                    self.lazyResize(250);\r\n                };\r\n\r\n                if (!self.ispage && !self.haswrapper) {\r\n                    // redesigned MutationObserver for Chrome18+/Firefox14+/iOS6+ with support for: remove div, add/remove content\r\n                    if (clsMutationObserver !== false) {\r\n                        self.observer = new clsMutationObserver(function(mutations) {\r\n                            mutations.forEach(self.onAttributeChange);\r\n                        });\r\n                        self.observer.observe(self.win[0], {\r\n                            childList: true,\r\n                            characterData: false,\r\n                            attributes: true,\r\n                            subtree: false\r\n                        });\r\n\r\n                        self.observerremover = new clsMutationObserver(function(mutations) {\r\n                            mutations.forEach(function(mo) {\r\n                                if (mo.removedNodes.length > 0) {\r\n                                    for (var dd in mo.removedNodes) {\r\n                                        if (mo.removedNodes[dd] == self.win[0]) return self.remove();\r\n                                    }\r\n                                }\r\n                            });\r\n                        });\r\n                        self.observerremover.observe(self.win[0].parentNode, {\r\n                            childList: true,\r\n                            characterData: false,\r\n                            attributes: false,\r\n                            subtree: false\r\n                        });\r\n\r\n                    } else {\r\n                        self.bind(self.win, (cap.isie && !cap.isie9) ? \"propertychange\" : \"DOMAttrModified\", self.onAttributeChange);\r\n                        if (cap.isie9) self.win[0].attachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\r\n                        self.bind(self.win, \"DOMNodeRemoved\", function(e) {\r\n                            if (e.target == self.win[0]) self.remove();\r\n                        });\r\n                    }\r\n                }\r\n\r\n                //\r\n\r\n                if (!self.ispage && self.opt.boxzoom) self.bind(window, \"resize\", self.resizeZoom);\r\n                if (self.istextarea) self.bind(self.win, \"mouseup\", self.lazyResize);\r\n\r\n                //        self.checkrtlmode = true;\r\n                self.lazyResize(30);\r\n\r\n            }\r\n\r\n            if (this.doc[0].nodeName == 'IFRAME') {\r\n                function oniframeload(e) {\r\n                    self.iframexd = false;\r\n                    try {\r\n                        var doc = 'contentDocument' in this ? this.contentDocument : this.contentWindow.document;\r\n                        var a = doc.domain;\r\n                    } catch (e) {\r\n                        self.iframexd = true;\r\n                        doc = false\r\n                    };\r\n\r\n                    if (self.iframexd) {\r\n                        if (\"console\" in window) console.log('NiceScroll error: policy restriced iframe');\r\n                        return true; //cross-domain - I can't manage this        \r\n                    }\r\n\r\n                    self.forcescreen = true;\r\n\r\n                    if (self.isiframe) {\r\n                        self.iframe = {\r\n                            \"doc\": $(doc),\r\n                            \"html\": self.doc.contents().find('html')[0],\r\n                            \"body\": self.doc.contents().find('body')[0]\r\n                        };\r\n                        self.getContentSize = function() {\r\n                            return {\r\n                                w: Math.max(self.iframe.html.scrollWidth, self.iframe.body.scrollWidth),\r\n                                h: Math.max(self.iframe.html.scrollHeight, self.iframe.body.scrollHeight)\r\n                            };\r\n                        };\r\n                        self.docscroll = $(self.iframe.body); //$(this.contentWindow);\r\n                    }\r\n\r\n                    if (!cap.isios && self.opt.iframeautoresize && !self.isiframe) {\r\n                        self.win.scrollTop(0); // reset position\r\n                        self.doc.height(\"\"); //reset height to fix browser bug\r\n                        var hh = Math.max(doc.getElementsByTagName('html')[0].scrollHeight, doc.body.scrollHeight);\r\n                        self.doc.height(hh);\r\n                    }\r\n                    self.lazyResize(30);\r\n\r\n                    if (cap.isie7) self.css($(self.iframe.html), {\r\n                        'overflow-y': 'hidden'\r\n                    });\r\n                    //self.css($(doc.body),{'overflow-y':'hidden'});\r\n                    self.css($(self.iframe.body), {\r\n                        'overflow-y': 'hidden'\r\n                    });\r\n\r\n                    if (cap.isios && self.haswrapper) {\r\n                        self.css($(doc.body), {\r\n                            '-webkit-transform': 'translate3d(0,0,0)'\r\n                        }); // avoid iFrame content clipping - thanks to http://blog.derraab.com/2012/04/02/avoid-iframe-content-clipping-with-css-transform-on-ios/\r\n                    }\r\n\r\n                    if ('contentWindow' in this) {\r\n                        self.bind(this.contentWindow, \"scroll\", self.onscroll); //IE8 & minor\r\n                    } else {\r\n                        self.bind(doc, \"scroll\", self.onscroll);\r\n                    }\r\n\r\n                    if (self.opt.enablemousewheel) {\r\n                        self.bind(doc, \"mousewheel\", self.onmousewheel);\r\n                    }\r\n\r\n                    if (self.opt.enablekeyboard) self.bind(doc, (cap.isopera) ? \"keypress\" : \"keydown\", self.onkeypress);\r\n\r\n                    if (cap.cantouch || self.opt.touchbehavior) {\r\n                        self.bind(doc, \"mousedown\", self.ontouchstart);\r\n                        self.bind(doc, \"mousemove\", function(e) {\r\n                            self.ontouchmove(e, true)\r\n                        });\r\n                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) self.css($(doc.body), {\r\n                            'cursor': cap.cursorgrabvalue\r\n                        });\r\n                    }\r\n\r\n                    self.bind(doc, \"mouseup\", self.ontouchend);\r\n\r\n                    if (self.zoom) {\r\n                        if (self.opt.dblclickzoom) self.bind(doc, 'dblclick', self.doZoom);\r\n                        if (self.ongesturezoom) self.bind(doc, \"gestureend\", self.ongesturezoom);\r\n                    }\r\n                };\r\n\r\n                if (this.doc[0].readyState && this.doc[0].readyState == \"complete\") {\r\n                    setTimeout(function() {\r\n                        oniframeload.call(self.doc[0], false)\r\n                    }, 500);\r\n                }\r\n                self.bind(this.doc, \"load\", oniframeload);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.showCursor = function(py, px) {\r\n            if (self.cursortimeout) {\r\n                clearTimeout(self.cursortimeout);\r\n                self.cursortimeout = 0;\r\n            }\r\n            if (!self.rail) return;\r\n            if (self.autohidedom) {\r\n                self.autohidedom.stop().css({\r\n                    opacity: self.opt.cursoropacitymax\r\n                });\r\n                self.cursoractive = true;\r\n            }\r\n\r\n            if (!self.rail.drag || self.rail.drag.pt != 1) {\r\n                if ((typeof py != \"undefined\") && (py !== false)) {\r\n                    self.scroll.y = Math.round(py * 1 / self.scrollratio.y);\r\n                }\r\n                if (typeof px != \"undefined\") {\r\n                    self.scroll.x = Math.round(px * 1 / self.scrollratio.x); //-cxscrollleft * Math.round(px * 1/self.scrollratio.x);\r\n                }\r\n            }\r\n\r\n            self.cursor.css({\r\n                height: self.cursorheight,\r\n                top: self.scroll.y\r\n            });\r\n            if (self.cursorh) {\r\n                (!self.rail.align && self.rail.visibility) ? self.cursorh.css({\r\n                    width: self.cursorwidth,\r\n                    left: self.scroll.x + self.rail.width\r\n                }) : self.cursorh.css({\r\n                    width: self.cursorwidth,\r\n                    left: self.scroll.x\r\n                });\r\n                self.cursoractive = true;\r\n            }\r\n\r\n            if (self.zoom) self.zoom.stop().css({\r\n                opacity: self.opt.cursoropacitymax\r\n            });\r\n        };\r\n\r\n        this.hideCursor = function(tm) {\r\n            if (self.cursortimeout) return;\r\n            if (!self.rail) return;\r\n            if (!self.autohidedom) return;\r\n            if (self.hasmousefocus && self.opt.autohidemode == \"leave\") return;\r\n            self.cursortimeout = setTimeout(function() {\r\n                if (!self.rail.active || !self.showonmouseevent) {\r\n                    self.autohidedom.stop().animate({\r\n                        opacity: self.opt.cursoropacitymin\r\n                    });\r\n                    if (self.zoom) self.zoom.stop().animate({\r\n                        opacity: self.opt.cursoropacitymin\r\n                    });\r\n                    self.cursoractive = false;\r\n                }\r\n                self.cursortimeout = 0;\r\n            }, tm || self.opt.hidecursordelay);\r\n        };\r\n\r\n        this.noticeCursor = function(tm, py, px) {\r\n            self.showCursor(py, px);\r\n            if (!self.rail.active) self.hideCursor(tm);\r\n        };\r\n\r\n        this.getContentSize =\r\n            (self.ispage) ?\r\n            function() {\r\n                return {\r\n                    w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\r\n                    h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\r\n                }\r\n        } : (self.haswrapper) ?\r\n            function() {\r\n                return {\r\n                    w: self.doc.outerWidth() + parseInt(self.win.css('paddingLeft')) + parseInt(self.win.css('paddingRight')),\r\n                    h: self.doc.outerHeight() + parseInt(self.win.css('paddingTop')) + parseInt(self.win.css('paddingBottom'))\r\n                }\r\n        } : function() {\r\n            return {\r\n                w: self.docscroll[0].scrollWidth,\r\n                h: self.docscroll[0].scrollHeight\r\n            }\r\n        };\r\n\r\n        this.onResize = function(e, page) {\r\n\r\n            if (!self || !self.win) return false;\r\n\r\n            if (!self.haswrapper && !self.ispage) {\r\n                if (self.win.css('display') == 'none') {\r\n                    if (self.visibility) self.hideRail().hideRailHr();\r\n                    return false;\r\n                } else {\r\n                    if (!self.hidden && !self.visibility) self.showRail().showRailHr();\r\n                }\r\n            }\r\n\r\n            var premaxh = self.page.maxh;\r\n            var premaxw = self.page.maxw;\r\n\r\n            var preview = {\r\n                h: self.view.h,\r\n                w: self.view.w\r\n            };\r\n\r\n            self.view = {\r\n                w: (self.ispage) ? self.win.width() : parseInt(self.win[0].clientWidth),\r\n                h: (self.ispage) ? self.win.height() : parseInt(self.win[0].clientHeight)\r\n            };\r\n\r\n            self.page = (page) ? page : self.getContentSize();\r\n\r\n            self.page.maxh = Math.max(0, self.page.h - self.view.h);\r\n            self.page.maxw = Math.max(0, self.page.w - self.view.w);\r\n\r\n            if ((self.page.maxh == premaxh) && (self.page.maxw == premaxw) && (self.view.w == preview.w)) {\r\n                // test position        \r\n                if (!self.ispage) {\r\n                    var pos = self.win.offset();\r\n                    if (self.lastposition) {\r\n                        var lst = self.lastposition;\r\n                        if ((lst.top == pos.top) && (lst.left == pos.left)) return self; //nothing to do            \r\n                    }\r\n                    self.lastposition = pos;\r\n                } else {\r\n                    return self; //nothing to do\r\n                }\r\n            }\r\n\r\n            if (self.page.maxh == 0) {\r\n                self.hideRail();\r\n                self.scrollvaluemax = 0;\r\n                self.scroll.y = 0;\r\n                self.scrollratio.y = 0;\r\n                self.cursorheight = 0;\r\n                self.setScrollTop(0);\r\n                self.rail.scrollable = false;\r\n            } else {\r\n                self.rail.scrollable = true;\r\n            }\r\n\r\n            if (self.page.maxw == 0) {\r\n                self.hideRailHr();\r\n                self.scrollvaluemaxw = 0;\r\n                self.scroll.x = 0;\r\n                self.scrollratio.x = 0;\r\n                self.cursorwidth = 0;\r\n                self.setScrollLeft(0);\r\n                self.railh.scrollable = false;\r\n            } else {\r\n                self.railh.scrollable = true;\r\n            }\r\n\r\n            self.locked = (self.page.maxh == 0) && (self.page.maxw == 0);\r\n            if (self.locked) {\r\n                if (!self.ispage) self.updateScrollBar(self.view);\r\n                return false;\r\n            }\r\n\r\n            if (!self.hidden && !self.visibility) {\r\n                self.showRail().showRailHr();\r\n            } else if (!self.hidden && !self.railh.visibility) self.showRailHr();\r\n\r\n            if (self.istextarea && self.win.css('resize') && self.win.css('resize') != 'none') self.view.h -= 20;\r\n\r\n            self.cursorheight = Math.min(self.view.h, Math.round(self.view.h * (self.view.h / self.page.h)));\r\n            self.cursorheight = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorheight);\r\n\r\n            self.cursorwidth = Math.min(self.view.w, Math.round(self.view.w * (self.view.w / self.page.w)));\r\n            self.cursorwidth = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorwidth);\r\n\r\n            self.scrollvaluemax = self.view.h - self.cursorheight - self.cursor.hborder;\r\n\r\n            if (self.railh) {\r\n                self.railh.width = (self.page.maxh > 0) ? (self.view.w - self.rail.width) : self.view.w;\r\n                self.scrollvaluemaxw = self.railh.width - self.cursorwidth - self.cursorh.wborder;\r\n            }\r\n\r\n            /*\t\t\t\r\n      if (self.checkrtlmode&&self.railh) {\r\n        self.checkrtlmode = false;\r\n        if (self.opt.rtlmode&&self.scroll.x==0) self.setScrollLeft(self.page.maxw);\r\n      }\r\n*/\r\n\r\n            if (!self.ispage) self.updateScrollBar(self.view);\r\n\r\n            self.scrollratio = {\r\n                x: (self.page.maxw / self.scrollvaluemaxw),\r\n                y: (self.page.maxh / self.scrollvaluemax)\r\n            };\r\n\r\n            var sy = self.getScrollTop();\r\n            if (sy > self.page.maxh) {\r\n                self.doScrollTop(self.page.maxh);\r\n            } else {\r\n                self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n                self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\r\n                if (self.cursoractive) self.noticeCursor();\r\n            }\r\n\r\n            if (self.scroll.y && (self.getScrollTop() == 0)) self.doScrollTo(Math.floor(self.scroll.y * self.scrollratio.y));\r\n\r\n            return self;\r\n        };\r\n\r\n        this.resize = self.onResize;\r\n\r\n        this.lazyResize = function(tm) { // event debounce\r\n            tm = (isNaN(tm)) ? 30 : tm;\r\n            self.delayed('resize', self.resize, tm);\r\n            return self;\r\n        };\r\n\r\n        // modified by MDN https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/wheel\r\n        function _modernWheelEvent(dom, name, fn, bubble) {\r\n            self._bind(dom, name, function(e) {\r\n                var e = (e) ? e : window.event;\r\n                var event = {\r\n                    original: e,\r\n                    target: e.target || e.srcElement,\r\n                    type: \"wheel\",\r\n                    deltaMode: e.type == \"MozMousePixelScroll\" ? 0 : 1,\r\n                    deltaX: 0,\r\n                    deltaZ: 0,\r\n                    preventDefault: function() {\r\n                        e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                        return false;\r\n                    },\r\n                    stopImmediatePropagation: function() {\r\n                        (e.stopImmediatePropagation) ? e.stopImmediatePropagation() : e.cancelBubble = true;\r\n                    }\r\n                };\r\n\r\n                if (name == \"mousewheel\") {\r\n                    event.deltaY = -1 / 40 * e.wheelDelta;\r\n                    e.wheelDeltaX && (event.deltaX = -1 / 40 * e.wheelDeltaX);\r\n                } else {\r\n                    event.deltaY = e.detail;\r\n                }\r\n\r\n                return fn.call(dom, event);\r\n            }, bubble);\r\n        };\r\n\r\n        this._bind = function(el, name, fn, bubble) { // primitive bind\r\n            self.events.push({\r\n                e: el,\r\n                n: name,\r\n                f: fn,\r\n                b: bubble,\r\n                q: false\r\n            });\r\n            if (el.addEventListener) {\r\n                el.addEventListener(name, fn, bubble || false);\r\n            } else if (el.attachEvent) {\r\n                el.attachEvent(\"on\" + name, fn);\r\n            } else {\r\n                el[\"on\" + name] = fn;\r\n            }\r\n        };\r\n\r\n        this.jqbind = function(dom, name, fn) { // use jquery bind for non-native events (mouseenter/mouseleave)\r\n            self.events.push({\r\n                e: dom,\r\n                n: name,\r\n                f: fn,\r\n                q: true\r\n            });\r\n            $(dom).bind(name, fn);\r\n        };\r\n\r\n        this.bind = function(dom, name, fn, bubble) { // touch-oriented & fixing jquery bind\r\n            var el = (\"jquery\" in dom) ? dom[0] : dom;\r\n\r\n            if (name == 'mousewheel') {\r\n                if (\"onwheel\" in self.win) {\r\n                    self._bind(el, \"wheel\", fn, bubble || false);\r\n                } else {\r\n                    var wname = (typeof document.onmousewheel != \"undefined\") ? \"mousewheel\" : \"DOMMouseScroll\"; // older IE/Firefox\r\n                    _modernWheelEvent(el, wname, fn, bubble || false);\r\n                    if (wname == \"DOMMouseScroll\") _modernWheelEvent(el, \"MozMousePixelScroll\", fn, bubble || false); // Firefox legacy\r\n                }\r\n            } else if (el.addEventListener) {\r\n                if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) { // touch device support\r\n                    var tt = (name == 'mousedown') ? 'touchstart' : (name == 'mouseup') ? 'touchend' : 'touchmove';\r\n                    self._bind(el, tt, function(e) {\r\n                        if (e.touches) {\r\n                            if (e.touches.length < 2) {\r\n                                var ev = (e.touches.length) ? e.touches[0] : e;\r\n                                ev.original = e;\r\n                                fn.call(this, ev);\r\n                            }\r\n                        } else if (e.changedTouches) {\r\n                            var ev = e.changedTouches[0];\r\n                            ev.original = e;\r\n                            fn.call(this, ev);\r\n                        } //blackberry\r\n                    }, bubble || false);\r\n                }\r\n                self._bind(el, name, fn, bubble || false);\r\n                if (cap.cantouch && name == \"mouseup\") self._bind(el, \"touchcancel\", fn, bubble || false);\r\n            } else {\r\n                self._bind(el, name, function(e) {\r\n                    e = e || window.event || false;\r\n                    if (e) {\r\n                        if (e.srcElement) e.target = e.srcElement;\r\n                    }\r\n                    if (!(\"pageY\" in e)) {\r\n                        e.pageX = e.clientX + document.documentElement.scrollLeft;\r\n                        e.pageY = e.clientY + document.documentElement.scrollTop;\r\n                    }\r\n                    return ((fn.call(el, e) === false) || bubble === false) ? self.cancelEvent(e) : true;\r\n                });\r\n            }\r\n        };\r\n\r\n        this._unbind = function(el, name, fn, bub) { // primitive unbind\r\n            if (el.removeEventListener) {\r\n                el.removeEventListener(name, fn, bub);\r\n            } else if (el.detachEvent) {\r\n                el.detachEvent('on' + name, fn);\r\n            } else {\r\n                el['on' + name] = false;\r\n            }\r\n        };\r\n\r\n        this.unbindAll = function() {\r\n            for (var a = 0; a < self.events.length; a++) {\r\n                var r = self.events[a];\r\n                (r.q) ? r.e.unbind(r.n, r.f) : self._unbind(r.e, r.n, r.f, r.b);\r\n            }\r\n        };\r\n\r\n        // Thanks to http://www.switchonthecode.com !!\r\n        this.cancelEvent = function(e) {\r\n            var e = (e.original) ? e.original : (e) ? e : window.event || false;\r\n            if (!e) return false;\r\n            if (e.preventDefault) e.preventDefault();\r\n            if (e.stopPropagation) e.stopPropagation();\r\n            if (e.preventManipulation) e.preventManipulation(); //IE10\r\n            e.cancelBubble = true;\r\n            e.cancel = true;\r\n            e.returnValue = false;\r\n            return false;\r\n        };\r\n\r\n        this.stopPropagation = function(e) {\r\n            var e = (e.original) ? e.original : (e) ? e : window.event || false;\r\n            if (!e) return false;\r\n            if (e.stopPropagation) return e.stopPropagation();\r\n            if (e.cancelBubble) e.cancelBubble = true;\r\n            return false;\r\n        };\r\n\r\n        this.showRail = function() {\r\n            if ((self.page.maxh != 0) && (self.ispage || self.win.css('display') != 'none')) {\r\n                self.visibility = true;\r\n                self.rail.visibility = true;\r\n                self.rail.css('display', 'block');\r\n            }\r\n            return self;\r\n        };\r\n\r\n        this.showRailHr = function() {\r\n            if (!self.railh) return self;\r\n            if ((self.page.maxw != 0) && (self.ispage || self.win.css('display') != 'none')) {\r\n                self.railh.visibility = true;\r\n                self.railh.css('display', 'block');\r\n            }\r\n            return self;\r\n        };\r\n\r\n        this.hideRail = function() {\r\n            self.visibility = false;\r\n            self.rail.visibility = false;\r\n            self.rail.css('display', 'none');\r\n            return self;\r\n        };\r\n\r\n        this.hideRailHr = function() {\r\n            if (!self.railh) return self;\r\n            self.railh.visibility = false;\r\n            self.railh.css('display', 'none');\r\n            return self;\r\n        };\r\n\r\n        this.show = function() {\r\n            self.hidden = false;\r\n            self.locked = false;\r\n            return self.showRail().showRailHr();\r\n        };\r\n\r\n        this.hide = function() {\r\n            self.hidden = true;\r\n            self.locked = true;\r\n            return self.hideRail().hideRailHr();\r\n        };\r\n\r\n        this.toggle = function() {\r\n            return (self.hidden) ? self.show() : self.hide();\r\n        };\r\n\r\n        this.remove = function() {\r\n            self.stop();\r\n            if (self.cursortimeout) clearTimeout(self.cursortimeout);\r\n            self.doZoomOut();\r\n            self.unbindAll();\r\n\r\n            if (cap.isie9) self.win[0].detachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\r\n\r\n            if (self.observer !== false) self.observer.disconnect();\r\n            if (self.observerremover !== false) self.observerremover.disconnect();\r\n\r\n            self.events = null;\r\n\r\n            if (self.cursor) {\r\n                self.cursor.remove();\r\n            }\r\n            if (self.cursorh) {\r\n                self.cursorh.remove();\r\n            }\r\n            if (self.rail) {\r\n                self.rail.remove();\r\n            }\r\n            if (self.railh) {\r\n                self.railh.remove();\r\n            }\r\n            if (self.zoom) {\r\n                self.zoom.remove();\r\n            }\r\n            for (var a = 0; a < self.saved.css.length; a++) {\r\n                var d = self.saved.css[a];\r\n                d[0].css(d[1], (typeof d[2] == \"undefined\") ? '' : d[2]);\r\n            }\r\n            self.saved = false;\r\n            self.me.data('__nicescroll', ''); //erase all traces\r\n\r\n            // memory leak fixed by GianlucaGuarini - thanks a lot!\r\n            // remove the current nicescroll from the $.nicescroll array & normalize array\r\n            var lst = $.nicescroll;\r\n            lst.each(function(i) {\r\n                if (!this) return;\r\n                if (this.id === self.id) {\r\n                    delete lst[i];\r\n                    for (var b = ++i; b < lst.length; b++, i++) lst[i] = lst[b];\r\n                    lst.length--;\r\n                    if (lst.length) delete lst[lst.length];\r\n                }\r\n            });\r\n\r\n            for (var i in self) {\r\n                self[i] = null;\r\n                delete self[i];\r\n            }\r\n\r\n            self = null;\r\n\r\n        };\r\n\r\n        this.scrollstart = function(fn) {\r\n            this.onscrollstart = fn;\r\n            return self;\r\n        };\r\n        this.scrollend = function(fn) {\r\n            this.onscrollend = fn;\r\n            return self;\r\n        };\r\n        this.scrollcancel = function(fn) {\r\n            this.onscrollcancel = fn;\r\n            return self;\r\n        };\r\n\r\n        this.zoomin = function(fn) {\r\n            this.onzoomin = fn;\r\n            return self;\r\n        };\r\n        this.zoomout = function(fn) {\r\n            this.onzoomout = fn;\r\n            return self;\r\n        };\r\n\r\n        this.isScrollable = function(e) {\r\n            var dom = (e.target) ? e.target : e;\r\n            if (dom.nodeName == 'OPTION') return true;\r\n            while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\r\n                var dd = $(dom);\r\n                var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\r\n                if (/scroll|auto/.test(ov)) return (dom.clientHeight != dom.scrollHeight);\r\n                dom = (dom.parentNode) ? dom.parentNode : false;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        this.getViewport = function(me) {\r\n            var dom = (me && me.parentNode) ? me.parentNode : false;\r\n            while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\r\n                var dd = $(dom);\r\n                if (/fixed|absolute/.test(dd.css(\"position\"))) return dd;\r\n                var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\r\n                if ((/scroll|auto/.test(ov)) && (dom.clientHeight != dom.scrollHeight)) return dd;\r\n                if (dd.getNiceScroll().length > 0) return dd;\r\n                dom = (dom.parentNode) ? dom.parentNode : false;\r\n            }\r\n            return (dom) ? $(dom) : false;\r\n        };\r\n\r\n        this.triggerScrollEnd = function() {\r\n            if (!self.onscrollend) return;\r\n\r\n            var px = self.getScrollLeft();\r\n            var py = self.getScrollTop();\r\n\r\n            var info = {\r\n                \"type\": \"scrollend\",\r\n                \"current\": {\r\n                    \"x\": px,\r\n                    \"y\": py\r\n                },\r\n                \"end\": {\r\n                    \"x\": px,\r\n                    \"y\": py\r\n                }\r\n            };\r\n            self.onscrollend.call(self, info);\r\n        }\r\n\r\n        function execScrollWheel(e, hr, chkscroll) {\r\n            var px, py;\r\n            var rt = 1;\r\n\r\n            if (e.deltaMode == 0) { // PIXEL\r\n                px = -Math.floor(e.deltaX * (self.opt.mousescrollstep / (18 * 3)));\r\n                py = -Math.floor(e.deltaY * (self.opt.mousescrollstep / (18 * 3)));\r\n            } else if (e.deltaMode == 1) { // LINE\r\n                px = -Math.floor(e.deltaX * self.opt.mousescrollstep);\r\n                py = -Math.floor(e.deltaY * self.opt.mousescrollstep);\r\n            }\r\n\r\n            if (hr && self.opt.oneaxismousemode && (px == 0) && py) { // classic vertical-only mousewheel + browser with x/y support \r\n                px = py;\r\n                py = 0;\r\n            }\r\n\r\n            if (px) {\r\n                if (self.scrollmom) {\r\n                    self.scrollmom.stop()\r\n                }\r\n                self.lastdeltax += px;\r\n                self.debounced(\"mousewheelx\", function() {\r\n                    var dt = self.lastdeltax;\r\n                    self.lastdeltax = 0;\r\n                    if (!self.rail.drag) {\r\n                        self.doScrollLeftBy(dt)\r\n                    }\r\n                }, 15);\r\n            }\r\n            if (py) {\r\n                if (self.opt.nativeparentscrolling && chkscroll && !self.ispage && !self.zoomactive) {\r\n                    if (py < 0) {\r\n                        if (self.getScrollTop() >= self.page.maxh) return true;\r\n                    } else {\r\n                        if (self.getScrollTop() <= 0) return true;\r\n                    }\r\n                }\r\n                if (self.scrollmom) {\r\n                    self.scrollmom.stop()\r\n                }\r\n                self.lastdeltay += py;\r\n                self.debounced(\"mousewheely\", function() {\r\n                    var dt = self.lastdeltay;\r\n                    self.lastdeltay = 0;\r\n                    if (!self.rail.drag) {\r\n                        self.doScrollBy(dt)\r\n                    }\r\n                }, 15);\r\n            }\r\n\r\n            e.stopImmediatePropagation();\r\n            return e.preventDefault();\r\n            //      return self.cancelEvent(e);\r\n        };\r\n\r\n        this.onmousewheel = function(e) {\r\n            if (self.wheelprevented) return;\r\n            if (self.locked) {\r\n                self.debounced(\"checkunlock\", self.resize, 250);\r\n                return true;\r\n            }\r\n            if (self.rail.drag) return self.cancelEvent(e);\r\n\r\n            if (self.opt.oneaxismousemode == \"auto\" && e.deltaX != 0) self.opt.oneaxismousemode = false; // check two-axis mouse support (not very elegant)\r\n\r\n            if (self.opt.oneaxismousemode && e.deltaX == 0) {\r\n                if (!self.rail.scrollable) {\r\n                    if (self.railh && self.railh.scrollable) {\r\n                        return self.onmousewheelhr(e);\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            var nw = +(new Date());\r\n            var chk = false;\r\n            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\r\n                //        self.checkarea = false;\r\n                self.nativescrollingarea = self.isScrollable(e);\r\n                chk = true;\r\n            }\r\n            self.checkarea = nw;\r\n            if (self.nativescrollingarea) return true; // this isn't my business\r\n            //      if (self.locked) return self.cancelEvent(e);\r\n            var ret = execScrollWheel(e, false, chk);\r\n            if (ret) self.checkarea = 0;\r\n            return ret;\r\n        };\r\n\r\n        this.onmousewheelhr = function(e) {\r\n            if (self.wheelprevented) return;\r\n            if (self.locked || !self.railh.scrollable) return true;\r\n            if (self.rail.drag) return self.cancelEvent(e);\r\n\r\n            var nw = +(new Date());\r\n            var chk = false;\r\n            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\r\n                //        self.checkarea = false;\r\n                self.nativescrollingarea = self.isScrollable(e);\r\n                chk = true;\r\n            }\r\n            self.checkarea = nw;\r\n            if (self.nativescrollingarea) return true; // this isn't my business\r\n            if (self.locked) return self.cancelEvent(e);\r\n\r\n            return execScrollWheel(e, true, chk);\r\n        };\r\n\r\n        this.stop = function() {\r\n            self.cancelScroll();\r\n            if (self.scrollmon) self.scrollmon.stop();\r\n            self.cursorfreezed = false;\r\n            self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n            self.noticeCursor();\r\n            return self;\r\n        };\r\n\r\n        this.getTransitionSpeed = function(dif) {\r\n            var sp = Math.round(self.opt.scrollspeed * 10);\r\n            var ex = Math.min(sp, Math.round((dif / 20) * self.opt.scrollspeed));\r\n            return (ex > 20) ? ex : 0;\r\n        };\r\n\r\n        if (!self.opt.smoothscroll) {\r\n            this.doScrollLeft = function(x, spd) { //direct\r\n                var y = self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n            this.doScrollTop = function(y, spd) { //direct\r\n                var x = self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n            this.doScrollPos = function(x, y, spd) { //direct\r\n                var nx = (x > self.page.maxw) ? self.page.maxw : x;\r\n                if (nx < 0) nx = 0;\r\n                var ny = (y > self.page.maxh) ? self.page.maxh : y;\r\n                if (ny < 0) ny = 0;\r\n                self.synched('scroll', function() {\r\n                    self.setScrollTop(ny);\r\n                    self.setScrollLeft(nx);\r\n                });\r\n            };\r\n            this.cancelScroll = function() {}; // direct\r\n        } else if (self.ishwscroll && cap.hastransition && self.opt.usetransition) {\r\n            this.prepareTransition = function(dif, istime) {\r\n                var ex = (istime) ? ((dif > 20) ? dif : 0) : self.getTransitionSpeed(dif);\r\n                var trans = (ex) ? cap.prefixstyle + 'transform ' + ex + 'ms ease-out' : '';\r\n                if (!self.lasttransitionstyle || self.lasttransitionstyle != trans) {\r\n                    self.lasttransitionstyle = trans;\r\n                    self.doc.css(cap.transitionstyle, trans);\r\n                }\r\n                return ex;\r\n            };\r\n\r\n            this.doScrollLeft = function(x, spd) { //trans\r\n                var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollTop = function(y, spd) { //trans\r\n                var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollPos = function(x, y, spd) { //trans\r\n\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n\r\n                if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection      \r\n\r\n                if (self.opt.bouncescroll == false) {\r\n                    if (y < 0) y = 0;\r\n                    else if (y > self.page.maxh) y = self.page.maxh;\r\n                    if (x < 0) x = 0;\r\n                    else if (x > self.page.maxw) x = self.page.maxw;\r\n                }\r\n\r\n                if (self.scrollrunning && x == self.newscrollx && y == self.newscrolly) return false;\r\n\r\n                self.newscrolly = y;\r\n                self.newscrollx = x;\r\n\r\n                self.newscrollspeed = spd || false;\r\n\r\n                if (self.timer) return false;\r\n\r\n                self.timer = setTimeout(function() {\r\n\r\n                    var top = self.getScrollTop();\r\n                    var lft = self.getScrollLeft();\r\n\r\n                    var dst = {};\r\n                    dst.x = x - lft;\r\n                    dst.y = y - top;\r\n                    dst.px = lft;\r\n                    dst.py = top;\r\n\r\n                    var dd = Math.round(Math.sqrt(Math.pow(dst.x, 2) + Math.pow(dst.y, 2)));\r\n\r\n                    //          var df = (self.newscrollspeed) ? self.newscrollspeed : dd;\r\n\r\n                    var ms = (self.newscrollspeed && self.newscrollspeed > 1) ? self.newscrollspeed : self.getTransitionSpeed(dd);\r\n                    if (self.newscrollspeed && self.newscrollspeed <= 1) ms *= self.newscrollspeed;\r\n\r\n                    self.prepareTransition(ms, true);\r\n\r\n                    if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n\r\n                    if (ms > 0) {\r\n\r\n                        if (!self.scrollrunning && self.onscrollstart) {\r\n                            var info = {\r\n                                \"type\": \"scrollstart\",\r\n                                \"current\": {\r\n                                    \"x\": lft,\r\n                                    \"y\": top\r\n                                },\r\n                                \"request\": {\r\n                                    \"x\": x,\r\n                                    \"y\": y\r\n                                },\r\n                                \"end\": {\r\n                                    \"x\": self.newscrollx,\r\n                                    \"y\": self.newscrolly\r\n                                },\r\n                                \"speed\": ms\r\n                            };\r\n                            self.onscrollstart.call(self, info);\r\n                        }\r\n\r\n                        if (cap.transitionend) {\r\n                            if (!self.scrollendtrapped) {\r\n                                self.scrollendtrapped = true;\r\n                                self.bind(self.doc, cap.transitionend, self.onScrollTransitionEnd, false); //I have got to do something usefull!!\r\n                            }\r\n                        } else {\r\n                            if (self.scrollendtrapped) clearTimeout(self.scrollendtrapped);\r\n                            self.scrollendtrapped = setTimeout(self.onScrollTransitionEnd, ms); // simulate transitionend event\r\n                        }\r\n\r\n                        var py = top;\r\n                        var px = lft;\r\n                        self.timerscroll = {\r\n                            bz: new BezierClass(py, self.newscrolly, ms, 0, 0, 0.58, 1),\r\n                            bh: new BezierClass(px, self.newscrollx, ms, 0, 0, 0.58, 1)\r\n                        };\r\n                        if (!self.cursorfreezed) self.timerscroll.tm = setInterval(function() {\r\n                            self.showCursor(self.getScrollTop(), self.getScrollLeft())\r\n                        }, 60);\r\n\r\n                    }\r\n\r\n                    self.synched(\"doScroll-set\", function() {\r\n                        self.timer = 0;\r\n                        if (self.scrollendtrapped) self.scrollrunning = true;\r\n                        self.setScrollTop(self.newscrolly);\r\n                        self.setScrollLeft(self.newscrollx);\r\n                        if (!self.scrollendtrapped) self.onScrollTransitionEnd();\r\n                    });\r\n\r\n\r\n                }, 50);\r\n\r\n            };\r\n\r\n            this.cancelScroll = function() {\r\n                if (!self.scrollendtrapped) return true;\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n                self.scrollrunning = false;\r\n                if (!cap.transitionend) clearTimeout(cap.transitionend);\r\n                self.scrollendtrapped = false;\r\n                self._unbind(self.doc, cap.transitionend, self.onScrollTransitionEnd);\r\n                self.prepareTransition(0);\r\n                self.setScrollTop(py); // fire event onscroll\r\n                if (self.railh) self.setScrollLeft(px);\r\n                if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n                self.timerscroll = false;\r\n\r\n                self.cursorfreezed = false;\r\n\r\n                //self.noticeCursor(false,py,px);\r\n                self.showCursor(py, px);\r\n                return self;\r\n            };\r\n            this.onScrollTransitionEnd = function() {\r\n                if (self.scrollendtrapped) self._unbind(self.doc, cap.transitionend, self.onScrollTransitionEnd);\r\n                self.scrollendtrapped = false;\r\n                self.prepareTransition(0);\r\n                if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n                self.timerscroll = false;\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n                self.setScrollTop(py); // fire event onscroll        \r\n                if (self.railh) self.setScrollLeft(px); // fire event onscroll left\r\n\r\n                self.noticeCursor(false, py, px);\r\n\r\n                self.cursorfreezed = false;\r\n\r\n                if (py < 0) py = 0\r\n                else if (py > self.page.maxh) py = self.page.maxh;\r\n                if (px < 0) px = 0\r\n                else if (px > self.page.maxw) px = self.page.maxw;\r\n                if ((py != self.newscrolly) || (px != self.newscrollx)) return self.doScrollPos(px, py, self.opt.snapbackspeed);\r\n\r\n                if (self.onscrollend && self.scrollrunning) {\r\n                    //          var info = {\"type\":\"scrollend\",\"current\":{\"x\":px,\"y\":py},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly}};\r\n                    //          self.onscrollend.call(self,info);\r\n                    self.triggerScrollEnd();\r\n                }\r\n                self.scrollrunning = false;\r\n\r\n            };\r\n\r\n        } else {\r\n\r\n            this.doScrollLeft = function(x, spd) { //no-trans\r\n                var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollTop = function(y, spd) { //no-trans\r\n                var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollPos = function(x, y, spd) { //no-trans\r\n                var y = ((typeof y == \"undefined\") || (y === false)) ? self.getScrollTop(true) : y;\r\n\r\n                if ((self.timer) && (self.newscrolly == y) && (self.newscrollx == x)) return true;\r\n\r\n                if (self.timer) clearAnimationFrame(self.timer);\r\n                self.timer = 0;\r\n\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n\r\n                if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection\r\n\r\n                self.newscrolly = y;\r\n                self.newscrollx = x;\r\n\r\n                if (!self.bouncescroll || !self.rail.visibility) {\r\n                    if (self.newscrolly < 0) {\r\n                        self.newscrolly = 0;\r\n                    } else if (self.newscrolly > self.page.maxh) {\r\n                        self.newscrolly = self.page.maxh;\r\n                    }\r\n                }\r\n                if (!self.bouncescroll || !self.railh.visibility) {\r\n                    if (self.newscrollx < 0) {\r\n                        self.newscrollx = 0;\r\n                    } else if (self.newscrollx > self.page.maxw) {\r\n                        self.newscrollx = self.page.maxw;\r\n                    }\r\n                }\r\n\r\n                self.dst = {};\r\n                self.dst.x = x - px;\r\n                self.dst.y = y - py;\r\n                self.dst.px = px;\r\n                self.dst.py = py;\r\n\r\n                var dst = Math.round(Math.sqrt(Math.pow(self.dst.x, 2) + Math.pow(self.dst.y, 2)));\r\n\r\n                self.dst.ax = self.dst.x / dst;\r\n                self.dst.ay = self.dst.y / dst;\r\n\r\n                var pa = 0;\r\n                var pe = dst;\r\n\r\n                if (self.dst.x == 0) {\r\n                    pa = py;\r\n                    pe = y;\r\n                    self.dst.ay = 1;\r\n                    self.dst.py = 0;\r\n                } else if (self.dst.y == 0) {\r\n                    pa = px;\r\n                    pe = x;\r\n                    self.dst.ax = 1;\r\n                    self.dst.px = 0;\r\n                }\r\n\r\n                var ms = self.getTransitionSpeed(dst);\r\n                if (spd && spd <= 1) ms *= spd;\r\n                if (ms > 0) {\r\n                    self.bzscroll = (self.bzscroll) ? self.bzscroll.update(pe, ms) : new BezierClass(pa, pe, ms, 0, 1, 0, 1);\r\n                } else {\r\n                    self.bzscroll = false;\r\n                }\r\n\r\n                if (self.timer) return;\r\n\r\n                if ((py == self.page.maxh && y >= self.page.maxh) || (px == self.page.maxw && x >= self.page.maxw)) self.checkContentSize();\r\n\r\n                var sync = 1;\r\n\r\n                function scrolling() {\r\n                    if (self.cancelAnimationFrame) return true;\r\n\r\n                    self.scrollrunning = true;\r\n\r\n                    sync = 1 - sync;\r\n                    if (sync) return (self.timer = setAnimationFrame(scrolling) || 1);\r\n\r\n                    var done = 0;\r\n\r\n                    var sc = sy = self.getScrollTop();\r\n                    if (self.dst.ay) {\r\n                        sc = (self.bzscroll) ? self.dst.py + (self.bzscroll.getNow() * self.dst.ay) : self.newscrolly;\r\n                        var dr = sc - sy;\r\n                        if ((dr < 0 && sc < self.newscrolly) || (dr > 0 && sc > self.newscrolly)) sc = self.newscrolly;\r\n                        self.setScrollTop(sc);\r\n                        if (sc == self.newscrolly) done = 1;\r\n                    } else {\r\n                        done = 1;\r\n                    }\r\n\r\n                    var scx = sx = self.getScrollLeft();\r\n                    if (self.dst.ax) {\r\n                        scx = (self.bzscroll) ? self.dst.px + (self.bzscroll.getNow() * self.dst.ax) : self.newscrollx;\r\n                        var dr = scx - sx;\r\n                        if ((dr < 0 && scx < self.newscrollx) || (dr > 0 && scx > self.newscrollx)) scx = self.newscrollx;\r\n                        self.setScrollLeft(scx);\r\n                        if (scx == self.newscrollx) done += 1;\r\n                    } else {\r\n                        done += 1;\r\n                    }\r\n\r\n                    if (done == 2) {\r\n                        self.timer = 0;\r\n                        self.cursorfreezed = false;\r\n                        self.bzscroll = false;\r\n                        self.scrollrunning = false;\r\n                        if (sc < 0) sc = 0;\r\n                        else if (sc > self.page.maxh) sc = self.page.maxh;\r\n                        if (scx < 0) scx = 0;\r\n                        else if (scx > self.page.maxw) scx = self.page.maxw;\r\n                        if ((scx != self.newscrollx) || (sc != self.newscrolly)) self.doScrollPos(scx, sc);\r\n                        else {\r\n                            if (self.onscrollend) {\r\n                                /*\t\t\t\t\t\t\t\r\n                var info = {\"type\":\"scrollend\",\"current\":{\"x\":sx,\"y\":sy},\"end\":{\"x\":self.newscrollx,\"y\":self.newscrolly}};\r\n                self.onscrollend.call(self,info);\r\n*/\r\n                                self.triggerScrollEnd();\r\n                            }\r\n                        }\r\n                    } else {\r\n                        self.timer = setAnimationFrame(scrolling) || 1;\r\n                    }\r\n                };\r\n                self.cancelAnimationFrame = false;\r\n                self.timer = 1;\r\n\r\n                if (self.onscrollstart && !self.scrollrunning) {\r\n                    var info = {\r\n                        \"type\": \"scrollstart\",\r\n                        \"current\": {\r\n                            \"x\": px,\r\n                            \"y\": py\r\n                        },\r\n                        \"request\": {\r\n                            \"x\": x,\r\n                            \"y\": y\r\n                        },\r\n                        \"end\": {\r\n                            \"x\": self.newscrollx,\r\n                            \"y\": self.newscrolly\r\n                        },\r\n                        \"speed\": ms\r\n                    };\r\n                    self.onscrollstart.call(self, info);\r\n                }\r\n\r\n                scrolling();\r\n\r\n                if ((py == self.page.maxh && y >= py) || (px == self.page.maxw && x >= px)) self.checkContentSize();\r\n\r\n                self.noticeCursor();\r\n            };\r\n\r\n            this.cancelScroll = function() {\r\n                if (self.timer) clearAnimationFrame(self.timer);\r\n                self.timer = 0;\r\n                self.bzscroll = false;\r\n                self.scrollrunning = false;\r\n                return self;\r\n            };\r\n\r\n        }\r\n\r\n        this.doScrollBy = function(stp, relative) {\r\n            var ny = 0;\r\n            if (relative) {\r\n                ny = Math.floor((self.scroll.y - stp) * self.scrollratio.y)\r\n            } else {\r\n                var sy = (self.timer) ? self.newscrolly : self.getScrollTop(true);\r\n                ny = sy - stp;\r\n            }\r\n            if (self.bouncescroll) {\r\n                var haf = Math.round(self.view.h / 2);\r\n                if (ny < -haf) ny = -haf\r\n                else if (ny > (self.page.maxh + haf)) ny = (self.page.maxh + haf);\r\n            }\r\n            self.cursorfreezed = false;\r\n\r\n            py = self.getScrollTop(true);\r\n            if (ny < 0 && py <= 0) return self.noticeCursor();\r\n            else if (ny > self.page.maxh && py >= self.page.maxh) {\r\n                self.checkContentSize();\r\n                return self.noticeCursor();\r\n            }\r\n\r\n            self.doScrollTop(ny);\r\n        };\r\n\r\n        this.doScrollLeftBy = function(stp, relative) {\r\n            var nx = 0;\r\n            if (relative) {\r\n                nx = Math.floor((self.scroll.x - stp) * self.scrollratio.x)\r\n            } else {\r\n                var sx = (self.timer) ? self.newscrollx : self.getScrollLeft(true);\r\n                nx = sx - stp;\r\n            }\r\n            if (self.bouncescroll) {\r\n                var haf = Math.round(self.view.w / 2);\r\n                if (nx < -haf) nx = -haf;\r\n                else if (nx > (self.page.maxw + haf)) nx = (self.page.maxw + haf);\r\n            }\r\n            self.cursorfreezed = false;\r\n\r\n            px = self.getScrollLeft(true);\r\n            if (nx < 0 && px <= 0) return self.noticeCursor();\r\n            else if (nx > self.page.maxw && px >= self.page.maxw) return self.noticeCursor();\r\n\r\n            self.doScrollLeft(nx);\r\n        };\r\n\r\n        this.doScrollTo = function(pos, relative) {\r\n            var ny = (relative) ? Math.round(pos * self.scrollratio.y) : pos;\r\n            if (ny < 0) ny = 0;\r\n            else if (ny > self.page.maxh) ny = self.page.maxh;\r\n            self.cursorfreezed = false;\r\n            self.doScrollTop(pos);\r\n        };\r\n\r\n        this.checkContentSize = function() {\r\n            var pg = self.getContentSize();\r\n            if ((pg.h != self.page.h) || (pg.w != self.page.w)) self.resize(false, pg);\r\n        };\r\n\r\n        self.onscroll = function(e) {\r\n            if (self.rail.drag) return;\r\n            if (!self.cursorfreezed) {\r\n                self.synched('scroll', function() {\r\n                    self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n                    if (self.railh) self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\r\n                    self.noticeCursor();\r\n                });\r\n            }\r\n        };\r\n        self.bind(self.docscroll, \"scroll\", self.onscroll);\r\n\r\n        this.doZoomIn = function(e) {\r\n            if (self.zoomactive) return;\r\n            self.zoomactive = true;\r\n\r\n            self.zoomrestore = {\r\n                style: {}\r\n            };\r\n            var lst = ['position', 'top', 'left', 'zIndex', 'backgroundColor', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight'];\r\n            var win = self.win[0].style;\r\n            for (var a in lst) {\r\n                var pp = lst[a];\r\n                self.zoomrestore.style[pp] = (typeof win[pp] != \"undefined\") ? win[pp] : '';\r\n            }\r\n\r\n            self.zoomrestore.style.width = self.win.css('width');\r\n            self.zoomrestore.style.height = self.win.css('height');\r\n\r\n            self.zoomrestore.padding = {\r\n                w: self.win.outerWidth() - self.win.width(),\r\n                h: self.win.outerHeight() - self.win.height()\r\n            };\r\n\r\n            if (cap.isios4) {\r\n                self.zoomrestore.scrollTop = $(window).scrollTop();\r\n                $(window).scrollTop(0);\r\n            }\r\n\r\n            self.win.css({\r\n                \"position\": (cap.isios4) ? \"absolute\" : \"fixed\",\r\n                \"top\": 0,\r\n                \"left\": 0,\r\n                \"z-index\": globalmaxzindex + 100,\r\n                \"margin\": \"0px\"\r\n            });\r\n            var bkg = self.win.css(\"backgroundColor\");\r\n            if (bkg == \"\" || /transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(bkg)) self.win.css(\"backgroundColor\", \"#fff\");\r\n            self.rail.css({\r\n                \"z-index\": globalmaxzindex + 101\r\n            });\r\n            self.zoom.css({\r\n                \"z-index\": globalmaxzindex + 102\r\n            });\r\n            self.zoom.css('backgroundPosition', '0px -18px');\r\n            self.resizeZoom();\r\n\r\n            if (self.onzoomin) self.onzoomin.call(self);\r\n\r\n            return self.cancelEvent(e);\r\n        };\r\n\r\n        this.doZoomOut = function(e) {\r\n            if (!self.zoomactive) return;\r\n            self.zoomactive = false;\r\n\r\n            self.win.css(\"margin\", \"\");\r\n            self.win.css(self.zoomrestore.style);\r\n\r\n            if (cap.isios4) {\r\n                $(window).scrollTop(self.zoomrestore.scrollTop);\r\n            }\r\n\r\n            self.rail.css({\r\n                \"z-index\": self.zindex\r\n            });\r\n            self.zoom.css({\r\n                \"z-index\": self.zindex\r\n            });\r\n            self.zoomrestore = false;\r\n            self.zoom.css('backgroundPosition', '0px 0px');\r\n            self.onResize();\r\n\r\n            if (self.onzoomout) self.onzoomout.call(self);\r\n\r\n            return self.cancelEvent(e);\r\n        };\r\n\r\n        this.doZoom = function(e) {\r\n            return (self.zoomactive) ? self.doZoomOut(e) : self.doZoomIn(e);\r\n        };\r\n\r\n        this.resizeZoom = function() {\r\n            if (!self.zoomactive) return;\r\n\r\n            var py = self.getScrollTop(); //preserve scrolling position\r\n            self.win.css({\r\n                width: $(window).width() - self.zoomrestore.padding.w + \"px\",\r\n                height: $(window).height() - self.zoomrestore.padding.h + \"px\"\r\n            });\r\n            self.onResize();\r\n\r\n            self.setScrollTop(Math.min(self.page.maxh, py));\r\n        };\r\n\r\n        this.init();\r\n\r\n        $.nicescroll.push(this);\r\n\r\n    };\r\n\r\n    // Inspired by the work of Kin Blas\r\n    // http://webpro.host.adobe.com/people/jblas/momentum/includes/jquery.momentum.0.7.js  \r\n\r\n\r\n    var ScrollMomentumClass2D = function(nc) {\r\n        var self = this;\r\n        this.nc = nc;\r\n\r\n        this.lastx = 0;\r\n        this.lasty = 0;\r\n        this.speedx = 0;\r\n        this.speedy = 0;\r\n        this.lasttime = 0;\r\n        this.steptime = 0;\r\n        this.snapx = false;\r\n        this.snapy = false;\r\n        this.demulx = 0;\r\n        this.demuly = 0;\r\n\r\n        this.lastscrollx = -1;\r\n        this.lastscrolly = -1;\r\n\r\n        this.chkx = 0;\r\n        this.chky = 0;\r\n\r\n        this.timer = 0;\r\n\r\n        this.time = function() {\r\n            return +new Date(); //beautifull hack\r\n        };\r\n\r\n        this.reset = function(px, py) {\r\n            self.stop();\r\n            var now = self.time();\r\n            self.steptime = 0;\r\n            self.lasttime = now;\r\n            self.speedx = 0;\r\n            self.speedy = 0;\r\n            self.lastx = px;\r\n            self.lasty = py;\r\n            self.lastscrollx = -1;\r\n            self.lastscrolly = -1;\r\n        };\r\n\r\n        this.update = function(px, py) {\r\n            var now = self.time();\r\n            self.steptime = now - self.lasttime;\r\n            self.lasttime = now;\r\n            var dy = py - self.lasty;\r\n            var dx = px - self.lastx;\r\n            var sy = self.nc.getScrollTop();\r\n            var sx = self.nc.getScrollLeft();\r\n            var newy = sy + dy;\r\n            var newx = sx + dx;\r\n            self.snapx = (newx < 0) || (newx > self.nc.page.maxw);\r\n            self.snapy = (newy < 0) || (newy > self.nc.page.maxh);\r\n            self.speedx = dx;\r\n            self.speedy = dy;\r\n            self.lastx = px;\r\n            self.lasty = py;\r\n        };\r\n\r\n        this.stop = function() {\r\n            self.nc.unsynched(\"domomentum2d\");\r\n            if (self.timer) clearTimeout(self.timer);\r\n            self.timer = 0;\r\n            self.lastscrollx = -1;\r\n            self.lastscrolly = -1;\r\n        };\r\n\r\n        this.doSnapy = function(nx, ny) {\r\n            var snap = false;\r\n\r\n            if (ny < 0) {\r\n                ny = 0;\r\n                snap = true;\r\n            } else if (ny > self.nc.page.maxh) {\r\n                ny = self.nc.page.maxh;\r\n                snap = true;\r\n            }\r\n\r\n            if (nx < 0) {\r\n                nx = 0;\r\n                snap = true;\r\n            } else if (nx > self.nc.page.maxw) {\r\n                nx = self.nc.page.maxw;\r\n                snap = true;\r\n            }\r\n\r\n            (snap) ? self.nc.doScrollPos(nx, ny, self.nc.opt.snapbackspeed) : self.nc.triggerScrollEnd();\r\n        };\r\n\r\n        this.doMomentum = function(gp) {\r\n            var t = self.time();\r\n            var l = (gp) ? t + gp : self.lasttime;\r\n\r\n            var sl = self.nc.getScrollLeft();\r\n            var st = self.nc.getScrollTop();\r\n\r\n            var pageh = self.nc.page.maxh;\r\n            var pagew = self.nc.page.maxw;\r\n\r\n            self.speedx = (pagew > 0) ? Math.min(60, self.speedx) : 0;\r\n            self.speedy = (pageh > 0) ? Math.min(60, self.speedy) : 0;\r\n\r\n            var chk = l && (t - l) <= 60;\r\n\r\n            if ((st < 0) || (st > pageh) || (sl < 0) || (sl > pagew)) chk = false;\r\n\r\n            var sy = (self.speedy && chk) ? self.speedy : false;\r\n            var sx = (self.speedx && chk) ? self.speedx : false;\r\n\r\n            if (sy || sx) {\r\n                var tm = Math.max(16, self.steptime); //timeout granularity\r\n\r\n                if (tm > 50) { // do smooth\r\n                    var xm = tm / 50;\r\n                    self.speedx *= xm;\r\n                    self.speedy *= xm;\r\n                    tm = 50;\r\n                }\r\n\r\n                self.demulxy = 0;\r\n\r\n                self.lastscrollx = self.nc.getScrollLeft();\r\n                self.chkx = self.lastscrollx;\r\n                self.lastscrolly = self.nc.getScrollTop();\r\n                self.chky = self.lastscrolly;\r\n\r\n                var nx = self.lastscrollx;\r\n                var ny = self.lastscrolly;\r\n\r\n                var onscroll = function() {\r\n                    var df = ((self.time() - t) > 600) ? 0.04 : 0.02;\r\n\r\n                    if (self.speedx) {\r\n                        nx = Math.floor(self.lastscrollx - (self.speedx * (1 - self.demulxy)));\r\n                        self.lastscrollx = nx;\r\n                        if ((nx < 0) || (nx > pagew)) df = 0.10;\r\n                    }\r\n\r\n                    if (self.speedy) {\r\n                        ny = Math.floor(self.lastscrolly - (self.speedy * (1 - self.demulxy)));\r\n                        self.lastscrolly = ny;\r\n                        if ((ny < 0) || (ny > pageh)) df = 0.10;\r\n                    }\r\n\r\n                    self.demulxy = Math.min(1, self.demulxy + df);\r\n\r\n                    self.nc.synched(\"domomentum2d\", function() {\r\n\r\n                        if (self.speedx) {\r\n                            var scx = self.nc.getScrollLeft();\r\n                            if (scx != self.chkx) self.stop();\r\n                            self.chkx = nx;\r\n                            self.nc.setScrollLeft(nx);\r\n                        }\r\n\r\n                        if (self.speedy) {\r\n                            var scy = self.nc.getScrollTop();\r\n                            if (scy != self.chky) self.stop();\r\n                            self.chky = ny;\r\n                            self.nc.setScrollTop(ny);\r\n                        }\r\n\r\n                        if (!self.timer) {\r\n                            self.nc.hideCursor();\r\n                            self.doSnapy(nx, ny);\r\n                        }\r\n\r\n                    });\r\n\r\n                    if (self.demulxy < 1) {\r\n                        self.timer = setTimeout(onscroll, tm);\r\n                    } else {\r\n                        self.stop();\r\n                        self.nc.hideCursor();\r\n                        self.doSnapy(nx, ny);\r\n                    }\r\n                };\r\n\r\n                onscroll();\r\n\r\n            } else {\r\n                self.doSnapy(self.nc.getScrollLeft(), self.nc.getScrollTop());\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // override jQuery scrollTop\r\n\r\n    var _scrollTop = jQuery.fn.scrollTop; // preserve original function\r\n\r\n    jQuery.cssHooks[\"pageYOffset\"] = {\r\n        get: function(elem, computed, extra) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(elem);\r\n        },\r\n        set: function(elem, value) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call(elem, value);\r\n            return this;\r\n        }\r\n    };\r\n\r\n    /*  \r\n  $.fx.step[\"scrollTop\"] = function(fx){    \r\n    $.cssHooks[\"scrollTop\"].set( fx.elem, fx.now + fx.unit );\r\n  };\r\n*/\r\n\r\n    jQuery.fn.scrollTop = function(value) {\r\n        if (typeof value == \"undefined\") {\r\n            var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(this);\r\n        } else {\r\n            return this.each(function() {\r\n                var nice = $.data(this, '__nicescroll') || false;\r\n                (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call($(this), value);\r\n            });\r\n        }\r\n    };\r\n\r\n    // override jQuery scrollLeft\r\n\r\n    var _scrollLeft = jQuery.fn.scrollLeft; // preserve original function\r\n\r\n    $.cssHooks.pageXOffset = {\r\n        get: function(elem, computed, extra) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(elem);\r\n        },\r\n        set: function(elem, value) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call(elem, value);\r\n            return this;\r\n        }\r\n    };\r\n\r\n    /*  \r\n  $.fx.step[\"scrollLeft\"] = function(fx){\r\n    $.cssHooks[\"scrollLeft\"].set( fx.elem, fx.now + fx.unit );\r\n  };  \r\n*/\r\n\r\n    jQuery.fn.scrollLeft = function(value) {\r\n        if (typeof value == \"undefined\") {\r\n            var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(this);\r\n        } else {\r\n            return this.each(function() {\r\n                var nice = $.data(this, '__nicescroll') || false;\r\n                (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call($(this), value);\r\n            });\r\n        }\r\n    };\r\n\r\n    var NiceScrollArray = function(doms) {\r\n        var self = this;\r\n        this.length = 0;\r\n        this.name = \"nicescrollarray\";\r\n\r\n        this.each = function(fn) {\r\n            for (var a = 0, i = 0; a < self.length; a++) fn.call(self[a], i++);\r\n            return self;\r\n        };\r\n\r\n        this.push = function(nice) {\r\n            self[self.length] = nice;\r\n            self.length++;\r\n        };\r\n\r\n        this.eq = function(idx) {\r\n            return self[idx];\r\n        };\r\n\r\n        if (doms) {\r\n            for (var a = 0; a < doms.length; a++) {\r\n                var nice = $.data(doms[a], '__nicescroll') || false;\r\n                if (nice) {\r\n                    this[this.length] = nice;\r\n                    this.length++;\r\n                }\r\n            };\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    function mplex(el, lst, fn) {\r\n        for (var a = 0; a < lst.length; a++) fn(el, lst[a]);\r\n    };\r\n    mplex(\r\n        NiceScrollArray.prototype, ['show', 'hide', 'toggle', 'onResize', 'resize', 'remove', 'stop', 'doScrollPos'],\r\n        function(e, n) {\r\n            e[n] = function() {\r\n                var args = arguments;\r\n                return this.each(function() {\r\n                    this[n].apply(this, args);\r\n                });\r\n            };\r\n        }\r\n    );\r\n\r\n    jQuery.fn.getNiceScroll = function(index) {\r\n        if (typeof index == \"undefined\") {\r\n            return new NiceScrollArray(this);\r\n        } else {\r\n            var nice = this[index] && $.data(this[index], '__nicescroll') || false;\r\n            return nice;\r\n        }\r\n    };\r\n\r\n    jQuery.extend(jQuery.expr[':'], {\r\n        nicescroll: function(a) {\r\n            return ($.data(a, '__nicescroll')) ? true : false;\r\n        }\r\n    });\r\n\r\n    $.fn.niceScroll = function(wrapper, opt) {\r\n        if (typeof opt == \"undefined\") {\r\n            if ((typeof wrapper == \"object\") && !(\"jquery\" in wrapper)) {\r\n                opt = wrapper;\r\n                wrapper = false;\r\n            }\r\n        }\r\n        var ret = new NiceScrollArray();\r\n        if (typeof opt == \"undefined\") opt = {};\r\n\r\n        if (wrapper || false) {\r\n            opt.doc = $(wrapper);\r\n            opt.win = $(this);\r\n        }\r\n        var docundef = !(\"doc\" in opt);\r\n        if (!docundef && !(\"win\" in opt)) opt.win = $(this);\r\n\r\n        this.each(function() {\r\n            var nice = $(this).data('__nicescroll') || false;\r\n            if (!nice) {\r\n                opt.doc = (docundef) ? $(this) : opt.doc;\r\n                nice = new NiceScrollClass(opt, $(this));\r\n                $(this).data('__nicescroll', nice);\r\n            }\r\n            ret.push(nice);\r\n        });\r\n        return (ret.length == 1) ? ret[0] : ret;\r\n    };\r\n\r\n    window.NiceScroll = {\r\n        getjQuery: function() {\r\n            return jQuery\r\n        }\r\n    };\r\n\r\n    if (!$.nicescroll) {\r\n        $.nicescroll = new NiceScrollArray();\r\n        $.nicescroll.options = _globaloptions;\r\n    }\r\n\r\n}));","/*global jQuery */\n/*jshint multistr:true browser:true */\n/*!\n* FitVids 1.0\n*\n* Copyright 2011, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com\n* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n* Released under the WTFPL license - http://sam.zoy.org/wtfpl/\n*\n* Date: Thu Sept 01 18:00:00 2011 -0500\n*/\n\n(function( $ ){\n\n  \"use strict\";\n\n  $.fn.fitVids = function( options ) {\n    var settings = {\n      customSelector: null\n    };\n\n    if(!document.getElementById('fit-vids-style')) {\n\n      var div = document.createElement('div'),\n          ref = document.getElementsByTagName('base')[0] || document.getElementsByTagName('script')[0];\n\n      div.className = 'fit-vids-style';\n      div.id = 'fit-vids-style';\n      div.style.display = 'none';\n      div.innerHTML = '&shy;<style>         \\\n        .fluid-width-video-wrapper {        \\\n           width: 100%;                     \\\n           position: relative;              \\\n           padding: 0;                      \\\n        }                                   \\\n                                            \\\n        .fluid-width-video-wrapper iframe,  \\\n        .fluid-width-video-wrapper object,  \\\n        .fluid-width-video-wrapper embed {  \\\n           position: absolute;              \\\n           top: 0;                          \\\n           left: 0;                         \\\n           width: 100%;                     \\\n           height: 100%;                    \\\n        }                                   \\\n      </style>';\n\n      ref.parentNode.insertBefore(div,ref);\n\n    }\n\n    if ( options ) {\n      $.extend( settings, options );\n    }\n\n    return this.each(function(){\n      var selectors = [\n        \"iframe[src*='player.vimeo.com']\",\n        \"iframe[src*='youtube.com']\",\n        \"iframe[src*='youtube-nocookie.com']\",\n        \"iframe[src*='kickstarter.com'][src*='video.html']\",\n        \"object\",\n        \"embed\"\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      $allVideos = $allVideos.not(\"object object\"); // SwfObj conflict patch\n\n      $allVideos.each(function(){\n        var $this = $(this);\n        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }\n        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),\n            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),\n            aspectRatio = height / width;\n        if(!$this.attr('id')){\n          var videoID = 'fitvid' + Math.floor(Math.random()*999999);\n          $this.attr('id', videoID);\n        }\n        $this.wrap('<div class=\"fluid-width-video-wrapper\"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+\"%\");\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n})( jQuery );\n","/**\r\n * jQuery Countdown\r\n *\r\n * Provides a javascript countdown timer based on the data-countdown attribute or by\r\n * passing a schedule of events via options. It will default to data-countdown if the\r\n * attribute is present, then the next day in a schedule if you pass one, and\r\n * then it will fail silently as last result if neither of these are present.\r\n *\r\n * @author Kaleb Heitzman <kaleblex@gmail.com>\r\n * @website http://github.com/kaleblex/jquery-countdown.js\r\n * @created March 12, 2013\r\n *\r\n */\r\n;\r\n(function($) {\r\n\r\n    /**\r\n     * Countdown\r\n     */\r\n    $.fn.countdown = function(options) {\r\n\r\n        // default options\r\n        defaults = {\r\n            schedule: null,\r\n            datetime: null,\r\n            showYears: false,\r\n            showDays: true,\r\n            showHours: true,\r\n            showMinutes: true,\r\n            showSeconds: true,\r\n            showOnZeroYears: false,\r\n            showOnZeroDays: true,\r\n            showOnZeroHours: true,\r\n            showOnZeroMinutes: true,\r\n            showOnZeroSeconds: true,\r\n            unixFormat: false\r\n        };\r\n\r\n        /**\r\n         * Extend the options\r\n         */\r\n        var options = $.extend({\r\n            timerCallback: function(options) {},\r\n            initCallback: function(options) {},\r\n            zeroCallback: function(options) {}\r\n        }, defaults, options);\r\n\r\n        /**\r\n         * Check for a specified datetime and use ternary to apply value\r\n         */\r\n        options.datetime = $(this).attr('data-countdown') ? $(this).attr('data-countdown') : null;\r\n\r\n        /**\r\n         * Run Countdown on Element\r\n         */\r\n        return this.each(function() {\r\n\r\n            /**\r\n             * Calculate Upcoming Day\r\n             *\r\n             * Calculate what the upcoming day is based on a combination of schedules\r\n             * and date-time attribute. If a date-time attribute is used, it should be\r\n             * used first. If a schedule is passed, calculate the date and time based\r\n             * on the schedule\r\n             */\r\n            var upcomingDate = scheduler(options);\r\n\r\n            /**\r\n             * Get the element to update\r\n             */\r\n            var element = $(this);\r\n\r\n            /**\r\n             * Start the timer\r\n             *\r\n             * The time will update the element every one second.\r\n             */\r\n            var intervalHandle = setInterval(function() {\r\n                // get the timerObject\r\n                var timerObject = makeTimer(upcomingDate, options);\r\n                // set the timerObject in options\r\n                options.timerObject = timerObject;\r\n                // create the HTML\r\n                var timerHtml = htmlParser(timerObject, options);\r\n                /**\r\n                 * Update the HTML for the counter\r\n                 */\r\n                updateElement(element, timerHtml, options);\r\n                /** \r\n                 * Check for zeroCallback\r\n                 */\r\n                if (timerObject.timeLeft <= 0) {\r\n                    /**\r\n                     * Clear the interval because it's no longer needed\r\n                     */\r\n                    clearInterval(intervalHandle);\r\n                    /**\r\n                     * Call the zeroCallback to see if there is anything to perform.\r\n                     */\r\n                    options.zeroCallback(options);\r\n                }\r\n                /**\r\n                 * call the callback timer\r\n                 */\r\n                else {\r\n                    options.timerCallback(options);\r\n                }\r\n            }, 1000);\r\n\r\n        });\r\n\r\n        /**\r\n         * An overball callback\r\n         */\r\n        options.initCallback.call(this);\r\n\r\n    };\r\n\r\n    /**\r\n     * Update the element\r\n     *\r\n     * Updates the html inside of the element that plugin is attached to based on\r\n     * schedule or date-time attr.\r\n     */\r\n    var updateElement = function(element, html, options) {\r\n        // update the html\r\n        $(element).html(html);\r\n    }\r\n\r\n    /**\r\n     * Scheduler\r\n     *\r\n     * Returns Human Readable date string based on a combination of scheduel,\r\n     * date-time attr, and current datetime.\r\n     */\r\n    var scheduler = function(options) {\r\n\r\n        /**\r\n         * Check for registerd data-countdown attr.\r\n         *\r\n         * If the date-time attr is filled in, skip schedule checking and return\r\n         * the passed data-countdown directly.\r\n         */\r\n        if (options.datetime != null) {\r\n            return options.datetime;\r\n        }\r\n\r\n        /**\r\n         * Set a blank array to store date and time sin\r\n         */\r\n        var upcomingDates = [];\r\n\r\n        /**\r\n         * Process the schedule\r\n         */\r\n        for (var day in options.schedule) {\r\n            // get the next upcoming date\r\n            var nextDate = nextDayByName(day);\r\n            // get the time foreach each future date and push it to upcomingDates\r\n            for (var time in options.schedule[day]) {\r\n                // create a time string to push onto the upcomingDates array\r\n                var timeString = nextDate + \" \" + options.schedule[day][time];\r\n                // push the string onto the array\r\n                upcomingDates.push(timeString);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Create the schedule to compare times agains\r\n         */\r\n        schedule = [];\r\n        for (var key in upcomingDates) {\r\n            schedule.push(new Date(upcomingDates[key]));\r\n        }\r\n\r\n        /**\r\n         * Create the parsed schedule\r\n         */\r\n        parsedSchedule = [];\r\n        for (var key in schedule) {\r\n            parsedSchedule.push(Date.parse(schedule[key]) / 1000);\r\n        }\r\n\r\n        /**\r\n         * Current Time\r\n         */\r\n        var currentTime = new Date(),\r\n            currentTimeParsed = Date.parse(currentTime) / 1000;\r\n\r\n\r\n        /**\r\n         * Build time differences\r\n         */\r\n        timeDifferences = [];\r\n        for (var key in parsedSchedule) {\r\n            timeDifferences.push(parsedSchedule[key] - currentTimeParsed);\r\n        }\r\n\r\n        /**\r\n         * Check for Negative\r\n         */\r\n        timeDifferencesParsed = [];\r\n        for (key in timeDifferences) {\r\n            if (timeDifferences[key] > 0) {\r\n                timeDifferencesParsed.push(timeDifferences[key]);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the shortest time and store it in key\r\n         */\r\n        var shortTime = Math.min.apply(null, timeDifferencesParsed);\r\n        for (var prop in timeDifferences) {\r\n            if (shortTime == timeDifferences[prop]) {\r\n                var shortTimeKey = prop;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Get the next scheduled date\r\n         */\r\n        var scheduledDate = upcomingDates[shortTimeKey];\r\n\r\n        /** \r\n         * Return the scheduledDate if it's not blank.\r\n         */\r\n        if (scheduledDate != \"\") {\r\n            return scheduledDate;\r\n        }\r\n\r\n        /** \r\n         * When all else fails return null\r\n         */\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Make Timer\r\n     *\r\n     * This is the timing method. This will be called every 1 second to return\r\n     * the html needed to be placed in $(this.element)\r\n     */\r\n    var makeTimer = function(upcomingDate, options) {\r\n\r\n\r\n        /**\r\n         * Check for null upcomingDate\r\n         */\r\n        if (upcomingDate == null) {\r\n            return \"\";\r\n        }\r\n\r\n        /**\r\n         * Current Time and Date\r\n         */\r\n        var currentTime = new Date();\r\n\r\n        /**\r\n         * Convert Dates\r\n         *\r\n         * Convert the dates to a time string to calculate differences.\r\n         */\r\n        if (options.unixFormat) {\r\n            var endTime = (upcomingDate / 1000);\r\n        } else {\r\n            var endTime = (Date.parse(upcomingDate) / 1000);\r\n        }\r\n\r\n\r\n        var currentTime = (Date.parse(currentTime) / 1000);\r\n\r\n        /**\r\n         * Time Left\r\n         */\r\n        var timeLeft = endTime - currentTime;\r\n\r\n        /**\r\n         * Set some vars for use\r\n         */\r\n        var years = 0;\r\n        var days = 0;\r\n        var hours = 0;\r\n        var minutes = 0;\r\n        var seconds = 0;\r\n\r\n        /**\r\n         * Intercept on <= 0 and calculate differences based on timeLeft\r\n         */\r\n        if (timeLeft > 0) {\r\n            var years = Math.floor((timeLeft / 31536000));\r\n            var days = Math.floor((timeLeft / 86400));\r\n            var hours = Math.floor((timeLeft - (days * 86400)) / 3600);\r\n            var minutes = Math.floor((timeLeft - (days * 86400) - (hours * 3600)) / 60);\r\n            var seconds = Math.floor((timeLeft - (days * 86400) - (hours * 3600) - (minutes * 60)));\r\n            // adjust days for for more than 1 year\r\n            if (days > 365) {\r\n                days = days % 365;\r\n            }\r\n        }\r\n\r\n        // create the Timer Object\r\n        var timerObject = {\r\n            \"years\": years,\r\n            \"days\": days,\r\n            \"hours\": hours,\r\n            \"minutes\": minutes,\r\n            \"seconds\": seconds,\r\n            \"timeLeft\": timeLeft\r\n        };\r\n\r\n        // return Timer Object\r\n        return timerObject;\r\n    }\r\n\r\n    /**\r\n     * Parses a Timer Object to create html\r\n     */\r\n    var htmlParser = function(timerObject, options, format) {\r\n\r\n        /**\r\n         * Adjust for zero\r\n         */\r\n        if (timerObject.years < \"10\") {\r\n            timerObject.years = \"0\" + timerObject.years;\r\n        }\r\n        if (timerObject.days < \"10\") {\r\n            timerObject.days = \"0\" + timerObject.days;\r\n        }\r\n        if (timerObject.hours < \"10\") {\r\n            timerObject.hours = \"0\" + timerObject.hours;\r\n        }\r\n        if (timerObject.minutes < \"10\") {\r\n            timerObject.minutes = \"0\" + timerObject.minutes;\r\n        }\r\n        if (timerObject.seconds < \"10\") {\r\n            timerObject.seconds = \"0\" + timerObject.seconds;\r\n        }\r\n\r\n        /**\r\n         * Counter HTML to be passed back to the element\r\n         */\r\n        var counter_years = '<div class=\"years\"><span class=\"count\">' + timerObject.years + '</span><span class=\"title\">Years</span></div>';\r\n        var counter_days = '<div class=\"days\"><span class=\"count\">' + timerObject.days + '</span><span class=\"title\">Days</span></div>';\r\n        var counter_hours = '<div class=\"hours\"><span class=\"count\">' + timerObject.hours + '</span><span class=\"title\">Hours</span></div>';\r\n        var counter_minutes = '<div class=\"minutes\"><span class=\"count\">' + timerObject.minutes + '</span><span class=\"title\">Minutes</span></div>';\r\n        var counter_seconds = '<div class=\"seconds\"><span class=\"count\">' + timerObject.seconds + '</span><span class=\"title\">Seconds</span></div>';\r\n\r\n        /**\r\n         * Setup string inclusions\r\n         */\r\n        var includeYears = false,\r\n            includeDays = false,\r\n            includeHours = false,\r\n            includeMinutes = false,\r\n            includeSeconds = false;\r\n\r\n        /**\r\n         * Options base show logic\r\n         */\r\n        if (options.showYears) {\r\n            includeYears = true;\r\n        }\r\n        if (options.showDays) {\r\n            includeDays = true;\r\n        }\r\n        if (options.showHours) {\r\n            includeHours = true;\r\n        }\r\n        if (options.showMinutes) {\r\n            includeMinutes = true;\r\n        }\r\n        if (options.showSeconds) {\r\n            includeSeconds = true;\r\n        }\r\n\r\n        /**\r\n         * Options showOnZero logic\r\n         */\r\n        if ((!options.showOnZeroYears) && (timerObject.years == \"00\")) {\r\n            includeYears = false;\r\n        }\r\n        if ((!options.showOnZeroDays) && (timerObject.days == \"00\")) {\r\n            includeDays = false;\r\n        }\r\n        if ((!options.showOnZeroHours) && (timerObject.hours == \"00\")) {\r\n            includeHours = false;\r\n        }\r\n        if ((!options.showOnZeroMinutes) && (timerObject.minutes == \"00\")) {\r\n            includeMinutes = false;\r\n        }\r\n        if ((!options.showOnZeroSeconds) && (timerObject.seconds == \"00\")) {\r\n            includeSeconds = false;\r\n        }\r\n\r\n        /** Concatonate string\r\n         */\r\n        var counter_html = \"\";\r\n\r\n        if (includeYears) {\r\n            counter_html += counter_years;\r\n        }\r\n        if (includeDays) {\r\n            counter_html += counter_days;\r\n        }\r\n        if (includeHours) {\r\n            counter_html += counter_hours;\r\n        }\r\n        if (includeMinutes) {\r\n            counter_html += counter_minutes;\r\n        }\r\n        if (includeSeconds) {\r\n            counter_html += counter_seconds;\r\n        }\r\n\r\n        /**\r\n         * Return the Counter HTML\r\n         */\r\n        return counter_html;\r\n    }\r\n\r\n    /** \r\n     * Next date via schedule or attribute\r\n     */\r\n    var nextDayByName = function(scheduledDay) {\r\n\r\n        /**\r\n         * Date Strings\r\n         *\r\n         * Setup some date string to calculate futures events\r\n         */\r\n        var D = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\r\n            M = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n\r\n        /**\r\n         * Get the key for the scheduleDay\r\n         */\r\n        for (var prop in D) {\r\n            if (scheduledDay == D[prop]) {\r\n                var whichNext = prop;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Current Date\r\n         *\r\n         * This is used to figure out the time difference to a\r\n         * scheduled or data-countdown reference\r\n         */\r\n        var date = new Date();\r\n\r\n        /**\r\n         * Time Difference\r\n         *\r\n         * Calcuate the difference between the current date and scheduled date. Once\r\n         * this has been calculated, we'll pass a human readable date back to the\r\n         * countdown method.\r\n         */\r\n        var dif = date.getDay() - whichNext;\r\n        dif = dif > 0 ? dif = 7 - dif : -dif;\r\n\r\n        date.setDate(date.getDate() + dif);\r\n        date.setHours(1); //DST pseudobug correction\r\n\r\n        // get the day\r\n        var dd = date.getDate();\r\n        dd < 0 ? dd = '0' + dd : null;\r\n\r\n        // get the year\r\n        var yyyy = date.getFullYear();\r\n\r\n        // get the month\r\n        var mm = M[date.getMonth()];\r\n\r\n        /**\r\n         * Human Readable Date String\r\n         *\r\n         * Set the human readable datestring to be passed back, ex. January 01, 2013\r\n         */\r\n        var nextDatebyDayofWeek = mm + ' ' + dd + ', ' + yyyy;\r\n        return nextDatebyDayofWeek;\r\n    }\r\n\r\n}(jQuery));","/**\r\n * jquery.gridrotator.js v1.1.0\r\n * http://www.codrops.com\r\n *\r\n * Licensed under the MIT license.\r\n * http://www.opensource.org/licenses/mit-license.php\r\n *\r\n * Copyright 2012, Codrops\r\n * http://www.codrops.com\r\n */\r\n;\r\n(function($, window, undefined) {\r\n\r\n    'use strict';\r\n\r\n    /*\r\n     * debouncedresize: special jQuery event that happens once after a window resize\r\n     *\r\n     * latest version and complete README available on Github:\r\n     * https://github.com/louisremi/jquery-smartresize/blob/master/jquery.debouncedresize.js\r\n     *\r\n     * Copyright 2011 @louis_remi\r\n     * Licensed under the MIT license.\r\n     */\r\n    var $event = $.event,\r\n        $special,\r\n        resizeTimeout;\r\n\r\n    $special = $event.special.debouncedresize = {\r\n        setup: function() {\r\n            $(this).on(\"resize\", $special.handler);\r\n        },\r\n        teardown: function() {\r\n            $(this).off(\"resize\", $special.handler);\r\n        },\r\n        handler: function(event, execAsap) {\r\n            // Save the context\r\n            var context = this,\r\n                args = arguments,\r\n                dispatch = function() {\r\n                    // set correct event type\r\n                    event.type = \"debouncedresize\";\r\n                    $event.dispatch.apply(context, args);\r\n                };\r\n\r\n            if (resizeTimeout) {\r\n                clearTimeout(resizeTimeout);\r\n            }\r\n\r\n            execAsap ?\r\n                dispatch() :\r\n                resizeTimeout = setTimeout(dispatch, $special.threshold);\r\n        },\r\n        threshold: 100\r\n    };\r\n\r\n    // http://www.hardcode.nl/subcategory_1/article_317-array-shuffle-function\r\n    Array.prototype.shuffle = function() {\r\n        var i = this.length,\r\n            p, t;\r\n        while (i--) {\r\n            p = Math.floor(Math.random() * i);\r\n            t = this[i];\r\n            this[i] = this[p];\r\n            this[p] = t;\r\n        }\r\n        return this;\r\n    };\r\n\r\n    // HTML5 PageVisibility API\r\n    // http://www.html5rocks.com/en/tutorials/pagevisibility/intro/\r\n    // by Joe Marini (@joemarini)\r\n    function getHiddenProp() {\r\n        var prefixes = ['webkit', 'moz', 'ms', 'o'];\r\n\r\n        // if 'hidden' is natively supported just return it\r\n        if ('hidden' in document) return 'hidden';\r\n\r\n        // otherwise loop over all the known prefixes until we find one\r\n        for (var i = 0; i < prefixes.length; i++) {\r\n            if ((prefixes[i] + 'Hidden') in document)\r\n                return prefixes[i] + 'Hidden';\r\n        }\r\n\r\n        // otherwise it's not supported\r\n        return null;\r\n    }\r\n\r\n    function isHidden() {\r\n        var prop = getHiddenProp();\r\n        if (!prop) return false;\r\n\r\n        return document[prop];\r\n    }\r\n\r\n    function isEmpty(obj) {\r\n        return Object.keys(obj).length === 0;\r\n    }\r\n\r\n    // global\r\n    var $window = $(window),\r\n        Modernizr = window.Modernizr;\r\n\r\n    $.GridRotator = function(options, element) {\r\n\r\n        this.$el = $(element);\r\n        if (Modernizr.backgroundsize) {\r\n\r\n            var self = this;\r\n            this.$el.addClass('ri-grid-loading');\r\n            this._init(options);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // the options\r\n    $.GridRotator.defaults = {\r\n        // number of rows\r\n        rows: 4,\r\n        // number of columns \r\n        columns: 10,\r\n        w992: {\r\n            rows: 3,\r\n            columns: 8\r\n        },\r\n        w768: {\r\n            rows: 3,\r\n            columns: 7\r\n        },\r\n        w480: {\r\n            rows: 3,\r\n            columns: 5\r\n        },\r\n        w320: {\r\n            rows: 2,\r\n            columns: 4\r\n        },\r\n        w240: {\r\n            rows: 2,\r\n            columns: 3\r\n        },\r\n        // step: number of items that are replaced at the same time\r\n        // random || [some number]\r\n        // note: for performance issues, the number \"can't\" be > options.maxStep\r\n        step: 'random',\r\n        // change it as you wish..\r\n        maxStep: 3,\r\n        // prevent user to click the items\r\n        preventClick: true,\r\n        // animation type\r\n        // showHide || fadeInOut || \r\n        // slideLeft || slideRight || slideTop || slideBottom || \r\n        // rotateBottom || rotateLeft || rotateRight || rotateTop || \r\n        // scale ||\r\n        // rotate3d ||\r\n        // rotateLeftScale || rotateRightScale || rotateTopScale || rotateBottomScale || \r\n        // random\r\n        animType: 'random',\r\n        // animation speed\r\n        animSpeed: 800,\r\n        // animation easings\r\n        animEasingOut: 'linear',\r\n        animEasingIn: 'linear',\r\n        // the item(s) will be replaced every 3 seconds\r\n        // note: for performance issues, the time \"can't\" be < 300 ms\r\n        interval: 3000,\r\n        // if false the animations will not start\r\n        // use false if onhover is true for example\r\n        slideshow: true,\r\n        // if true the items will switch when hovered\r\n        onhover: false,\r\n        // ids of elements that shouldn't change\r\n        nochange: []\r\n    };\r\n\r\n    $.GridRotator.prototype = {\r\n\r\n        _init: function(options) {\r\n\r\n            // options\r\n            this.options = $.extend(true, {}, $.GridRotator.defaults, options);\r\n            // cache some elements + variables\r\n            this._config();\r\n\r\n        },\r\n        _config: function() {\r\n\r\n            var self = this,\r\n                transEndEventNames = {\r\n                    'WebkitTransition': 'webkitTransitionEnd',\r\n                    'MozTransition': 'transitionend',\r\n                    'OTransition': 'oTransitionEnd',\r\n                    'msTransition': 'MSTransitionEnd',\r\n                    'transition': 'transitionend'\r\n                };\r\n\r\n            // support CSS transitions and 3d transforms\r\n            this.supportTransitions = Modernizr.csstransitions;\r\n            this.supportTransforms3D = Modernizr.csstransforms3d;\r\n\r\n            this.transEndEventName = transEndEventNames[Modernizr.prefixed('transition')] + '.gridrotator';\r\n\r\n            // all animation types for the random option\r\n            this.animTypes = this.supportTransforms3D ? [\r\n                'fadeInOut',\r\n                'slideLeft',\r\n                'slideRight',\r\n                'slideTop',\r\n                'slideBottom',\r\n                'rotateLeft',\r\n                'rotateRight',\r\n                'rotateTop',\r\n                'rotateBottom',\r\n                // 'scale', \r\n                'rotate3d',\r\n                // 'rotateLeftScale', \r\n                // 'rotateRightScale', \r\n                // 'rotateTopScale', \r\n                // 'rotateBottomScale' \r\n            ] :\r\n                ['fadeInOut', 'slideLeft', 'slideRight', 'slideTop', 'slideBottom'];\r\n\r\n            this.animType = this.options.animType;\r\n\r\n            if (this.animType !== 'random' && !this.supportTransforms3D && $.inArray(this.animType, this.animTypes) === -1 && this.animType !== 'showHide') {\r\n\r\n                // fallback to 'fadeInOut' if user sets a type which is not supported\r\n                this.animType = 'fadeInOut';\r\n\r\n            }\r\n\r\n            this.animTypesTotal = this.animTypes.length;\r\n\r\n            // the <ul> where the items are placed\r\n            this.$list = this.$el.children('ul');\r\n            // remove images and add background-image to anchors\r\n            // preload the images before\r\n            var loaded = 0,\r\n                $imgs = this.$list.find('img'),\r\n                count = $imgs.length;\r\n\r\n            $imgs.each(function() {\r\n\r\n                var $img = $(this),\r\n                    src = $img.attr('src');\r\n\r\n                $('<img/>').load(function() {\r\n\r\n                    ++loaded;\r\n                    $img.parent().css('background-image', 'url(' + src + ')');\r\n\r\n                    if (loaded === count) {\r\n\r\n                        $imgs.remove();\r\n                        self.$el.removeClass('ri-grid-loading');\r\n                        // the items\r\n                        self.$items = self.$list.children('li');\r\n                        // make a copy of the items\r\n                        self.$itemsCache = self.$items.clone();\r\n                        // total number of items\r\n                        self.itemsTotal = self.$items.length;\r\n                        // the items that will be out of the grid\r\n                        // actually the item's child (anchor element)\r\n                        self.outItems = [];\r\n                        self._layout(function() {\r\n                            self._initEvents();\r\n                        });\r\n                        // replace [options.step] items after [options.interval] time\r\n                        // the items that go out are randomly chosen, while the ones that get in\r\n                        // follow a \"First In First Out\" logic\r\n                        self._start();\r\n\r\n                    }\r\n\r\n                }).attr('src', src)\r\n\r\n            });\r\n\r\n        },\r\n        _layout: function(callback) {\r\n\r\n            var self = this;\r\n\r\n            // sets the grid dimentions based on the container's width\r\n            this._setGridDim();\r\n\r\n            // reset\r\n            this.$list.empty();\r\n            this.$items = this.$itemsCache.clone().appendTo(this.$list);\r\n\r\n            var $outItems = this.$items.filter(':gt(' + (this.showTotal - 1) + ')'),\r\n                $outAItems = $outItems.children('a');\r\n\r\n            this.outItems.length = 0;\r\n\r\n            $outAItems.each(function(i) {\r\n                self.outItems.push($(this));\r\n            });\r\n\r\n            $outItems.remove();\r\n\r\n            // container's width\r\n            var containerWidth = (document.defaultView) ? parseInt(document.defaultView.getComputedStyle(this.$el.get(0), null).width) : this.$el.width(),\r\n                // item's width\r\n                itemWidth = Math.floor(containerWidth / this.columns),\r\n                // calculate gap\r\n                gapWidth = containerWidth - (this.columns * Math.floor(itemWidth));\r\n\r\n            for (var i = 0; i < this.rows; ++i) {\r\n\r\n                for (var j = 0; j < this.columns; ++j) {\r\n\r\n                    var idx = this.columns * i + j,\r\n                        $item = this.$items.eq(idx);\r\n\r\n                    $item.css({\r\n                        width: j < Math.floor(gapWidth) ? itemWidth + 1 : itemWidth,\r\n                        height: itemWidth\r\n                    });\r\n\r\n                    if ($.inArray(idx, this.options.nochange) !== -1) {\r\n                        $item.addClass('ri-nochange').data('nochange', true);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (this.options.preventClick) {\r\n\r\n                this.$items.children().css('cursor', 'default').on('click.gridrotator', false);\r\n\r\n            }\r\n\r\n            if (callback) {\r\n                callback.call();\r\n            }\r\n\r\n        },\r\n        // set the grid rows and columns\r\n        _setGridDim: function() {\r\n\r\n            // container's width\r\n            var c_w = this.$el.width();\r\n\r\n            // we will choose the number of rows/columns according to the container's width and the values set in the plugin options \r\n            switch (true) {\r\n                case (c_w < 240):\r\n                    this.rows = this.options.w240.rows;\r\n                    this.columns = this.options.w240.columns;\r\n                    break;\r\n                case (c_w < 320):\r\n                    this.rows = this.options.w320.rows;\r\n                    this.columns = this.options.w320.columns;\r\n                    break;\r\n                case (c_w < 480):\r\n                    this.rows = this.options.w480.rows;\r\n                    this.columns = this.options.w480.columns;\r\n                    break;\r\n                case (c_w < 768):\r\n                    this.rows = this.options.w768.rows;\r\n                    this.columns = this.options.w768.columns;\r\n                    break;\r\n                case (c_w < 992):\r\n                    this.rows = this.options.w992.rows;\r\n                    this.columns = this.options.w992.columns;\r\n                    break;\r\n                default:\r\n                    this.rows = this.options.rows;\r\n                    this.columns = this.options.columns;\r\n                    break;\r\n            }\r\n\r\n            this.showTotal = this.rows * this.columns;\r\n\r\n        },\r\n        // init window resize event\r\n        _initEvents: function() {\r\n\r\n            var self = this;\r\n\r\n            $window.on('debouncedresize.gridrotator', function() {\r\n                self._layout();\r\n            });\r\n\r\n            // use the property name to generate the prefixed event name\r\n            var visProp = getHiddenProp();\r\n\r\n            // HTML5 PageVisibility API\r\n            // http://www.html5rocks.com/en/tutorials/pagevisibility/intro/\r\n            // by Joe Marini (@joemarini)\r\n            if (visProp) {\r\n\r\n                var evtname = visProp.replace(/[H|h]idden/, '') + 'visibilitychange';\r\n                document.addEventListener(evtname, function() {\r\n                    self._visChange();\r\n                });\r\n\r\n            }\r\n\r\n            if (!Modernizr.touch && this.options.onhover) {\r\n\r\n                self.$items.on('mouseenter.gridrotator', function() {\r\n\r\n                    var $item = $(this);\r\n                    if (!$item.data('active') && !$item.data('hovered') && !$item.data('nochange')) {\r\n                        $item.data('hovered', true);\r\n                        self._replace($item);\r\n                    }\r\n\r\n                }).on('mouseleave.gridrotator', function() {\r\n\r\n                    $(this).data('hovered', false);\r\n\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n        _visChange: function() {\r\n\r\n            isHidden() ? clearTimeout(this.playtimeout) : this._start();\r\n\r\n        },\r\n        // start rotating elements\r\n        _start: function() {\r\n\r\n            if (this.showTotal < this.itemsTotal && this.options.slideshow) {\r\n                this._showNext();\r\n            }\r\n\r\n        },\r\n        // get which type of animation\r\n        _getAnimType: function() {\r\n\r\n            return this.animType === 'random' ? this.animTypes[Math.floor(Math.random() * this.animTypesTotal)] : this.animType;\r\n\r\n        },\r\n        // get css properties for the transition effect\r\n        _getAnimProperties: function($out) {\r\n\r\n            var startInProp = {},\r\n                startOutProp = {},\r\n                endInProp = {},\r\n                endOutProp = {},\r\n                animType = this._getAnimType(),\r\n                speed, delay = 0;\r\n\r\n            switch (animType) {\r\n\r\n                case 'showHide':\r\n\r\n                    speed = 0;\r\n                    endOutProp.opacity = 0;\r\n                    break;\r\n\r\n                case 'fadeInOut':\r\n\r\n                    endOutProp.opacity = 0;\r\n                    break;\r\n\r\n                case 'slideLeft':\r\n\r\n                    startInProp.left = $out.width();\r\n                    endInProp.left = 0;\r\n                    endOutProp.left = -$out.width();\r\n                    break;\r\n\r\n                case 'slideRight':\r\n\r\n                    startInProp.left = -$out.width();\r\n                    endInProp.left = 0;\r\n                    endOutProp.left = $out.width();\r\n                    break;\r\n\r\n                case 'slideTop':\r\n\r\n                    startInProp.top = $out.height();\r\n                    endInProp.top = 0;\r\n                    endOutProp.top = -$out.height();\r\n                    break;\r\n\r\n                case 'slideBottom':\r\n\r\n                    startInProp.top = -$out.height();\r\n                    endInProp.top = 0;\r\n                    endOutProp.top = $out.height();\r\n                    break;\r\n\r\n                case 'rotateLeft':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'rotateY(90deg)';\r\n                    endInProp.transform = 'rotateY(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'rotateY(-90deg)';\r\n                    break;\r\n\r\n                case 'rotateRight':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'rotateY(-90deg)';\r\n                    endInProp.transform = 'rotateY(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'rotateY(90deg)';\r\n                    break;\r\n\r\n                case 'rotateTop':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'rotateX(90deg)';\r\n                    endInProp.transform = 'rotateX(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'rotateX(-90deg)';\r\n                    break;\r\n\r\n                case 'rotateBottom':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'rotateX(-90deg)';\r\n                    endInProp.transform = 'rotateX(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'rotateX(90deg)';\r\n                    break;\r\n\r\n                case 'scale':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'scale(0)';\r\n                    startOutProp.transform = 'scale(1)';\r\n                    endInProp.transform = 'scale(1)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'scale(0)';\r\n                    break;\r\n\r\n                case 'rotateLeftScale':\r\n\r\n                    startOutProp.transform = 'scale(1)';\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'scale(0.3) rotateY(90deg)';\r\n                    endInProp.transform = 'scale(1) rotateY(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'scale(0.3) rotateY(-90deg)';\r\n                    break;\r\n\r\n                case 'rotateRightScale':\r\n\r\n                    startOutProp.transform = 'scale(1)';\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'scale(0.3) rotateY(-90deg)';\r\n                    endInProp.transform = 'scale(1) rotateY(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'scale(0.3) rotateY(90deg)';\r\n                    break;\r\n\r\n                case 'rotateTopScale':\r\n\r\n                    startOutProp.transform = 'scale(1)';\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'scale(0.3) rotateX(90deg)';\r\n                    endInProp.transform = 'scale(1) rotateX(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'scale(0.3) rotateX(-90deg)';\r\n                    break;\r\n\r\n                case 'rotateBottomScale':\r\n\r\n                    startOutProp.transform = 'scale(1)';\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'scale(0.3) rotateX(-90deg)';\r\n                    endInProp.transform = 'scale(1) rotateX(0deg)';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'scale(0.3) rotateX(90deg)';\r\n                    break;\r\n\r\n                case 'rotate3d':\r\n\r\n                    speed = this.options.animSpeed / 2;\r\n                    startInProp.transform = 'rotate3d( 1, 1, 0, 90deg )';\r\n                    endInProp.transform = 'rotate3d( 1, 1, 0, 0deg )';\r\n                    delay = speed;\r\n                    endOutProp.transform = 'rotate3d( 1, 1, 0, -90deg )';\r\n                    break;\r\n\r\n            }\r\n\r\n            return {\r\n                startInProp: startInProp,\r\n                startOutProp: startOutProp,\r\n                endInProp: endInProp,\r\n                endOutProp: endOutProp,\r\n                delay: delay,\r\n                animSpeed: speed != undefined ? speed : this.options.animSpeed\r\n            };\r\n\r\n        },\r\n        // show next [option.step] elements\r\n        _showNext: function(time) {\r\n\r\n            var self = this;\r\n\r\n            clearTimeout(this.playtimeout);\r\n\r\n            this.playtimeout = setTimeout(function() {\r\n\r\n                var step = self.options.step,\r\n                    max = self.options.maxStep,\r\n                    min = 1;\r\n\r\n                if (max > self.showTotal) {\r\n                    max = self.showTotal;\r\n                }\r\n\r\n                // number of items to swith at this point of time\r\n                var nmbOut = step === 'random' ? Math.floor(Math.random() * max + min) : Math.min(Math.abs(step), max),\r\n                    // array with random indexes. These will be the indexes of the items we will replace\r\n                    randArr = self._getRandom(nmbOut, self.showTotal);\r\n\r\n                for (var i = 0; i < nmbOut; ++i) {\r\n\r\n                    // element to go out\r\n                    var $out = self.$items.eq(randArr[i]);\r\n\r\n                    // if element is active, which means it is currently animating,\r\n                    // then we need to get different positions.. \r\n                    if ($out.data('active') || $out.data('nochange')) {\r\n\r\n                        // one of the items is active, call again..\r\n                        self._showNext(1);\r\n                        return false;\r\n\r\n                    }\r\n\r\n                    self._replace($out);\r\n\r\n                }\r\n\r\n                // again and again..\r\n                self._showNext();\r\n\r\n            }, time || Math.max(Math.abs(this.options.interval), 300));\r\n\r\n        },\r\n        _replace: function($out) {\r\n\r\n            $out.data('active', true);\r\n\r\n            var self = this,\r\n                $outA = $out.children('a:last'),\r\n                newElProp = {\r\n                    width: $outA.width(),\r\n                    height: $outA.height()\r\n                };\r\n\r\n            // element stays active\r\n            $out.data('active', true);\r\n\r\n            // get the element (anchor) that will go in (first one inserted in this.outItems)\r\n            var $inA = this.outItems.shift();\r\n\r\n            // save element that went out\r\n            this.outItems.push($outA.clone().css('transition', 'none'));\r\n\r\n            // prepend in element\r\n            $inA.css(newElProp).prependTo($out);\r\n\r\n            var animProp = this._getAnimProperties($outA);\r\n\r\n            $inA.css(animProp.startInProp);\r\n            $outA.css(animProp.startOutProp);\r\n\r\n            this._setTransition($inA, 'all', animProp.animSpeed, animProp.delay, this.options.animEasingIn);\r\n            this._setTransition($outA, 'all', animProp.animSpeed, 0, this.options.animEasingOut);\r\n\r\n            this._applyTransition($inA, animProp.endInProp, animProp.animSpeed, function() {\r\n\r\n                var $el = $(this),\r\n                    t = animProp.animSpeed === self.options.animSpeed && isEmpty(animProp.endInProp) ? animProp.animSpeed : 0;\r\n\r\n                setTimeout(function() {\r\n\r\n                    if (self.supportTransitions) {\r\n                        $el.off(self.transEndEventName);\r\n                    }\r\n\r\n                    $el.next().remove();\r\n                    $el.parent().data('active', false);\r\n\r\n                }, t);\r\n\r\n            }, animProp.animSpeed === 0 || isEmpty(animProp.endInProp));\r\n            this._applyTransition($outA, animProp.endOutProp, animProp.animSpeed);\r\n\r\n        },\r\n        _getRandom: function(cnt, limit) {\r\n\r\n            var randArray = [];\r\n\r\n            for (var i = 0; i < limit; ++i) {\r\n                randArray.push(i)\r\n            }\r\n\r\n            return randArray.shuffle().slice(0, cnt);\r\n\r\n        },\r\n        _setTransition: function(el, prop, speed, delay, easing) {\r\n\r\n            setTimeout(function() {\r\n                el.css('transition', prop + ' ' + speed + 'ms ' + delay + 'ms ' + easing);\r\n            }, 25);\r\n\r\n        },\r\n        _applyTransition: function(el, styleCSS, speed, fncomplete, force) {\r\n\r\n            var self = this;\r\n            setTimeout(function() {\r\n                $.fn.applyStyle = self.supportTransitions ? $.fn.css : $.fn.animate;\r\n\r\n                if (fncomplete && self.supportTransitions) {\r\n\r\n                    el.on(self.transEndEventName, fncomplete);\r\n\r\n                    if (force) {\r\n                        fncomplete.call(el);\r\n                    }\r\n\r\n                }\r\n\r\n                fncomplete = fncomplete || function() {\r\n                    return false;\r\n                };\r\n\r\n                el.stop().applyStyle(styleCSS, $.extend(true, [], {\r\n                    duration: speed + 'ms',\r\n                    complete: fncomplete\r\n                }));\r\n            }, 25);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    var logError = function(message) {\r\n\r\n        if (window.console) {\r\n\r\n            window.console.error(message);\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.fn.gridrotator = function(options) {\r\n\r\n        var instance = $.data(this, 'gridrotator');\r\n\r\n        if (typeof options === 'string') {\r\n\r\n            var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n            this.each(function() {\r\n\r\n                if (!instance) {\r\n\r\n                    logError(\"cannot call methods on gridrotator prior to initialization; \" +\r\n                        \"attempted to call method '\" + options + \"'\");\r\n                    return;\r\n\r\n                }\r\n\r\n                if (!$.isFunction(instance[options]) || options.charAt(0) === \"_\") {\r\n\r\n                    logError(\"no such method '\" + options + \"' for gridrotator instance\");\r\n                    return;\r\n\r\n                }\r\n\r\n                instance[options].apply(instance, args);\r\n\r\n            });\r\n\r\n        } else {\r\n\r\n            this.each(function() {\r\n\r\n                if (instance) {\r\n\r\n                    instance._init();\r\n\r\n                } else {\r\n\r\n                    instance = $.data(this, 'gridrotator', new $.GridRotator(options, this));\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n        return instance;\r\n\r\n    };\r\n\r\n})(jQuery, window);","/**!\n * MixItUp v2.1.9\n *\n * @copyright Copyright 2015 KunkaLabs Limited.\n * @author    KunkaLabs Limited.\n * @link      https://mixitup.kunkalabs.com\n *\n * @license   Commercial use requires a commercial license.\n *            https://mixitup.kunkalabs.com/licenses/\n *\n *            Non-commercial use permitted under terms of CC-BY-NC license.\n *            http://creativecommons.org/licenses/by-nc/3.0/\n */\n\n(function($, undf){\n\t\n\t/**\n\t * MixItUp Constructor Function\n\t * @constructor\n\t * @extends jQuery\n\t */\n\t\n\t$.MixItUp = function(){\n\t\tvar self = this;\n\t\t\n\t\tself._execAction('_constructor', 0);\n\t\t\n\t\t$.extend(self, {\n\t\t\t\n\t\t\t/* Public Properties\n\t\t\t---------------------------------------------------------------------- */\n\t\t\t\n\t\t\tselectors: {\n\t\t\t\ttarget: '.mix',\n\t\t\t\tfilter: '.filter',\n\t\t\t\tsort: '.sort'\n\t\t\t},\n\t\t\t\t\n\t\t\tanimation: {\n\t\t\t\tenable: true,\n\t\t\t\teffects: 'fade scale',\n\t\t\t\tduration: 600,\n\t\t\t\teasing: 'ease',\n\t\t\t\tperspectiveDistance: '3000',\n\t\t\t\tperspectiveOrigin: '50% 50%',\n\t\t\t\tqueue: true,\n\t\t\t\tqueueLimit: 1,\n\t\t\t\tanimateChangeLayout: false,\n\t\t\t\tanimateResizeContainer: true,\n\t\t\t\tanimateResizeTargets: false,\n\t\t\t\tstaggerSequence: false,\n\t\t\t\treverseOut: false\n\t\t\t},\n\t\t\t\t\n\t\t\tcallbacks: {\n\t\t\t\tonMixLoad: false,\n\t\t\t\tonMixStart: false,\n\t\t\t\tonMixBusy: false,\n\t\t\t\tonMixEnd: false,\n\t\t\t\tonMixFail: false,\n\t\t\t\t_user: false\n\t\t\t},\n\t\t\t\t\n\t\t\tcontrols: {\n\t\t\t\tenable: true,\n\t\t\t\tlive: false,\n\t\t\t\ttoggleFilterButtons: false,\n\t\t\t\ttoggleLogic: 'or',\n\t\t\t\tactiveClass: 'active'\n\t\t\t},\n\n\t\t\tlayout: {\n\t\t\t\tdisplay: 'inline-block',\n\t\t\t\tcontainerClass: '',\n\t\t\t\tcontainerClassFail: 'fail'\n\t\t\t},\n\t\t\t\n\t\t\tload: {\n\t\t\t\tfilter: 'all',\n\t\t\t\tsort: false\n\t\t\t},\n\t\t\t\n\t\t\t/* Private Properties\n\t\t\t---------------------------------------------------------------------- */\n\t\t\t\t\n\t\t\t_$body: null,\n\t\t\t_$container: null,\n\t\t\t_$targets: null,\n\t\t\t_$parent: null,\n\t\t\t_$sortButtons: null,\n\t\t\t_$filterButtons: null,\n\t\t\n\t\t\t_suckMode: false,\n\t\t\t_mixing: false,\n\t\t\t_sorting: false,\n\t\t\t_clicking: false,\n\t\t\t_loading: true,\n\t\t\t_changingLayout: false,\n\t\t\t_changingClass: false,\n\t\t\t_changingDisplay: false,\n\t\t\t\n\t\t\t_origOrder: [],\n\t\t\t_startOrder: [],\n\t\t\t_newOrder: [],\n\t\t\t_activeFilter: null,\n\t\t\t_toggleArray: [],\n\t\t\t_toggleString: '',\n\t\t\t_activeSort: 'default:asc',\n\t\t\t_newSort: null,\n\t\t\t_startHeight: null,\n\t\t\t_newHeight: null,\n\t\t\t_incPadding: true,\n\t\t\t_newDisplay: null,\n\t\t\t_newClass: null,\n\t\t\t_targetsBound: 0,\n\t\t\t_targetsDone: 0,\n\t\t\t_queue: [],\n\t\t\t\t\n\t\t\t_$show: $(),\n\t\t\t_$hide: $()\n\t\t});\n\t\n\t\tself._execAction('_constructor', 1);\n\t};\n\t\n\t/**\n\t * MixItUp Prototype\n\t * @override\n\t */\n\t\n\t$.MixItUp.prototype = {\n\t\tconstructor: $.MixItUp,\n\t\t\n\t\t/* Static Properties\n\t\t---------------------------------------------------------------------- */\n\t\t\n\t\t_instances: {},\n\t\t_handled: {\n\t\t\t_filter: {},\n\t\t\t_sort: {}\n\t\t},\n\t\t_bound: {\n\t\t\t_filter: {},\n\t\t\t_sort: {}\n\t\t},\n\t\t_actions: {},\n\t\t_filters: {},\n\t\t\n\t\t/* Static Methods\n\t\t---------------------------------------------------------------------- */\n\t\t\n\t\t/**\n\t\t * Extend\n\t\t * @since 2.1.0\n\t\t * @param {object} new properties/methods\n\t\t * @extends {object} prototype\n\t\t */\n\t\t\n\t\textend: function(extension){\n\t\t\tfor(var key in extension){\n\t\t\t\t$.MixItUp.prototype[key] = extension[key];\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Add Action\n\t\t * @since 2.1.0\n\t\t * @param {string} hook name\n\t\t * @param {string} namespace\n\t\t * @param {function} function to execute\n\t\t * @param {number} priority\n\t\t * @extends {object} $.MixItUp.prototype._actions\n\t\t */\n\t\t\n\t\taddAction: function(hook, name, func, priority){\n\t\t\t$.MixItUp.prototype._addHook('_actions', hook, name, func, priority);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Add Filter\n\t\t * @since 2.1.0\n\t\t * @param {string} hook name\n\t\t * @param {string} namespace\n\t\t * @param {function} function to execute\n\t\t * @param {number} priority\n\t\t * @extends {object} $.MixItUp.prototype._filters\n\t\t */\n\t\t\n\t\taddFilter: function(hook, name, func, priority){\n\t\t\t$.MixItUp.prototype._addHook('_filters', hook, name, func, priority);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Add Hook\n\t\t * @since 2.1.0\n\t\t * @param {string} type of hook\n\t\t * @param {string} hook name\n\t\t * @param {function} function to execute\n\t\t * @param {number} priority\n\t\t * @extends {object} $.MixItUp.prototype._filters\n\t\t */\n\t\t\n\t\t_addHook: function(type, hook, name, func, priority){\n\t\t\tvar collection = $.MixItUp.prototype[type],\n\t\t\t\tobj = {};\n\t\t\t\t\n\t\t\tpriority = (priority === 1 || priority === 'post') ? 'post' : 'pre';\n\t\t\t\t\n\t\t\tobj[hook] = {};\n\t\t\tobj[hook][priority] = {};\n\t\t\tobj[hook][priority][name] = func;\n\n\t\t\t$.extend(true, collection, obj);\n\t\t},\n\t\t\n\t\t\n\t\t/* Private Methods\n\t\t---------------------------------------------------------------------- */\n\t\t\n\t\t/**\n\t\t * Initialise\n\t\t * @since 2.0.0\n\t\t * @param {object} domNode\n\t\t * @param {object} config\n\t\t */\n\t\t\n\t\t_init: function(domNode, config){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_init', 0, arguments);\n\t\t\t\n\t\t\tconfig && $.extend(true, self, config);\n\t\t\t\n\t\t\tself._$body = $('body');\n\t\t\tself._domNode = domNode;\n\t\t\tself._$container = $(domNode);\n\t\t\tself._$container.addClass(self.layout.containerClass);\n\t\t\tself._id = domNode.id;\n\t\t\t\n\t\t\tself._platformDetect();\n\t\t\t\n\t\t\tself._brake = self._getPrefixedCSS('transition', 'none');\n\t\t\t\n\t\t\tself._refresh(true);\n\t\t\t\n\t\t\tself._$parent = self._$targets.parent().length ? self._$targets.parent() : self._$container;\n\t\t\t\n\t\t\tif(self.load.sort){\n\t\t\t\tself._newSort = self._parseSort(self.load.sort);\n\t\t\t\tself._newSortString = self.load.sort;\n\t\t\t\tself._activeSort = self.load.sort;\n\t\t\t\tself._sort();\n\t\t\t\tself._printSort();\n\t\t\t}\n\t\t\t\n\t\t\tself._activeFilter = self.load.filter === 'all' ? \n\t\t\t\tself.selectors.target : \n\t\t\t\tself.load.filter === 'none' ?\n\t\t\t\t\t'' :\n\t\t\t\t\tself.load.filter;\n\t\t\t\n\t\t\tself.controls.enable && self._bindHandlers();\n\t\t\t\n\t\t\tif(self.controls.toggleFilterButtons){\n\t\t\t\tself._buildToggleArray();\n\t\t\t\t\n\t\t\t\tfor(var i = 0; i < self._toggleArray.length; i++){\n\t\t\t\t\tself._updateControls({filter: self._toggleArray[i], sort: self._activeSort}, true);\n\t\t\t\t};\n\t\t\t} else if(self.controls.enable){\n\t\t\t\tself._updateControls({filter: self._activeFilter, sort: self._activeSort});\n\t\t\t}\n\t\t\t\n\t\t\tself._filter();\n\t\t\t\n\t\t\tself._init = true;\n\t\t\t\n\t\t\tself._$container.data('mixItUp',self);\n\t\t\t\n\t\t\tself._execAction('_init', 1, arguments);\n\t\t\t\n\t\t\tself._buildState();\n\t\t\t\n\t\t\tself._$targets.css(self._brake);\n\t\t\n\t\t\tself._goMix(self.animation.enable);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Platform Detect\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_platformDetect: function(){\n\t\t\tvar self = this,\n\t\t\t\tvendorsTrans = ['Webkit', 'Moz', 'O', 'ms'],\n\t\t\t\tvendorsRAF = ['webkit', 'moz'],\n\t\t\t\tchrome = window.navigator.appVersion.match(/Chrome\\/(\\d+)\\./) || false,\n\t\t\t\tff = typeof InstallTrigger !== 'undefined',\n\t\t\t\tprefix = function(el){\n\t\t\t\t\tfor (var i = 0; i < vendorsTrans.length; i++){\n\t\t\t\t\t\tif (vendorsTrans[i] + 'Transition' in el.style){\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tprefix: '-'+vendorsTrans[i].toLowerCase()+'-',\n\t\t\t\t\t\t\t\tvendor: vendorsTrans[i]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t}; \n\t\t\t\t\treturn 'transition' in el.style ? '' : false;\n\t\t\t\t},\n\t\t\t\ttransPrefix = prefix(self._domNode);\n\t\t\t\t\n\t\t\tself._execAction('_platformDetect', 0);\n\t\t\t\n\t\t\tself._chrome = chrome ? parseInt(chrome[1], 10) : false;\n\t\t\tself._ff = ff ? parseInt(window.navigator.userAgent.match(/rv:([^)]+)\\)/)[1]) : false;\n\t\t\tself._prefix = transPrefix.prefix;\n\t\t\tself._vendor = transPrefix.vendor;\n\t\t\tself._suckMode = window.atob && self._prefix ? false : true;\n\n\t\t\tself._suckMode && (self.animation.enable = false);\n\t\t\t(self._ff && self._ff <= 4) && (self.animation.enable = false);\n\t\t\t\n\t\t\t/* Polyfills\n\t\t\t---------------------------------------------------------------------- */\n\t\t\t\n\t\t\t/**\n\t\t\t * window.requestAnimationFrame\n\t\t\t */\n\t\t\t\n\t\t\tfor(var x = 0; x < vendorsRAF.length && !window.requestAnimationFrame; x++){\n\t\t\t\twindow.requestAnimationFrame = window[vendorsRAF[x]+'RequestAnimationFrame'];\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Object.getPrototypeOf\n\t\t\t */\n\n\t\t\tif(typeof Object.getPrototypeOf !== 'function'){\n\t\t\t\tif(typeof 'test'.__proto__ === 'object'){\n\t\t\t\t\tObject.getPrototypeOf = function(object){\n\t\t\t\t\t\treturn object.__proto__;\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tObject.getPrototypeOf = function(object){\n\t\t\t\t\t\treturn object.constructor.prototype;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Element.nextElementSibling\n\t\t\t */\n\t\t\t\n\t\t\tif(self._domNode.nextElementSibling === undf){\n\t\t\t\tObject.defineProperty(Element.prototype, 'nextElementSibling',{\n\t\t\t\t\tget: function(){\n\t\t\t\t\t\tvar el = this.nextSibling;\n\t\t\t\t\t\t\n\t\t\t\t\t\twhile(el){\n\t\t\t\t\t\t\tif(el.nodeType ===1){\n\t\t\t\t\t\t\t\treturn el;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tel = el.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_platformDetect', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Refresh\n\t\t * @since 2.0.0\n\t\t * @param {boolean} init\n\t\t * @param {boolean} force\n\t\t */\n\t\t\n\t\t_refresh: function(init, force){\n\t\t\tvar self = this;\n\t\t\t\t\n\t\t\tself._execAction('_refresh', 0, arguments);\n\n\t\t\tself._$targets = self._$container.find(self.selectors.target);\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$targets.length; i++){\n\t\t\t\tvar target = self._$targets[i];\n\t\t\t\t\t\n\t\t\t\tif(target.dataset === undf || force){\n\t\t\t\t\t\t\n\t\t\t\t\ttarget.dataset = {};\n\t\t\t\t\t\n\t\t\t\t\tfor(var j = 0; j < target.attributes.length; j++){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar attr = target.attributes[j],\n\t\t\t\t\t\t\tname = attr.name,\n\t\t\t\t\t\t\tval = attr.value;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tif(name.indexOf('data-') > -1){\n\t\t\t\t\t\t\tvar dataName = self._helpers._camelCase(name.substring(5,name.length));\n\t\t\t\t\t\t\ttarget.dataset[dataName] = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(target.mixParent === undf){\n\t\t\t\t\ttarget.mixParent = self._id;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(\n\t\t\t\t(self._$targets.length && init) ||\n\t\t\t\t(!self._origOrder.length && self._$targets.length)\n\t\t\t){\n\t\t\t\tself._origOrder = [];\n\t\t\t\t\n\t\t\t\tfor(var i = 0; i < self._$targets.length; i++){\n\t\t\t\t\tvar target = self._$targets[i];\n\t\t\t\t\t\n\t\t\t\t\tself._origOrder.push(target);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_refresh', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Bind Handlers\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_bindHandlers: function(){\n\t\t\tvar self = this,\n\t\t\t\tfilters = $.MixItUp.prototype._bound._filter,\n\t\t\t\tsorts = $.MixItUp.prototype._bound._sort;\n\t\t\t\n\t\t\tself._execAction('_bindHandlers', 0);\n\t\t\t\n\t\t\tif(self.controls.live){\n\t\t\t\tself._$body\n\t\t\t\t\t.on('click.mixItUp.'+self._id, self.selectors.sort, function(){\n\t\t\t\t\t\tself._processClick($(this), 'sort');\n\t\t\t\t\t})\n\t\t\t\t\t.on('click.mixItUp.'+self._id, self.selectors.filter, function(){\n\t\t\t\t\t\tself._processClick($(this), 'filter');\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself._$sortButtons = $(self.selectors.sort);\n\t\t\t\tself._$filterButtons = $(self.selectors.filter);\n\t\t\t\t\n\t\t\t\tself._$sortButtons.on('click.mixItUp.'+self._id, function(){\n\t\t\t\t\tself._processClick($(this), 'sort');\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tself._$filterButtons.on('click.mixItUp.'+self._id, function(){\n\t\t\t\t\tself._processClick($(this), 'filter');\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfilters[self.selectors.filter] = (filters[self.selectors.filter] === undf) ? 1 : filters[self.selectors.filter] + 1;\n\t\t\tsorts[self.selectors.sort] = (sorts[self.selectors.sort] === undf) ? 1 : sorts[self.selectors.sort] + 1;\n\t\t\t\n\t\t\tself._execAction('_bindHandlers', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Process Click\n\t\t * @since 2.0.0\n\t\t * @param {object} $button\n\t\t * @param {string} type\n\t\t */\n\t\t\n\t\t_processClick: function($button, type){\n\t\t\tvar self = this,\n\t\t\t\ttrackClick = function($button, type, off){\n\t\t\t\t\tvar proto = $.MixItUp.prototype;\n\t\t\t\t\t\t\n\t\t\t\t\tproto._handled['_'+type][self.selectors[type]] = (proto._handled['_'+type][self.selectors[type]] === undf) ? \n\t\t\t\t\t\t1 : \n\t\t\t\t\t\tproto._handled['_'+type][self.selectors[type]] + 1;\n\n\t\t\t\t\tif(proto._handled['_'+type][self.selectors[type]] === proto._bound['_'+type][self.selectors[type]]){\n\t\t\t\t\t\t$button[(off ? 'remove' : 'add')+'Class'](self.controls.activeClass);\n\t\t\t\t\t\tdelete proto._handled['_'+type][self.selectors[type]];\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\tself._execAction('_processClick', 0, arguments);\n\t\t\t\n\t\t\tif(!self._mixing || (self.animation.queue && self._queue.length < self.animation.queueLimit)){\n\t\t\t\tself._clicking = true;\n\t\t\t\t\n\t\t\t\tif(type === 'sort'){\n\t\t\t\t\tvar sort = $button.attr('data-sort');\n\t\t\t\t\t\n\t\t\t\t\tif(!$button.hasClass(self.controls.activeClass) || sort.indexOf('random') > -1){\n\t\t\t\t\t\t$(self.selectors.sort).removeClass(self.controls.activeClass);\n\t\t\t\t\t\ttrackClick($button, type);\n\t\t\t\t\t\tself.sort(sort);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(type === 'filter') {\n\t\t\t\t\tvar filter = $button.attr('data-filter'),\n\t\t\t\t\t\tndx,\n\t\t\t\t\t\tseperator = self.controls.toggleLogic === 'or' ? ',' : '';\n\t\t\t\t\t\n\t\t\t\t\tif(!self.controls.toggleFilterButtons){\n\t\t\t\t\t\tif(!$button.hasClass(self.controls.activeClass)){\n\t\t\t\t\t\t\t$(self.selectors.filter).removeClass(self.controls.activeClass);\n\t\t\t\t\t\t\ttrackClick($button, type);\n\t\t\t\t\t\t\tself.filter(filter);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself._buildToggleArray();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!$button.hasClass(self.controls.activeClass)){\n\t\t\t\t\t\t\ttrackClick($button, type);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself._toggleArray.push(filter);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttrackClick($button, type, true);\n\t\t\t\t\t\t\tndx = self._toggleArray.indexOf(filter);\n\t\t\t\t\t\t\tself._toggleArray.splice(ndx, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._toggleArray = $.grep(self._toggleArray,function(n){return(n);});\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._toggleString = self._toggleArray.join(seperator);\n\n\t\t\t\t\t\tself.filter(self._toggleString);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._execAction('_processClick', 1, arguments);\n\t\t\t} else {\n\t\t\t\tif(typeof self.callbacks.onMixBusy === 'function'){\n\t\t\t\t\tself.callbacks.onMixBusy.call(self._domNode, self._state, self);\n\t\t\t\t}\n\t\t\t\tself._execAction('_processClickBusy', 1, arguments);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Build Toggle Array\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_buildToggleArray: function(){\n\t\t\tvar self = this,\n\t\t\t\tactiveFilter = self._activeFilter.replace(/\\s/g, '');\n\t\t\t\n\t\t\tself._execAction('_buildToggleArray', 0, arguments);\n\t\t\t\n\t\t\tif(self.controls.toggleLogic === 'or'){\n\t\t\t\tself._toggleArray = activeFilter.split(',');\n\t\t\t} else {\n\t\t\t\tself._toggleArray = activeFilter.split('.');\n\t\t\t\t\n\t\t\t\t!self._toggleArray[0] && self._toggleArray.shift();\n\t\t\t\t\n\t\t\t\tfor(var i = 0, filter; filter = self._toggleArray[i]; i++){\n\t\t\t\t\tself._toggleArray[i] = '.'+filter;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_buildToggleArray', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Update Controls\n\t\t * @since 2.0.0\n\t\t * @param {object} command\n\t\t * @param {boolean} multi\n\t\t */\n\t\t\n\t\t_updateControls: function(command, multi){\n\t\t\tvar self = this,\n\t\t\t\toutput = {\n\t\t\t\t\tfilter: command.filter,\n\t\t\t\t\tsort: command.sort\n\t\t\t\t},\n\t\t\t\tupdate = function($el, filter){\n\t\t\t\t\ttry {\n\t\t\t\t\t\t(multi && type === 'filter' && !(output.filter === 'none' || output.filter === '')) ?\n\t\t\t\t\t\t\t\t$el.filter(filter).addClass(self.controls.activeClass) :\n\t\t\t\t\t\t\t\t$el.removeClass(self.controls.activeClass).filter(filter).addClass(self.controls.activeClass);\n\t\t\t\t\t} catch(e) {}\n\t\t\t\t},\n\t\t\t\ttype = 'filter',\n\t\t\t\t$el = null;\n\t\t\t\t\n\t\t\tself._execAction('_updateControls', 0, arguments);\n\t\t\t\t\n\t\t\t(command.filter === undf) && (output.filter = self._activeFilter);\n\t\t\t(command.sort === undf) && (output.sort = self._activeSort);\n\t\t\t(output.filter === self.selectors.target) && (output.filter = 'all');\n\t\t\t\n\t\t\tfor(var i = 0; i < 2; i++){\n\t\t\t\t$el = self.controls.live ? $(self.selectors[type]) : self['_$'+type+'Buttons'];\n\t\t\t\t$el && update($el, '[data-'+type+'=\"'+output[type]+'\"]');\n\t\t\t\ttype = 'sort';\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_updateControls', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Filter (private)\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_filter: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_filter', 0);\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$targets.length; i++){\n\t\t\t\tvar $target = $(self._$targets[i]);\n\t\t\t\t\n\t\t\t\tif($target.is(self._activeFilter)){\n\t\t\t\t\tself._$show = self._$show.add($target);\n\t\t\t\t} else {\n\t\t\t\t\tself._$hide = self._$hide.add($target);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_filter', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sort (private)\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_sort: function(){\n\t\t\tvar self = this,\n\t\t\t\tarrayShuffle = function(oldArray){\n\t\t\t\t\tvar newArray = oldArray.slice(),\n\t\t\t\t\t\tlen = newArray.length,\n\t\t\t\t\t\ti = len;\n\n\t\t\t\t\twhile(i--){\n\t\t\t\t\t\tvar p = parseInt(Math.random()*len);\n\t\t\t\t\t\tvar t = newArray[i];\n\t\t\t\t\t\tnewArray[i] = newArray[p];\n\t\t\t\t\t\tnewArray[p] = t;\n\t\t\t\t\t};\n\t\t\t\t\treturn newArray; \n\t\t\t\t};\n\t\t\t\t\n\t\t\tself._execAction('_sort', 0);\n\t\t\t\n\t\t\tself._startOrder = [];\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$targets.length; i++){\n\t\t\t\tvar target = self._$targets[i];\n\t\t\t\t\n\t\t\t\tself._startOrder.push(target);\n\t\t\t}\n\t\t\t\n\t\t\tswitch(self._newSort[0].sortBy){\n\t\t\t\tcase 'default':\n\t\t\t\t\tself._newOrder = self._origOrder;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'random':\n\t\t\t\t\tself._newOrder = arrayShuffle(self._startOrder);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'custom':\n\t\t\t\t\tself._newOrder = self._newSort[0].order;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tself._newOrder = self._startOrder.concat().sort(function(a, b){\n\t\t\t\t\t\treturn self._compare(a, b);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_sort', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Compare Algorithm\n\t\t * @since 2.0.0\n\t\t * @param {string|number} a\n\t\t * @param {string|number} b\n\t\t * @param {number} depth (recursion)\n\t\t * @return {number}\n\t\t */\n\t\t\n\t\t_compare: function(a, b, depth){\n\t\t\tdepth = depth ? depth : 0;\n\t\t\n\t\t\tvar self = this,\n\t\t\t\torder = self._newSort[depth].order,\n\t\t\t\tgetData = function(el){\n\t\t\t\t\treturn el.dataset[self._newSort[depth].sortBy] || 0;\n\t\t\t\t},\n\t\t\t\tattrA = isNaN(getData(a) * 1) ? getData(a).toLowerCase() : getData(a) * 1,\n\t\t\t\tattrB = isNaN(getData(b) * 1) ? getData(b).toLowerCase() : getData(b) * 1;\n\t\t\t\t\n\t\t\tif(attrA < attrB)\n\t\t\t\treturn order === 'asc' ? -1 : 1;\n\t\t\tif(attrA > attrB)\n\t\t\t\treturn order === 'asc' ? 1 : -1;\n\t\t\tif(attrA === attrB && self._newSort.length > depth+1)\n\t\t\t\treturn self._compare(a, b, depth+1);\n\n\t\t\treturn 0;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Print Sort\n\t\t * @since 2.0.0\n\t\t * @param {boolean} reset\n\t\t */\n\t\t\n\t\t_printSort: function(reset){\n\t\t\tvar self = this,\n\t\t\t\torder = reset ? self._startOrder : self._newOrder,\n\t\t\t\ttargets = self._$parent[0].querySelectorAll(self.selectors.target),\n\t\t\t\tnextSibling = targets.length ? targets[targets.length -1].nextElementSibling : null,\n\t\t\t\tfrag = document.createDocumentFragment();\n\t\t\t\t\n\t\t\tself._execAction('_printSort', 0, arguments);\n\t\t\t\n\t\t\tfor(var i = 0; i < targets.length; i++){\n\t\t\t\tvar target = targets[i],\n\t\t\t\t\twhiteSpace = target.nextSibling;\n\n\t\t\t\tif(target.style.position === 'absolute') continue;\n\t\t\t\n\t\t\t\tif(whiteSpace && whiteSpace.nodeName === '#text'){\n\t\t\t\t\tself._$parent[0].removeChild(whiteSpace);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._$parent[0].removeChild(target);\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < order.length; i++){\n\t\t\t\tvar el = order[i];\n\n\t\t\t\tif(self._newSort[0].sortBy === 'default' && self._newSort[0].order === 'desc' && !reset){\n\t\t\t\t\tvar firstChild = frag.firstChild;\n\t\t\t\t\tfrag.insertBefore(el, firstChild);\n\t\t\t\t\tfrag.insertBefore(document.createTextNode(' '), el);\n\t\t\t\t} else {\n\t\t\t\t\tfrag.appendChild(el);\n\t\t\t\t\tfrag.appendChild(document.createTextNode(' '));\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tnextSibling ? \n\t\t\t\tself._$parent[0].insertBefore(frag, nextSibling) :\n\t\t\t\tself._$parent[0].appendChild(frag);\n\t\t\t\t\n\t\t\tself._execAction('_printSort', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Parse Sort\n\t\t * @since 2.0.0\n\t\t * @param {string} sortString\n\t\t * @return {array} newSort\n\t\t */\n\t\t\n\t\t_parseSort: function(sortString){\n\t\t\tvar self = this,\n\t\t\t\trules = typeof sortString === 'string' ? sortString.split(' ') : [sortString],\n\t\t\t\tnewSort = [];\n\t\t\t\t\n\t\t\tfor(var i = 0; i < rules.length; i++){\n\t\t\t\tvar rule = typeof sortString === 'string' ? rules[i].split(':') : ['custom', rules[i]],\n\t\t\t\t\truleObj = {\n\t\t\t\t\t\tsortBy: self._helpers._camelCase(rule[0]),\n\t\t\t\t\t\torder: rule[1] || 'asc'\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\tnewSort.push(ruleObj);\n\t\t\t\t\n\t\t\t\tif(ruleObj.sortBy === 'default' || ruleObj.sortBy === 'random') break;\n\t\t\t}\n\t\t\t\n\t\t\treturn self._execFilter('_parseSort', newSort, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Parse Effects\n\t\t * @since 2.0.0\n\t\t * @return {object} effects\n\t\t */\n\t\t\n\t\t_parseEffects: function(){\n\t\t\tvar self = this,\n\t\t\t\teffects = {\n\t\t\t\t\topacity: '',\n\t\t\t\t\ttransformIn: '',\n\t\t\t\t\ttransformOut: '',\n\t\t\t\t\tfilter: ''\n\t\t\t\t},\n\t\t\t\tparse = function(effect, extract, reverse){\n\t\t\t\t\tif(self.animation.effects.indexOf(effect) > -1){\n\t\t\t\t\t\tif(extract){\n\t\t\t\t\t\t\tvar propIndex = self.animation.effects.indexOf(effect+'(');\n\t\t\t\t\t\t\tif(propIndex > -1){\n\t\t\t\t\t\t\t\tvar str = self.animation.effects.substring(propIndex),\n\t\t\t\t\t\t\t\t\tmatch = /\\(([^)]+)\\)/.exec(str),\n\t\t\t\t\t\t\t\t\tval = match[1];\n\n\t\t\t\t\t\t\t\t\treturn {val: val};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tnegate = function(value, invert){\n\t\t\t\t\tif(invert){\n\t\t\t\t\t\treturn value.charAt(0) === '-' ? value.substr(1, value.length) : '-'+value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuildTransform = function(key, invert){\n\t\t\t\t\tvar transforms = [\n\t\t\t\t\t\t['scale', '.01'],\n\t\t\t\t\t\t['translateX', '20px'],\n\t\t\t\t\t\t['translateY', '20px'],\n\t\t\t\t\t\t['translateZ', '20px'],\n\t\t\t\t\t\t['rotateX', '90deg'],\n\t\t\t\t\t\t['rotateY', '90deg'],\n\t\t\t\t\t\t['rotateZ', '180deg'],\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\tfor(var i = 0; i < transforms.length; i++){\n\t\t\t\t\t\tvar prop = transforms[i][0],\n\t\t\t\t\t\t\tdef = transforms[i][1],\n\t\t\t\t\t\t\tinverted = invert && prop !== 'scale';\n\t\t\t\t\t\t\t\n\t\t\t\t\t\teffects[key] += parse(prop) ? prop+'('+negate(parse(prop, true).val || def, inverted)+') ' : '';\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\n\t\t\teffects.opacity = parse('fade') ? parse('fade',true).val || '0' : '1';\n\t\t\t\n\t\t\tbuildTransform('transformIn');\n\t\t\t\n\t\t\tself.animation.reverseOut ? buildTransform('transformOut', true) : (effects.transformOut = effects.transformIn);\n\n\t\t\teffects.transition = {};\n\t\t\t\n\t\t\teffects.transition = self._getPrefixedCSS('transition','all '+self.animation.duration+'ms '+self.animation.easing+', opacity '+self.animation.duration+'ms linear');\n\t\t\n\t\t\tself.animation.stagger = parse('stagger') ? true : false;\n\t\t\tself.animation.staggerDuration = parseInt(parse('stagger') ? (parse('stagger',true).val ? parse('stagger',true).val : 100) : 100);\n\n\t\t\treturn self._execFilter('_parseEffects', effects);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Build State\n\t\t * @since 2.0.0\n\t\t * @param {boolean} future\n\t\t * @return {object} futureState\n\t\t */\n\t\t\n\t\t_buildState: function(future){\n\t\t\tvar self = this,\n\t\t\t\tstate = {};\n\t\t\t\n\t\t\tself._execAction('_buildState', 0);\n\t\t\t\n\t\t\tstate = {\n\t\t\t\tactiveFilter: self._activeFilter === '' ? 'none' : self._activeFilter,\n\t\t\t\tactiveSort: future && self._newSortString ? self._newSortString : self._activeSort,\n\t\t\t\tfail: !self._$show.length && self._activeFilter !== '',\n\t\t\t\t$targets: self._$targets,\n\t\t\t\t$show: self._$show,\n\t\t\t\t$hide: self._$hide,\n\t\t\t\ttotalTargets: self._$targets.length,\n\t\t\t\ttotalShow: self._$show.length,\n\t\t\t\ttotalHide: self._$hide.length,\n\t\t\t\tdisplay: future && self._newDisplay ? self._newDisplay : self.layout.display\n\t\t\t};\n\t\t\t\n\t\t\tif(future){\n\t\t\t\treturn self._execFilter('_buildState', state);\n\t\t\t} else {\n\t\t\t\tself._state = state;\n\t\t\t\t\n\t\t\t\tself._execAction('_buildState', 1);\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Go Mix\n\t\t * @since 2.0.0\n\t\t * @param {boolean} animate\n\t\t */\n\t\t\n\t\t_goMix: function(animate){\n\t\t\tvar self = this,\n\t\t\t\tphase1 = function(){\n\t\t\t\t\tif(self._chrome && (self._chrome === 31)){\n\t\t\t\t\t\tchromeFix(self._$parent[0]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tself._setInter();\n\t\t\t\t\t\n\t\t\t\t\tphase2();\n\t\t\t\t},\n\t\t\t\tphase2 = function(){\n\t\t\t\t\tvar scrollTop = window.pageYOffset,\n\t\t\t\t\t\tscrollLeft = window.pageXOffset,\n\t\t\t\t\t\tdocHeight = document.documentElement.scrollHeight;\n\n\t\t\t\t\tself._getInterMixData();\n\t\t\t\t\t\n\t\t\t\t\tself._setFinal();\n\n\t\t\t\t\tself._getFinalMixData();\n\n\t\t\t\t\t(window.pageYOffset !== scrollTop) && window.scrollTo(scrollLeft, scrollTop);\n\n\t\t\t\t\tself._prepTargets();\n\t\t\t\t\t\n\t\t\t\t\tif(window.requestAnimationFrame){\n\t\t\t\t\t\trequestAnimationFrame(phase3);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tphase3();\n\t\t\t\t\t\t},20);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tphase3 = function(){\n\t\t\t\t\tself._animateTargets();\n\n\t\t\t\t\tif(self._targetsBound === 0){\n\t\t\t\t\t\tself._cleanUp();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tchromeFix = function(grid){\n\t\t\t\t\tvar parent = grid.parentElement,\n\t\t\t\t\t\tplaceholder = document.createElement('div'),\n\t\t\t\t\t\tfrag = document.createDocumentFragment();\n\n\t\t\t\t\tparent.insertBefore(placeholder, grid);\n\t\t\t\t\tfrag.appendChild(grid);\n\t\t\t\t\tparent.replaceChild(grid, placeholder);\n\t\t\t\t},\n\t\t\t\tfutureState = self._buildState(true);\n\t\t\t\t\n\t\t\tself._execAction('_goMix', 0, arguments);\n\t\t\t\t\n\t\t\t!self.animation.duration && (animate = false);\n\n\t\t\tself._mixing = true;\n\t\t\t\n\t\t\tself._$container.removeClass(self.layout.containerClassFail);\n\t\t\t\n\t\t\tif(typeof self.callbacks.onMixStart === 'function'){\n\t\t\t\tself.callbacks.onMixStart.call(self._domNode, self._state, futureState, self);\n\t\t\t}\n\t\t\t\n\t\t\tself._$container.trigger('mixStart', [self._state, futureState, self]);\n\t\t\t\n\t\t\tself._getOrigMixData();\n\t\t\t\n\t\t\tif(animate && !self._suckMode){\n\t\t\t\n\t\t\t\twindow.requestAnimationFrame ?\n\t\t\t\t\trequestAnimationFrame(phase1) :\n\t\t\t\t\tphase1();\n\t\t\t\n\t\t\t} else {\n\t\t\t\tself._cleanUp();\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_goMix', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Target Data\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_getTargetData: function(el, stage){\n\t\t\tvar self = this,\n\t\t\t\telStyle;\n\t\t\t\n\t\t\tel.dataset[stage+'PosX'] = el.offsetLeft;\n\t\t\tel.dataset[stage+'PosY'] = el.offsetTop;\n\n\t\t\tif(self.animation.animateResizeTargets){\n\t\t\t\telStyle = !self._suckMode ? \n\t\t\t\t\twindow.getComputedStyle(el) : \n\t\t\t\t\t{\n\t\t\t\t\t\tmarginBottom: '',\n\t\t\t\t\t\tmarginRight: ''\n\t\t\t\t\t};\n\t\t\t\n\t\t\t\tel.dataset[stage+'MarginBottom'] = parseInt(elStyle.marginBottom);\n\t\t\t\tel.dataset[stage+'MarginRight'] = parseInt(elStyle.marginRight);\n\t\t\t\tel.dataset[stage+'Width'] = el.offsetWidth;\n\t\t\t\tel.dataset[stage+'Height'] = el.offsetHeight;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Original Mix Data\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_getOrigMixData: function(){\n\t\t\tvar self = this,\n\t\t\t\tparentStyle = !self._suckMode ? window.getComputedStyle(self._$parent[0]) : {boxSizing: ''},\n\t\t\t\tparentBS = parentStyle.boxSizing || parentStyle[self._vendor+'BoxSizing'];\n\t\n\t\t\tself._incPadding = (parentBS === 'border-box');\n\t\t\t\n\t\t\tself._execAction('_getOrigMixData', 0);\n\t\t\t\n\t\t\t!self._suckMode && (self.effects = self._parseEffects());\n\t\t\n\t\t\tself._$toHide = self._$hide.filter(':visible');\n\t\t\tself._$toShow = self._$show.filter(':hidden');\n\t\t\tself._$pre = self._$targets.filter(':visible');\n\n\t\t\tself._startHeight = self._incPadding ? \n\t\t\t\tself._$parent.outerHeight() : \n\t\t\t\tself._$parent.height();\n\t\t\t\t\n\t\t\tfor(var i = 0; i < self._$pre.length; i++){\n\t\t\t\tvar el = self._$pre[i];\n\t\t\t\t\n\t\t\t\tself._getTargetData(el, 'orig');\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_getOrigMixData', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Set Intermediate Positions\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_setInter: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_setInter', 0);\n\t\t\t\n\t\t\tif(self._changingLayout && self.animation.animateChangeLayout){\n\t\t\t\tself._$toShow.css('display',self._newDisplay);\n\n\t\t\t\tif(self._changingClass){\n\t\t\t\t\tself._$container\n\t\t\t\t\t\t.removeClass(self.layout.containerClass)\n\t\t\t\t\t\t.addClass(self._newClass);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself._$toShow.css('display', self.layout.display);\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_setInter', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Intermediate Mix Data\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_getInterMixData: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_getInterMixData', 0);\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$toShow.length; i++){\n\t\t\t\tvar el = self._$toShow[i];\n\t\t\t\t\t\n\t\t\t\tself._getTargetData(el, 'inter');\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$pre.length; i++){\n\t\t\t\tvar el = self._$pre[i];\n\t\t\t\t\t\n\t\t\t\tself._getTargetData(el, 'inter');\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_getInterMixData', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Set Final Positions\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_setFinal: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_setFinal', 0);\n\t\t\t\n\t\t\tself._sorting && self._printSort();\n\n\t\t\tself._$toHide.removeStyle('display');\n\t\t\t\n\t\t\tif(self._changingLayout && self.animation.animateChangeLayout){\n\t\t\t\tself._$pre.css('display',self._newDisplay);\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_setFinal', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Final Mix Data\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_getFinalMixData: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_getFinalMixData', 0);\n\t\n\t\t\tfor(var i = 0; i < self._$toShow.length; i++){\n\t\t\t\tvar el = self._$toShow[i];\n\t\t\t\t\t\n\t\t\t\tself._getTargetData(el, 'final');\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$pre.length; i++){\n\t\t\t\tvar el = self._$pre[i];\n\t\t\t\t\t\n\t\t\t\tself._getTargetData(el, 'final');\n\t\t\t}\n\t\t\t\n\t\t\tself._newHeight = self._incPadding ? \n\t\t\t\tself._$parent.outerHeight() : \n\t\t\t\tself._$parent.height();\n\n\t\t\tself._sorting && self._printSort(true);\n\t\n\t\t\tself._$toShow.removeStyle('display');\n\t\t\t\n\t\t\tself._$pre.css('display',self.layout.display);\n\t\t\t\n\t\t\tif(self._changingClass && self.animation.animateChangeLayout){\n\t\t\t\tself._$container\n\t\t\t\t\t.removeClass(self._newClass)\n\t\t\t\t\t.addClass(self.layout.containerClass);\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_getFinalMixData', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Prepare Targets\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_prepTargets: function(){\n\t\t\tvar self = this,\n\t\t\t\ttransformCSS = {\n\t\t\t\t\t_in: self._getPrefixedCSS('transform', self.effects.transformIn),\n\t\t\t\t\t_out: self._getPrefixedCSS('transform', self.effects.transformOut)\n\t\t\t\t};\n\n\t\t\tself._execAction('_prepTargets', 0);\n\t\t\t\n\t\t\tif(self.animation.animateResizeContainer){\n\t\t\t\tself._$parent.css('height',self._startHeight+'px');\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$toShow.length; i++){\n\t\t\t\tvar el = self._$toShow[i],\n\t\t\t\t\t$el = $(el);\n\t\t\t\t\n\t\t\t\tel.style.opacity = self.effects.opacity;\n\t\t\t\tel.style.display = (self._changingLayout && self.animation.animateChangeLayout) ?\n\t\t\t\t\tself._newDisplay :\n\t\t\t\t\tself.layout.display;\n\t\t\t\t\t\n\t\t\t\t$el.css(transformCSS._in);\n\t\t\t\t\n\t\t\t\tif(self.animation.animateResizeTargets){\n\t\t\t\t\tel.style.width = el.dataset.finalWidth+'px';\n\t\t\t\t\tel.style.height = el.dataset.finalHeight+'px';\n\t\t\t\t\tel.style.marginRight = -(el.dataset.finalWidth - el.dataset.interWidth) + (el.dataset.finalMarginRight * 1)+'px';\n\t\t\t\t\tel.style.marginBottom = -(el.dataset.finalHeight - el.dataset.interHeight) + (el.dataset.finalMarginBottom * 1)+'px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < self._$pre.length; i++){\n\t\t\t\tvar el = self._$pre[i],\n\t\t\t\t\t$el = $(el),\n\t\t\t\t\ttranslate = {\n\t\t\t\t\t\tx: el.dataset.origPosX - el.dataset.interPosX,\n\t\t\t\t\t\ty: el.dataset.origPosY - el.dataset.interPosY\n\t\t\t\t\t},\n\t\t\t\t\ttransformCSS = self._getPrefixedCSS('transform','translate('+translate.x+'px,'+translate.y+'px)');\n\n\t\t\t\t$el.css(transformCSS);\n\t\t\t\t\n\t\t\t\tif(self.animation.animateResizeTargets){\n\t\t\t\t\tel.style.width = el.dataset.origWidth+'px';\n\t\t\t\t\tel.style.height = el.dataset.origHeight+'px';\n\t\t\t\t\t\n\t\t\t\t\tif(el.dataset.origWidth - el.dataset.finalWidth){\n\t\t\t\t\t\tel.style.marginRight = -(el.dataset.origWidth - el.dataset.interWidth) + (el.dataset.origMarginRight * 1)+'px';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(el.dataset.origHeight - el.dataset.finalHeight){\n\t\t\t\t\t\tel.style.marginBottom = -(el.dataset.origHeight - el.dataset.interHeight) + (el.dataset.origMarginBottom * 1) +'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_prepTargets', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Animate Targets\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_animateTargets: function(){\n\t\t\tvar self = this;\n\n\t\t\tself._execAction('_animateTargets', 0);\n\t\t\t\n\t\t\tself._targetsDone = 0;\n\t\t\tself._targetsBound = 0;\n\t\t\t\n\t\t\tself._$parent\n\t\t\t\t.css(self._getPrefixedCSS('perspective', self.animation.perspectiveDistance+'px'))\n\t\t\t\t.css(self._getPrefixedCSS('perspective-origin', self.animation.perspectiveOrigin));\n\t\t\t\n\t\t\tif(self.animation.animateResizeContainer){\n\t\t\t\tself._$parent\n\t\t\t\t\t.css(self._getPrefixedCSS('transition','height '+self.animation.duration+'ms ease'))\n\t\t\t\t\t.css('height',self._newHeight+'px');\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$toShow.length; i++){\n\t\t\t\tvar el = self._$toShow[i],\n\t\t\t\t\t$el = $(el),\n\t\t\t\t\ttranslate = {\n\t\t\t\t\t\tx: el.dataset.finalPosX - el.dataset.interPosX,\n\t\t\t\t\t\ty: el.dataset.finalPosY - el.dataset.interPosY\n\t\t\t\t\t},\n\t\t\t\t\tdelay = self._getDelay(i),\n\t\t\t\t\ttoShowCSS = {};\n\t\t\t\t\n\t\t\t\tel.style.opacity = '';\n\t\t\t\t\n\t\t\t\tfor(var j = 0; j < 2; j++){\n\t\t\t\t\tvar a = j === 0 ? a = self._prefix : '';\n\t\t\t\t\t\n\t\t\t\t\tif(self._ff && self._ff <= 20){\n\t\t\t\t\t\ttoShowCSS[a+'transition-property'] = 'all';\n\t\t\t\t\t\ttoShowCSS[a+'transition-timing-function'] = self.animation.easing+'ms';\n\t\t\t\t\t\ttoShowCSS[a+'transition-duration'] = self.animation.duration+'ms';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttoShowCSS[a+'transition-delay'] = delay+'ms';\n\t\t\t\t\ttoShowCSS[a+'transform'] = 'translate('+translate.x+'px,'+translate.y+'px)';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.effects.transform || self.effects.opacity){\n\t\t\t\t\tself._bindTargetDone($el);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t(self._ff && self._ff <= 20) ? \n\t\t\t\t\t$el.css(toShowCSS) : \n\t\t\t\t\t$el.css(self.effects.transition).css(toShowCSS);\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$pre.length; i++){\n\t\t\t\tvar el = self._$pre[i],\n\t\t\t\t\t$el = $(el),\n\t\t\t\t\ttranslate = {\n\t\t\t\t\t\tx: el.dataset.finalPosX - el.dataset.interPosX,\n\t\t\t\t\t\ty: el.dataset.finalPosY - el.dataset.interPosY\n\t\t\t\t\t},\n\t\t\t\t\tdelay = self._getDelay(i);\n\t\t\t\t\t\n\t\t\t\tif(!(\n\t\t\t\t\tel.dataset.finalPosX === el.dataset.origPosX &&\n\t\t\t\t\tel.dataset.finalPosY === el.dataset.origPosY\n\t\t\t\t)){\n\t\t\t\t\tself._bindTargetDone($el);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$el.css(self._getPrefixedCSS('transition', 'all '+self.animation.duration+'ms '+self.animation.easing+' '+delay+'ms'));\n\t\t\t\t$el.css(self._getPrefixedCSS('transform', 'translate('+translate.x+'px,'+translate.y+'px)'));\n\t\t\t\t\n\t\t\t\tif(self.animation.animateResizeTargets){\n\t\t\t\t\tif(el.dataset.origWidth - el.dataset.finalWidth && el.dataset.finalWidth * 1){\n\t\t\t\t\t\tel.style.width = el.dataset.finalWidth+'px';\n\t\t\t\t\t\tel.style.marginRight = -(el.dataset.finalWidth - el.dataset.interWidth)+(el.dataset.finalMarginRight * 1)+'px';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(el.dataset.origHeight - el.dataset.finalHeight && el.dataset.finalHeight * 1){\n\t\t\t\t\t\tel.style.height = el.dataset.finalHeight+'px';\n\t\t\t\t\t\tel.style.marginBottom = -(el.dataset.finalHeight - el.dataset.interHeight)+(el.dataset.finalMarginBottom * 1) +'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(self._changingClass){\n\t\t\t\tself._$container\n\t\t\t\t\t.removeClass(self.layout.containerClass)\n\t\t\t\t\t.addClass(self._newClass);\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$toHide.length; i++){\n\t\t\t\tvar el = self._$toHide[i],\n\t\t\t\t\t$el = $(el),\n\t\t\t\t\tdelay = self._getDelay(i),\n\t\t\t\t\ttoHideCSS = {};\n\n\t\t\t\tfor(var j = 0; j<2; j++){\n\t\t\t\t\tvar a = j === 0 ? a = self._prefix : '';\n\n\t\t\t\t\ttoHideCSS[a+'transition-delay'] = delay+'ms';\n\t\t\t\t\ttoHideCSS[a+'transform'] = self.effects.transformOut;\n\t\t\t\t\ttoHideCSS.opacity = self.effects.opacity;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$el.css(self.effects.transition).css(toHideCSS);\n\t\t\t\n\t\t\t\tif(self.effects.transform || self.effects.opacity){\n\t\t\t\t\tself._bindTargetDone($el);\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_animateTargets', 1);\n\n\t\t},\n\t\t\n\t\t/**\n\t\t * Bind Targets TransitionEnd\n\t\t * @since 2.0.0\n\t\t * @param {object} $el\n\t\t */\n\t\t\n\t\t_bindTargetDone: function($el){\n\t\t\tvar self = this,\n\t\t\t\tel = $el[0];\n\t\t\t\t\n\t\t\tself._execAction('_bindTargetDone', 0, arguments);\n\t\t\t\n\t\t\tif(!el.dataset.bound){\n\t\t\t\t\n\t\t\t\tel.dataset.bound = true;\n\t\t\t\tself._targetsBound++;\n\t\t\t\n\t\t\t\t$el.on('webkitTransitionEnd.mixItUp transitionend.mixItUp',function(e){\n\t\t\t\t\tif(\n\t\t\t\t\t\t(e.originalEvent.propertyName.indexOf('transform') > -1 || \n\t\t\t\t\t\te.originalEvent.propertyName.indexOf('opacity') > -1) &&\n\t\t\t\t\t\t$(e.originalEvent.target).is(self.selectors.target)\n\t\t\t\t\t){\n\t\t\t\t\t\t$el.off('.mixItUp');\n\t\t\t\t\t\tdelete el.dataset.bound;\n\t\t\t\t\t\tself._targetDone();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_bindTargetDone', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Target Done\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_targetDone: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('_targetDone', 0);\n\t\t\t\n\t\t\tself._targetsDone++;\n\t\t\t\n\t\t\t(self._targetsDone === self._targetsBound) && self._cleanUp();\n\t\t\t\n\t\t\tself._execAction('_targetDone', 1);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Clean Up\n\t\t * @since 2.0.0\n\t\t */\n\t\t\n\t\t_cleanUp: function(){\n\t\t\tvar self = this,\n\t\t\t\ttargetStyles = self.animation.animateResizeTargets ? 'transform opacity width height margin-bottom margin-right' : 'transform opacity';\n\t\t\t\tunBrake = function(){\n\t\t\t\t\tself._$targets.removeStyle('transition', self._prefix);\n\t\t\t\t};\n\t\t\t\t\n\t\t\tself._execAction('_cleanUp', 0);\n\t\t\t\n\t\t\t!self._changingLayout ?\n\t\t\t\tself._$show.css('display',self.layout.display) :\n\t\t\t\tself._$show.css('display',self._newDisplay);\n\t\t\t\n\t\t\tself._$targets.css(self._brake);\n\t\t\t\n\t\t\tself._$targets\n\t\t\t\t.removeStyle(targetStyles, self._prefix)\n\t\t\t\t.removeAttr('data-inter-pos-x data-inter-pos-y data-final-pos-x data-final-pos-y data-orig-pos-x data-orig-pos-y data-orig-height data-orig-width data-final-height data-final-width data-inter-width data-inter-height data-orig-margin-right data-orig-margin-bottom data-inter-margin-right data-inter-margin-bottom data-final-margin-right data-final-margin-bottom');\n\t\t\t\t\n\t\t\tself._$hide.removeStyle('display');\n\t\t\t\n\t\t\tself._$parent.removeStyle('height transition perspective-distance perspective perspective-origin-x perspective-origin-y perspective-origin perspectiveOrigin', self._prefix);\n\t\t\t\n\t\t\tif(self._sorting){\n\t\t\t\tself._printSort();\n\t\t\t\tself._activeSort = self._newSortString;\n\t\t\t\tself._sorting = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self._changingLayout){\n\t\t\t\tif(self._changingDisplay){\n\t\t\t\t\tself.layout.display = self._newDisplay;\n\t\t\t\t\tself._changingDisplay = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self._changingClass){\n\t\t\t\t\tself._$parent.removeClass(self.layout.containerClass).addClass(self._newClass);\n\t\t\t\t\tself.layout.containerClass = self._newClass;\n\t\t\t\t\tself._changingClass = false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._changingLayout = false;\n\t\t\t}\n\t\t\t\n\t\t\tself._refresh();\n\t\t\t\n\t\t\tself._buildState();\n\t\t\t\n\t\t\tif(self._state.fail){\n\t\t\t\tself._$container.addClass(self.layout.containerClassFail);\n\t\t\t}\n\t\t\t\n\t\t\tself._$show = $();\n\t\t\tself._$hide = $();\n\t\t\t\n\t\t\tif(window.requestAnimationFrame){\n\t\t\t\trequestAnimationFrame(unBrake);\n\t\t\t}\n\t\t\t\n\t\t\tself._mixing = false;\n\t\t\t\n\t\t\tif(typeof self.callbacks._user === 'function'){\n\t\t\t\tself.callbacks._user.call(self._domNode, self._state, self);\n\t\t\t}\n\t\t\t\n\t\t\tif(typeof self.callbacks.onMixEnd === 'function'){\n\t\t\t\tself.callbacks.onMixEnd.call(self._domNode, self._state, self);\n\t\t\t}\n\t\t\t\n\t\t\tself._$container.trigger('mixEnd', [self._state, self]);\n\t\t\t\n\t\t\tif(self._state.fail){\n\t\t\t\t(typeof self.callbacks.onMixFail === 'function') && self.callbacks.onMixFail.call(self._domNode, self._state, self);\n\t\t\t\tself._$container.trigger('mixFail', [self._state, self]);\n\t\t\t}\n\t\t\t\n\t\t\tif(self._loading){\n\t\t\t\t(typeof self.callbacks.onMixLoad === 'function') && self.callbacks.onMixLoad.call(self._domNode, self._state, self);\n\t\t\t\tself._$container.trigger('mixLoad', [self._state, self]);\n\t\t\t}\n\t\t\t\n\t\t\tif(self._queue.length){\n\t\t\t\tself._execAction('_queue', 0);\n\t\t\t\t\n\t\t\t\tself.multiMix(self._queue[0][0],self._queue[0][1],self._queue[0][2]);\n\t\t\t\tself._queue.splice(0, 1);\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('_cleanUp', 1);\n\t\t\t\n\t\t\tself._loading = false;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Prefixed CSS\n\t\t * @since 2.0.0\n\t\t * @param {string} property\n\t\t * @param {string} value\n\t\t * @param {boolean} prefixValue\n\t\t * @return {object} styles\n\t\t */\n\t\t\n\t\t_getPrefixedCSS: function(property, value, prefixValue){\n\t\t\tvar self = this,\n\t\t\t\tstyles = {},\n\t\t\t\tprefix = '',\n\t\t\t\ti = -1;\n\t\t\n\t\t\tfor(i = 0; i < 2; i++){\n\t\t\t\tprefix = i === 0 ? self._prefix : '';\n\t\t\t\tprefixValue ? styles[prefix+property] = prefix+value : styles[prefix+property] = value;\n\t\t\t}\n\t\t\t\n\t\t\treturn self._execFilter('_getPrefixedCSS', styles, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Delay\n\t\t * @since 2.0.0\n\t\t * @param {number} i\n\t\t * @return {number} delay\n\t\t */\n\t\t\n\t\t_getDelay: function(i){\n\t\t\tvar self = this,\n\t\t\t\tn = typeof self.animation.staggerSequence === 'function' ? self.animation.staggerSequence.call(self._domNode, i, self._state) : i,\n\t\t\t\tdelay = self.animation.stagger ? n * self.animation.staggerDuration : 0;\n\t\t\t\t\n\t\t\treturn self._execFilter('_getDelay', delay, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Parse MultiMix Arguments\n\t\t * @since 2.0.0\n\t\t * @param {array} args\n\t\t * @return {object} output\n\t\t */\n\t\t\n\t\t_parseMultiMixArgs: function(args){\n\t\t\tvar self = this,\n\t\t\t\toutput = {\n\t\t\t\t\tcommand: null,\n\t\t\t\t\tanimate: self.animation.enable,\n\t\t\t\t\tcallback: null\n\t\t\t\t};\n\t\t\t\t\n\t\t\tfor(var i = 0; i < args.length; i++){\n\t\t\t\tvar arg = args[i];\n\n\t\t\t\tif(arg !== null){\n\t\t\t\t\tif(typeof arg === 'object' || typeof arg === 'string'){\n\t\t\t\t\t\toutput.command = arg;\n\t\t\t\t\t} else if(typeof arg === 'boolean'){\n\t\t\t\t\t\toutput.animate = arg;\n\t\t\t\t\t} else if(typeof arg === 'function'){\n\t\t\t\t\t\toutput.callback = arg;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn self._execFilter('_parseMultiMixArgs', output, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Parse Insert Arguments\n\t\t * @since 2.0.0\n\t\t * @param {array} args\n\t\t * @return {object} output\n\t\t */\n\t\t\n\t\t_parseInsertArgs: function(args){\n\t\t\tvar self = this,\n\t\t\t\toutput = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\t$object: $(),\n\t\t\t\t\tmultiMix: {filter: self._state.activeFilter},\n\t\t\t\t\tcallback: null\n\t\t\t\t};\n\t\t\t\n\t\t\tfor(var i = 0; i < args.length; i++){\n\t\t\t\tvar arg = args[i];\n\t\t\t\t\n\t\t\t\tif(typeof arg === 'number'){\n\t\t\t\t\toutput.index = arg;\n\t\t\t\t} else if(typeof arg === 'object' && arg instanceof $){\n\t\t\t\t\toutput.$object = arg;\n\t\t\t\t} else if(typeof arg === 'object' && self._helpers._isElement(arg)){\n\t\t\t\t\toutput.$object = $(arg);\n\t\t\t\t} else if(typeof arg === 'object' && arg !== null){\n\t\t\t\t\toutput.multiMix = arg;\n\t\t\t\t} else if(typeof arg === 'boolean' && !arg){\n\t\t\t\t\toutput.multiMix = false;\n\t\t\t\t} else if(typeof arg === 'function'){\n\t\t\t\t\toutput.callback = arg;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn self._execFilter('_parseInsertArgs', output, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Execute Action\n\t\t * @since 2.0.0\n\t\t * @param {string} methodName\n\t\t * @param {boolean} isPost\n\t\t * @param {array} args\n\t\t */\n\t\t\n\t\t_execAction: function(methodName, isPost, args){\n\t\t\tvar self = this,\n\t\t\t\tcontext = isPost ? 'post' : 'pre';\n\n\t\t\tif(!self._actions.isEmptyObject && self._actions.hasOwnProperty(methodName)){\n\t\t\t\tfor(var key in self._actions[methodName][context]){\n\t\t\t\t\tself._actions[methodName][context][key].call(self, args);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Execute Filter\n\t\t * @since 2.0.0\n\t\t * @param {string} methodName\n\t\t * @param {mixed} value\n\t\t * @return {mixed} value\n\t\t */\n\t\t\n\t\t_execFilter: function(methodName, value, args){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tif(!self._filters.isEmptyObject && self._filters.hasOwnProperty(methodName)){\n\t\t\t\tfor(var key in self._filters[methodName]){\n\t\t\t\t\treturn self._filters[methodName][key].call(self, args);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\t\t\n\t\t/* Helpers\n\t\t---------------------------------------------------------------------- */\n\n\t\t_helpers: {\n\t\t\t\n\t\t\t/**\n\t\t\t * CamelCase\n\t\t\t * @since 2.0.0\n\t\t\t * @param {string}\n\t\t\t * @return {string}\n\t\t\t */\n\n\t\t\t_camelCase: function(string){\n\t\t\t\treturn string.replace(/-([a-z])/g, function(g){\n\t\t\t\t\t\treturn g[1].toUpperCase();\n\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t/**\n\t\t\t * Is Element\n\t\t\t * @since 2.1.3\n\t\t\t * @param {object} element to test\n\t\t\t * @return {boolean}\n\t\t\t */\n\t\t\t\n\t\t\t_isElement: function(el){\n\t\t\t\tif(window.HTMLElement){\n\t\t\t\t\treturn el instanceof HTMLElement;\n\t\t\t\t} else {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tel !== null && \n\t\t\t\t\t\tel.nodeType === 1 &&\n\t\t\t\t\t\tel.nodeName === 'string'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t/* Public Methods\n\t\t---------------------------------------------------------------------- */\n\t\t\n\t\t/**\n\t\t * Is Mixing\n\t\t * @since 2.0.0\n\t\t * @return {boolean}\n\t\t */\n\t\t\n\t\tisMixing: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\treturn self._execFilter('isMixing', self._mixing);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Filter (public)\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tfilter: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseMultiMixArgs(arguments);\n\n\t\t\tself._clicking && (self._toggleString = '');\n\t\t\t\n\t\t\tself.multiMix({filter: args.command}, args.animate, args.callback);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Sort (public)\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tsort: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseMultiMixArgs(arguments);\n\n\t\t\tself.multiMix({sort: args.command}, args.animate, args.callback);\n\t\t},\n\n\t\t/**\n\t\t * Change Layout (public)\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tchangeLayout: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseMultiMixArgs(arguments);\n\t\t\t\t\n\t\t\tself.multiMix({changeLayout: args.command}, args.animate, args.callback);\n\t\t},\n\t\t\n\t\t/**\n\t\t * MultiMix\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tmultiMix: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseMultiMixArgs(arguments);\n\n\t\t\tself._execAction('multiMix', 0, arguments);\n\n\t\t\tif(!self._mixing){\n\t\t\t\tif(self.controls.enable && !self._clicking){\n\t\t\t\t\tself.controls.toggleFilterButtons && self._buildToggleArray();\n\t\t\t\t\tself._updateControls(args.command, self.controls.toggleFilterButtons);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t(self._queue.length < 2) && (self._clicking = false);\n\t\t\t\n\t\t\t\tdelete self.callbacks._user;\n\t\t\t\tif(args.callback) self.callbacks._user = args.callback;\n\t\t\t\n\t\t\t\tvar sort = args.command.sort,\n\t\t\t\t\tfilter = args.command.filter,\n\t\t\t\t\tchangeLayout = args.command.changeLayout;\n\n\t\t\t\tself._refresh();\n\n\t\t\t\tif(sort){\n\t\t\t\t\tself._newSort = self._parseSort(sort);\n\t\t\t\t\tself._newSortString = sort;\n\t\t\t\t\t\n\t\t\t\t\tself._sorting = true;\n\t\t\t\t\tself._sort();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(filter !== undf){\n\t\t\t\t\tfilter = (filter === 'all') ? self.selectors.target : filter;\n\t\n\t\t\t\t\tself._activeFilter = filter;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._filter();\n\t\t\t\t\n\t\t\t\tif(changeLayout){\n\t\t\t\t\tself._newDisplay = (typeof changeLayout === 'string') ? changeLayout : changeLayout.display || self.layout.display;\n\t\t\t\t\tself._newClass = changeLayout.containerClass || '';\n\n\t\t\t\t\tif(\n\t\t\t\t\t\tself._newDisplay !== self.layout.display ||\n\t\t\t\t\t\tself._newClass !== self.layout.containerClass\n\t\t\t\t\t){\n\t\t\t\t\t\tself._changingLayout = true;\n\t\t\t\t\t\t\n\t\t\t\t\t\tself._changingClass = (self._newClass !== self.layout.containerClass);\n\t\t\t\t\t\tself._changingDisplay = (self._newDisplay !== self.layout.display);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tself._$targets.css(self._brake);\n\t\t\t\t\n\t\t\t\tself._goMix(args.animate ^ self.animation.enable ? args.animate : self.animation.enable);\n\t\t\t\t\n\t\t\t\tself._execAction('multiMix', 1, arguments);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tif(self.animation.queue && self._queue.length < self.animation.queueLimit){\n\t\t\t\t\tself._queue.push(arguments);\n\t\t\t\t\t\n\t\t\t\t\t(self.controls.enable && !self._clicking) && self._updateControls(args.command);\n\t\t\t\t\t\n\t\t\t\t\tself._execAction('multiMixQueue', 1, arguments);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tif(typeof self.callbacks.onMixBusy === 'function'){\n\t\t\t\t\t\tself.callbacks.onMixBusy.call(self._domNode, self._state, self);\n\t\t\t\t\t}\n\t\t\t\t\tself._$container.trigger('mixBusy', [self._state, self]);\n\t\t\t\t\t\n\t\t\t\t\tself._execAction('multiMixBusy', 1, arguments);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t/**\n\t\t * Insert\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tinsert: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseInsertArgs(arguments),\n\t\t\t\tcallback = (typeof args.callback === 'function') ? args.callback : null,\n\t\t\t\tfrag = document.createDocumentFragment(),\n\t\t\t\ttarget = (function(){\n\t\t\t\t\tself._refresh();\n\t\t\t\t\t\n\t\t\t\t\tif(self._$targets.length){\n\t\t\t\t\t\treturn (args.index < self._$targets.length || !self._$targets.length) ? \n\t\t\t\t\t\t\tself._$targets[args.index] :\n\t\t\t\t\t\t\tself._$targets[self._$targets.length-1].nextElementSibling;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn self._$parent[0].children[0];\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\t\t\t\n\t\t\tself._execAction('insert', 0, arguments);\n\t\t\t\t\n\t\t\tif(args.$object){\n\t\t\t\tfor(var i = 0; i < args.$object.length; i++){\n\t\t\t\t\tvar el = args.$object[i];\n\t\t\t\t\t\n\t\t\t\t\tfrag.appendChild(el);\n\t\t\t\t\tfrag.appendChild(document.createTextNode(' '));\n\t\t\t\t}\n\n\t\t\t\tself._$parent[0].insertBefore(frag, target);\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('insert', 1, arguments);\n\t\t\t\n\t\t\tif(typeof args.multiMix === 'object'){\n\t\t\t\tself.multiMix(args.multiMix, callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Prepend\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tprepend: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseInsertArgs(arguments);\n\t\t\t\t\n\t\t\tself.insert(0, args.$object, args.multiMix, args.callback);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Append\n\t\t * @since 2.0.0\n\t\t * @param {array} arguments\n\t\t */\n\t\t\n\t\tappend: function(){\n\t\t\tvar self = this,\n\t\t\t\targs = self._parseInsertArgs(arguments);\n\t\t\n\t\t\tself.insert(self._state.totalTargets, args.$object, args.multiMix, args.callback);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get Option\n\t\t * @since 2.0.0\n\t\t * @param {string} string\n\t\t * @return {mixed} value\n\t\t */\n\t\t\n\t\tgetOption: function(string){\n\t\t\tvar self = this,\n\t\t\t\tgetProperty = function(obj, prop){\n\t\t\t\t\tvar parts = prop.split('.'),\n\t\t\t\t\t\tlast = parts.pop(),\n\t\t\t\t\t\tl = parts.length,\n\t\t\t\t\t\ti = 1,\n\t\t\t\t\t\tcurrent = parts[0] || prop;\n\n\t\t\t\t\twhile((obj = obj[current]) && i < l){\n\t\t\t\t\t\tcurrent = parts[i];\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(obj !== undf){\n\t\t\t\t\t\treturn obj[last] !== undf ? obj[last] : obj;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\treturn string ? self._execFilter('getOption', getProperty(self, string), arguments) : self;\n\t\t},\n\t\t\n\t\t/**\n\t\t * Set Options\n\t\t * @since 2.0.0\n\t\t * @param {object} config\n\t\t */\n\t\t\n\t\tsetOptions: function(config){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._execAction('setOptions', 0, arguments);\n\t\t\t\n\t\t\ttypeof config === 'object' && $.extend(true, self, config);\n\t\t\t\n\t\t\tself._execAction('setOptions', 1, arguments);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Get State\n\t\t * @since 2.0.0\n\t\t * @return {object} state\n\t\t */\n\t\t\n\t\tgetState: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\treturn self._execFilter('getState', self._state, self);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Force Refresh\n\t\t * @since 2.1.2\n\t\t */\n\t\t\n\t\tforceRefresh: function(){\n\t\t\tvar self = this;\n\t\t\t\n\t\t\tself._refresh(false, true);\n\t\t},\n\t\t\n\t\t/**\n\t\t * Destroy\n\t\t * @since 2.0.0\n\t\t * @param {boolean} hideAll\n\t\t */\n\t\t\n\t\tdestroy: function(hideAll){\n\t\t\tvar self = this,\n\t\t\t\tfilters = $.MixItUp.prototype._bound._filter,\n\t\t\t\tsorts = $.MixItUp.prototype._bound._sort;\n\t\t\t\n\t\t\tself._execAction('destroy', 0, arguments);\n\t\t\n\t\t\tself._$body\n\t\t\t\t.add($(self.selectors.sort))\n\t\t\t\t.add($(self.selectors.filter))\n\t\t\t\t.off('.mixItUp');\n\t\t\t\n\t\t\tfor(var i = 0; i < self._$targets.length; i++){\n\t\t\t\tvar target = self._$targets[i];\n\n\t\t\t\thideAll && (target.style.display = '');\n\n\t\t\t\tdelete target.mixParent;\n\t\t\t}\n\t\t\t\n\t\t\tself._execAction('destroy', 1, arguments);\n\n\t\t\tif(filters[self.selectors.filter] && filters[self.selectors.filter] > 1) {\n\t\t\t\tfilters[self.selectors.filter]--;\n\t\t\t} else if(filters[self.selectors.filter] === 1) {\n\t\t\t\tdelete filters[self.selectors.filter];\n\t\t\t}\n\n\t\t\tif(sorts[self.selectors.sort] && sorts[self.selectors.sort] > 1) {\n\t\t\t\tsorts[self.selectors.sort]--;\n\t\t\t} else if(sorts[self.selectors.sort] === 1) {\n\t\t\t\tdelete sorts[self.selectors.sort];\n\t\t\t}\n\n\t\t\tdelete $.MixItUp.prototype._instances[self._id];\n\t\t}\n\t\t\n\t};\n\t\n\t/* jQuery Methods\n\t---------------------------------------------------------------------- */\n\t\n\t/**\n\t * jQuery .mixItUp() method\n\t * @since 2.0.0\n\t * @extends $.fn\n\t */\n\t\n\t$.fn.mixItUp = function(){\n\t\tvar args = arguments,\n\t\t\tdataReturn = [],\n\t\t\teachReturn,\n\t\t\t_instantiate = function(domNode, settings){\n\t\t\t\tvar instance = new $.MixItUp(),\n\t\t\t\t\trand = function(){\n\t\t\t\t\t\treturn ('00000'+(Math.random()*16777216<<0).toString(16)).substr(-6).toUpperCase();\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\tinstance._execAction('_instantiate', 0, arguments);\n\n\t\t\t\tdomNode.id = !domNode.id ? 'MixItUp'+rand() : domNode.id;\n\t\t\t\t\n\t\t\t\tif(!instance._instances[domNode.id]){\n\t\t\t\t\tinstance._instances[domNode.id] = instance;\n\t\t\t\t\tinstance._init(domNode, settings);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tinstance._execAction('_instantiate', 1, arguments);\n\t\t\t};\n\t\t\t\n\t\teachReturn = this.each(function(){\n\t\t\tif(args && typeof args[0] === 'string'){\n\t\t\t\tvar instance = $.MixItUp.prototype._instances[this.id];\n\t\t\t\tif(args[0] === 'isLoaded'){\n\t\t\t\t\tdataReturn.push(instance ? true : false);\n\t\t\t\t} else {\n\t\t\t\t\tvar data = instance[args[0]](args[1], args[2], args[3]);\n\t\t\t\t\tif(data !== undf)dataReturn.push(data);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_instantiate(this, args[0]);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(dataReturn.length){\n\t\t\treturn dataReturn.length > 1 ? dataReturn : dataReturn[0];\n\t\t} else {\n\t\t\treturn eachReturn;\n\t\t}\n\t};\n\t\n\t/**\n\t * jQuery .removeStyle() method\n\t * @since 2.0.0\n\t * @extends $.fn\n\t */\n\t\n\t$.fn.removeStyle = function(style, prefix){\n\t\tprefix = prefix ? prefix : '';\n\t\n\t\treturn this.each(function(){\n\t\t\tvar el = this,\n\t\t\t\tstyles = style.split(' ');\n\t\t\t\t\n\t\t\tfor(var i = 0; i < styles.length; i++){\n\t\t\t\tfor(var j = 0; j < 4; j++){\n\t\t\t\t\tswitch (j) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tvar prop = styles[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tvar prop = $.MixItUp.prototype._helpers._camelCase(prop);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tvar prop = prefix+styles[i];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tvar prop = $.MixItUp.prototype._helpers._camelCase(prefix+styles[i]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(\n\t\t\t\t\t\tel.style[prop] !== undf && \n\t\t\t\t\t\ttypeof el.style[prop] !== 'unknown' &&\n\t\t\t\t\t\tel.style[prop].length > 0\n\t\t\t\t\t){\n\t\t\t\t\t\tel.style[prop] = '';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!prefix && j === 1)break;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(el.attributes && el.attributes.style && el.attributes.style !== undf && el.attributes.style.value === ''){\n\t\t\t\tel.attributes.removeNamedItem('style');\n\t\t\t}\n\t\t});\n\t};\n\t\n})(jQuery);","/*! Select2 4.0.0 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split(\"/\"),o=s.map,p=o&&o[\"*\"]||{};if(a&&\".\"===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split(\"/\"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,\"\")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],\".\"===m)a.splice(k,1),k-=1;else if(\"..\"===m){if(1===k&&(\"..\"===a[2]||\"..\"===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join(\"/\")}else 0===a.indexOf(\"./\")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split(\"/\"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join(\"/\"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join(\"/\")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join(\"/\"))}return a}function g(a,c){return function(){return n.apply(b,v.call(arguments,0).concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error(\"No \"+a);return q[a]}function k(a){var b,c=a?a.indexOf(\"!\"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+\"!\"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return\"undefined\"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:\"\",exports:q[a],config:l(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,\"undefined\"===v||\"function\"===v){for(c=!c.length&&d.length?[\"require\",\"exports\",\"module\"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,\"require\"===k)u[n]=p.require(a);else if(\"exports\"===k)u[n]=p.exports(a),s=!0;else if(\"module\"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+\" missing \"+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if(\"string\"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},\"function\"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define(\"almond\",function(){}),b.define(\"jquery\",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error(\"Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page.\"),b}),b.define(\"select2/utils\",[\"jquery\"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];\"function\"==typeof e&&\"constructor\"!==d&&c.push(d)}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){var a=Array.prototype.unshift;return a.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice;this.listeners=this.listeners||{},a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),\"*\"in this.listeners&&this.invoke(this.listeners[\"*\"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b=\"\",c=0;a>c;c++){var d=Math.floor(36*Math.random());b+=d.toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split(\"-\"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return e!==f||\"hidden\"!==f&&\"visible\"!==f?\"scroll\"===e||\"scroll\"===f?!0:d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth:!1},c.escapeMarkup=function(a){var b={\"\\\\\":\"&#92;\",\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#47;\"};return\"string\"!=typeof a?a:String(a).replace(/[&<>\"'\\/\\\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if(\"1.7\"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define(\"select2/results\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class=\"select2-results__options\" role=\"tree\"></ul>');return this.options.get(\"multiple\")&&b.attr(\"aria-multiselectable\",\"true\"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get(\"escapeMarkup\");this.clear(),this.hideLoading();var d=a('<li role=\"treeitem\" class=\"select2-results__option\"></li>'),e=this.options.get(\"translations\").get(b.message);d.append(c(e(b.args))),this.$results.append(d)},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger(\"results:message\",{message:\"noResults\"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){var c=b.find(\".select2-results\");c.append(a)},c.prototype.sort=function(a){var b=this.options.get(\"sorter\");return b(a)},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()}),e=b.$results.find(\".select2-results__option[aria-selected]\");e.each(function(){var b=a(this),c=a.data(this,\"data\"),e=\"\"+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr(\"aria-selected\",\"true\"):b.attr(\"aria-selected\",\"false\")});var f=e.filter(\"[aria-selected=true]\");f.length>0?f.first().trigger(\"mouseenter\"):e.first().trigger(\"mouseenter\")})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get(\"translations\").get(\"searching\"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=\" loading-results\",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(\".loading-results\").remove()},c.prototype.option=function(b){var c=document.createElement(\"li\");c.className=\"select2-results__option\";var d={role:\"treeitem\",\"aria-selected\":\"false\"};b.disabled&&(delete d[\"aria-selected\"],d[\"aria-disabled\"]=\"true\"),null==b.id&&delete d[\"aria-selected\"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role=\"group\",d[\"aria-label\"]=b.text,delete d[\"aria-selected\"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement(\"strong\");h.className=\"select2-results__group\";{a(h)}this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a(\"<ul></ul>\",{\"class\":\"select2-results__options select2-results__options--nested\"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,\"data\",b),c},c.prototype.bind=function(b){var c=this,d=b.id+\"-results\";this.$results.attr(\"id\",d),b.on(\"results:all\",function(a){c.clear(),c.append(a.data),b.isOpen()&&c.setClasses()}),b.on(\"results:append\",function(a){c.append(a.data),b.isOpen()&&c.setClasses()}),b.on(\"query\",function(a){c.showLoading(a)}),b.on(\"select\",function(){b.isOpen()&&c.setClasses()}),b.on(\"unselect\",function(){b.isOpen()&&c.setClasses()}),b.on(\"open\",function(){c.$results.attr(\"aria-expanded\",\"true\"),c.$results.attr(\"aria-hidden\",\"false\"),c.setClasses(),c.ensureHighlightVisible()}),b.on(\"close\",function(){c.$results.attr(\"aria-expanded\",\"false\"),c.$results.attr(\"aria-hidden\",\"true\"),c.$results.removeAttr(\"aria-activedescendant\")}),b.on(\"results:toggle\",function(){var a=c.getHighlightedResults();0!==a.length&&a.trigger(\"mouseup\")}),b.on(\"results:select\",function(){var a=c.getHighlightedResults();if(0!==a.length){var b=a.data(\"data\");\"true\"==a.attr(\"aria-selected\")?c.trigger(\"close\"):c.trigger(\"select\",{data:b})}}),b.on(\"results:previous\",function(){var a=c.getHighlightedResults(),b=c.$results.find(\"[aria-selected]\"),d=b.index(a);if(0!==d){var e=d-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger(\"mouseenter\");var g=c.$results.offset().top,h=f.offset().top,i=c.$results.scrollTop()+(h-g);0===e?c.$results.scrollTop(0):0>h-g&&c.$results.scrollTop(i)}}),b.on(\"results:next\",function(){var a=c.getHighlightedResults(),b=c.$results.find(\"[aria-selected]\"),d=b.index(a),e=d+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger(\"mouseenter\");var g=c.$results.offset().top+c.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=c.$results.scrollTop()+h-g;0===e?c.$results.scrollTop(0):h>g&&c.$results.scrollTop(i)}}),b.on(\"results:focus\",function(a){a.element.addClass(\"select2-results__option--highlighted\")}),b.on(\"results:message\",function(a){c.displayMessage(a)}),a.fn.mousewheel&&this.$results.on(\"mousewheel\",function(a){var b=c.$results.scrollTop(),d=c.$results.get(0).scrollHeight-c.$results.scrollTop()+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&d<=c.$results.height();e?(c.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(c.$results.scrollTop(c.$results.get(0).scrollHeight-c.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on(\"mouseup\",\".select2-results__option[aria-selected]\",function(b){var d=a(this),e=d.data(\"data\");return\"true\"===d.attr(\"aria-selected\")?void(c.options.get(\"multiple\")?c.trigger(\"unselect\",{originalEvent:b,data:e}):c.trigger(\"close\")):void c.trigger(\"select\",{originalEvent:b,data:e})}),this.$results.on(\"mouseenter\",\".select2-results__option[aria-selected]\",function(){var b=a(this).data(\"data\");c.getHighlightedResults().removeClass(\"select2-results__option--highlighted\"),c.trigger(\"results:focus\",{data:b,element:a(this)})})},c.prototype.getHighlightedResults=function(){var a=this.$results.find(\".select2-results__option--highlighted\");return a},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find(\"[aria-selected]\"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),2>=c?this.$results.scrollTop(0):(g>this.$results.outerHeight()||0>g)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get(\"templateResult\"),e=this.options.get(\"escapeMarkup\"),f=d(b);null==f?c.style.display=\"none\":\"string\"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define(\"select2/keys\",[],function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return a}),b.define(\"select2/selection/base\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class=\"select2-selection\" role=\"combobox\" aria-autocomplete=\"list\" aria-haspopup=\"true\" aria-expanded=\"false\"></span>');return this._tabindex=0,null!=this.$element.data(\"old-tabindex\")?this._tabindex=this.$element.data(\"old-tabindex\"):null!=this.$element.attr(\"tabindex\")&&(this._tabindex=this.$element.attr(\"tabindex\")),b.attr(\"title\",this.$element.attr(\"title\")),b.attr(\"tabindex\",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a){var b=this,d=(a.id+\"-container\",a.id+\"-results\");this.container=a,this.$selection.on(\"focus\",function(a){b.trigger(\"focus\",a)}),this.$selection.on(\"blur\",function(a){b.trigger(\"blur\",a)}),this.$selection.on(\"keydown\",function(a){b.trigger(\"keypress\",a),a.which===c.SPACE&&a.preventDefault()}),a.on(\"results:focus\",function(a){b.$selection.attr(\"aria-activedescendant\",a.data._resultId)}),a.on(\"selection:update\",function(a){b.update(a.data)}),a.on(\"open\",function(){b.$selection.attr(\"aria-expanded\",\"true\"),b.$selection.attr(\"aria-owns\",d),b._attachCloseHandler(a)}),a.on(\"close\",function(){b.$selection.attr(\"aria-expanded\",\"false\"),b.$selection.removeAttr(\"aria-activedescendant\"),b.$selection.removeAttr(\"aria-owns\"),b.$selection.focus(),b._detachCloseHandler(a)}),a.on(\"enable\",function(){b.$selection.attr(\"tabindex\",b._tabindex)}),a.on(\"disable\",function(){b.$selection.attr(\"tabindex\",\"-1\")})},d.prototype._attachCloseHandler=function(b){a(document.body).on(\"mousedown.select2.\"+b.id,function(b){var c=a(b.target),d=c.closest(\".select2\"),e=a(\".select2.select2-container--open\");e.each(function(){var b=a(this);if(this!=d[0]){var c=b.data(\"element\");c.select2(\"close\")}})})},d.prototype._detachCloseHandler=function(b){a(document.body).off(\"mousedown.select2.\"+b.id)},d.prototype.position=function(a,b){var c=b.find(\".selection\");c.append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(){throw new Error(\"The `update` method must be defined in child classes.\")},d}),b.define(\"select2/selection/single\",[\"jquery\",\"./base\",\"../utils\",\"../keys\"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass(\"select2-selection--single\"),a.html('<span class=\"select2-selection__rendered\"></span><span class=\"select2-selection__arrow\" role=\"presentation\"><b role=\"presentation\"></b></span>'),a},d.prototype.bind=function(a){var b=this;d.__super__.bind.apply(this,arguments);var c=a.id+\"-container\";this.$selection.find(\".select2-selection__rendered\").attr(\"id\",c),this.$selection.attr(\"aria-labelledby\",c),this.$selection.on(\"mousedown\",function(a){1===a.which&&b.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"focus\",function(){}),this.$selection.on(\"blur\",function(){}),a.on(\"selection:update\",function(a){b.update(a.data)})},d.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},d.prototype.display=function(a){var b=this.options.get(\"templateSelection\"),c=this.options.get(\"escapeMarkup\");return c(b(a))},d.prototype.selectionContainer=function(){return a(\"<span></span>\")},d.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.display(b),d=this.$selection.find(\".select2-selection__rendered\");d.empty().append(c),d.prop(\"title\",b.title||b.text)},d}),b.define(\"select2/selection/multiple\",[\"jquery\",\"./base\",\"../utils\"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass(\"select2-selection--multiple\"),a.html('<ul class=\"select2-selection__rendered\"></ul>'),a},d.prototype.bind=function(){var b=this;d.__super__.bind.apply(this,arguments),this.$selection.on(\"click\",function(a){b.trigger(\"toggle\",{originalEvent:a})}),this.$selection.on(\"click\",\".select2-selection__choice__remove\",function(c){var d=a(this),e=d.parent(),f=e.data(\"data\");b.trigger(\"unselect\",{originalEvent:c,data:f})})},d.prototype.clear=function(){this.$selection.find(\".select2-selection__rendered\").empty()},d.prototype.display=function(a){var b=this.options.get(\"templateSelection\"),c=this.options.get(\"escapeMarkup\");return c(b(a))},d.prototype.selectionContainer=function(){var b=a('<li class=\"select2-selection__choice\"><span class=\"select2-selection__choice__remove\" role=\"presentation\">&times;</span></li>');return b},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.display(e),g=this.selectionContainer();g.append(f),g.prop(\"title\",e.title||e.text),g.data(\"data\",e),b.push(g)}var h=this.$selection.find(\".select2-selection__rendered\");c.appendMany(h,b)}},d}),b.define(\"select2/selection/placeholder\",[\"../utils\"],function(){function a(a,b,c){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c)}return a.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},a.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass(\"select2-selection__placeholder\").removeClass(\"select2-selection__choice\"),c},a.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d=b.length>1;if(d||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(\".select2-selection__rendered\").append(e)},a}),b.define(\"select2/selection/allowClear\",[\"jquery\",\"../keys\"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get(\"debug\")&&window.console&&console.error&&console.error(\"Select2: The `allowClear` option should be used in combination with the `placeholder` option.\"),this.$selection.on(\"mousedown\",\".select2-selection__clear\",function(a){d._handleClear(a)}),b.on(\"keypress\",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get(\"disabled\")){var c=this.$selection.find(\".select2-selection__clear\");if(0!==c.length){b.stopPropagation();for(var d=c.data(\"data\"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger(\"unselect\",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger(\"change\"),this.trigger(\"toggle\")}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(\".select2-selection__placeholder\").length>0||0===c.length)){var d=a('<span class=\"select2-selection__clear\">&times;</span>');d.data(\"data\",c),this.$selection.find(\".select2-selection__rendered\").prepend(d)}},c}),b.define(\"select2/selection/search\",[\"jquery\",\"../utils\",\"../keys\"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class=\"select2-search select2-search--inline\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" role=\"textbox\" /></li>');this.$searchContainer=c,this.$search=c.find(\"input\");var d=b.call(this);return d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on(\"open\",function(){e.$search.attr(\"tabindex\",0),e.$search.focus()}),b.on(\"close\",function(){e.$search.attr(\"tabindex\",-1),e.$search.val(\"\"),e.$search.focus()}),b.on(\"enable\",function(){e.$search.prop(\"disabled\",!1)}),b.on(\"disable\",function(){e.$search.prop(\"disabled\",!0)}),this.$selection.on(\"focusin\",\".select2-search--inline\",function(a){e.trigger(\"focus\",a)}),this.$selection.on(\"focusout\",\".select2-search--inline\",function(a){e.trigger(\"blur\",a)}),this.$selection.on(\"keydown\",\".select2-search--inline\",function(a){a.stopPropagation(),e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented();var b=a.which;if(b===c.BACKSPACE&&\"\"===e.$search.val()){var d=e.$searchContainer.prev(\".select2-selection__choice\");if(d.length>0){var f=d.data(\"data\");e.searchRemoveChoice(f),a.preventDefault()}}}),this.$selection.on(\"input\",\".select2-search--inline\",function(){e.$selection.off(\"keyup.search\")}),this.$selection.on(\"keyup.search input\",\".select2-search--inline\",function(a){e.handleSearch(a)})},d.prototype.createPlaceholder=function(a,b){this.$search.attr(\"placeholder\",b.text)},d.prototype.update=function(a,b){this.$search.attr(\"placeholder\",\"\"),a.call(this,b),this.$selection.find(\".select2-selection__rendered\").append(this.$searchContainer),this.resizeSearch()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger(\"query\",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger(\"unselect\",{data:b}),this.trigger(\"open\"),this.$search.val(b.text+\" \")},d.prototype.resizeSearch=function(){this.$search.css(\"width\",\"25px\");var a=\"\";if(\"\"!==this.$search.attr(\"placeholder\"))a=this.$selection.find(\".select2-selection__rendered\").innerWidth();else{var b=this.$search.val().length+1;a=.75*b+\"em\"}this.$search.css(\"width\",a)},d}),b.define(\"select2/selection/eventRelay\",[\"jquery\"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=[\"open\",\"opening\",\"close\",\"closing\",\"select\",\"selecting\",\"unselect\",\"unselecting\"],g=[\"opening\",\"closing\",\"selecting\",\"unselecting\"];b.call(this,c,d),c.on(\"*\",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event(\"select2:\"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define(\"select2/translation\",[\"jquery\",\"require\"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define(\"select2/diacritics\",[],function(){var a={\"Ⓐ\":\"A\",\"Ａ\":\"A\",\"À\":\"A\",\"Á\":\"A\",\"Â\":\"A\",\"Ầ\":\"A\",\"Ấ\":\"A\",\"Ẫ\":\"A\",\"Ẩ\":\"A\",\"Ã\":\"A\",\"Ā\":\"A\",\"Ă\":\"A\",\"Ằ\":\"A\",\"Ắ\":\"A\",\"Ẵ\":\"A\",\"Ẳ\":\"A\",\"Ȧ\":\"A\",\"Ǡ\":\"A\",\"Ä\":\"A\",\"Ǟ\":\"A\",\"Ả\":\"A\",\"Å\":\"A\",\"Ǻ\":\"A\",\"Ǎ\":\"A\",\"Ȁ\":\"A\",\"Ȃ\":\"A\",\"Ạ\":\"A\",\"Ậ\":\"A\",\"Ặ\":\"A\",\"Ḁ\":\"A\",\"Ą\":\"A\",\"Ⱥ\":\"A\",\"Ɐ\":\"A\",\"Ꜳ\":\"AA\",\"Æ\":\"AE\",\"Ǽ\":\"AE\",\"Ǣ\":\"AE\",\"Ꜵ\":\"AO\",\"Ꜷ\":\"AU\",\"Ꜹ\":\"AV\",\"Ꜻ\":\"AV\",\"Ꜽ\":\"AY\",\"Ⓑ\":\"B\",\"Ｂ\":\"B\",\"Ḃ\":\"B\",\"Ḅ\":\"B\",\"Ḇ\":\"B\",\"Ƀ\":\"B\",\"Ƃ\":\"B\",\"Ɓ\":\"B\",\"Ⓒ\":\"C\",\"Ｃ\":\"C\",\"Ć\":\"C\",\"Ĉ\":\"C\",\"Ċ\":\"C\",\"Č\":\"C\",\"Ç\":\"C\",\"Ḉ\":\"C\",\"Ƈ\":\"C\",\"Ȼ\":\"C\",\"Ꜿ\":\"C\",\"Ⓓ\":\"D\",\"Ｄ\":\"D\",\"Ḋ\":\"D\",\"Ď\":\"D\",\"Ḍ\":\"D\",\"Ḑ\":\"D\",\"Ḓ\":\"D\",\"Ḏ\":\"D\",\"Đ\":\"D\",\"Ƌ\":\"D\",\"Ɗ\":\"D\",\"Ɖ\":\"D\",\"Ꝺ\":\"D\",\"Ǳ\":\"DZ\",\"Ǆ\":\"DZ\",\"ǲ\":\"Dz\",\"ǅ\":\"Dz\",\"Ⓔ\":\"E\",\"Ｅ\":\"E\",\"È\":\"E\",\"É\":\"E\",\"Ê\":\"E\",\"Ề\":\"E\",\"Ế\":\"E\",\"Ễ\":\"E\",\"Ể\":\"E\",\"Ẽ\":\"E\",\"Ē\":\"E\",\"Ḕ\":\"E\",\"Ḗ\":\"E\",\"Ĕ\":\"E\",\"Ė\":\"E\",\"Ë\":\"E\",\"Ẻ\":\"E\",\"Ě\":\"E\",\"Ȅ\":\"E\",\"Ȇ\":\"E\",\"Ẹ\":\"E\",\"Ệ\":\"E\",\"Ȩ\":\"E\",\"Ḝ\":\"E\",\"Ę\":\"E\",\"Ḙ\":\"E\",\"Ḛ\":\"E\",\"Ɛ\":\"E\",\"Ǝ\":\"E\",\"Ⓕ\":\"F\",\"Ｆ\":\"F\",\"Ḟ\":\"F\",\"Ƒ\":\"F\",\"Ꝼ\":\"F\",\"Ⓖ\":\"G\",\"Ｇ\":\"G\",\"Ǵ\":\"G\",\"Ĝ\":\"G\",\"Ḡ\":\"G\",\"Ğ\":\"G\",\"Ġ\":\"G\",\"Ǧ\":\"G\",\"Ģ\":\"G\",\"Ǥ\":\"G\",\"Ɠ\":\"G\",\"Ꞡ\":\"G\",\"Ᵹ\":\"G\",\"Ꝿ\":\"G\",\"Ⓗ\":\"H\",\"Ｈ\":\"H\",\"Ĥ\":\"H\",\"Ḣ\":\"H\",\"Ḧ\":\"H\",\"Ȟ\":\"H\",\"Ḥ\":\"H\",\"Ḩ\":\"H\",\"Ḫ\":\"H\",\"Ħ\":\"H\",\"Ⱨ\":\"H\",\"Ⱶ\":\"H\",\"Ɥ\":\"H\",\"Ⓘ\":\"I\",\"Ｉ\":\"I\",\"Ì\":\"I\",\"Í\":\"I\",\"Î\":\"I\",\"Ĩ\":\"I\",\"Ī\":\"I\",\"Ĭ\":\"I\",\"İ\":\"I\",\"Ï\":\"I\",\"Ḯ\":\"I\",\"Ỉ\":\"I\",\"Ǐ\":\"I\",\"Ȉ\":\"I\",\"Ȋ\":\"I\",\"Ị\":\"I\",\"Į\":\"I\",\"Ḭ\":\"I\",\"Ɨ\":\"I\",\"Ⓙ\":\"J\",\"Ｊ\":\"J\",\"Ĵ\":\"J\",\"Ɉ\":\"J\",\"Ⓚ\":\"K\",\"Ｋ\":\"K\",\"Ḱ\":\"K\",\"Ǩ\":\"K\",\"Ḳ\":\"K\",\"Ķ\":\"K\",\"Ḵ\":\"K\",\"Ƙ\":\"K\",\"Ⱪ\":\"K\",\"Ꝁ\":\"K\",\"Ꝃ\":\"K\",\"Ꝅ\":\"K\",\"Ꞣ\":\"K\",\"Ⓛ\":\"L\",\"Ｌ\":\"L\",\"Ŀ\":\"L\",\"Ĺ\":\"L\",\"Ľ\":\"L\",\"Ḷ\":\"L\",\"Ḹ\":\"L\",\"Ļ\":\"L\",\"Ḽ\":\"L\",\"Ḻ\":\"L\",\"Ł\":\"L\",\"Ƚ\":\"L\",\"Ɫ\":\"L\",\"Ⱡ\":\"L\",\"Ꝉ\":\"L\",\"Ꝇ\":\"L\",\"Ꞁ\":\"L\",\"Ǉ\":\"LJ\",\"ǈ\":\"Lj\",\"Ⓜ\":\"M\",\"Ｍ\":\"M\",\"Ḿ\":\"M\",\"Ṁ\":\"M\",\"Ṃ\":\"M\",\"Ɱ\":\"M\",\"Ɯ\":\"M\",\"Ⓝ\":\"N\",\"Ｎ\":\"N\",\"Ǹ\":\"N\",\"Ń\":\"N\",\"Ñ\":\"N\",\"Ṅ\":\"N\",\"Ň\":\"N\",\"Ṇ\":\"N\",\"Ņ\":\"N\",\"Ṋ\":\"N\",\"Ṉ\":\"N\",\"Ƞ\":\"N\",\"Ɲ\":\"N\",\"Ꞑ\":\"N\",\"Ꞥ\":\"N\",\"Ǌ\":\"NJ\",\"ǋ\":\"Nj\",\"Ⓞ\":\"O\",\"Ｏ\":\"O\",\"Ò\":\"O\",\"Ó\":\"O\",\"Ô\":\"O\",\"Ồ\":\"O\",\"Ố\":\"O\",\"Ỗ\":\"O\",\"Ổ\":\"O\",\"Õ\":\"O\",\"Ṍ\":\"O\",\"Ȭ\":\"O\",\"Ṏ\":\"O\",\"Ō\":\"O\",\"Ṑ\":\"O\",\"Ṓ\":\"O\",\"Ŏ\":\"O\",\"Ȯ\":\"O\",\"Ȱ\":\"O\",\"Ö\":\"O\",\"Ȫ\":\"O\",\"Ỏ\":\"O\",\"Ő\":\"O\",\"Ǒ\":\"O\",\"Ȍ\":\"O\",\"Ȏ\":\"O\",\"Ơ\":\"O\",\"Ờ\":\"O\",\"Ớ\":\"O\",\"Ỡ\":\"O\",\"Ở\":\"O\",\"Ợ\":\"O\",\"Ọ\":\"O\",\"Ộ\":\"O\",\"Ǫ\":\"O\",\"Ǭ\":\"O\",\"Ø\":\"O\",\"Ǿ\":\"O\",\"Ɔ\":\"O\",\"Ɵ\":\"O\",\"Ꝋ\":\"O\",\"Ꝍ\":\"O\",\"Ƣ\":\"OI\",\"Ꝏ\":\"OO\",\"Ȣ\":\"OU\",\"Ⓟ\":\"P\",\"Ｐ\":\"P\",\"Ṕ\":\"P\",\"Ṗ\":\"P\",\"Ƥ\":\"P\",\"Ᵽ\":\"P\",\"Ꝑ\":\"P\",\"Ꝓ\":\"P\",\"Ꝕ\":\"P\",\"Ⓠ\":\"Q\",\"Ｑ\":\"Q\",\"Ꝗ\":\"Q\",\"Ꝙ\":\"Q\",\"Ɋ\":\"Q\",\"Ⓡ\":\"R\",\"Ｒ\":\"R\",\"Ŕ\":\"R\",\"Ṙ\":\"R\",\"Ř\":\"R\",\"Ȑ\":\"R\",\"Ȓ\":\"R\",\"Ṛ\":\"R\",\"Ṝ\":\"R\",\"Ŗ\":\"R\",\"Ṟ\":\"R\",\"Ɍ\":\"R\",\"Ɽ\":\"R\",\"Ꝛ\":\"R\",\"Ꞧ\":\"R\",\"Ꞃ\":\"R\",\"Ⓢ\":\"S\",\"Ｓ\":\"S\",\"ẞ\":\"S\",\"Ś\":\"S\",\"Ṥ\":\"S\",\"Ŝ\":\"S\",\"Ṡ\":\"S\",\"Š\":\"S\",\"Ṧ\":\"S\",\"Ṣ\":\"S\",\"Ṩ\":\"S\",\"Ș\":\"S\",\"Ş\":\"S\",\"Ȿ\":\"S\",\"Ꞩ\":\"S\",\"Ꞅ\":\"S\",\"Ⓣ\":\"T\",\"Ｔ\":\"T\",\"Ṫ\":\"T\",\"Ť\":\"T\",\"Ṭ\":\"T\",\"Ț\":\"T\",\"Ţ\":\"T\",\"Ṱ\":\"T\",\"Ṯ\":\"T\",\"Ŧ\":\"T\",\"Ƭ\":\"T\",\"Ʈ\":\"T\",\"Ⱦ\":\"T\",\"Ꞇ\":\"T\",\"Ꜩ\":\"TZ\",\"Ⓤ\":\"U\",\"Ｕ\":\"U\",\"Ù\":\"U\",\"Ú\":\"U\",\"Û\":\"U\",\"Ũ\":\"U\",\"Ṹ\":\"U\",\"Ū\":\"U\",\"Ṻ\":\"U\",\"Ŭ\":\"U\",\"Ü\":\"U\",\"Ǜ\":\"U\",\"Ǘ\":\"U\",\"Ǖ\":\"U\",\"Ǚ\":\"U\",\"Ủ\":\"U\",\"Ů\":\"U\",\"Ű\":\"U\",\"Ǔ\":\"U\",\"Ȕ\":\"U\",\"Ȗ\":\"U\",\"Ư\":\"U\",\"Ừ\":\"U\",\"Ứ\":\"U\",\"Ữ\":\"U\",\"Ử\":\"U\",\"Ự\":\"U\",\"Ụ\":\"U\",\"Ṳ\":\"U\",\"Ų\":\"U\",\"Ṷ\":\"U\",\"Ṵ\":\"U\",\"Ʉ\":\"U\",\"Ⓥ\":\"V\",\"Ｖ\":\"V\",\"Ṽ\":\"V\",\"Ṿ\":\"V\",\"Ʋ\":\"V\",\"Ꝟ\":\"V\",\"Ʌ\":\"V\",\"Ꝡ\":\"VY\",\"Ⓦ\":\"W\",\"Ｗ\":\"W\",\"Ẁ\":\"W\",\"Ẃ\":\"W\",\"Ŵ\":\"W\",\"Ẇ\":\"W\",\"Ẅ\":\"W\",\"Ẉ\":\"W\",\"Ⱳ\":\"W\",\"Ⓧ\":\"X\",\"Ｘ\":\"X\",\"Ẋ\":\"X\",\"Ẍ\":\"X\",\"Ⓨ\":\"Y\",\"Ｙ\":\"Y\",\"Ỳ\":\"Y\",\"Ý\":\"Y\",\"Ŷ\":\"Y\",\"Ỹ\":\"Y\",\"Ȳ\":\"Y\",\"Ẏ\":\"Y\",\"Ÿ\":\"Y\",\"Ỷ\":\"Y\",\"Ỵ\":\"Y\",\"Ƴ\":\"Y\",\"Ɏ\":\"Y\",\"Ỿ\":\"Y\",\"Ⓩ\":\"Z\",\"Ｚ\":\"Z\",\"Ź\":\"Z\",\"Ẑ\":\"Z\",\"Ż\":\"Z\",\"Ž\":\"Z\",\"Ẓ\":\"Z\",\"Ẕ\":\"Z\",\"Ƶ\":\"Z\",\"Ȥ\":\"Z\",\"Ɀ\":\"Z\",\"Ⱬ\":\"Z\",\"Ꝣ\":\"Z\",\"ⓐ\":\"a\",\"ａ\":\"a\",\"ẚ\":\"a\",\"à\":\"a\",\"á\":\"a\",\"â\":\"a\",\"ầ\":\"a\",\"ấ\":\"a\",\"ẫ\":\"a\",\"ẩ\":\"a\",\"ã\":\"a\",\"ā\":\"a\",\"ă\":\"a\",\"ằ\":\"a\",\"ắ\":\"a\",\"ẵ\":\"a\",\"ẳ\":\"a\",\"ȧ\":\"a\",\"ǡ\":\"a\",\"ä\":\"a\",\"ǟ\":\"a\",\"ả\":\"a\",\"å\":\"a\",\"ǻ\":\"a\",\"ǎ\":\"a\",\"ȁ\":\"a\",\"ȃ\":\"a\",\"ạ\":\"a\",\"ậ\":\"a\",\"ặ\":\"a\",\"ḁ\":\"a\",\"ą\":\"a\",\"ⱥ\":\"a\",\"ɐ\":\"a\",\"ꜳ\":\"aa\",\"æ\":\"ae\",\"ǽ\":\"ae\",\"ǣ\":\"ae\",\"ꜵ\":\"ao\",\"ꜷ\":\"au\",\"ꜹ\":\"av\",\"ꜻ\":\"av\",\"ꜽ\":\"ay\",\"ⓑ\":\"b\",\"ｂ\":\"b\",\"ḃ\":\"b\",\"ḅ\":\"b\",\"ḇ\":\"b\",\"ƀ\":\"b\",\"ƃ\":\"b\",\"ɓ\":\"b\",\"ⓒ\":\"c\",\"ｃ\":\"c\",\"ć\":\"c\",\"ĉ\":\"c\",\"ċ\":\"c\",\"č\":\"c\",\"ç\":\"c\",\"ḉ\":\"c\",\"ƈ\":\"c\",\"ȼ\":\"c\",\"ꜿ\":\"c\",\"ↄ\":\"c\",\"ⓓ\":\"d\",\"ｄ\":\"d\",\"ḋ\":\"d\",\"ď\":\"d\",\"ḍ\":\"d\",\"ḑ\":\"d\",\"ḓ\":\"d\",\"ḏ\":\"d\",\"đ\":\"d\",\"ƌ\":\"d\",\"ɖ\":\"d\",\"ɗ\":\"d\",\"ꝺ\":\"d\",\"ǳ\":\"dz\",\"ǆ\":\"dz\",\"ⓔ\":\"e\",\"ｅ\":\"e\",\"è\":\"e\",\"é\":\"e\",\"ê\":\"e\",\"ề\":\"e\",\"ế\":\"e\",\"ễ\":\"e\",\"ể\":\"e\",\"ẽ\":\"e\",\"ē\":\"e\",\"ḕ\":\"e\",\"ḗ\":\"e\",\"ĕ\":\"e\",\"ė\":\"e\",\"ë\":\"e\",\"ẻ\":\"e\",\"ě\":\"e\",\"ȅ\":\"e\",\"ȇ\":\"e\",\"ẹ\":\"e\",\"ệ\":\"e\",\"ȩ\":\"e\",\"ḝ\":\"e\",\"ę\":\"e\",\"ḙ\":\"e\",\"ḛ\":\"e\",\"ɇ\":\"e\",\"ɛ\":\"e\",\"ǝ\":\"e\",\"ⓕ\":\"f\",\"ｆ\":\"f\",\"ḟ\":\"f\",\"ƒ\":\"f\",\"ꝼ\":\"f\",\"ⓖ\":\"g\",\"ｇ\":\"g\",\"ǵ\":\"g\",\"ĝ\":\"g\",\"ḡ\":\"g\",\"ğ\":\"g\",\"ġ\":\"g\",\"ǧ\":\"g\",\"ģ\":\"g\",\"ǥ\":\"g\",\"ɠ\":\"g\",\"ꞡ\":\"g\",\"ᵹ\":\"g\",\"ꝿ\":\"g\",\"ⓗ\":\"h\",\"ｈ\":\"h\",\"ĥ\":\"h\",\"ḣ\":\"h\",\"ḧ\":\"h\",\"ȟ\":\"h\",\"ḥ\":\"h\",\"ḩ\":\"h\",\"ḫ\":\"h\",\"ẖ\":\"h\",\"ħ\":\"h\",\"ⱨ\":\"h\",\"ⱶ\":\"h\",\"ɥ\":\"h\",\"ƕ\":\"hv\",\"ⓘ\":\"i\",\"ｉ\":\"i\",\"ì\":\"i\",\"í\":\"i\",\"î\":\"i\",\"ĩ\":\"i\",\"ī\":\"i\",\"ĭ\":\"i\",\"ï\":\"i\",\"ḯ\":\"i\",\"ỉ\":\"i\",\"ǐ\":\"i\",\"ȉ\":\"i\",\"ȋ\":\"i\",\"ị\":\"i\",\"į\":\"i\",\"ḭ\":\"i\",\"ɨ\":\"i\",\"ı\":\"i\",\"ⓙ\":\"j\",\"ｊ\":\"j\",\"ĵ\":\"j\",\"ǰ\":\"j\",\"ɉ\":\"j\",\"ⓚ\":\"k\",\"ｋ\":\"k\",\"ḱ\":\"k\",\"ǩ\":\"k\",\"ḳ\":\"k\",\"ķ\":\"k\",\"ḵ\":\"k\",\"ƙ\":\"k\",\"ⱪ\":\"k\",\"ꝁ\":\"k\",\"ꝃ\":\"k\",\"ꝅ\":\"k\",\"ꞣ\":\"k\",\"ⓛ\":\"l\",\"ｌ\":\"l\",\"ŀ\":\"l\",\"ĺ\":\"l\",\"ľ\":\"l\",\"ḷ\":\"l\",\"ḹ\":\"l\",\"ļ\":\"l\",\"ḽ\":\"l\",\"ḻ\":\"l\",\"ſ\":\"l\",\"ł\":\"l\",\"ƚ\":\"l\",\"ɫ\":\"l\",\"ⱡ\":\"l\",\"ꝉ\":\"l\",\"ꞁ\":\"l\",\"ꝇ\":\"l\",\"ǉ\":\"lj\",\"ⓜ\":\"m\",\"ｍ\":\"m\",\"ḿ\":\"m\",\"ṁ\":\"m\",\"ṃ\":\"m\",\"ɱ\":\"m\",\"ɯ\":\"m\",\"ⓝ\":\"n\",\"ｎ\":\"n\",\"ǹ\":\"n\",\"ń\":\"n\",\"ñ\":\"n\",\"ṅ\":\"n\",\"ň\":\"n\",\"ṇ\":\"n\",\"ņ\":\"n\",\"ṋ\":\"n\",\"ṉ\":\"n\",\"ƞ\":\"n\",\"ɲ\":\"n\",\"ŉ\":\"n\",\"ꞑ\":\"n\",\"ꞥ\":\"n\",\"ǌ\":\"nj\",\"ⓞ\":\"o\",\"ｏ\":\"o\",\"ò\":\"o\",\"ó\":\"o\",\"ô\":\"o\",\"ồ\":\"o\",\"ố\":\"o\",\"ỗ\":\"o\",\"ổ\":\"o\",\"õ\":\"o\",\"ṍ\":\"o\",\"ȭ\":\"o\",\"ṏ\":\"o\",\"ō\":\"o\",\"ṑ\":\"o\",\"ṓ\":\"o\",\"ŏ\":\"o\",\"ȯ\":\"o\",\"ȱ\":\"o\",\"ö\":\"o\",\"ȫ\":\"o\",\"ỏ\":\"o\",\"ő\":\"o\",\"ǒ\":\"o\",\"ȍ\":\"o\",\"ȏ\":\"o\",\"ơ\":\"o\",\"ờ\":\"o\",\"ớ\":\"o\",\"ỡ\":\"o\",\"ở\":\"o\",\"ợ\":\"o\",\"ọ\":\"o\",\"ộ\":\"o\",\"ǫ\":\"o\",\"ǭ\":\"o\",\"ø\":\"o\",\"ǿ\":\"o\",\"ɔ\":\"o\",\"ꝋ\":\"o\",\"ꝍ\":\"o\",\"ɵ\":\"o\",\"ƣ\":\"oi\",\"ȣ\":\"ou\",\"ꝏ\":\"oo\",\"ⓟ\":\"p\",\"ｐ\":\"p\",\"ṕ\":\"p\",\"ṗ\":\"p\",\"ƥ\":\"p\",\"ᵽ\":\"p\",\"ꝑ\":\"p\",\"ꝓ\":\"p\",\"ꝕ\":\"p\",\"ⓠ\":\"q\",\"ｑ\":\"q\",\"ɋ\":\"q\",\"ꝗ\":\"q\",\"ꝙ\":\"q\",\"ⓡ\":\"r\",\"ｒ\":\"r\",\"ŕ\":\"r\",\"ṙ\":\"r\",\"ř\":\"r\",\"ȑ\":\"r\",\"ȓ\":\"r\",\"ṛ\":\"r\",\"ṝ\":\"r\",\"ŗ\":\"r\",\"ṟ\":\"r\",\"ɍ\":\"r\",\"ɽ\":\"r\",\"ꝛ\":\"r\",\"ꞧ\":\"r\",\"ꞃ\":\"r\",\"ⓢ\":\"s\",\"ｓ\":\"s\",\"ß\":\"s\",\"ś\":\"s\",\"ṥ\":\"s\",\"ŝ\":\"s\",\"ṡ\":\"s\",\"š\":\"s\",\"ṧ\":\"s\",\"ṣ\":\"s\",\"ṩ\":\"s\",\"ș\":\"s\",\"ş\":\"s\",\"ȿ\":\"s\",\"ꞩ\":\"s\",\"ꞅ\":\"s\",\"ẛ\":\"s\",\"ⓣ\":\"t\",\"ｔ\":\"t\",\"ṫ\":\"t\",\"ẗ\":\"t\",\"ť\":\"t\",\"ṭ\":\"t\",\"ț\":\"t\",\"ţ\":\"t\",\"ṱ\":\"t\",\"ṯ\":\"t\",\"ŧ\":\"t\",\"ƭ\":\"t\",\"ʈ\":\"t\",\"ⱦ\":\"t\",\"ꞇ\":\"t\",\"ꜩ\":\"tz\",\"ⓤ\":\"u\",\"ｕ\":\"u\",\"ù\":\"u\",\"ú\":\"u\",\"û\":\"u\",\"ũ\":\"u\",\"ṹ\":\"u\",\"ū\":\"u\",\"ṻ\":\"u\",\"ŭ\":\"u\",\"ü\":\"u\",\"ǜ\":\"u\",\"ǘ\":\"u\",\"ǖ\":\"u\",\"ǚ\":\"u\",\"ủ\":\"u\",\"ů\":\"u\",\"ű\":\"u\",\"ǔ\":\"u\",\"ȕ\":\"u\",\"ȗ\":\"u\",\"ư\":\"u\",\"ừ\":\"u\",\"ứ\":\"u\",\"ữ\":\"u\",\"ử\":\"u\",\"ự\":\"u\",\"ụ\":\"u\",\"ṳ\":\"u\",\"ų\":\"u\",\"ṷ\":\"u\",\"ṵ\":\"u\",\"ʉ\":\"u\",\"ⓥ\":\"v\",\"ｖ\":\"v\",\"ṽ\":\"v\",\"ṿ\":\"v\",\"ʋ\":\"v\",\"ꝟ\":\"v\",\"ʌ\":\"v\",\"ꝡ\":\"vy\",\"ⓦ\":\"w\",\"ｗ\":\"w\",\"ẁ\":\"w\",\"ẃ\":\"w\",\"ŵ\":\"w\",\"ẇ\":\"w\",\"ẅ\":\"w\",\"ẘ\":\"w\",\"ẉ\":\"w\",\"ⱳ\":\"w\",\"ⓧ\":\"x\",\"ｘ\":\"x\",\"ẋ\":\"x\",\"ẍ\":\"x\",\"ⓨ\":\"y\",\"ｙ\":\"y\",\"ỳ\":\"y\",\"ý\":\"y\",\"ŷ\":\"y\",\"ỹ\":\"y\",\"ȳ\":\"y\",\"ẏ\":\"y\",\"ÿ\":\"y\",\"ỷ\":\"y\",\"ẙ\":\"y\",\"ỵ\":\"y\",\"ƴ\":\"y\",\"ɏ\":\"y\",\"ỿ\":\"y\",\"ⓩ\":\"z\",\"ｚ\":\"z\",\"ź\":\"z\",\"ẑ\":\"z\",\"ż\":\"z\",\"ž\":\"z\",\"ẓ\":\"z\",\"ẕ\":\"z\",\"ƶ\":\"z\",\"ȥ\":\"z\",\"ɀ\":\"z\",\"ⱬ\":\"z\",\"ꝣ\":\"z\",\"Ά\":\"Α\",\"Έ\":\"Ε\",\"Ή\":\"Η\",\"Ί\":\"Ι\",\"Ϊ\":\"Ι\",\"Ό\":\"Ο\",\"Ύ\":\"Υ\",\"Ϋ\":\"Υ\",\"Ώ\":\"Ω\",\"ά\":\"α\",\"έ\":\"ε\",\"ή\":\"η\",\"ί\":\"ι\",\"ϊ\":\"ι\",\"ΐ\":\"ι\",\"ό\":\"ο\",\"ύ\":\"υ\",\"ϋ\":\"υ\",\"ΰ\":\"υ\",\"ω\":\"ω\",\"ς\":\"σ\"};return a}),b.define(\"select2/data/base\",[\"../utils\"],function(a){function b(){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(){throw new Error(\"The `current` method must be defined in child classes.\")},b.prototype.query=function(){throw new Error(\"The `query` method must be defined in child classes.\")},b.prototype.bind=function(){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+\"-result-\";return d+=a.generateChars(4),d+=null!=c.id?\"-\"+c.id.toString():\"-\"+a.generateChars(4)},b}),b.define(\"select2/data/select\",[\"./base\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(\":selected\").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is(\"option\"))return a.element.selected=!0,void this.$element.trigger(\"change\");if(this.$element.prop(\"multiple\"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")});else{var d=a.id;this.$element.val(d),this.$element.trigger(\"change\")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop(\"multiple\"))return a.selected=!1,c(a.element).is(\"option\")?(a.element.selected=!1,void this.$element.trigger(\"change\")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger(\"change\")})},d.prototype.bind=function(a){var b=this;this.container=a,a.on(\"select\",function(a){b.select(a.data)}),a.on(\"unselect\",function(a){b.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find(\"*\").each(function(){c.removeData(this,\"data\")})},d.prototype.query=function(a,b){var d=[],e=this,f=this.$element.children();f.each(function(){var b=c(this);if(b.is(\"option\")||b.is(\"optgroup\")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement(\"optgroup\"),b.label=a.text):(b=document.createElement(\"option\"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,\"data\",e),d},d.prototype.item=function(a){var b={};\nif(b=c.data(a[0],\"data\"),null!=b)return b;if(a.is(\"option\"))b={id:a.val(),text:a.text(),disabled:a.prop(\"disabled\"),selected:a.prop(\"selected\"),title:a.prop(\"title\")};else if(a.is(\"optgroup\")){b={text:a.prop(\"label\"),children:[],title:a.prop(\"title\")};for(var d=a.children(\"option\"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],\"data\",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:\"\"},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){var c=this.options.get(\"matcher\");return c(a,b)},d}),b.define(\"select2/data/array\",[\"./select\",\"../utils\",\"jquery\"],function(a,b,c){function d(a,b){var c=b.get(\"data\")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find(\"option\").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find(\"option\"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=(c.extend(!0,{},l,j),this.option(l));k.replaceWith(m)}else{var n=this.option(j);if(j.children){var o=this.convertToOptions(j.children);b.appendMany(n,o)}h.push(n)}}return h},d}),b.define(\"select2/data/ajax\",[\"./array\",\"../utils\",\"jquery\"],function(a,b,c){function d(b,c){this.ajaxOptions=this._applyDefaults(c.get(\"ajax\")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),a.__super__.constructor.call(this,b,c)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return{q:a.term}},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get(\"debug\")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error(\"Select2: The AJAX results did not return an array in the `results` key of the response.\")),b(f)},function(){});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:\"GET\"},this.ajaxOptions);\"function\"==typeof f.url&&(f.url=f.url(a)),\"function\"==typeof f.data&&(f.data=f.data(a)),this.ajaxOptions.delay&&\"\"!==a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define(\"select2/data/tags\",[\"jquery\"],function(a){function b(b,c,d){var e=d.get(\"tags\"),f=d.get(\"createTag\");if(void 0!==f&&(this.createTag=f),b.call(this,c,d),a.isArray(e))for(var g=0;g<e.length;g++){var h=e[g],i=this._normalizeItem(h),j=this.option(i);this.$element.append(j)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0),k=i.text===b.term;if(k||j)return f?!1:(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr(\"data-select2-tag\",!0),e.addOptions([m]),e.insertTag(g,l)}a.results=g,c(a)}var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return\"\"===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(){var b=(this._lastTag,this.$element.find(\"option[data-select2-tag]\"));b.each(function(){this.selected||a(this).remove()})},b}),b.define(\"select2/data/tokenizer\",[\"jquery\"],function(a){function b(a,b,c){var d=c.get(\"tokenizer\");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(\".select2-search__field\")},b.prototype.query=function(a,b,c){function d(a){e.select(a)}var e=this;b.term=b.term||\"\";var f=this.tokenizer(b,this.options,d);f.term!==b.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.focus()),b.term=f.term),a.call(this,b,c)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get(\"tokenSeparators\")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);e(m),g=g.substr(h+1)||\"\",h=0}else h++}return{term:g}},b}),b.define(\"select2/data/minimumInputLength\",[],function(){function a(a,b,c){this.minimumInputLength=c.get(\"minimumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||\"\",b.term.length<this.minimumInputLength?void this.trigger(\"results:message\",{message:\"inputTooShort\",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define(\"select2/data/maximumInputLength\",[],function(){function a(a,b,c){this.maximumInputLength=c.get(\"maximumInputLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||\"\",this.maximumInputLength>0&&b.term.length>this.maximumInputLength?void this.trigger(\"results:message\",{message:\"inputTooLong\",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define(\"select2/data/maximumSelectionLength\",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get(\"maximumSelectionLength\"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return d.maximumSelectionLength>0&&f>=d.maximumSelectionLength?void d.trigger(\"results:message\",{message:\"maximumSelected\",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define(\"select2/dropdown\",[\"jquery\",\"./utils\"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class=\"select2-dropdown\"><span class=\"select2-results\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$dropdown=b,b},c.prototype.position=function(){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define(\"select2/dropdown/search\",[\"jquery\",\"../utils\"],function(a){function b(){}return b.prototype.render=function(b){var c=b.call(this),d=a('<span class=\"select2-search select2-search--dropdown\"><input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" role=\"textbox\" /></span>');return this.$searchContainer=d,this.$search=d.find(\"input\"),c.prepend(d),c},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on(\"keydown\",function(a){e.trigger(\"keypress\",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on(\"input\",function(){a(this).off(\"keyup\")}),this.$search.on(\"keyup input\",function(a){e.handleSearch(a)}),c.on(\"open\",function(){e.$search.attr(\"tabindex\",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on(\"close\",function(){e.$search.attr(\"tabindex\",-1),e.$search.val(\"\")}),c.on(\"results:all\",function(a){if(null==a.query.term||\"\"===a.query.term){var b=e.showSearch(a);b?e.$searchContainer.removeClass(\"select2-search--hide\"):e.$searchContainer.addClass(\"select2-search--hide\")}})},b.prototype.handleSearch=function(){if(!this._keyUpPrevented){var a=this.$search.val();this.trigger(\"query\",{term:a})}this._keyUpPrevented=!1},b.prototype.showSearch=function(){return!0},b}),b.define(\"select2/dropdown/hidePlaceholder\",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get(\"placeholder\")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return\"string\"==typeof b&&(b={id:\"\",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define(\"select2/dropdown/infiniteScroll\",[\"jquery\"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on(\"query\",function(a){e.lastParams=a,e.loading=!0}),c.on(\"query:append\",function(a){e.lastParams=a,e.loading=!0}),this.$results.on(\"scroll\",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1),d=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1);c+50>=d&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger(\"query:append\",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class=\"option load-more\" role=\"treeitem\"></li>'),c=this.options.get(\"translations\").get(\"loadingMore\");return b.html(c(this.lastParams)),b},b}),b.define(\"select2/dropdown/attachBody\",[\"jquery\",\"../utils\"],function(a,b){function c(a,b,c){this.$dropdownParent=c.get(\"dropdownParent\")||document.body,a.call(this,b,c)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on(\"open\",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on(\"results:all\",function(){d._positionDropdown(),d._resizeDropdown()}),b.on(\"results:append\",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on(\"close\",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on(\"mousedown\",function(a){a.stopPropagation()})},c.prototype.position=function(a,b,c){b.attr(\"class\",c.attr(\"class\")),b.removeClass(\"select2\"),b.addClass(\"select2-container--open\"),b.css({position:\"absolute\",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a(\"<span></span>\"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c){var d=this,e=\"scroll.select2.\"+c.id,f=\"resize.select2.\"+c.id,g=\"orientationchange.select2.\"+c.id,h=this.$container.parents().filter(b.hasScroll);h.each(function(){a(this).data(\"select2-scroll-position\",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),h.on(e,function(){var b=a(this).data(\"select2-scroll-position\");a(this).scrollTop(b.y)}),a(window).on(e+\" \"+f+\" \"+g,function(){d._positionDropdown(),d._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c){var d=\"scroll.select2.\"+c.id,e=\"resize.select2.\"+c.id,f=\"orientationchange.select2.\"+c.id,g=this.$container.parents().filter(b.hasScroll);g.off(d),a(window).off(d+\" \"+e+\" \"+f)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass(\"select2-dropdown--above\"),d=this.$dropdown.hasClass(\"select2-dropdown--below\"),e=null,f=(this.$container.position(),this.$container.offset());f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom};c||d||(e=\"below\"),k||!j||c?!j&&k&&c&&(e=\"below\"):e=\"above\",(\"above\"==e||c&&\"below\"!==e)&&(l.top=g.top-h.height),null!=e&&(this.$dropdown.removeClass(\"select2-dropdown--below select2-dropdown--above\").addClass(\"select2-dropdown--\"+e),this.$container.removeClass(\"select2-container--below select2-container--above\").addClass(\"select2-container--\"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var a={width:this.$container.outerWidth(!1)+\"px\"};this.options.get(\"dropdownAutoWidth\")&&(a.minWidth=a.width,a.width=\"auto\"),this.$dropdown.css(a)},c.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define(\"select2/dropdown/minimumResultsForSearch\",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get(\"minimumResultsForSearch\"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return a(c.data.results)<this.minimumResultsForSearch?!1:b.call(this,c)},b}),b.define(\"select2/dropdown/selectOnClose\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"close\",function(){d._handleSelectOnClose()})},a.prototype._handleSelectOnClose=function(){var a=this.getHighlightedResults();a.length<1||this.trigger(\"select\",{data:a.data(\"data\")})},a}),b.define(\"select2/dropdown/closeOnSelect\",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on(\"select\",function(a){d._selectTriggered(a)}),b.on(\"unselect\",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger(\"close\")},a}),b.define(\"select2/i18n/en\",[],function(){return{errorLoading:function(){return\"The results could not be loaded.\"},inputTooLong:function(a){var b=a.input.length-a.maximum,c=\"Please delete \"+b+\" character\";return 1!=b&&(c+=\"s\"),c},inputTooShort:function(a){var b=a.minimum-a.input.length,c=\"Please enter \"+b+\" or more characters\";return c},loadingMore:function(){return\"Loading more results…\"},maximumSelected:function(a){var b=\"You can only select \"+a.maximum+\" item\";return 1!=a.maximum&&(b+=\"s\"),b},noResults:function(){return\"No results found\"},searching:function(){return\"Searching…\"}}}),b.define(\"select2/defaults\",[\"jquery\",\"require\",\"./results\",\"./selection/single\",\"./selection/multiple\",\"./selection/placeholder\",\"./selection/allowClear\",\"./selection/search\",\"./selection/eventRelay\",\"./utils\",\"./translation\",\"./diacritics\",\"./data/select\",\"./data/array\",\"./data/ajax\",\"./data/tags\",\"./data/tokenizer\",\"./data/minimumInputLength\",\"./data/maximumInputLength\",\"./data/maximumSelectionLength\",\"./dropdown\",\"./dropdown/search\",\"./dropdown/hidePlaceholder\",\"./dropdown/infiniteScroll\",\"./dropdown/attachBody\",\"./dropdown/minimumResultsForSearch\",\"./dropdown/selectOnClose\",\"./dropdown/closeOnSelect\",\"./i18n/en\"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}D.prototype.apply=function(l){if(l=a.extend({},this.defaults,l),null==l.dataAdapter){if(l.dataAdapter=null!=l.ajax?o:null!=l.data?n:m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+\"compat/query\");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+\"compat/initSelection\");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+\"compat/dropdownCss\");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.selectionAdapter=l.multiple?e:d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+\"compat/containerCss\");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if(\"string\"==typeof l.language)if(l.language.indexOf(\"-\")>0){var H=l.language.split(\"-\"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push(\"en\");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for \"'+M+'\" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+\"en\"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\\u0000-\\u007E]/g,b)}function c(d,e){if(\"\"===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){var h=e.children[g],i=c(d,h);null==i&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return j.indexOf(k)>-1?e:null}this.defaults={amdBase:\"./\",amdLanguageBase:\"./i18n/\",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:\"default\",width:\"resolve\"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)};var E=new D;return E}),b.define(\"select2/options\",[\"require\",\"jquery\",\"./defaults\",\"./utils\"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is(\"input\")){var f=a(this.get(\"amdBase\")+\"compat/inputData\");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=[\"select2\"];null==this.options.multiple&&(this.options.multiple=a.prop(\"multiple\")),null==this.options.disabled&&(this.options.disabled=a.prop(\"disabled\")),null==this.options.language&&(a.prop(\"lang\")?this.options.language=a.prop(\"lang\").toLowerCase():a.closest(\"[lang]\").prop(\"lang\")&&(this.options.language=a.closest(\"[lang]\").prop(\"lang\"))),null==this.options.dir&&(this.options.dir=a.prop(\"dir\")?a.prop(\"dir\"):a.closest(\"[dir]\").prop(\"dir\")?a.closest(\"[dir]\").prop(\"dir\"):\"ltr\"),a.prop(\"disabled\",this.options.disabled),a.prop(\"multiple\",this.options.multiple),a.data(\"select2Tags\")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags=\"true\"` attributes and will be removed in future versions of Select2.'),a.data(\"data\",a.data(\"select2Tags\")),a.data(\"tags\",!0)),a.data(\"ajaxUrl\")&&(this.options.debug&&window.console&&console.warn&&console.warn(\"Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.\"),a.attr(\"ajax--url\",a.data(\"ajaxUrl\")),a.data(\"ajax--url\",a.data(\"ajaxUrl\")));var e={};e=b.fn.jquery&&\"1.\"==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define(\"select2/core\",[\"jquery\",\"./options\",\"./utils\",\"./keys\"],function(a,b,c,d){var e=function(a,c){null!=a.data(\"select2\")&&a.data(\"select2\").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr(\"tabindex\")||0;a.data(\"old-tabindex\",d),a.attr(\"tabindex\",\"-1\");var f=this.options.get(\"dataAdapter\");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get(\"selectionAdapter\");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get(\"dropdownAdapter\");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get(\"resultsAdapter\");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger(\"selection:update\",{data:a})}),a.addClass(\"select2-hidden-accessible\"),a.attr(\"aria-hidden\",\"true\"),this._syncAttributes(),a.data(\"select2\",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b=\"\";return b=null!=a.attr(\"id\")?a.attr(\"id\"):null!=a.attr(\"name\")?a.attr(\"name\")+\"-\"+c.generateChars(2):c.generateChars(4),b=\"select2-\"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get(\"width\"));null!=b&&a.css(\"width\",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(\"resolve\"==b){var d=this._resolveWidth(a,\"style\");return null!=d?d:this._resolveWidth(a,\"element\")}if(\"element\"==b){var e=a.outerWidth(!1);return 0>=e?\"auto\":e+\"px\"}if(\"style\"==b){var f=a.attr(\"style\");if(\"string\"!=typeof f)return null;for(var g=f.split(\";\"),h=0,i=g.length;i>h;h+=1){var j=g[h].replace(/\\s/g,\"\"),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on(\"change.select2\",function(){b.dataAdapter.current(function(a){b.trigger(\"selection:update\",{data:a})})}),this._sync=c.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent(\"onpropertychange\",this._sync);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener(\"DOMAttrModified\",b._sync,!1)},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=[\"toggle\"];this.selection.on(\"toggle\",function(){b.toggleDropdown()}),this.selection.on(\"*\",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on(\"*\",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on(\"open\",function(){a.$container.addClass(\"select2-container--open\")}),this.on(\"close\",function(){a.$container.removeClass(\"select2-container--open\")}),this.on(\"enable\",function(){a.$container.removeClass(\"select2-container--disabled\")}),this.on(\"disable\",function(){a.$container.addClass(\"select2-container--disabled\")}),this.on(\"focus\",function(){a.$container.addClass(\"select2-container--focus\")}),this.on(\"blur\",function(){a.$container.removeClass(\"select2-container--focus\")}),this.on(\"query\",function(b){a.isOpen()||a.trigger(\"open\"),this.dataAdapter.query(b,function(c){a.trigger(\"results:all\",{data:c,query:b})})}),this.on(\"query:append\",function(b){this.dataAdapter.query(b,function(c){a.trigger(\"results:append\",{data:c,query:b})})}),this.on(\"keypress\",function(b){var c=b.which;a.isOpen()?c===d.ENTER?(a.trigger(\"results:select\"),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger(\"results:toggle\"),b.preventDefault()):c===d.UP?(a.trigger(\"results:previous\"),b.preventDefault()):c===d.DOWN?(a.trigger(\"results:next\"),b.preventDefault()):(c===d.ESC||c===d.TAB)&&(a.close(),b.preventDefault()):(c===d.ENTER||c===d.SPACE||(c===d.DOWN||c===d.UP)&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set(\"disabled\",this.$element.prop(\"disabled\")),this.options.get(\"disabled\")?(this.isOpen()&&this.close(),this.trigger(\"disable\")):this.trigger(\"enable\")},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:\"opening\",close:\"closing\",select:\"selecting\",unselect:\"unselecting\"};if(a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get(\"disabled\")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||(this.trigger(\"query\",{}),this.trigger(\"open\"))},e.prototype.close=function(){this.isOpen()&&this.trigger(\"close\")},e.prototype.isOpen=function(){return this.$container.hasClass(\"select2-container--open\")},e.prototype.enable=function(a){this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"enable\")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop(\"disabled\") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop(\"disabled\",b)},e.prototype.data=function(){this.options.get(\"debug\")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2(\"data\")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get(\"debug\")&&window.console&&console.warn&&console.warn('Select2: The `select2(\"val\")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger(\"change\")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent(\"onpropertychange\",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener(\"DOMAttrModified\",this._sync,!1),this._sync=null,this.$element.off(\".select2\"),this.$element.attr(\"tabindex\",this.$element.data(\"old-tabindex\")),this.$element.removeClass(\"select2-hidden-accessible\"),this.$element.attr(\"aria-hidden\",\"false\"),this.$element.removeData(\"select2\"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class=\"select2 select2-container\"><span class=\"selection\"></span><span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span></span>');return b.attr(\"dir\",this.options.get(\"dir\")),this.$container=b,this.$container.addClass(\"select2-container--\"+this.options.get(\"theme\")),b.data(\"element\",this.$element),b},e}),b.define(\"jquery.select2\",[\"jquery\",\"require\",\"./select2/core\",\"./select2/defaults\"],function(a,b,c,d){if(b(\"jquery.mousewheel\"),null==a.fn.select2){var e=[\"open\",\"close\",\"destroy\"];a.fn.select2=function(b){if(b=b||{},\"object\"==typeof b)return this.each(function(){{var d=a.extend({},b,!0);new c(a(this),d)}}),this;if(\"string\"==typeof b){var d=this.data(\"select2\");null==d&&window.console&&console.error&&console.error(\"The select2('\"+b+\"') method was called on an element that is not using Select2.\");var f=Array.prototype.slice.call(arguments,1),g=d[b](f);return a.inArray(b,e)>-1?this:g}throw new Error(\"Invalid arguments for Select2: \"+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),b.define(\"jquery.mousewheel\",[\"jquery\"],function(a){return a}),{define:b.define,require:b.require}}(),c=b.require(\"jquery.select2\");return a.fn.select2.amd=b,c});",";(function(){\n\n\n/**\n * hasOwnProperty.\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Require the given path.\n *\n * @param {String} path\n * @return {Object} exports\n * @api public\n */\n\nfunction require(path, parent, orig) {\n  var resolved = require.resolve(path);\n\n  // lookup failed\n  if (null == resolved) {\n    orig = orig || path;\n    parent = parent || 'root';\n    var err = new Error('Failed to require \"' + orig + '\" from \"' + parent + '\"');\n    err.path = orig;\n    err.parent = parent;\n    err.require = true;\n    throw err;\n  }\n\n  var module = require.modules[resolved];\n\n  // perform real require()\n  // by invoking the module's\n  // registered function\n  if (!module.exports) {\n    module.exports = {};\n    module.client = module.component = true;\n    module.call(this, module.exports, require.relative(resolved), module);\n  }\n\n  return module.exports;\n}\n\n/**\n * Registered modules.\n */\n\nrequire.modules = {};\n\n/**\n * Registered aliases.\n */\n\nrequire.aliases = {};\n\n/**\n * Resolve `path`.\n *\n * Lookup:\n *\n *   - PATH/index.js\n *   - PATH.js\n *   - PATH\n *\n * @param {String} path\n * @return {String} path or null\n * @api private\n */\n\nrequire.resolve = function(path) {\n  var index = path + '/index.js';\n\n  var paths = [\n    path,\n    path + '.js',\n    path + '.json',\n    path + '/index.js',\n    path + '/index.json'\n  ];\n\n  for (var i = 0; i < paths.length; i++) {\n    var path = paths[i];\n    if (has.call(require.modules, path)) return path;\n  }\n\n  if (has.call(require.aliases, index)) {\n    return require.aliases[index];\n  }\n};\n\n/**\n * Normalize `path` relative to the current path.\n *\n * @param {String} curr\n * @param {String} path\n * @return {String}\n * @api private\n */\n\nrequire.normalize = function(curr, path) {\n  var segs = [];\n\n  if ('.' != path.charAt(0)) return path;\n\n  curr = curr.split('/');\n  path = path.split('/');\n\n  for (var i = 0; i < path.length; ++i) {\n    if ('..' == path[i]) {\n      curr.pop();\n    } else if ('.' != path[i] && '' != path[i]) {\n      segs.push(path[i]);\n    }\n  }\n\n  return curr.concat(segs).join('/');\n};\n\n/**\n * Register module at `path` with callback `definition`.\n *\n * @param {String} path\n * @param {Function} definition\n * @api private\n */\n\nrequire.register = function(path, definition) {\n  require.modules[path] = definition;\n};\n\n/**\n * Alias a module definition.\n *\n * @param {String} from\n * @param {String} to\n * @api private\n */\n\nrequire.alias = function(from, to) {\n  if (!has.call(require.modules, from)) {\n    throw new Error('Failed to alias \"' + from + '\", it does not exist');\n  }\n  require.aliases[to] = from;\n};\n\n/**\n * Return a require function relative to the `parent` path.\n *\n * @param {String} parent\n * @return {Function}\n * @api private\n */\n\nrequire.relative = function(parent) {\n  var p = require.normalize(parent, '..');\n\n  /**\n   * lastIndexOf helper.\n   */\n\n  function lastIndexOf(arr, obj) {\n    var i = arr.length;\n    while (i--) {\n      if (arr[i] === obj) return i;\n    }\n    return -1;\n  }\n\n  /**\n   * The relative require() itself.\n   */\n\n  function localRequire(path) {\n    var resolved = localRequire.resolve(path);\n    return require(resolved, parent, path);\n  }\n\n  /**\n   * Resolve relative to the parent.\n   */\n\n  localRequire.resolve = function(path) {\n    // resolve deps by returning\n    // the dep in the nearest \"deps\"\n    // directory\n    if ('.' != path.charAt(0)) {\n      var segs = parent.split('/');\n      var i = lastIndexOf(segs, 'deps') + 1;\n      if (!i) i = 0;\n      path = segs.slice(0, i + 1).join('/') + '/deps/' + path;\n      return path;\n    }\n    return require.normalize(p, path);\n  };\n\n  /**\n   * Check if module is defined at `path`.\n   */\n\n  localRequire.exists = function(path) {\n    return has.call(require.modules, localRequire.resolve(path));\n  };\n\n  return localRequire;\n};\nrequire.register(\"component-emitter/index.js\", function(exports, require, module){\n\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  fn._off = on;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var i = callbacks.indexOf(fn._off || fn);\n  if (~i) callbacks.splice(i, 1);\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n});\nrequire.register(\"dropzone/index.js\", function(exports, require, module){\n\n\n/**\n * Exposing dropzone\n */\nmodule.exports = require(\"./lib/dropzone.js\");\n\n});\nrequire.register(\"dropzone/lib/dropzone.js\", function(exports, require, module){\n// Generated by CoffeeScript 1.4.0\n\n/*\n#\n# More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n# \n# Copyright (c) 2012, Matias Meno  \n# \n# Permission is hereby granted, free of charge, to any person obtaining a copy\n# of this software and associated documentation files (the \"Software\"), to deal\n# in the Software without restriction, including without limitation the rights\n# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n# copies of the Software, and to permit persons to whom the Software is\n# furnished to do so, subject to the following conditions:\n# \n# The above copyright notice and this permission notice shall be included in\n# all copies or substantial portions of the Software.\n# \n# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n# THE SOFTWARE.\n#\n*/\n\n\n(function() {\n  var Dropzone, Em, camelize, o, without,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __slice = [].slice;\n\n  o = typeof jQuery !== \"undefined\" && jQuery !== null ? jQuery : require(\"jquery\");\n\n  Em = typeof Emitter !== \"undefined\" && Emitter !== null ? Emitter : require(\"emitter\");\n\n  Dropzone = (function(_super) {\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.version = \"1.3.10\";\n\n    /*\n      This is a list of all available events you can register on a dropzone object.\n    \n      You can register an event handler like this:\n    \n          dropzone.on(\"dragEnter\", function() { });\n    */\n\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"selectedfiles\", \"addedfile\", \"removedfile\", \"thumbnail\", \"error\", \"processingfile\", \"uploadprogress\", \"sending\", \"success\", \"complete\", \"reset\"];\n\n    Dropzone.prototype.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      parallelUploads: 2,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 2,\n      thumbnailWidth: 100,\n      thumbnailHeight: 100,\n      params: {},\n      clickable: true,\n      enqueueForUpload: true,\n      previewsContainer: null,\n      accept: function(file, done) {\n        return done();\n      },\n      fallback: function() {\n        this.element.addClass(\"browser-not-supported\");\n        this.element.find(\".message\").removeClass(\"default\");\n        this.element.find(\".message span\").html(\"Your browser does not support drag'n'drop file uploads.\");\n        this.element.append(\"Please use the fallback form below to upload your files like in the olden days.</p>\");\n        return this.element.append(this.getFallbackForm());\n      },\n      /*\n          Those functions register themselves to the events on init and handle all\n          the user interface specific stuff. Overwriting them won't break the upload\n          but can break the way it's displayed.\n          You can overwrite them if you don't like the default behavior. If you just\n          want to add an additional event handler, register it on the dropzone object\n          and don't overwrite those options.\n      */\n\n      drop: function(e) {\n        return this.element.removeClass(\"drag-hover\");\n      },\n      dragstart: o.noop,\n      dragend: function(e) {\n        return this.element.removeClass(\"drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.addClass(\"drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.addClass(\"drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.removeClass(\"drag-hover\");\n      },\n      selectedfiles: function(files) {\n        if (this.element.is(this.previewsContainer)) {\n          return this.element.addClass(\"started\");\n        }\n      },\n      reset: function() {\n        return this.element.removeClass(\"started\");\n      },\n      addedfile: function(file) {\n        file.previewTemplate = o(this.options.previewTemplate);\n        this.previewsContainer.append(file.previewTemplate);\n        file.previewTemplate.find(\".filename span\").text(file.name);\n        return file.previewTemplate.find(\".details\").append(o(\"<div class=\\\"size\\\">\" + (this.filesize(file.size)) + \"</div>\"));\n      },\n      removedfile: function(file) {\n        return file.previewTemplate.remove();\n      },\n      thumbnail: function(file, dataUrl) {\n        file.previewTemplate.removeClass(\"file-preview\").addClass(\"image-preview\");\n        return file.previewTemplate.find(\".details\").append(o(\"<img alt=\\\"\" + file.name + \"\\\" src=\\\"\" + dataUrl + \"\\\"/>\"));\n      },\n      error: function(file, message) {\n        file.previewTemplate.addClass(\"error\");\n        return file.previewTemplate.find(\".error-message span\").text(message);\n      },\n      processingfile: function(file) {\n        return file.previewTemplate.addClass(\"processing\");\n      },\n      uploadprogress: function(file, progress) {\n        return file.previewTemplate.find(\".progress .upload\").css({\n          width: \"\" + progress + \"%\"\n        });\n      },\n      sending: o.noop,\n      success: function(file) {\n        return file.previewTemplate.addClass(\"success\");\n      },\n      complete: o.noop,\n      previewTemplate: \"<div class=\\\"preview file-preview\\\">\\n  <div class=\\\"details\\\">\\n   <div class=\\\"filename\\\"><span></span></div>\\n  </div>\\n  <div class=\\\"progress\\\"><span class=\\\"upload\\\"></span></div>\\n  <div class=\\\"success-mark\\\"><span>✔</span></div>\\n  <div class=\\\"error-mark\\\"><span>✘</span></div>\\n  <div class=\\\"error-message\\\"><span></span></div>\\n</div>\"\n    };\n\n    function Dropzone(element, options) {\n      var elementId, elementOptions, extend, _ref;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.element = o(element);\n      if (this.element.length !== 1) {\n        throw new Error(\"You can only instantiate dropzone on a single element.\");\n      }\n      if (this.element.data(\"dropzone\")) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      this.element.data(\"dropzone\", this);\n      elementId = this.element.attr(\"id\");\n      elementOptions = (_ref = (elementId ? Dropzone.options[camelize(elementId)] : void 0)) != null ? _ref : {};\n      this.elementTagName = this.element.get(0).tagName;\n      extend = function() {\n        var key, object, objects, target, val, _i, _len;\n        target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        for (_i = 0, _len = objects.length; _i < _len; _i++) {\n          object = objects[_i];\n          for (key in object) {\n            val = object[key];\n            target[key] = val;\n          }\n        }\n        return target;\n      };\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.url == null) {\n        this.options.url = this.element.attr(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      this.previewsContainer = this.options.previewsContainer ? o(this.options.previewsContainer) : this.element;\n      this.init();\n    }\n\n    Dropzone.prototype.init = function() {\n      var capableBrowser, regex, _i, _len, _ref, _ref1,\n        _this = this;\n      if (this.elementTagName === \"form\" && this.element.attr(\"enctype\") !== \"multipart/form-data\") {\n        this.element.attr(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.hasClass(\"dropzone\") && this.element.find(\".message\").length === 0) {\n        this.element.append(o(\"<div class=\\\"default message\\\"><span>Drop files here to upload</span></div>\"));\n      }\n      capableBrowser = true;\n      if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData) {\n        _ref = this.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      } else {\n        capableBrowser = false;\n      }\n      if (!capableBrowser) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.clickable) {\n        this.element.addClass(\"clickable\");\n        this.hiddenFileInput = o(\"<input type=\\\"file\\\" multiple />\");\n        this.element.click(function(evt) {\n          var target;\n          target = o(evt.target);\n          if (target.is(_this.element) || target.is(_this.element.find(\".message\"))) {\n            return _this.hiddenFileInput.click();\n          }\n        });\n        this.hiddenFileInput.change(function() {\n          var files;\n          files = _this.hiddenFileInput.get(0).files;\n          _this.emit(\"selectedfiles\", files);\n          if (files.length) {\n            return _this.handleFiles(files);\n          }\n        });\n      }\n      this.files = [];\n      this.filesQueue = [];\n      this.filesProcessing = [];\n      this.URL = (_ref1 = window.URL) != null ? _ref1 : window.webkitURL;\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var fields;\n      fields = o(\"<div class=\\\"fallback-elements\\\"><input type=\\\"file\\\" name=\\\"\" + this.options.paramName + \"\\\" multiple=\\\"multiple\\\" /><button type=\\\"submit\\\">Upload!</button></div>\");\n      if (this.elementTagName !== \"FORM\") {\n        fields = o(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"post\\\"></form>\").append(fields);\n      } else {\n        if (!this.element.attr(\"enctype\")) {\n          this.element.attr(\"enctype\", \"multipart/form-data\");\n        }\n        if (!this.element.attr(\"method\")) {\n          this.element.attr(\"method\", \"post\");\n        }\n      }\n      return fields;\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var eventName, noPropagation, _i, _len, _ref,\n        _this = this;\n      _ref = this.events;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        eventName = _ref[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      noPropagation = function(e) {\n        e.stopPropagation();\n        return e.preventDefault();\n      };\n      this.element.on(\"dragstart.dropzone\", function(e) {\n        return _this.emit(\"dragstart\", e);\n      });\n      this.element.on(\"dragenter.dropzone\", function(e) {\n        noPropagation(e);\n        return _this.emit(\"dragenter\", e);\n      });\n      this.element.on(\"dragover.dropzone\", function(e) {\n        noPropagation(e);\n        return _this.emit(\"dragover\", e);\n      });\n      this.element.on(\"dragleave.dropzone\", function(e) {\n        return _this.emit(\"dragleave\", e);\n      });\n      this.element.on(\"drop.dropzone\", function(e) {\n        noPropagation(e);\n        _this.drop(e);\n        return _this.emit(\"drop\", e);\n      });\n      return this.element.on(\"dragend.dropzone\", function(e) {\n        return _this.emit(\"dragend\", e);\n      });\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      return this.element.off(\".dropzone\");\n    };\n\n    Dropzone.prototype.disable = function() {\n      this.removeEventListeners();\n      this.files = [];\n      this.filesProcessing = [];\n      return this.filesQueue = [];\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var string;\n      if (size >= 100000000000) {\n        size = size / 100000000000;\n        string = \"TB\";\n      } else if (size >= 100000000) {\n        size = size / 100000000;\n        string = \"GB\";\n      } else if (size >= 100000) {\n        size = size / 100000;\n        string = \"MB\";\n      } else if (size >= 100) {\n        size = size / 100;\n        string = \"KB\";\n      } else {\n        size = size * 10;\n        string = \"b\";\n      }\n      return \"<strong>\" + (Math.round(size) / 10) + \"</strong> \" + string;\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files;\n      if (!e.originalEvent.dataTransfer) {\n        return;\n      }\n      files = e.originalEvent.dataTransfer.files;\n      this.emit(\"selectedfiles\", files);\n      if (files.length) {\n        return this.handleFiles(files);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(\"File is too big (\" + (Math.round(file.size / 1024 / 10.24) / 100) + \"MB). Max filesize: \" + this.options.maxFilesize + \"MB\");\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      var _this = this;\n      this.files.push(file);\n      this.emit(\"addedfile\", file);\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this.createThumbnail(file);\n      }\n      return this.accept(file, function(error) {\n        if (error) {\n          return _this.errorProcessing(file, error);\n        } else {\n          if (_this.options.enqueueForUpload) {\n            _this.filesQueue.push(file);\n            return _this.processQueue();\n          }\n        }\n      });\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.processing) {\n        throw new Error(\"Can't remove file currently processing\");\n      }\n      this.files = without(this.files, file);\n      this.filesQueue = without(this.filesQueue, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.createThumbnail = function(file) {\n      var fileReader,\n        _this = this;\n      fileReader = new FileReader;\n      fileReader.onload = function() {\n        var img;\n        img = new Image;\n        img.onload = function() {\n          var canvas, ctx, srcHeight, srcRatio, srcWidth, srcX, srcY, thumbnail, trgHeight, trgRatio, trgWidth, trgX, trgY;\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          srcX = 0;\n          srcY = 0;\n          srcWidth = img.width;\n          srcHeight = img.height;\n          canvas.width = _this.options.thumbnailWidth;\n          canvas.height = _this.options.thumbnailHeight;\n          trgX = 0;\n          trgY = 0;\n          trgWidth = canvas.width;\n          trgHeight = canvas.height;\n          srcRatio = img.width / img.height;\n          trgRatio = canvas.width / canvas.height;\n          if (img.height < canvas.height || img.width < canvas.width) {\n            trgHeight = srcHeight;\n            trgWidth = srcWidth;\n          } else {\n            if (srcRatio > trgRatio) {\n              srcHeight = img.height;\n              srcWidth = srcHeight * trgRatio;\n            } else {\n              srcWidth = img.width;\n              srcHeight = srcWidth / trgRatio;\n            }\n          }\n          srcX = (img.width - srcWidth) / 2;\n          srcY = (img.height - srcHeight) / 2;\n          trgY = (canvas.height - trgHeight) / 2;\n          trgX = (canvas.width - trgWidth) / 2;\n          ctx.drawImage(img, srcX, srcY, srcWidth, srcHeight, trgX, trgY, trgWidth, trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          return _this.emit(\"thumbnail\", file, thumbnail);\n        };\n        return img.src = fileReader.result;\n      };\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.filesProcessing.length;\n      i = processingLength;\n      while (i < parallelUploads) {\n        if (!this.filesQueue.length) {\n          return;\n        }\n        this.processFile(this.filesQueue.shift());\n        i++;\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      this.filesProcessing.push(file);\n      file.processing = true;\n      this.emit(\"processingfile\", file);\n      return this.uploadFile(file);\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      var formData, handleError, input, inputElement, inputName, key, progressObj, value, xhr, _i, _len, _ref, _ref1, _ref2,\n        _this = this;\n      xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", this.options.url, true);\n      handleError = function() {\n        return _this.errorProcessing(file, xhr.responseText || (\"Server responded with \" + xhr.status + \" code.\"));\n      };\n      xhr.onload = function(e) {\n        var response;\n        if (xhr.status !== 200) {\n          return handleError();\n        } else {\n          _this.emit(\"uploadprogress\", file, 100);\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            response = JSON.parse(response);\n          }\n          return _this.finished(file, response, e);\n        }\n      };\n      xhr.onerror = function() {\n        return handleError();\n      };\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = function(e) {\n        return _this.emit(\"uploadprogress\", file, Math.max(0, Math.min(100, (e.loaded / e.total) * 100)));\n      };\n      xhr.setRequestHeader(\"Accept\", \"application/json\");\n      xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n      xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n      xhr.setRequestHeader(\"X-File-Name\", file.name);\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      if (this.elementTagName = \"FORM\") {\n        _ref2 = this.element.find(\"input, textarea, select, button\");\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          inputElement = _ref2[_i];\n          input = o(inputElement);\n          inputName = input.attr(\"name\");\n          if (!input.attr(\"type\") || input.attr(\"type\").toLowerCase() !== \"checkbox\" || inputElement.checked) {\n            formData.append(input.attr(\"name\"), input.val());\n          }\n        }\n      }\n      this.emit(\"sending\", file, xhr, formData);\n      formData.append(this.options.paramName, file);\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype.finished = function(file, responseText, e) {\n      this.filesProcessing = without(this.filesProcessing, file);\n      file.processing = false;\n      this.processQueue();\n      this.emit(\"success\", file, responseText, e);\n      this.emit(\"finished\", file, responseText, e);\n      return this.emit(\"complete\", file);\n    };\n\n    Dropzone.prototype.errorProcessing = function(file, message) {\n      this.filesProcessing = without(this.filesProcessing, file);\n      file.processing = false;\n      this.processQueue();\n      this.emit(\"error\", file, message);\n      return this.emit(\"complete\", file);\n    };\n\n    return Dropzone;\n\n  })(Em);\n\n  Dropzone.options = {};\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match[1].toUpperCase();\n    });\n  };\n\n  o.fn.dropzone = function(options) {\n    return this.each(function() {\n      return new Dropzone(this, options);\n    });\n  };\n\n  o(function() {\n    return o(\".dropzone\").dropzone();\n  });\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n}).call(this);\n\n});\nrequire.alias(\"component-emitter/index.js\", \"dropzone/deps/emitter/index.js\");\n\nif (typeof exports == \"object\") {\n  module.exports = require(\"dropzone\");\n} else if (typeof define == \"function\" && define.amd) {\n  define(require(\"dropzone\"));\n} else {\n  window[\"Dropzone\"] = require(\"dropzone\");\n}})();","\n/*!\n * jquery-confirm v1.7.3 (http://craftpip.github.io/jquery-confirm/)\n * Author: Boniface Pereira\n * Website: www.craftpip.com\n * Contact: hey@craftpip.com\n *\n * Copyright 2013-2015 jquery-confirm\n * Licensed under MIT (https://github.com/craftpip/jquery-confirm/blob/master/LICENSE)\n */\nif(typeof jQuery===\"undefined\"){throw new Error(\"jquery-confirm requires jQuery\")}var jconfirm,Jconfirm;(function(b){b.confirm=function(c){return jconfirm(c)};b.alert=function(c){c.cancelButton=false;return jconfirm(c)};b.dialog=function(c){c.cancelButton=false;c.confirmButton=false;return jconfirm(c)};jconfirm=function(c){if(jconfirm.defaults){b.extend(jconfirm.pluginDefaults,jconfirm.defaults)}var c=b.extend({},jconfirm.pluginDefaults,c);return new Jconfirm(c)};Jconfirm=function(c){b.extend(this,c);this._init()};Jconfirm.prototype={_init:function(){var c=this;this._rand=Math.round(Math.random()*99999);this._buildHTML();this._bindEvents();setTimeout(function(){c.open()},0)},animations:[\"anim-scale\",\"anim-top\",\"anim-bottom\",\"anim-left\",\"anim-right\",\"anim-zoom\",\"anim-opacity\",\"anim-none\",\"anim-rotate\",\"anim-rotatex\",\"anim-rotatey\",\"anim-scalex\",\"anim-scaley\"],_buildHTML:function(){var c=this;this.animation=\"anim-\"+this.animation.toLowerCase();if(this.animation===\"none\"){this.animationSpeed=0}this.$el=b(this.template).appendTo(this.container).addClass(this.theme);this.$el.find(\".jconfirm-box-container\").addClass(this.columnClass);this.CSS={\"-webkit-transition-duration\":this.animationSpeed/1000+\"s\",\"transition-duration\":this.animationSpeed/1000+\"s\",\"-webkjit-transition-timing-function\":\"cubic-bezier(0.27, 1.12, 0.32, \"+this.animationBounce+\")\",\"transition-timing-function\":\"cubic-bezier(0.27, 1.12, 0.32, \"+this.animationBounce+\")\",};this.$el.find(\".jconfirm-bg\").css(this.CSS);this.$b=this.$el.find(\".jconfirm-box\").css(this.CSS).addClass(this.animation);this.setTitle();this.contentDiv=this.$el.find(\"div.content\");this.$btnc=this.$el.find(\".buttons\");if(this.confirmButton&&this.confirmButton.trim()!==\"\"){this.$confirmButton=b('<button class=\"btn\">'+this.confirmButton+\"</button>\").appendTo(this.$btnc).addClass(this.confirmButtonClass)}if(this.cancelButton&&this.cancelButton.trim()!==\"\"){this.$cancelButton=b('<button class=\"btn\">'+this.cancelButton+\"</button>\").appendTo(this.$btnc).addClass(this.cancelButtonClass)}if(!this.confirmButton&&!this.cancelButton){this.$btnc.remove()}if(!this.confirmButton&&!this.cancelButton&&this.closeIcon==null){this.$closeButton=this.$b.find(\".closeIcon\").show()}if(this.closeIcon===true){this.$closeButton=this.$b.find(\".closeIcon\").show()}this.setContent();if(this.autoClose){this._startCountDown()}},setTitle:function(c){this.title=(typeof c!==\"undefined\")?c:this.title;if(this.title){this.$el.find(\"div.title\").html('<i class=\"'+this.icon+'\"></i> '+this.title)}else{this.$el.find(\"div.title\").remove()}},setContent:function(e){var f=this;this.content=(e)?e:this.content;var c=(e)?true:false;if(typeof this.content===\"boolean\"){if(!this.content){this.contentDiv.remove()}else{console.error(\"Invalid option for property content: passed TRUE\")}}else{if(typeof this.content===\"string\"){if(this.content.substr(0,4).toLowerCase()===\"url:\"){this.contentDiv.html(\"\");this.$btnc.find(\"button\").prop(\"disabled\",true);var d=this.content.substring(4,this.content.length);b.get(d).done(function(h){f.contentDiv.html(h)}).always(function(i,h,j){if(typeof f.contentLoaded===\"function\"){f.contentLoaded(i,h,j)}f.$btnc.find(\"button\").prop(\"disabled\",false);f.setDialogCenter()})}else{this.contentDiv.html(this.content)}}else{if(typeof this.content===\"function\"){this.contentDiv.html(\"\");this.$btnc.find(\"button\").attr(\"disabled\",\"disabled\");var g=this.content(this);if(typeof g!==\"object\"){console.error(\"The content function must return jquery promise.\")}else{if(typeof g.always!==\"function\"){console.error(\"The object returned is not a jquery promise.\")}else{g.always(function(i,h){f.$btnc.find(\"button\").removeAttr(\"disabled\");f.setDialogCenter()})}}}else{console.error(\"Invalid option for property content, passed: \"+typeof this.content)}}}this.setDialogCenter(c)},_startCountDown:function(){var c=this.autoClose.split(\"|\");if(/cancel/.test(c[0])&&this.type===\"alert\"){return false}else{if(/confirm|cancel/.test(c[0])){this.$cd=b('<span class=\"countdown\">').appendTo(this[\"$\"+c[0]+\"Button\"]);var d=this;d.$cd.parent().click();var e=c[1]/1000;this.interval=setInterval(function(){d.$cd.html(\" [\"+(e-=1)+\"]\");if(e===0){d.$cd.parent().trigger(\"click\");clearInterval(d.interval)}},1000)}else{console.error(\"Invalid option \"+c[0]+\", must be confirm/cancel\")}}},_bindEvents:function(){var c=this;this.$el.find(\".jconfirm-scrollpane\").click(function(d){if(c.backgroundDismiss){c.cancel();c.close()}else{c.$b.addClass(\"hilight\");setTimeout(function(){c.$b.removeClass(\"hilight\")},400)}});this.$el.find(\".jconfirm-box\").click(function(d){d.stopPropagation()});if(this.$confirmButton){this.$confirmButton.click(function(f){f.preventDefault();var d=c.confirm(c.$b);if(typeof d===\"undefined\"||d){c.close()}})}if(this.$cancelButton){this.$cancelButton.click(function(f){f.preventDefault();var d=c.cancel(c.$b);if(typeof d===\"undefined\"||d){c.close()}})}if(this.$closeButton){this.$closeButton.click(function(d){d.preventDefault();c.cancel();c.close()})}if(this.keyboardEnabled){setTimeout(function(){b(window).on(\"keyup.\"+this._rand,function(d){c.reactOnKey(d)})},500)}b(window).on(\"resize.\"+this._rand,function(){c.setDialogCenter(true)})},reactOnKey:function a(f){var c=b(\".jconfirm\");if(c.eq(c.length-1)[0]!==this.$el[0]){return false}var d=f.which;if(d===27){if(!this.backgroundDismiss){this.$el.find(\".jconfirm-bg\").click();return false}if(this.$cancelButton){this.$cancelButton.click()}else{this.close()}}if(d===13||d==32){if(this.$confirmButton){this.$confirmButton.click()}else{}}},setDialogCenter:function(d){var h=b(window).height();var g=this.$b.outerHeight();var c=(h-g)/2;var f=100;if(g>(h-f)){var e={\"margin-top\":f/2,\"margin-bottom\":f/2,}}else{var e={\"margin-top\":c,}}if(d){this.$b.animate(e,{duration:this.animationSpeed,queue:false})}else{this.$b.css(e)}},close:function(){var c=this;b(window).unbind(\"resize.\"+this._rand);if(this.keyboardEnabled){b(window).unbind(\"keyup.\"+this._rand)}c.$el.find(\".jconfirm-bg\").removeClass(\"seen\");this.$b.addClass(this.animation);setTimeout(function(){c.$el.remove()},this.animationSpeed+10);jconfirm.record.closed+=1;jconfirm.record.currentlyOpen-=1;if(jconfirm.record.currentlyOpen<1){b(\"body\").removeClass(\"jconfirm-noscroll\")}},open:function(){var c=this;if(this.isClosed()){return false}c.$el.find(\".jconfirm-bg\").addClass(\"seen\");b(\"body\").addClass(\"jconfirm-noscroll\");this.$b.removeClass(this.animations.join(\" \"));b(\"body :focus\").trigger(\"blur\");this.$b.find(\"input[autofocus]:visible:first\").focus();jconfirm.record.opened+=1;jconfirm.record.currentlyOpen+=1;return true},isClosed:function(){return(this.$el.css(\"display\")===\"\")?true:false}};jconfirm.pluginDefaults={template:'<div class=\"jconfirm\"><div class=\"jconfirm-bg\"></div><div class=\"jconfirm-scrollpane\"><div class=\"container\"><div class=\"row\"><div class=\"jconfirm-box-container span6 offset3\"><div class=\"jconfirm-box\"><div class=\"closeIcon\"><span class=\"glyphicon glyphicon-remove\"></span></div><div class=\"title\"></div><div class=\"content\"></div><div class=\"buttons\"></div><div class=\"jquery-clear\"></div></div></div></div></div></div></div>',title:\"Hello\",content:\"Are you sure to continue?\",contentLoaded:function(){},icon:\"\",confirmButton:\"Okay\",cancelButton:\"Cancel\",confirmButtonClass:\"btn-default\",cancelButtonClass:\"btn-default\",theme:\"white\",animation:\"scale\",animationSpeed:400,animationBounce:1.5,keyboardEnabled:false,container:\"body\",confirm:function(){},cancel:function(){},backgroundDismiss:true,autoClose:false,closeIcon:null,columnClass:\"col-md-6 col-md-offset-3\",};jconfirm.record={opened:0,closed:0,currentlyOpen:0,}})(jQuery);","/*!\n @package noty - jQuery Notification Plugin\n @version version: 2.3.5\n @contributors https://github.com/needim/noty/graphs/contributors\n\n @documentation Examples and Documentation - http://needim.github.com/noty/\n\n @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php\n */\n\n    if(typeof Object.create !== 'function') {\n        Object.create = function(o) {\n            function F() {\n            }\n\n            F.prototype = o;\n            return new F();\n        };\n    }\n\n    var NotyObject = {\n\n        init: function(options) {\n\n            // Mix in the passed in options with the default options\n            this.options = $.extend({}, $.noty.defaults, options);\n\n            this.options.layout = (this.options.custom) ? $.noty.layouts['inline'] : $.noty.layouts[this.options.layout];\n\n            if($.noty.themes[this.options.theme])\n                this.options.theme = $.noty.themes[this.options.theme];\n            else\n                options.themeClassName = this.options.theme;\n\n            delete options.layout;\n            delete options.theme;\n\n            this.options = $.extend({}, this.options, this.options.layout.options);\n            this.options.id = 'noty_' + (new Date().getTime() * Math.floor(Math.random() * 1000000));\n\n            this.options = $.extend({}, this.options, options);\n\n            // Build the noty dom initial structure\n            this._build();\n\n            // return this so we can chain/use the bridge with less code.\n            return this;\n        }, // end init\n\n        _build: function() {\n\n            // Generating noty bar\n            var $bar = $('<div class=\"noty_bar noty_type_' + this.options.type + '\"></div>').attr('id', this.options.id);\n            $bar.append(this.options.template).find('.noty_text').html(this.options.text);\n\n            this.$bar = (this.options.layout.parent.object !== null) ? $(this.options.layout.parent.object).css(this.options.layout.parent.css).append($bar) : $bar;\n\n            if(this.options.themeClassName)\n                this.$bar.addClass(this.options.themeClassName).addClass('noty_container_type_' + this.options.type);\n\n            // Set buttons if available\n            if(this.options.buttons) {\n\n                // If we have button disable closeWith & timeout options\n                this.options.closeWith = [];\n                this.options.timeout = false;\n\n                var $buttons = $('<div/>').addClass('noty_buttons');\n\n                (this.options.layout.parent.object !== null) ? this.$bar.find('.noty_bar').append($buttons) : this.$bar.append($buttons);\n\n                var self = this;\n\n                $.each(this.options.buttons, function(i, button) {\n                    var $button = $('<button/>').addClass((button.addClass) ? button.addClass : 'gray').html(button.text).attr('id', button.id ? button.id : 'button-' + i)\n                        .appendTo(self.$bar.find('.noty_buttons'))\n                        .on('click', function(event) {\n                            if($.isFunction(button.onClick)) {\n                                button.onClick.call($button, self, event);\n                            }\n                        });\n                });\n            }\n\n            // For easy access\n            this.$message = this.$bar.find('.noty_message');\n            this.$closeButton = this.$bar.find('.noty_close');\n            this.$buttons = this.$bar.find('.noty_buttons');\n\n            $.noty.store[this.options.id] = this; // store noty for api\n\n        }, // end _build\n\n        show: function() {\n\n            var self = this;\n\n            (self.options.custom) ? self.options.custom.find(self.options.layout.container.selector).append(self.$bar) : $(self.options.layout.container.selector).append(self.$bar);\n\n            if(self.options.theme && self.options.theme.style)\n                self.options.theme.style.apply(self);\n\n            ($.type(self.options.layout.css) === 'function') ? this.options.layout.css.apply(self.$bar) : self.$bar.css(this.options.layout.css || {});\n\n            self.$bar.addClass(self.options.layout.addClass);\n\n            self.options.layout.container.style.apply($(self.options.layout.container.selector));\n\n            self.showing = true;\n\n            if(self.options.theme && self.options.theme.style)\n                self.options.theme.callback.onShow.apply(this);\n\n            if($.inArray('click', self.options.closeWith) > -1)\n                self.$bar.css('cursor', 'pointer').one('click', function(evt) {\n                    self.stopPropagation(evt);\n                    if(self.options.callback.onCloseClick) {\n                        self.options.callback.onCloseClick.apply(self);\n                    }\n                    self.close();\n                });\n\n            if($.inArray('hover', self.options.closeWith) > -1)\n                self.$bar.one('mouseenter', function() {\n                    self.close();\n                });\n\n            if($.inArray('button', self.options.closeWith) > -1)\n                self.$closeButton.one('click', function(evt) {\n                    self.stopPropagation(evt);\n                    self.close();\n                });\n\n            if($.inArray('button', self.options.closeWith) == -1)\n                self.$closeButton.remove();\n\n            if(self.options.callback.onShow)\n                self.options.callback.onShow.apply(self);\n\n            if (typeof self.options.animation.open == 'string') {\n                self.$bar.css('height', self.$bar.innerHeight());\n                self.$bar.show().addClass(self.options.animation.open).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n                    if(self.options.callback.afterShow) self.options.callback.afterShow.apply(self);\n                    self.showing = false;\n                    self.shown = true;\n                });\n\n            } else {\n                self.$bar.animate(\n                    self.options.animation.open,\n                    self.options.animation.speed,\n                    self.options.animation.easing,\n                    function() {\n                        if(self.options.callback.afterShow) self.options.callback.afterShow.apply(self);\n                        self.showing = false;\n                        self.shown = true;\n                    });\n            }\n\n            // If noty is have a timeout option\n            if(self.options.timeout)\n                self.$bar.delay(self.options.timeout).promise().done(function() {\n                    self.close();\n                });\n\n            return this;\n\n        }, // end show\n\n        close: function() {\n\n            if(this.closed) return;\n            if(this.$bar && this.$bar.hasClass('i-am-closing-now')) return;\n\n            var self = this;\n\n            if(this.showing) {\n                self.$bar.queue(\n                    function() {\n                        self.close.apply(self);\n                    }\n                );\n                return;\n            }\n\n            if(!this.shown && !this.showing) { // If we are still waiting in the queue just delete from queue\n                var queue = [];\n                $.each($.noty.queue, function(i, n) {\n                    if(n.options.id != self.options.id) {\n                        queue.push(n);\n                    }\n                });\n                $.noty.queue = queue;\n                return;\n            }\n\n            self.$bar.addClass('i-am-closing-now');\n\n            if(self.options.callback.onClose) {\n                self.options.callback.onClose.apply(self);\n            }\n\n            if (typeof self.options.animation.close == 'string') {\n                self.$bar.addClass(self.options.animation.close).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {\n                    if(self.options.callback.afterClose) self.options.callback.afterClose.apply(self);\n                    self.closeCleanUp();\n                });\n            } else {\n                self.$bar.clearQueue().stop().animate(\n                    self.options.animation.close,\n                    self.options.animation.speed,\n                    self.options.animation.easing,\n                    function() {\n                        if(self.options.callback.afterClose) self.options.callback.afterClose.apply(self);\n                    })\n                    .promise().done(function() {\n                        self.closeCleanUp();\n                    });\n            }\n\n        }, // end close\n\n        closeCleanUp: function() {\n\n            var self = this;\n\n            // Modal Cleaning\n            if(self.options.modal) {\n                $.notyRenderer.setModalCount(-1);\n                if($.notyRenderer.getModalCount() == 0) $('.noty_modal').fadeOut('fast', function() {\n                    $(this).remove();\n                });\n            }\n\n            // Layout Cleaning\n            $.notyRenderer.setLayoutCountFor(self, -1);\n            if($.notyRenderer.getLayoutCountFor(self) == 0) $(self.options.layout.container.selector).remove();\n\n            // Make sure self.$bar has not been removed before attempting to remove it\n            if(typeof self.$bar !== 'undefined' && self.$bar !== null) {\n\n                if (typeof self.options.animation.close == 'string') {\n                    self.$bar.css('transition', 'all 100ms ease').css('border', 0).css('margin', 0).height(0);\n                    self.$bar.one('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function() {\n                        self.$bar.remove();\n                        self.$bar = null;\n                        self.closed = true;\n\n                        if(self.options.theme.callback && self.options.theme.callback.onClose) {\n                            self.options.theme.callback.onClose.apply(self);\n                        }\n                    });\n                } else {\n                    self.$bar.remove();\n                    self.$bar = null;\n                    self.closed = true;\n                }\n            }\n\n            delete $.noty.store[self.options.id]; // deleting noty from store\n\n            if(self.options.theme.callback && self.options.theme.callback.onClose) {\n                self.options.theme.callback.onClose.apply(self);\n            }\n\n            if(!self.options.dismissQueue) {\n                // Queue render\n                $.noty.ontap = true;\n\n                $.notyRenderer.render();\n            }\n\n            if(self.options.maxVisible > 0 && self.options.dismissQueue) {\n                $.notyRenderer.render();\n            }\n\n        }, // end close clean up\n\n        setText: function(text) {\n            if(!this.closed) {\n                this.options.text = text;\n                this.$bar.find('.noty_text').html(text);\n            }\n            return this;\n        },\n\n        setType: function(type) {\n            if(!this.closed) {\n                this.options.type = type;\n                this.options.theme.style.apply(this);\n                this.options.theme.callback.onShow.apply(this);\n            }\n            return this;\n        },\n\n        setTimeout: function(time) {\n            if(!this.closed) {\n                var self = this;\n                this.options.timeout = time;\n                self.$bar.delay(self.options.timeout).promise().done(function() {\n                    self.close();\n                });\n            }\n            return this;\n        },\n\n        stopPropagation: function(evt) {\n            evt = evt || window.event;\n            if(typeof evt.stopPropagation !== \"undefined\") {\n                evt.stopPropagation();\n            }\n            else {\n                evt.cancelBubble = true;\n            }\n        },\n\n        closed : false,\n        showing: false,\n        shown  : false\n\n    }; // end NotyObject\n\n    $.notyRenderer = {};\n\n    $.notyRenderer.init = function(options) {\n\n        // Renderer creates a new noty\n        var notification = Object.create(NotyObject).init(options);\n\n        if(notification.options.killer)\n            $.noty.closeAll();\n\n        (notification.options.force) ? $.noty.queue.unshift(notification) : $.noty.queue.push(notification);\n\n        $.notyRenderer.render();\n\n        return ($.noty.returns == 'object') ? notification : notification.options.id;\n    };\n\n    $.notyRenderer.render = function() {\n\n        var instance = $.noty.queue[0];\n\n        if($.type(instance) === 'object') {\n            if(instance.options.dismissQueue) {\n                if(instance.options.maxVisible > 0) {\n                    if($(instance.options.layout.container.selector + ' li').length < instance.options.maxVisible) {\n                        $.notyRenderer.show($.noty.queue.shift());\n                    }\n                    else {\n\n                    }\n                }\n                else {\n                    $.notyRenderer.show($.noty.queue.shift());\n                }\n            }\n            else {\n                if($.noty.ontap) {\n                    $.notyRenderer.show($.noty.queue.shift());\n                    $.noty.ontap = false;\n                }\n            }\n        }\n        else {\n            $.noty.ontap = true; // Queue is over\n        }\n\n    };\n\n    $.notyRenderer.show = function(notification) {\n\n        if(notification.options.modal) {\n            $.notyRenderer.createModalFor(notification);\n            $.notyRenderer.setModalCount(+1);\n        }\n\n        // Where is the container?\n        if(notification.options.custom) {\n            if(notification.options.custom.find(notification.options.layout.container.selector).length == 0) {\n                notification.options.custom.append($(notification.options.layout.container.object).addClass('i-am-new'));\n            }\n            else {\n                notification.options.custom.find(notification.options.layout.container.selector).removeClass('i-am-new');\n            }\n        }\n        else {\n            if($(notification.options.layout.container.selector).length == 0) {\n                $('body').append($(notification.options.layout.container.object).addClass('i-am-new'));\n            }\n            else {\n                $(notification.options.layout.container.selector).removeClass('i-am-new');\n            }\n        }\n\n        $.notyRenderer.setLayoutCountFor(notification, +1);\n\n        notification.show();\n    };\n\n    $.notyRenderer.createModalFor = function(notification) {\n        if($('.noty_modal').length == 0) {\n            var modal = $('<div/>').addClass('noty_modal').addClass(notification.options.theme).data('noty_modal_count', 0);\n\n            if(notification.options.theme.modal && notification.options.theme.modal.css)\n                modal.css(notification.options.theme.modal.css);\n\n            modal.prependTo($('body')).fadeIn('fast');\n\n            if($.inArray('backdrop', notification.options.closeWith) > -1)\n                modal.on('click', function(e) {\n                    $.noty.closeAll();\n                });\n        }\n    };\n\n    $.notyRenderer.getLayoutCountFor = function(notification) {\n        return $(notification.options.layout.container.selector).data('noty_layout_count') || 0;\n    };\n\n    $.notyRenderer.setLayoutCountFor = function(notification, arg) {\n        return $(notification.options.layout.container.selector).data('noty_layout_count', $.notyRenderer.getLayoutCountFor(notification) + arg);\n    };\n\n    $.notyRenderer.getModalCount = function() {\n        return $('.noty_modal').data('noty_modal_count') || 0;\n    };\n\n    $.notyRenderer.setModalCount = function(arg) {\n        return $('.noty_modal').data('noty_modal_count', $.notyRenderer.getModalCount() + arg);\n    };\n\n    // This is for custom container\n    $.fn.noty = function(options) {\n        options.custom = $(this);\n        return $.notyRenderer.init(options);\n    };\n\n    $.noty = {};\n    $.noty.queue = [];\n    $.noty.ontap = true;\n    $.noty.layouts = {};\n    $.noty.themes = {};\n    $.noty.returns = 'object';\n    $.noty.store = {};\n\n    $.noty.get = function(id) {\n        return $.noty.store.hasOwnProperty(id) ? $.noty.store[id] : false;\n    };\n\n    $.noty.close = function(id) {\n        return $.noty.get(id) ? $.noty.get(id).close() : false;\n    };\n\n    $.noty.setText = function(id, text) {\n        return $.noty.get(id) ? $.noty.get(id).setText(text) : false;\n    };\n\n    $.noty.setType = function(id, type) {\n        return $.noty.get(id) ? $.noty.get(id).setType(type) : false;\n    };\n\n    $.noty.clearQueue = function() {\n        $.noty.queue = [];\n    };\n\n    $.noty.closeAll = function() {\n        $.noty.clearQueue();\n        $.each($.noty.store, function(id, noty) {\n            noty.close();\n        });\n    };\n\n    var windowAlert = window.alert;\n\n    $.noty.consumeAlert = function(options) {\n        window.alert = function(text) {\n            if(options)\n                options.text = text;\n            else\n                options = {text: text};\n\n            $.notyRenderer.init(options);\n        };\n    };\n\n    $.noty.stopConsumeAlert = function() {\n        window.alert = windowAlert;\n    };\n\n    $.noty.defaults = {\n        layout      : 'top',\n        theme       : 'defaultTheme',\n        type        : 'alert',\n        text        : '',\n        dismissQueue: true,\n        template    : '<div class=\"noty_message\"><span class=\"noty_text\"></span><div class=\"noty_close\"></div></div>',\n        animation   : {\n            open  : {height: 'toggle'},\n            close : {height: 'toggle'},\n            easing: 'swing',\n            speed : 500\n        },\n        timeout     : false,\n        force       : false,\n        modal       : false,\n        maxVisible  : 5,\n        killer      : false,\n        closeWith   : ['click'],\n        callback    : {\n            onShow      : function() {\n            },\n            afterShow   : function() {\n            },\n            onClose     : function() {\n            },\n            afterClose  : function() {\n            },\n            onCloseClick: function() {\n            }\n        },\n        buttons     : false\n    };\n\n    $(window).on('resize', function() {\n        $.each($.noty.layouts, function(index, layout) {\n            layout.container.style.apply($(layout.container.selector));\n        });\n    });\n\n    // Helpers\n    window.noty = function noty(options) {\n        return $.notyRenderer.init(options);\n    };\n","// TODO: in future try to replace most inline compability checks with polyfills for code readability \n\n// element.textContent polyfill.\n// Unsupporting browsers: IE8\n\nif (Object.defineProperty && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(Element.prototype, \"textContent\") && !Object.getOwnPropertyDescriptor(Element.prototype, \"textContent\").get) {\n\t(function() {\n\t\tvar innerText = Object.getOwnPropertyDescriptor(Element.prototype, \"innerText\");\n\t\tObject.defineProperty(Element.prototype, \"textContent\",\n\t\t\t{\n\t\t\t\tget: function() {\n\t\t\t\t\treturn innerText.get.call(this);\n\t\t\t\t},\n\t\t\t\tset: function(s) {\n\t\t\t\t\treturn innerText.set.call(this, s);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t})();\n}\n\n// isArray polyfill for ie8\nif(!Array.isArray) {\n  Array.isArray = function(arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]';\n  };\n};/**\n * @license wysihtml5x v0.4.15\n * https://github.com/Edicy/wysihtml5\n *\n * Author: Christopher Blum (https://github.com/tiff)\n * Secondary author of extended features: Oliver Pulges (https://github.com/pulges)\n *\n * Copyright (C) 2012 XING AG\n * Licensed under the MIT license (MIT)\n *\n */\nvar wysihtml5 = {\n  version: \"0.4.15\",\n\n  // namespaces\n  commands:   {},\n  dom:        {},\n  quirks:     {},\n  toolbar:    {},\n  lang:       {},\n  selection:  {},\n  views:      {},\n\n  INVISIBLE_SPACE: \"\\uFEFF\",\n\n  EMPTY_FUNCTION: function() {},\n\n  ELEMENT_NODE: 1,\n  TEXT_NODE:    3,\n\n  BACKSPACE_KEY:  8,\n  ENTER_KEY:      13,\n  ESCAPE_KEY:     27,\n  SPACE_KEY:      32,\n  DELETE_KEY:     46\n};\n;/**\r\n * Rangy, a cross-browser JavaScript range and selection library\r\n * http://code.google.com/p/rangy/\r\n *\r\n * Copyright 2014, Tim Down\r\n * Licensed under the MIT license.\r\n * Version: 1.3alpha.20140804\r\n * Build date: 4 August 2014\r\n */\r\n\r\n(function(factory, global) {\r\n    if (typeof define == \"function\" && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n/*\r\n    TODO: look into this properly.\r\n    \r\n    } else if (typeof exports == \"object\") {\r\n        // Node/CommonJS style for Browserify\r\n        module.exports = factory;\r\n*/\r\n    } else {\r\n        // No AMD or CommonJS support so we place Rangy in a global variable\r\n        global.rangy = factory();\r\n    }\r\n})(function() {\r\n\r\n    var OBJECT = \"object\", FUNCTION = \"function\", UNDEFINED = \"undefined\";\r\n\r\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\r\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\r\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\r\n        \"commonAncestorContainer\"];\r\n\r\n    // Minimal set of methods required for DOM Level 2 Range compliance\r\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\r\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\r\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\r\n\r\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\r\n\r\n    // Subset of TextRange's full set of methods that we're interested in\r\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\r\n        \"setEndPoint\", \"getBoundingClientRect\"];\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Trio of functions taken from Peter Michaux's article:\r\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\r\n    function isHostMethod(o, p) {\r\n        var t = typeof o[p];\r\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\r\n    }\r\n\r\n    function isHostObject(o, p) {\r\n        return !!(typeof o[p] == OBJECT && o[p]);\r\n    }\r\n\r\n    function isHostProperty(o, p) {\r\n        return typeof o[p] != UNDEFINED;\r\n    }\r\n\r\n    // Creates a convenience function to save verbose repeated calls to tests functions\r\n    function createMultiplePropertyTest(testFunc) {\r\n        return function(o, props) {\r\n            var i = props.length;\r\n            while (i--) {\r\n                if (!testFunc(o, props[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        };\r\n    }\r\n\r\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\r\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\r\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\r\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\r\n\r\n    function isTextRange(range) {\r\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\r\n    }\r\n\r\n    function getBody(doc) {\r\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\r\n    }\r\n\r\n    var modules = {};\r\n\r\n    var api = {\r\n        version: \"1.3alpha.20140804\",\r\n        initialized: false,\r\n        supported: true,\r\n\r\n        util: {\r\n            isHostMethod: isHostMethod,\r\n            isHostObject: isHostObject,\r\n            isHostProperty: isHostProperty,\r\n            areHostMethods: areHostMethods,\r\n            areHostObjects: areHostObjects,\r\n            areHostProperties: areHostProperties,\r\n            isTextRange: isTextRange,\r\n            getBody: getBody\r\n        },\r\n\r\n        features: {},\r\n\r\n        modules: modules,\r\n        config: {\r\n            alertOnFail: true,\r\n            alertOnWarn: false,\r\n            preferTextRange: false,\r\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\r\n        }\r\n    };\r\n\r\n    function consoleLog(msg) {\r\n        if (isHostObject(window, \"console\") && isHostMethod(window.console, \"log\")) {\r\n            window.console.log(msg);\r\n        }\r\n    }\r\n\r\n    function alertOrLog(msg, shouldAlert) {\r\n        if (shouldAlert) {\r\n            window.alert(msg);\r\n        } else  {\r\n            consoleLog(msg);\r\n        }\r\n    }\r\n\r\n    function fail(reason) {\r\n        api.initialized = true;\r\n        api.supported = false;\r\n        alertOrLog(\"Rangy is not supported on this page in your browser. Reason: \" + reason, api.config.alertOnFail);\r\n    }\r\n\r\n    api.fail = fail;\r\n\r\n    function warn(msg) {\r\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\r\n    }\r\n\r\n    api.warn = warn;\r\n\r\n    // Add utility extend() method\r\n    if ({}.hasOwnProperty) {\r\n        api.util.extend = function(obj, props, deep) {\r\n            var o, p;\r\n            for (var i in props) {\r\n                if (props.hasOwnProperty(i)) {\r\n                    o = obj[i];\r\n                    p = props[i];\r\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\r\n                        api.util.extend(o, p, true);\r\n                    }\r\n                    obj[i] = p;\r\n                }\r\n            }\r\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\r\n            if (props.hasOwnProperty(\"toString\")) {\r\n                obj.toString = props.toString;\r\n            }\r\n            return obj;\r\n        };\r\n    } else {\r\n        fail(\"hasOwnProperty not supported\");\r\n    }\r\n\r\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\r\n    (function() {\r\n        var el = document.createElement(\"div\");\r\n        el.appendChild(document.createElement(\"span\"));\r\n        var slice = [].slice;\r\n        var toArray;\r\n        try {\r\n            if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\r\n                toArray = function(arrayLike) {\r\n                    return slice.call(arrayLike, 0);\r\n                };\r\n            }\r\n        } catch (e) {}\r\n\r\n        if (!toArray) {\r\n            toArray = function(arrayLike) {\r\n                var arr = [];\r\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\r\n                    arr[i] = arrayLike[i];\r\n                }\r\n                return arr;\r\n            };\r\n        }\r\n\r\n        api.util.toArray = toArray;\r\n    })();\r\n\r\n\r\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\r\n    // normalization of event properties\r\n    var addListener;\r\n    if (isHostMethod(document, \"addEventListener\")) {\r\n        addListener = function(obj, eventType, listener) {\r\n            obj.addEventListener(eventType, listener, false);\r\n        };\r\n    } else if (isHostMethod(document, \"attachEvent\")) {\r\n        addListener = function(obj, eventType, listener) {\r\n            obj.attachEvent(\"on\" + eventType, listener);\r\n        };\r\n    } else {\r\n        fail(\"Document does not have required addEventListener or attachEvent method\");\r\n    }\r\n\r\n    api.util.addListener = addListener;\r\n\r\n    var initListeners = [];\r\n\r\n    function getErrorDesc(ex) {\r\n        return ex.message || ex.description || String(ex);\r\n    }\r\n\r\n    // Initialization\r\n    function init() {\r\n        if (api.initialized) {\r\n            return;\r\n        }\r\n        var testRange;\r\n        var implementsDomRange = false, implementsTextRange = false;\r\n\r\n        // First, perform basic feature tests\r\n\r\n        if (isHostMethod(document, \"createRange\")) {\r\n            testRange = document.createRange();\r\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\r\n                implementsDomRange = true;\r\n            }\r\n        }\r\n\r\n        var body = getBody(document);\r\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\r\n            fail(\"No body element found\");\r\n            return;\r\n        }\r\n\r\n        if (body && isHostMethod(body, \"createTextRange\")) {\r\n            testRange = body.createTextRange();\r\n            if (isTextRange(testRange)) {\r\n                implementsTextRange = true;\r\n            }\r\n        }\r\n\r\n        if (!implementsDomRange && !implementsTextRange) {\r\n            fail(\"Neither Range nor TextRange are available\");\r\n            return;\r\n        }\r\n\r\n        api.initialized = true;\r\n        api.features = {\r\n            implementsDomRange: implementsDomRange,\r\n            implementsTextRange: implementsTextRange\r\n        };\r\n\r\n        // Initialize modules\r\n        var module, errorMessage;\r\n        for (var moduleName in modules) {\r\n            if ( (module = modules[moduleName]) instanceof Module ) {\r\n                module.init(module, api);\r\n            }\r\n        }\r\n\r\n        // Call init listeners\r\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\r\n            try {\r\n                initListeners[i](api);\r\n            } catch (ex) {\r\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\r\n                consoleLog(errorMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\r\n    api.init = init;\r\n\r\n    // Execute listener immediately if already initialized\r\n    api.addInitListener = function(listener) {\r\n        if (api.initialized) {\r\n            listener(api);\r\n        } else {\r\n            initListeners.push(listener);\r\n        }\r\n    };\r\n\r\n    var shimListeners = [];\r\n\r\n    api.addShimListener = function(listener) {\r\n        shimListeners.push(listener);\r\n    };\r\n\r\n    function shim(win) {\r\n        win = win || window;\r\n        init();\r\n\r\n        // Notify listeners\r\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\r\n            shimListeners[i](win);\r\n        }\r\n    }\r\n\r\n    api.shim = api.createMissingNativeApi = shim;\r\n\r\n    function Module(name, dependencies, initializer) {\r\n        this.name = name;\r\n        this.dependencies = dependencies;\r\n        this.initialized = false;\r\n        this.supported = false;\r\n        this.initializer = initializer;\r\n    }\r\n\r\n    Module.prototype = {\r\n        init: function() {\r\n            var requiredModuleNames = this.dependencies || [];\r\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\r\n                moduleName = requiredModuleNames[i];\r\n\r\n                requiredModule = modules[moduleName];\r\n                if (!requiredModule || !(requiredModule instanceof Module)) {\r\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\r\n                }\r\n\r\n                requiredModule.init();\r\n\r\n                if (!requiredModule.supported) {\r\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\r\n                }\r\n            }\r\n            \r\n            // Now run initializer\r\n            this.initializer(this);\r\n        },\r\n        \r\n        fail: function(reason) {\r\n            this.initialized = true;\r\n            this.supported = false;\r\n            throw new Error(\"Module '\" + this.name + \"' failed to load: \" + reason);\r\n        },\r\n\r\n        warn: function(msg) {\r\n            api.warn(\"Module \" + this.name + \": \" + msg);\r\n        },\r\n\r\n        deprecationNotice: function(deprecated, replacement) {\r\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \"is deprecated. Please use \" +\r\n                replacement + \" instead\");\r\n        },\r\n\r\n        createError: function(msg) {\r\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\r\n        }\r\n    };\r\n    \r\n    function createModule(isCore, name, dependencies, initFunc) {\r\n        var newModule = new Module(name, dependencies, function(module) {\r\n            if (!module.initialized) {\r\n                module.initialized = true;\r\n                try {\r\n                    initFunc(api, module);\r\n                    module.supported = true;\r\n                } catch (ex) {\r\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\r\n                    consoleLog(errorMessage);\r\n                }\r\n            }\r\n        });\r\n        modules[name] = newModule;\r\n    }\r\n\r\n    api.createModule = function(name) {\r\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\r\n        var initFunc, dependencies;\r\n        if (arguments.length == 2) {\r\n            initFunc = arguments[1];\r\n            dependencies = [];\r\n        } else {\r\n            initFunc = arguments[2];\r\n            dependencies = arguments[1];\r\n        }\r\n\r\n        var module = createModule(false, name, dependencies, initFunc);\r\n\r\n        // Initialize the module immediately if the core is already initialized\r\n        if (api.initialized) {\r\n            module.init();\r\n        }\r\n    };\r\n\r\n    api.createCoreModule = function(name, dependencies, initFunc) {\r\n        createModule(true, name, dependencies, initFunc);\r\n    };\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\r\n\r\n    function RangePrototype() {}\r\n    api.RangePrototype = RangePrototype;\r\n    api.rangePrototype = new RangePrototype();\r\n\r\n    function SelectionPrototype() {}\r\n    api.selectionPrototype = new SelectionPrototype();\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Wait for document to load before running tests\r\n\r\n    var docReady = false;\r\n\r\n    var loadHandler = function(e) {\r\n        if (!docReady) {\r\n            docReady = true;\r\n            if (!api.initialized && api.config.autoInitialize) {\r\n                init();\r\n            }\r\n        }\r\n    };\r\n\r\n    // Test whether we have window and document objects that we will need\r\n    if (typeof window == UNDEFINED) {\r\n        fail(\"No window found\");\r\n        return;\r\n    }\r\n    if (typeof document == UNDEFINED) {\r\n        fail(\"No document found\");\r\n        return;\r\n    }\r\n\r\n    if (isHostMethod(document, \"addEventListener\")) {\r\n        document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\r\n    }\r\n\r\n    // Add a fallback in case the DOMContentLoaded event isn't supported\r\n    addListener(window, \"load\", loadHandler);\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n    \r\n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br>\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle[propName];\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: util.getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        current.parentNode.removeChild(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isOrphan(node) {\n            return (crashyTextNodes && dom.isBrokenNode(node)) ||\n                !arrayContains(rootContainerNodeTypes, node.nodeType) && !getDocumentOrFragmentContainer(node, true);\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !isOrphan(range.startContainer) &&\n                    !isOrphan(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is no longer valid after DOM mutation (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n        \n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                assertNode(node, \"NOT_FOUND_ERR\");\n                if (getDocument(node) !== getRangeDocument(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                assertNode(parent, \"NOT_FOUND_ERR\");\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n            \n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n            \n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType == 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n            \n            inspect: function() {\n                return inspect(this);\n            },\n            \n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n                \n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            sibling.parentNode.removeChild(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            sibling.parentNode.removeChild(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (ec.length == eo) {\n                            mergeForward(ec);\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            this.startContainer = doc;\n            this.startOffset = 0;\n            this.endContainer = doc;\n            this.endOffset = 0;\n            this.document = doc;\n            updateCollapsedAndCommonAncestor(this);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation \n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE 9 deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n        \n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    workingNode.parentNode.removeChild(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n                        \n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n                        \n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n                        \n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n                        \n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                workingNode.parentNode.removeChild(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function() { return this; })();\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        api.createIframeRange = function(iframeEl) {\n            module.deprecationNotice(\"createIframeRange()\", \"createRange(iframeEl)\");\n            return api.createRange(iframeEl);\n        };\n\n        api.createIframeRangyRange = function(iframeEl) {\n            module.deprecationNotice(\"createIframeRangyRange()\", \"createRangyRange(iframeEl)\");\n            return api.createRangyRange(iframeEl);\n        };\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\" or \"forward\") or a\n        // Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n        \n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n        \n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped by these tests. This should usually be fine\n                // because initialization usually happens when the document loads, but could be a problem for a script that\n                // loads and initializes Rangy later. If anyone complains, code could be added to save and restore the\n                // selection.\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel); \n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n                    \n                    // Create some test elements\n                    var body = getBody(document);\n                    var testEl = body.appendChild( document.createElement(\"div\") );\n                    testEl.contentEditable = \"false\";\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    body.removeChild(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        api.getIframeSelection = function(iframeEl) {\n            module.deprecationNotice(\"getIframeSelection()\", \"getSelection(iframeEl)\");\n            return api.getSelection(dom.getIframeWindow(iframeEl));\n        };\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            this.nativeSelection.addRange(getNativeRange(range).cloneRange());\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented so the native implementation is\n        // never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    element.parentNode.removeChild(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params) );\n            } );\n            return results;\n        };\n        \n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n        \n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\"); \n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \r\n\r\n    /*----------------------------------------------------------------------------------------------------------------*/\r\n\r\n    return api;\r\n}, this);;/**\r\n * Selection save and restore module for Rangy.\r\n * Saves and restores user selections using marker invisible elements in the DOM.\r\n *\r\n * Part of Rangy, a cross-browser JavaScript range and selection library\r\n * http://code.google.com/p/rangy/\r\n *\r\n * Depends on Rangy core.\r\n *\r\n * Copyright 2014, Tim Down\r\n * Licensed under the MIT license.\r\n * Version: 1.3alpha.20140804\r\n * Build date: 4 August 2014\r\n */\r\n(function(factory, global) {\n    if (typeof define == \"function\" && define.amd) {\n        // AMD. Register as an anonymous module with a dependency on Rangy.\n        define([\"rangy\"], factory);\n        /*\n         } else if (typeof exports == \"object\") {\n         // Node/CommonJS style for Browserify\n         module.exports = factory;\n         */\n    } else {\n        // No AMD or CommonJS support so we use the rangy global variable\n        factory(global.rangy);\n    }\n})(function(rangy) {\n    rangy.createModule(\"SaveRestore\", [\"WrappedRange\"], function(api, module) {\n        var dom = api.dom;\n\n        var markerTextChar = \"\\ufeff\";\n\n        function gEBI(id, doc) {\n            return (doc || document).getElementById(id);\n        }\n\n        function insertRangeBoundaryMarker(range, atStart) {\n            var markerId = \"selectionBoundary_\" + (+new Date()) + \"_\" + (\"\" + Math.random()).slice(2);\n            var markerEl;\n            var doc = dom.getDocument(range.startContainer);\n\n            // Clone the Range and collapse to the appropriate boundary point\n            var boundaryRange = range.cloneRange();\n            boundaryRange.collapse(atStart);\n\n            // Create the marker element containing a single invisible character using DOM methods and insert it\n            markerEl = doc.createElement(\"span\");\n            markerEl.id = markerId;\n            markerEl.style.lineHeight = \"0\";\n            markerEl.style.display = \"none\";\n            markerEl.className = \"rangySelectionBoundary\";\n            markerEl.appendChild(doc.createTextNode(markerTextChar));\n\n            boundaryRange.insertNode(markerEl);\n            return markerEl;\n        }\n\n        function setRangeBoundary(doc, range, markerId, atStart) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                range[atStart ? \"setStartBefore\" : \"setEndBefore\"](markerEl);\n                markerEl.parentNode.removeChild(markerEl);\n            } else {\n                module.warn(\"Marker element has been removed. Cannot restore selection.\");\n            }\n        }\n\n        function compareRanges(r1, r2) {\n            return r2.compareBoundaryPoints(r1.START_TO_START, r1);\n        }\n\n        function saveRange(range, backward) {\n            var startEl, endEl, doc = api.DomRange.getRangeDocument(range), text = range.toString();\n\n            if (range.collapsed) {\n                endEl = insertRangeBoundaryMarker(range, false);\n                return {\n                    document: doc,\n                    markerId: endEl.id,\n                    collapsed: true\n                };\n            } else {\n                endEl = insertRangeBoundaryMarker(range, false);\n                startEl = insertRangeBoundaryMarker(range, true);\n\n                return {\n                    document: doc,\n                    startMarkerId: startEl.id,\n                    endMarkerId: endEl.id,\n                    collapsed: false,\n                    backward: backward,\n                    toString: function() {\n                        return \"original text: '\" + text + \"', new text: '\" + range.toString() + \"'\";\n                    }\n                };\n            }\n        }\n\n        function restoreRange(rangeInfo, normalize) {\n            var doc = rangeInfo.document;\n            if (typeof normalize == \"undefined\") {\n                normalize = true;\n            }\n            var range = api.createRange(doc);\n            if (rangeInfo.collapsed) {\n                var markerEl = gEBI(rangeInfo.markerId, doc);\n                if (markerEl) {\n                    markerEl.style.display = \"inline\";\n                    var previousNode = markerEl.previousSibling;\n\n                    // Workaround for issue 17\n                    if (previousNode && previousNode.nodeType == 3) {\n                        markerEl.parentNode.removeChild(markerEl);\n                        range.collapseToPoint(previousNode, previousNode.length);\n                    } else {\n                        range.collapseBefore(markerEl);\n                        markerEl.parentNode.removeChild(markerEl);\n                    }\n                } else {\n                    module.warn(\"Marker element has been removed. Cannot restore selection.\");\n                }\n            } else {\n                setRangeBoundary(doc, range, rangeInfo.startMarkerId, true);\n                setRangeBoundary(doc, range, rangeInfo.endMarkerId, false);\n            }\n\n            if (normalize) {\n                range.normalizeBoundaries();\n            }\n\n            return range;\n        }\n\n        function saveRanges(ranges, backward) {\n            var rangeInfos = [], range, doc;\n\n            // Order the ranges by position within the DOM, latest first, cloning the array to leave the original untouched\n            ranges = ranges.slice(0);\n            ranges.sort(compareRanges);\n\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                rangeInfos[i] = saveRange(ranges[i], backward);\n            }\n\n            // Now that all the markers are in place and DOM manipulation over, adjust each range's boundaries to lie\n            // between its markers\n            for (i = len - 1; i >= 0; --i) {\n                range = ranges[i];\n                doc = api.DomRange.getRangeDocument(range);\n                if (range.collapsed) {\n                    range.collapseAfter(gEBI(rangeInfos[i].markerId, doc));\n                } else {\n                    range.setEndBefore(gEBI(rangeInfos[i].endMarkerId, doc));\n                    range.setStartAfter(gEBI(rangeInfos[i].startMarkerId, doc));\n                }\n            }\n\n            return rangeInfos;\n        }\n\n        function saveSelection(win) {\n            if (!api.isSelectionValid(win)) {\n                module.warn(\"Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.\");\n                return null;\n            }\n            var sel = api.getSelection(win);\n            var ranges = sel.getAllRanges();\n            var backward = (ranges.length == 1 && sel.isBackward());\n\n            var rangeInfos = saveRanges(ranges, backward);\n\n            // Ensure current selection is unaffected\n            if (backward) {\n                sel.setSingleRange(ranges[0], \"backward\");\n            } else {\n                sel.setRanges(ranges);\n            }\n\n            return {\n                win: win,\n                rangeInfos: rangeInfos,\n                restored: false\n            };\n        }\n\n        function restoreRanges(rangeInfos) {\n            var ranges = [];\n\n            // Ranges are in reverse order of appearance in the DOM. We want to restore earliest first to avoid\n            // normalization affecting previously restored ranges.\n            var rangeCount = rangeInfos.length;\n\n            for (var i = rangeCount - 1; i >= 0; i--) {\n                ranges[i] = restoreRange(rangeInfos[i], true);\n            }\n\n            return ranges;\n        }\n\n        function restoreSelection(savedSelection, preserveDirection) {\n            if (!savedSelection.restored) {\n                var rangeInfos = savedSelection.rangeInfos;\n                var sel = api.getSelection(savedSelection.win);\n                var ranges = restoreRanges(rangeInfos), rangeCount = rangeInfos.length;\n\n                if (rangeCount == 1 && preserveDirection && api.features.selectionHasExtend && rangeInfos[0].backward) {\n                    sel.removeAllRanges();\n                    sel.addRange(ranges[0], true);\n                } else {\n                    sel.setRanges(ranges);\n                }\n\n                savedSelection.restored = true;\n            }\n        }\n\n        function removeMarkerElement(doc, markerId) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                markerEl.parentNode.removeChild(markerEl);\n            }\n        }\n\n        function removeMarkers(savedSelection) {\n            var rangeInfos = savedSelection.rangeInfos;\n            for (var i = 0, len = rangeInfos.length, rangeInfo; i < len; ++i) {\n                rangeInfo = rangeInfos[i];\n                if (rangeInfo.collapsed) {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.markerId);\n                } else {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.startMarkerId);\n                    removeMarkerElement(savedSelection.doc, rangeInfo.endMarkerId);\n                }\n            }\n        }\n\n        api.util.extend(api, {\n            saveRange: saveRange,\n            restoreRange: restoreRange,\n            saveRanges: saveRanges,\n            restoreRanges: restoreRanges,\n            saveSelection: saveSelection,\n            restoreSelection: restoreSelection,\n            removeMarkerElement: removeMarkerElement,\n            removeMarkers: removeMarkers\n        });\n    });\n    \n}, this);;/*\n\tBase.js, version 1.1a\n\tCopyright 2006-2010, Dean Edwards\n\tLicense: http://www.opensource.org/licenses/mit-license.php\n*/\n\nvar Base = function() {\n\t// dummy\n};\n\nBase.extend = function(_instance, _static) { // subclass\n\tvar extend = Base.prototype.extend;\n\t\n\t// build the prototype\n\tBase._prototyping = true;\n\tvar proto = new this;\n\textend.call(proto, _instance);\n  proto.base = function() {\n    // call this method from any other method to invoke that method's ancestor\n  };\n\tdelete Base._prototyping;\n\t\n\t// create the wrapper for the constructor function\n\t//var constructor = proto.constructor.valueOf(); //-dean\n\tvar constructor = proto.constructor;\n\tvar klass = proto.constructor = function() {\n\t\tif (!Base._prototyping) {\n\t\t\tif (this._constructing || this.constructor == klass) { // instantiation\n\t\t\t\tthis._constructing = true;\n\t\t\t\tconstructor.apply(this, arguments);\n\t\t\t\tdelete this._constructing;\n\t\t\t} else if (arguments[0] != null) { // casting\n\t\t\t\treturn (arguments[0].extend || extend).call(arguments[0], proto);\n\t\t\t}\n\t\t}\n\t};\n\t\n\t// build the class interface\n\tklass.ancestor = this;\n\tklass.extend = this.extend;\n\tklass.forEach = this.forEach;\n\tklass.implement = this.implement;\n\tklass.prototype = proto;\n\tklass.toString = this.toString;\n\tklass.valueOf = function(type) {\n\t\t//return (type == \"object\") ? klass : constructor; //-dean\n\t\treturn (type == \"object\") ? klass : constructor.valueOf();\n\t};\n\textend.call(klass, _static);\n\t// class initialisation\n\tif (typeof klass.init == \"function\") klass.init();\n\treturn klass;\n};\n\nBase.prototype = {\t\n\textend: function(source, value) {\n\t\tif (arguments.length > 1) { // extending with a name/value pair\n\t\t\tvar ancestor = this[source];\n\t\t\tif (ancestor && (typeof value == \"function\") && // overriding a method?\n\t\t\t\t// the valueOf() comparison is to avoid circular references\n\t\t\t\t(!ancestor.valueOf || ancestor.valueOf() != value.valueOf()) &&\n\t\t\t\t/\\bbase\\b/.test(value)) {\n\t\t\t\t// get the underlying method\n\t\t\t\tvar method = value.valueOf();\n\t\t\t\t// override\n\t\t\t\tvalue = function() {\n\t\t\t\t\tvar previous = this.base || Base.prototype.base;\n\t\t\t\t\tthis.base = ancestor;\n\t\t\t\t\tvar returnValue = method.apply(this, arguments);\n\t\t\t\t\tthis.base = previous;\n\t\t\t\t\treturn returnValue;\n\t\t\t\t};\n\t\t\t\t// point to the underlying method\n\t\t\t\tvalue.valueOf = function(type) {\n\t\t\t\t\treturn (type == \"object\") ? value : method;\n\t\t\t\t};\n\t\t\t\tvalue.toString = Base.toString;\n\t\t\t}\n\t\t\tthis[source] = value;\n\t\t} else if (source) { // extending with an object literal\n\t\t\tvar extend = Base.prototype.extend;\n\t\t\t// if this object has a customised extend method then use it\n\t\t\tif (!Base._prototyping && typeof this != \"function\") {\n\t\t\t\textend = this.extend || extend;\n\t\t\t}\n\t\t\tvar proto = {toSource: null};\n\t\t\t// do the \"toString\" and other methods manually\n\t\t\tvar hidden = [\"constructor\", \"toString\", \"valueOf\"];\n\t\t\t// if we are prototyping then include the constructor\n\t\t\tvar i = Base._prototyping ? 0 : 1;\n\t\t\twhile (key = hidden[i++]) {\n\t\t\t\tif (source[key] != proto[key]) {\n\t\t\t\t\textend.call(this, key, source[key]);\n\n\t\t\t\t}\n\t\t\t}\n\t\t\t// copy each of the source object's properties to this object\n\t\t\tfor (var key in source) {\n\t\t\t\tif (!proto[key]) extend.call(this, key, source[key]);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n};\n\n// initialise\nBase = Base.extend({\n\tconstructor: function() {\n\t\tthis.extend(arguments[0]);\n\t}\n}, {\n\tancestor: Object,\n\tversion: \"1.1\",\n\t\n\tforEach: function(object, block, context) {\n\t\tfor (var key in object) {\n\t\t\tif (this.prototype[key] === undefined) {\n\t\t\t\tblock.call(context, object[key], key, object);\n\t\t\t}\n\t\t}\n\t},\n\t\t\n\timplement: function() {\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tif (typeof arguments[i] == \"function\") {\n\t\t\t\t// if it's a function, call it\n\t\t\t\targuments[i](this.prototype);\n\t\t\t} else {\n\t\t\t\t// add the interface using the extend method\n\t\t\t\tthis.prototype.extend(arguments[i]);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t},\n\t\n\ttoString: function() {\n\t\treturn String(this.valueOf());\n\t}\n});;/**\n * Detect browser support for specific features\n */\nwysihtml5.browser = (function() {\n  var userAgent   = navigator.userAgent,\n      testElement = document.createElement(\"div\"),\n      // Browser sniffing is unfortunately needed since some behaviors are impossible to feature detect\n      isGecko     = userAgent.indexOf(\"Gecko\")        !== -1 && userAgent.indexOf(\"KHTML\") === -1,\n      isWebKit    = userAgent.indexOf(\"AppleWebKit/\") !== -1,\n      isChrome    = userAgent.indexOf(\"Chrome/\")      !== -1,\n      isOpera     = userAgent.indexOf(\"Opera/\")       !== -1;\n\n  function iosVersion(userAgent) {\n    return +((/ipad|iphone|ipod/.test(userAgent) && userAgent.match(/ os (\\d+).+? like mac os x/)) || [undefined, 0])[1];\n  }\n\n  function androidVersion(userAgent) {\n    return +(userAgent.match(/android (\\d+)/) || [undefined, 0])[1];\n  }\n\n  function isIE(version, equation) {\n    var rv = -1,\n        re;\n\n    if (navigator.appName == 'Microsoft Internet Explorer') {\n      re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n    } else if (navigator.appName == 'Netscape') {\n      re = new RegExp(\"Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})\");\n    }\n\n    if (re && re.exec(navigator.userAgent) != null) {\n      rv = parseFloat(RegExp.$1);\n    }\n\n    if (rv === -1) { return false; }\n    if (!version) { return true; }\n    if (!equation) { return version === rv; }\n    if (equation === \"<\") { return version < rv; }\n    if (equation === \">\") { return version > rv; }\n    if (equation === \"<=\") { return version <= rv; }\n    if (equation === \">=\") { return version >= rv; }\n  }\n\n  return {\n    // Static variable needed, publicly accessible, to be able override it in unit tests\n    USER_AGENT: userAgent,\n\n    /**\n     * Exclude browsers that are not capable of displaying and handling\n     * contentEditable as desired:\n     *    - iPhone, iPad (tested iOS 4.2.2) and Android (tested 2.2) refuse to make contentEditables focusable\n     *    - IE < 8 create invalid markup and crash randomly from time to time\n     *\n     * @return {Boolean}\n     */\n    supported: function() {\n      var userAgent                   = this.USER_AGENT.toLowerCase(),\n          // Essential for making html elements editable\n          hasContentEditableSupport   = \"contentEditable\" in testElement,\n          // Following methods are needed in order to interact with the contentEditable area\n          hasEditingApiSupport        = document.execCommand && document.queryCommandSupported && document.queryCommandState,\n          // document selector apis are only supported by IE 8+, Safari 4+, Chrome and Firefox 3.5+\n          hasQuerySelectorSupport     = document.querySelector && document.querySelectorAll,\n          // contentEditable is unusable in mobile browsers (tested iOS 4.2.2, Android 2.2, Opera Mobile, WebOS 3.05)\n          isIncompatibleMobileBrowser = (this.isIos() && iosVersion(userAgent) < 5) || (this.isAndroid() && androidVersion(userAgent) < 4) || userAgent.indexOf(\"opera mobi\") !== -1 || userAgent.indexOf(\"hpwos/\") !== -1;\n      return hasContentEditableSupport\n        && hasEditingApiSupport\n        && hasQuerySelectorSupport\n        && !isIncompatibleMobileBrowser;\n    },\n\n    isTouchDevice: function() {\n      return this.supportsEvent(\"touchmove\");\n    },\n\n    isIos: function() {\n      return (/ipad|iphone|ipod/i).test(this.USER_AGENT);\n    },\n\n    isAndroid: function() {\n      return this.USER_AGENT.indexOf(\"Android\") !== -1;\n    },\n\n    /**\n     * Whether the browser supports sandboxed iframes\n     * Currently only IE 6+ offers such feature <iframe security=\"restricted\">\n     *\n     * http://msdn.microsoft.com/en-us/library/ms534622(v=vs.85).aspx\n     * http://blogs.msdn.com/b/ie/archive/2008/01/18/using-frames-more-securely.aspx\n     *\n     * HTML5 sandboxed iframes are still buggy and their DOM is not reachable from the outside (except when using postMessage)\n     */\n    supportsSandboxedIframes: function() {\n      return isIE();\n    },\n\n    /**\n     * IE6+7 throw a mixed content warning when the src of an iframe\n     * is empty/unset or about:blank\n     * window.querySelector is implemented as of IE8\n     */\n    throwsMixedContentWarningWhenIframeSrcIsEmpty: function() {\n      return !(\"querySelector\" in document);\n    },\n\n    /**\n     * Whether the caret is correctly displayed in contentEditable elements\n     * Firefox sometimes shows a huge caret in the beginning after focusing\n     */\n    displaysCaretInEmptyContentEditableCorrectly: function() {\n      return isIE();\n    },\n\n    /**\n     * Opera and IE are the only browsers who offer the css value\n     * in the original unit, thx to the currentStyle object\n     * All other browsers provide the computed style in px via window.getComputedStyle\n     */\n    hasCurrentStyleProperty: function() {\n      return \"currentStyle\" in testElement;\n    },\n\n    /**\n     * Firefox on OSX navigates through history when hitting CMD + Arrow right/left\n     */\n    hasHistoryIssue: function() {\n      return isGecko && navigator.platform.substr(0, 3) === \"Mac\";\n    },\n\n    /**\n     * Whether the browser inserts a <br> when pressing enter in a contentEditable element\n     */\n    insertsLineBreaksOnReturn: function() {\n      return isGecko;\n    },\n\n    supportsPlaceholderAttributeOn: function(element) {\n      return \"placeholder\" in element;\n    },\n\n    supportsEvent: function(eventName) {\n      return \"on\" + eventName in testElement || (function() {\n        testElement.setAttribute(\"on\" + eventName, \"return;\");\n        return typeof(testElement[\"on\" + eventName]) === \"function\";\n      })();\n    },\n\n    /**\n     * Opera doesn't correctly fire focus/blur events when clicking in- and outside of iframe\n     */\n    supportsEventsInIframeCorrectly: function() {\n      return !isOpera;\n    },\n\n    /**\n     * Everything below IE9 doesn't know how to treat HTML5 tags\n     *\n     * @param {Object} context The document object on which to check HTML5 support\n     *\n     * @example\n     *    wysihtml5.browser.supportsHTML5Tags(document);\n     */\n    supportsHTML5Tags: function(context) {\n      var element = context.createElement(\"div\"),\n          html5   = \"<article>foo</article>\";\n      element.innerHTML = html5;\n      return element.innerHTML.toLowerCase() === html5;\n    },\n\n    /**\n     * Checks whether a document supports a certain queryCommand\n     * In particular, Opera needs a reference to a document that has a contentEditable in it's dom tree\n     * in oder to report correct results\n     *\n     * @param {Object} doc Document object on which to check for a query command\n     * @param {String} command The query command to check for\n     * @return {Boolean}\n     *\n     * @example\n     *    wysihtml5.browser.supportsCommand(document, \"bold\");\n     */\n    supportsCommand: (function() {\n      // Following commands are supported but contain bugs in some browsers\n      var buggyCommands = {\n        // formatBlock fails with some tags (eg. <blockquote>)\n        \"formatBlock\":          isIE(10, \"<=\"),\n         // When inserting unordered or ordered lists in Firefox, Chrome or Safari, the current selection or line gets\n         // converted into a list (<ul><li>...</li></ul>, <ol><li>...</li></ol>)\n         // IE and Opera act a bit different here as they convert the entire content of the current block element into a list\n        \"insertUnorderedList\":  isIE(),\n        \"insertOrderedList\":    isIE()\n      };\n\n      // Firefox throws errors for queryCommandSupported, so we have to build up our own object of supported commands\n      var supported = {\n        \"insertHTML\": isGecko\n      };\n\n      return function(doc, command) {\n        var isBuggy = buggyCommands[command];\n        if (!isBuggy) {\n          // Firefox throws errors when invoking queryCommandSupported or queryCommandEnabled\n          try {\n            return doc.queryCommandSupported(command);\n          } catch(e1) {}\n\n          try {\n            return doc.queryCommandEnabled(command);\n          } catch(e2) {\n            return !!supported[command];\n          }\n        }\n        return false;\n      };\n    })(),\n\n    /**\n     * IE: URLs starting with:\n     *    www., http://, https://, ftp://, gopher://, mailto:, new:, snews:, telnet:, wasis:, file://,\n     *    nntp://, newsrc:, ldap://, ldaps://, outlook:, mic:// and url:\n     * will automatically be auto-linked when either the user inserts them via copy&paste or presses the\n     * space bar when the caret is directly after such an url.\n     * This behavior cannot easily be avoided in IE < 9 since the logic is hardcoded in the mshtml.dll\n     * (related blog post on msdn\n     * http://blogs.msdn.com/b/ieinternals/archive/2009/09/17/prevent-automatic-hyperlinking-in-contenteditable-html.aspx).\n     */\n    doesAutoLinkingInContentEditable: function() {\n      return isIE();\n    },\n\n    /**\n     * As stated above, IE auto links urls typed into contentEditable elements\n     * Since IE9 it's possible to prevent this behavior\n     */\n    canDisableAutoLinking: function() {\n      return this.supportsCommand(document, \"AutoUrlDetect\");\n    },\n\n    /**\n     * IE leaves an empty paragraph in the contentEditable element after clearing it\n     * Chrome/Safari sometimes an empty <div>\n     */\n    clearsContentEditableCorrectly: function() {\n      return isGecko || isOpera || isWebKit;\n    },\n\n    /**\n     * IE gives wrong results for getAttribute\n     */\n    supportsGetAttributeCorrectly: function() {\n      var td = document.createElement(\"td\");\n      return td.getAttribute(\"rowspan\") != \"1\";\n    },\n\n    /**\n     * When clicking on images in IE, Opera and Firefox, they are selected, which makes it easy to interact with them.\n     * Chrome and Safari both don't support this\n     */\n    canSelectImagesInContentEditable: function() {\n      return isGecko || isIE() || isOpera;\n    },\n\n    /**\n     * All browsers except Safari and Chrome automatically scroll the range/caret position into view\n     */\n    autoScrollsToCaret: function() {\n      return !isWebKit;\n    },\n\n    /**\n     * Check whether the browser automatically closes tags that don't need to be opened\n     */\n    autoClosesUnclosedTags: function() {\n      var clonedTestElement = testElement.cloneNode(false),\n          returnValue,\n          innerHTML;\n\n      clonedTestElement.innerHTML = \"<p><div></div>\";\n      innerHTML                   = clonedTestElement.innerHTML.toLowerCase();\n      returnValue                 = innerHTML === \"<p></p><div></div>\" || innerHTML === \"<p><div></div></p>\";\n\n      // Cache result by overwriting current function\n      this.autoClosesUnclosedTags = function() { return returnValue; };\n\n      return returnValue;\n    },\n\n    /**\n     * Whether the browser supports the native document.getElementsByClassName which returns live NodeLists\n     */\n    supportsNativeGetElementsByClassName: function() {\n      return String(document.getElementsByClassName).indexOf(\"[native code]\") !== -1;\n    },\n\n    /**\n     * As of now (19.04.2011) only supported by Firefox 4 and Chrome\n     * See https://developer.mozilla.org/en/DOM/Selection/modify\n     */\n    supportsSelectionModify: function() {\n      return \"getSelection\" in window && \"modify\" in window.getSelection();\n    },\n\n    /**\n     * Opera needs a white space after a <br> in order to position the caret correctly\n     */\n    needsSpaceAfterLineBreak: function() {\n      return isOpera;\n    },\n\n    /**\n     * Whether the browser supports the speech api on the given element\n     * See http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/\n     *\n     * @example\n     *    var input = document.createElement(\"input\");\n     *    if (wysihtml5.browser.supportsSpeechApiOn(input)) {\n     *      // ...\n     *    }\n     */\n    supportsSpeechApiOn: function(input) {\n      var chromeVersion = userAgent.match(/Chrome\\/(\\d+)/) || [undefined, 0];\n      return chromeVersion[1] >= 11 && (\"onwebkitspeechchange\" in input || \"speech\" in input);\n    },\n\n    /**\n     * IE9 crashes when setting a getter via Object.defineProperty on XMLHttpRequest or XDomainRequest\n     * See https://connect.microsoft.com/ie/feedback/details/650112\n     * or try the POC http://tifftiff.de/ie9_crash/\n     */\n    crashesWhenDefineProperty: function(property) {\n      return isIE(9) && (property === \"XMLHttpRequest\" || property === \"XDomainRequest\");\n    },\n\n    /**\n     * IE is the only browser who fires the \"focus\" event not immediately when .focus() is called on an element\n     */\n    doesAsyncFocus: function() {\n      return isIE();\n    },\n\n    /**\n     * In IE it's impssible for the user and for the selection library to set the caret after an <img> when it's the lastChild in the document\n     */\n    hasProblemsSettingCaretAfterImg: function() {\n      return isIE();\n    },\n\n    hasUndoInContextMenu: function() {\n      return isGecko || isChrome || isOpera;\n    },\n\n    /**\n     * Opera sometimes doesn't insert the node at the right position when range.insertNode(someNode)\n     * is used (regardless if rangy or native)\n     * This especially happens when the caret is positioned right after a <br> because then\n     * insertNode() will insert the node right before the <br>\n     */\n    hasInsertNodeIssue: function() {\n      return isOpera;\n    },\n\n    /**\n     * IE 8+9 don't fire the focus event of the <body> when the iframe gets focused (even though the caret gets set into the <body>)\n     */\n    hasIframeFocusIssue: function() {\n      return isIE();\n    },\n\n    /**\n     * Chrome + Safari create invalid nested markup after paste\n     *\n     *  <p>\n     *    foo\n     *    <p>bar</p> <!-- BOO! -->\n     *  </p>\n     */\n    createsNestedInvalidMarkupAfterPaste: function() {\n      return isWebKit;\n    },\n\n    supportsMutationEvents: function() {\n        return (\"MutationEvent\" in window);\n    },\n\n    /**\n      IE (at least up to 11) does not support clipboardData on event.\n      It is on window but cannot return text/html\n      Should actually check for clipboardData on paste event, but cannot in firefox\n    */\n    supportsModenPaste: function () {\n      return !(\"clipboardData\" in window);\n    }\n  };\n})();\n;wysihtml5.lang.array = function(arr) {\n  return {\n    /**\n     * Check whether a given object exists in an array\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2]).contains(1);\n     *    // => true\n     *\n     * Can be used to match array with array. If intersection is found true is returned\n     */\n    contains: function(needle) {\n      if (Array.isArray(needle)) {\n        for (var i = needle.length; i--;) {\n          if (wysihtml5.lang.array(arr).indexOf(needle[i]) !== -1) {\n            return true;\n          }\n        }\n        return false;\n      } else {\n        return wysihtml5.lang.array(arr).indexOf(needle) !== -1;\n      }\n    },\n\n    /**\n     * Check whether a given object exists in an array and return index\n     * If no elelemt found returns -1\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2]).indexOf(2);\n     *    // => 1\n     */\n    indexOf: function(needle) {\n        if (arr.indexOf) {\n          return arr.indexOf(needle);\n        } else {\n          for (var i=0, length=arr.length; i<length; i++) {\n            if (arr[i] === needle) { return i; }\n          }\n          return -1;\n        }\n    },\n\n    /**\n     * Substract one array from another\n     *\n     * @example\n     *    wysihtml5.lang.array([1, 2, 3, 4]).without([3, 4]);\n     *    // => [1, 2]\n     */\n    without: function(arrayToSubstract) {\n      arrayToSubstract = wysihtml5.lang.array(arrayToSubstract);\n      var newArr  = [],\n          i       = 0,\n          length  = arr.length;\n      for (; i<length; i++) {\n        if (!arrayToSubstract.contains(arr[i])) {\n          newArr.push(arr[i]);\n        }\n      }\n      return newArr;\n    },\n\n    /**\n     * Return a clean native array\n     *\n     * Following will convert a Live NodeList to a proper Array\n     * @example\n     *    var childNodes = wysihtml5.lang.array(document.body.childNodes).get();\n     */\n    get: function() {\n      var i        = 0,\n          length   = arr.length,\n          newArray = [];\n      for (; i<length; i++) {\n        newArray.push(arr[i]);\n      }\n      return newArray;\n    },\n\n    /**\n     * Creates a new array with the results of calling a provided function on every element in this array.\n     * optionally this can be provided as second argument\n     *\n     * @example\n     *    var childNodes = wysihtml5.lang.array([1,2,3,4]).map(function (value, index, array) {\n            return value * 2;\n     *    });\n     *    // => [2,4,6,8]\n     */\n    map: function(callback, thisArg) {\n      if (Array.prototype.map) {\n        return arr.map(callback, thisArg);\n      } else {\n        var len = arr.length >>> 0,\n            A = new Array(len),\n            i = 0;\n        for (; i < len; i++) {\n           A[i] = callback.call(thisArg, arr[i], i, arr);\n        }\n        return A;\n      }\n    },\n\n    /* ReturnS new array without duplicate entries\n     *\n     * @example\n     *    var uniq = wysihtml5.lang.array([1,2,3,2,1,4]).unique();\n     *    // => [1,2,3,4]\n     */\n    unique: function() {\n      var vals = [],\n          max = arr.length,\n          idx = 0;\n\n      while (idx < max) {\n        if (!wysihtml5.lang.array(vals).contains(arr[idx])) {\n          vals.push(arr[idx]);\n        }\n        idx++;\n      }\n      return vals;\n    }\n\n  };\n};\n;wysihtml5.lang.Dispatcher = Base.extend(\n  /** @scope wysihtml5.lang.Dialog.prototype */ {\n  on: function(eventName, handler) {\n    this.events = this.events || {};\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(handler);\n    return this;\n  },\n\n  off: function(eventName, handler) {\n    this.events = this.events || {};\n    var i = 0,\n        handlers,\n        newHandlers;\n    if (eventName) {\n      handlers    = this.events[eventName] || [],\n      newHandlers = [];\n      for (; i<handlers.length; i++) {\n        if (handlers[i] !== handler && handler) {\n          newHandlers.push(handlers[i]);\n        }\n      }\n      this.events[eventName] = newHandlers;\n    } else {\n      // Clean up all events\n      this.events = {};\n    }\n    return this;\n  },\n\n  fire: function(eventName, payload) {\n    this.events = this.events || {};\n    var handlers = this.events[eventName] || [],\n        i        = 0;\n    for (; i<handlers.length; i++) {\n      handlers[i].call(this, payload);\n    }\n    return this;\n  },\n\n  // deprecated, use .on()\n  observe: function() {\n    return this.on.apply(this, arguments);\n  },\n\n  // deprecated, use .off()\n  stopObserving: function() {\n    return this.off.apply(this, arguments);\n  }\n});\n;wysihtml5.lang.object = function(obj) {\n  return {\n    /**\n     * @example\n     *    wysihtml5.lang.object({ foo: 1, bar: 1 }).merge({ bar: 2, baz: 3 }).get();\n     *    // => { foo: 1, bar: 2, baz: 3 }\n     */\n    merge: function(otherObj) {\n      for (var i in otherObj) {\n        obj[i] = otherObj[i];\n      }\n      return this;\n    },\n\n    get: function() {\n      return obj;\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object({ foo: 1 }).clone();\n     *    // => { foo: 1 }\n     *\n     *    v0.4.14 adds options for deep clone : wysihtml5.lang.object({ foo: 1 }).clone(true);\n     */\n    clone: function(deep) {\n      var newObj = {},\n          i;\n\n      if (obj === null || !wysihtml5.lang.object(obj).isPlainObject()) {\n        return obj;\n      }\n\n      for (i in obj) {\n        if(obj.hasOwnProperty(i)) {\n          if (deep) {\n            newObj[i] = wysihtml5.lang.object(obj[i]).clone(deep);\n          } else {\n            newObj[i] = obj[i];\n          }\n        }\n      }\n      return newObj;\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object([]).isArray();\n     *    // => true\n     */\n    isArray: function() {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    },\n\n    /**\n     * @example\n     *    wysihtml5.lang.object(function() {}).isFunction();\n     *    // => true\n     */\n    isFunction: function() {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    },\n\n    isPlainObject: function () {\n      return Object.prototype.toString.call(obj) === '[object Object]';\n    }\n  };\n};\n;(function() {\n  var WHITE_SPACE_START = /^\\s+/,\n      WHITE_SPACE_END   = /\\s+$/,\n      ENTITY_REG_EXP    = /[&<>\\t\"]/g,\n      ENTITY_MAP = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': \"&quot;\",\n        '\\t':\"&nbsp; \"\n      };\n  wysihtml5.lang.string = function(str) {\n    str = String(str);\n    return {\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"   foo   \").trim();\n       *    // => \"foo\"\n       */\n      trim: function() {\n        return str.replace(WHITE_SPACE_START, \"\").replace(WHITE_SPACE_END, \"\");\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"Hello #{name}\").interpolate({ name: \"Christopher\" });\n       *    // => \"Hello Christopher\"\n       */\n      interpolate: function(vars) {\n        for (var i in vars) {\n          str = this.replace(\"#{\" + i + \"}\").by(vars[i]);\n        }\n        return str;\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"Hello Tom\").replace(\"Tom\").with(\"Hans\");\n       *    // => \"Hello Hans\"\n       */\n      replace: function(search) {\n        return {\n          by: function(replace) {\n            return str.split(search).join(replace);\n          }\n        };\n      },\n\n      /**\n       * @example\n       *    wysihtml5.lang.string(\"hello<br>\").escapeHTML();\n       *    // => \"hello&lt;br&gt;\"\n       */\n      escapeHTML: function(linebreaks, convertSpaces) {\n        var html = str.replace(ENTITY_REG_EXP, function(c) { return ENTITY_MAP[c]; });\n        if (linebreaks) {\n          html = html.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n        }\n        if (convertSpaces) {\n          html = html.replace(/  /gi, \"&nbsp; \");\n        }\n        return html;\n      }\n    };\n  };\n})();\n;/**\n * Find urls in descendant text nodes of an element and auto-links them\n * Inspired by http://james.padolsey.com/javascript/find-and-replace-text-with-javascript/\n *\n * @param {Element} element Container element in which to search for urls\n *\n * @example\n *    <div id=\"text-container\">Please click here: www.google.com</div>\n *    <script>wysihtml5.dom.autoLink(document.getElementById(\"text-container\"));</script>\n */\n(function(wysihtml5) {\n  var /**\n       * Don't auto-link urls that are contained in the following elements:\n       */\n      IGNORE_URLS_IN        = wysihtml5.lang.array([\"CODE\", \"PRE\", \"A\", \"SCRIPT\", \"HEAD\", \"TITLE\", \"STYLE\"]),\n      /**\n       * revision 1:\n       *    /(\\S+\\.{1}[^\\s\\,\\.\\!]+)/g\n       *\n       * revision 2:\n       *    /(\\b(((https?|ftp):\\/\\/)|(www\\.))[-A-Z0-9+&@#\\/%?=~_|!:,.;\\[\\]]*[-A-Z0-9+&@#\\/%=~_|])/gim\n       *\n       * put this in the beginning if you don't wan't to match within a word\n       *    (^|[\\>\\(\\{\\[\\s\\>])\n       */\n      URL_REG_EXP           = /((https?:\\/\\/|www\\.)[^\\s<]{3,})/gi,\n      TRAILING_CHAR_REG_EXP = /([^\\w\\/\\-](,?))$/i,\n      MAX_DISPLAY_LENGTH    = 100,\n      BRACKETS              = { \")\": \"(\", \"]\": \"[\", \"}\": \"{\" };\n\n  function autoLink(element, ignoreInClasses) {\n    if (_hasParentThatShouldBeIgnored(element, ignoreInClasses)) {\n      return element;\n    }\n\n    if (element === element.ownerDocument.documentElement) {\n      element = element.ownerDocument.body;\n    }\n\n    return _parseNode(element, ignoreInClasses);\n  }\n\n  /**\n   * This is basically a rebuild of\n   * the rails auto_link_urls text helper\n   */\n  function _convertUrlsToLinks(str) {\n    return str.replace(URL_REG_EXP, function(match, url) {\n      var punctuation = (url.match(TRAILING_CHAR_REG_EXP) || [])[1] || \"\",\n          opening     = BRACKETS[punctuation];\n      url = url.replace(TRAILING_CHAR_REG_EXP, \"\");\n\n      if (url.split(opening).length > url.split(punctuation).length) {\n        url = url + punctuation;\n        punctuation = \"\";\n      }\n      var realUrl    = url,\n          displayUrl = url;\n      if (url.length > MAX_DISPLAY_LENGTH) {\n        displayUrl = displayUrl.substr(0, MAX_DISPLAY_LENGTH) + \"...\";\n      }\n      // Add http prefix if necessary\n      if (realUrl.substr(0, 4) === \"www.\") {\n        realUrl = \"http://\" + realUrl;\n      }\n\n      return '<a href=\"' + realUrl + '\">' + displayUrl + '</a>' + punctuation;\n    });\n  }\n\n  /**\n   * Creates or (if already cached) returns a temp element\n   * for the given document object\n   */\n  function _getTempElement(context) {\n    var tempElement = context._wysihtml5_tempElement;\n    if (!tempElement) {\n      tempElement = context._wysihtml5_tempElement = context.createElement(\"div\");\n    }\n    return tempElement;\n  }\n\n  /**\n   * Replaces the original text nodes with the newly auto-linked dom tree\n   */\n  function _wrapMatchesInNode(textNode) {\n    var parentNode  = textNode.parentNode,\n        nodeValue   = wysihtml5.lang.string(textNode.data).escapeHTML(),\n        tempElement = _getTempElement(parentNode.ownerDocument);\n\n    // We need to insert an empty/temporary <span /> to fix IE quirks\n    // Elsewise IE would strip white space in the beginning\n    tempElement.innerHTML = \"<span></span>\" + _convertUrlsToLinks(nodeValue);\n    tempElement.removeChild(tempElement.firstChild);\n\n    while (tempElement.firstChild) {\n      // inserts tempElement.firstChild before textNode\n      parentNode.insertBefore(tempElement.firstChild, textNode);\n    }\n    parentNode.removeChild(textNode);\n  }\n\n  function _hasParentThatShouldBeIgnored(node, ignoreInClasses) {\n    var nodeName;\n    while (node.parentNode) {\n      node = node.parentNode;\n      nodeName = node.nodeName;\n      if (node.className && wysihtml5.lang.array(node.className.split(' ')).contains(ignoreInClasses)) {\n        return true;\n      }\n      if (IGNORE_URLS_IN.contains(nodeName)) {\n        return true;\n      } else if (nodeName === \"body\") {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  function _parseNode(element, ignoreInClasses) {\n    if (IGNORE_URLS_IN.contains(element.nodeName)) {\n      return;\n    }\n\n    if (element.className && wysihtml5.lang.array(element.className.split(' ')).contains(ignoreInClasses)) {\n      return;\n    }\n\n    if (element.nodeType === wysihtml5.TEXT_NODE && element.data.match(URL_REG_EXP)) {\n      _wrapMatchesInNode(element);\n      return;\n    }\n\n    var childNodes        = wysihtml5.lang.array(element.childNodes).get(),\n        childNodesLength  = childNodes.length,\n        i                 = 0;\n\n    for (; i<childNodesLength; i++) {\n      _parseNode(childNodes[i], ignoreInClasses);\n    }\n\n    return element;\n  }\n\n  wysihtml5.dom.autoLink = autoLink;\n\n  // Reveal url reg exp to the outside\n  wysihtml5.dom.autoLink.URL_REG_EXP = URL_REG_EXP;\n})(wysihtml5);\n;(function(wysihtml5) {\n  var api = wysihtml5.dom;\n\n  api.addClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.add(className);\n    }\n    if (api.hasClass(element, className)) {\n      return;\n    }\n    element.className += \" \" + className;\n  };\n\n  api.removeClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.remove(className);\n    }\n\n    element.className = element.className.replace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \");\n  };\n\n  api.hasClass = function(element, className) {\n    var classList = element.classList;\n    if (classList) {\n      return classList.contains(className);\n    }\n\n    var elementClassName = element.className;\n    return (elementClassName.length > 0 && (elementClassName == className || new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\").test(elementClassName)));\n  };\n})(wysihtml5);\n;wysihtml5.dom.contains = (function() {\n  var documentElement = document.documentElement;\n  if (documentElement.contains) {\n    return function(container, element) {\n      if (element.nodeType !== wysihtml5.ELEMENT_NODE) {\n        element = element.parentNode;\n      }\n      return container !== element && container.contains(element);\n    };\n  } else if (documentElement.compareDocumentPosition) {\n    return function(container, element) {\n      // https://developer.mozilla.org/en/DOM/Node.compareDocumentPosition\n      return !!(container.compareDocumentPosition(element) & 16);\n    };\n  }\n})();\n;/**\n * Converts an HTML fragment/element into a unordered/ordered list\n *\n * @param {Element} element The element which should be turned into a list\n * @param {String} listType The list type in which to convert the tree (either \"ul\" or \"ol\")\n * @return {Element} The created list\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <span id=\"pseudo-list\">\n *      eminem<br>\n *      dr. dre\n *      <div>50 Cent</div>\n *    </span>\n *\n *    <script>\n *      wysihtml5.dom.convertToList(document.getElementById(\"pseudo-list\"), \"ul\");\n *    </script>\n *\n *    <!-- Will result in: -->\n *    <ul>\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n */\nwysihtml5.dom.convertToList = (function() {\n  function _createListItem(doc, list) {\n    var listItem = doc.createElement(\"li\");\n    list.appendChild(listItem);\n    return listItem;\n  }\n\n  function _createList(doc, type) {\n    return doc.createElement(type);\n  }\n\n  function convertToList(element, listType, uneditableClass) {\n    if (element.nodeName === \"UL\" || element.nodeName === \"OL\" || element.nodeName === \"MENU\") {\n      // Already a list\n      return element;\n    }\n\n    var doc               = element.ownerDocument,\n        list              = _createList(doc, listType),\n        lineBreaks        = element.querySelectorAll(\"br\"),\n        lineBreaksLength  = lineBreaks.length,\n        childNodes,\n        childNodesLength,\n        childNode,\n        lineBreak,\n        parentNode,\n        isBlockElement,\n        isLineBreak,\n        currentListItem,\n        i;\n\n    // First find <br> at the end of inline elements and move them behind them\n    for (i=0; i<lineBreaksLength; i++) {\n      lineBreak = lineBreaks[i];\n      while ((parentNode = lineBreak.parentNode) && parentNode !== element && parentNode.lastChild === lineBreak) {\n        if (wysihtml5.dom.getStyle(\"display\").from(parentNode) === \"block\") {\n          parentNode.removeChild(lineBreak);\n          break;\n        }\n        wysihtml5.dom.insert(lineBreak).after(lineBreak.parentNode);\n      }\n    }\n\n    childNodes        = wysihtml5.lang.array(element.childNodes).get();\n    childNodesLength  = childNodes.length;\n\n    for (i=0; i<childNodesLength; i++) {\n      currentListItem   = currentListItem || _createListItem(doc, list);\n      childNode         = childNodes[i];\n      isBlockElement    = wysihtml5.dom.getStyle(\"display\").from(childNode) === \"block\";\n      isLineBreak       = childNode.nodeName === \"BR\";\n\n      // consider uneditable as an inline element\n      if (isBlockElement && (!uneditableClass || !wysihtml5.dom.hasClass(childNode, uneditableClass))) {\n        // Append blockElement to current <li> if empty, otherwise create a new one\n        currentListItem = currentListItem.firstChild ? _createListItem(doc, list) : currentListItem;\n        currentListItem.appendChild(childNode);\n        currentListItem = null;\n        continue;\n      }\n\n      if (isLineBreak) {\n        // Only create a new list item in the next iteration when the current one has already content\n        currentListItem = currentListItem.firstChild ? null : currentListItem;\n        continue;\n      }\n\n      currentListItem.appendChild(childNode);\n    }\n\n    if (childNodes.length === 0) {\n      _createListItem(doc, list);\n    }\n\n    element.parentNode.replaceChild(list, element);\n    return list;\n  }\n\n  return convertToList;\n})();\n;/**\n * Copy a set of attributes from one element to another\n *\n * @param {Array} attributesToCopy List of attributes which should be copied\n * @return {Object} Returns an object which offers the \"from\" method which can be invoked with the element where to\n *    copy the attributes from., this again returns an object which provides a method named \"to\" which can be invoked\n *    with the element where to copy the attributes to (see example)\n *\n * @example\n *    var textarea    = document.querySelector(\"textarea\"),\n *        div         = document.querySelector(\"div[contenteditable=true]\"),\n *        anotherDiv  = document.querySelector(\"div.preview\");\n *    wysihtml5.dom.copyAttributes([\"spellcheck\", \"value\", \"placeholder\"]).from(textarea).to(div).andTo(anotherDiv);\n *\n */\nwysihtml5.dom.copyAttributes = function(attributesToCopy) {\n  return {\n    from: function(elementToCopyFrom) {\n      return {\n        to: function(elementToCopyTo) {\n          var attribute,\n              i         = 0,\n              length    = attributesToCopy.length;\n          for (; i<length; i++) {\n            attribute = attributesToCopy[i];\n            if (typeof(elementToCopyFrom[attribute]) !== \"undefined\" && elementToCopyFrom[attribute] !== \"\") {\n              elementToCopyTo[attribute] = elementToCopyFrom[attribute];\n            }\n          }\n          return { andTo: arguments.callee };\n        }\n      };\n    }\n  };\n};\n;/**\n * Copy a set of styles from one element to another\n * Please note that this only works properly across browsers when the element from which to copy the styles\n * is in the dom\n *\n * Interesting article on how to copy styles\n *\n * @param {Array} stylesToCopy List of styles which should be copied\n * @return {Object} Returns an object which offers the \"from\" method which can be invoked with the element where to\n *    copy the styles from., this again returns an object which provides a method named \"to\" which can be invoked\n *    with the element where to copy the styles to (see example)\n *\n * @example\n *    var textarea    = document.querySelector(\"textarea\"),\n *        div         = document.querySelector(\"div[contenteditable=true]\"),\n *        anotherDiv  = document.querySelector(\"div.preview\");\n *    wysihtml5.dom.copyStyles([\"overflow-y\", \"width\", \"height\"]).from(textarea).to(div).andTo(anotherDiv);\n *\n */\n(function(dom) {\n\n  /**\n   * Mozilla, WebKit and Opera recalculate the computed width when box-sizing: boder-box; is set\n   * So if an element has \"width: 200px; -moz-box-sizing: border-box; border: 1px;\" then\n   * its computed css width will be 198px\n   *\n   * See https://bugzilla.mozilla.org/show_bug.cgi?id=520992\n   */\n  var BOX_SIZING_PROPERTIES = [\"-webkit-box-sizing\", \"-moz-box-sizing\", \"-ms-box-sizing\", \"box-sizing\"];\n\n  var shouldIgnoreBoxSizingBorderBox = function(element) {\n    if (hasBoxSizingBorderBox(element)) {\n       return parseInt(dom.getStyle(\"width\").from(element), 10) < element.offsetWidth;\n    }\n    return false;\n  };\n\n  var hasBoxSizingBorderBox = function(element) {\n    var i       = 0,\n        length  = BOX_SIZING_PROPERTIES.length;\n    for (; i<length; i++) {\n      if (dom.getStyle(BOX_SIZING_PROPERTIES[i]).from(element) === \"border-box\") {\n        return BOX_SIZING_PROPERTIES[i];\n      }\n    }\n  };\n\n  dom.copyStyles = function(stylesToCopy) {\n    return {\n      from: function(element) {\n        if (shouldIgnoreBoxSizingBorderBox(element)) {\n          stylesToCopy = wysihtml5.lang.array(stylesToCopy).without(BOX_SIZING_PROPERTIES);\n        }\n\n        var cssText = \"\",\n            length  = stylesToCopy.length,\n            i       = 0,\n            property;\n        for (; i<length; i++) {\n          property = stylesToCopy[i];\n          cssText += property + \":\" + dom.getStyle(property).from(element) + \";\";\n        }\n\n        return {\n          to: function(element) {\n            dom.setStyles(cssText).on(element);\n            return { andTo: arguments.callee };\n          }\n        };\n      }\n    };\n  };\n})(wysihtml5.dom);\n;/**\n * Event Delegation\n *\n * @example\n *    wysihtml5.dom.delegate(document.body, \"a\", \"click\", function() {\n *      // foo\n *    });\n */\n(function(wysihtml5) {\n\n  wysihtml5.dom.delegate = function(container, selector, eventName, handler) {\n    return wysihtml5.dom.observe(container, eventName, function(event) {\n      var target    = event.target,\n          match     = wysihtml5.lang.array(container.querySelectorAll(selector));\n\n      while (target && target !== container) {\n        if (match.contains(target)) {\n          handler.call(target, event);\n          break;\n        }\n        target = target.parentNode;\n      }\n    });\n  };\n\n})(wysihtml5);\n;// TODO: Refactor dom tree traversing here\n(function(wysihtml5) {\n  wysihtml5.dom.domNode = function(node) {\n    var defaultNodeTypes = [wysihtml5.ELEMENT_NODE, wysihtml5.TEXT_NODE];\n\n    var _isBlankText = function(node) {\n      return node.nodeType === wysihtml5.TEXT_NODE && (/^\\s*$/g).test(node.data);\n    };\n\n    return {\n\n      // var node = wysihtml5.dom.domNode(element).prev({nodeTypes: [1,3], ignoreBlankTexts: true});\n      prev: function(options) {\n        var prevNode = node.previousSibling,\n            types = (options && options.nodeTypes) ? options.nodeTypes : defaultNodeTypes;\n        \n        if (!prevNode) {\n          return null;\n        }\n\n        if (\n          (!wysihtml5.lang.array(types).contains(prevNode.nodeType)) || // nodeTypes check.\n          (options && options.ignoreBlankTexts && _isBlankText(prevNode)) // Blank text nodes bypassed if set\n        ) {\n          return wysihtml5.dom.domNode(prevNode).prev(options);\n        }\n        \n        return prevNode;\n      },\n\n      // var node = wysihtml5.dom.domNode(element).next({nodeTypes: [1,3], ignoreBlankTexts: true});\n      next: function(options) {\n        var nextNode = node.nextSibling,\n            types = (options && options.nodeTypes) ? options.nodeTypes : defaultNodeTypes;\n        \n        if (!nextNode) {\n          return null;\n        }\n\n        if (\n          (!wysihtml5.lang.array(types).contains(nextNode.nodeType)) || // nodeTypes check.\n          (options && options.ignoreBlankTexts && _isBlankText(nextNode)) // blank text nodes bypassed if set\n        ) {\n          return wysihtml5.dom.domNode(nextNode).next(options);\n        }\n        \n        return nextNode;\n      }\n\n\n\n    };\n  };\n})(wysihtml5);;/**\n * Returns the given html wrapped in a div element\n *\n * Fixing IE's inability to treat unknown elements (HTML5 section, article, ...) correctly\n * when inserted via innerHTML\n *\n * @param {String} html The html which should be wrapped in a dom element\n * @param {Obejct} [context] Document object of the context the html belongs to\n *\n * @example\n *    wysihtml5.dom.getAsDom(\"<article>foo</article>\");\n */\nwysihtml5.dom.getAsDom = (function() {\n\n  var _innerHTMLShiv = function(html, context) {\n    var tempElement = context.createElement(\"div\");\n    tempElement.style.display = \"none\";\n    context.body.appendChild(tempElement);\n    // IE throws an exception when trying to insert <frameset></frameset> via innerHTML\n    try { tempElement.innerHTML = html; } catch(e) {}\n    context.body.removeChild(tempElement);\n    return tempElement;\n  };\n\n  /**\n   * Make sure IE supports HTML5 tags, which is accomplished by simply creating one instance of each element\n   */\n  var _ensureHTML5Compatibility = function(context) {\n    if (context._wysihtml5_supportsHTML5Tags) {\n      return;\n    }\n    for (var i=0, length=HTML5_ELEMENTS.length; i<length; i++) {\n      context.createElement(HTML5_ELEMENTS[i]);\n    }\n    context._wysihtml5_supportsHTML5Tags = true;\n  };\n\n\n  /**\n   * List of html5 tags\n   * taken from http://simon.html5.org/html5-elements\n   */\n  var HTML5_ELEMENTS = [\n    \"abbr\", \"article\", \"aside\", \"audio\", \"bdi\", \"canvas\", \"command\", \"datalist\", \"details\", \"figcaption\",\n    \"figure\", \"footer\", \"header\", \"hgroup\", \"keygen\", \"mark\", \"meter\", \"nav\", \"output\", \"progress\",\n    \"rp\", \"rt\", \"ruby\", \"svg\", \"section\", \"source\", \"summary\", \"time\", \"track\", \"video\", \"wbr\"\n  ];\n\n  return function(html, context) {\n    context = context || document;\n    var tempElement;\n    if (typeof(html) === \"object\" && html.nodeType) {\n      tempElement = context.createElement(\"div\");\n      tempElement.appendChild(html);\n    } else if (wysihtml5.browser.supportsHTML5Tags(context)) {\n      tempElement = context.createElement(\"div\");\n      tempElement.innerHTML = html;\n    } else {\n      _ensureHTML5Compatibility(context);\n      tempElement = _innerHTMLShiv(html, context);\n    }\n    return tempElement;\n  };\n})();\n;/**\n * Walks the dom tree from the given node up until it finds a match\n * Designed for optimal performance.\n *\n * @param {Element} node The from which to check the parent nodes\n * @param {Object} matchingSet Object to match against (possible properties: nodeName, className, classRegExp)\n * @param {Number} [levels] How many parents should the function check up from the current node (defaults to 50)\n * @return {null|Element} Returns the first element that matched the desiredNodeName(s)\n * @example\n *    var listElement = wysihtml5.dom.getParentElement(document.querySelector(\"li\"), { nodeName: [\"MENU\", \"UL\", \"OL\"] });\n *    // ... or ...\n *    var unorderedListElement = wysihtml5.dom.getParentElement(document.querySelector(\"li\"), { nodeName: \"UL\" });\n *    // ... or ...\n *    var coloredElement = wysihtml5.dom.getParentElement(myTextNode, { nodeName: \"SPAN\", className: \"wysiwyg-color-red\", classRegExp: /wysiwyg-color-[a-z]/g });\n */\nwysihtml5.dom.getParentElement = (function() {\n\n  function _isSameNodeName(nodeName, desiredNodeNames) {\n    if (!desiredNodeNames || !desiredNodeNames.length) {\n      return true;\n    }\n\n    if (typeof(desiredNodeNames) === \"string\") {\n      return nodeName === desiredNodeNames;\n    } else {\n      return wysihtml5.lang.array(desiredNodeNames).contains(nodeName);\n    }\n  }\n\n  function _isElement(node) {\n    return node.nodeType === wysihtml5.ELEMENT_NODE;\n  }\n\n  function _hasClassName(element, className, classRegExp) {\n    var classNames = (element.className || \"\").match(classRegExp) || [];\n    if (!className) {\n      return !!classNames.length;\n    }\n    return classNames[classNames.length - 1] === className;\n  }\n\n  function _hasStyle(element, cssStyle, styleRegExp) {\n    var styles = (element.getAttribute('style') || \"\").match(styleRegExp) || [];\n    if (!cssStyle) {\n      return !!styles.length;\n    }\n    return styles[styles.length - 1] === cssStyle;\n  }\n\n  return function(node, matchingSet, levels, container) {\n    var findByStyle = (matchingSet.cssStyle || matchingSet.styleRegExp),\n        findByClass = (matchingSet.className || matchingSet.classRegExp);\n\n    levels = levels || 50; // Go max 50 nodes upwards from current node\n\n    while (levels-- && node && node.nodeName !== \"BODY\" && (!container || node !== container)) {\n      if (_isElement(node) && _isSameNodeName(node.nodeName, matchingSet.nodeName) &&\n          (!findByStyle || _hasStyle(node, matchingSet.cssStyle, matchingSet.styleRegExp)) &&\n          (!findByClass || _hasClassName(node, matchingSet.className, matchingSet.classRegExp))\n      ) {\n        return node;\n      }\n      node = node.parentNode;\n    }\n    return null;\n  };\n})();\n;/**\n * Get element's style for a specific css property\n *\n * @param {Element} element The element on which to retrieve the style\n * @param {String} property The CSS property to retrieve (\"float\", \"display\", \"text-align\", ...)\n *\n * @example\n *    wysihtml5.dom.getStyle(\"display\").from(document.body);\n *    // => \"block\"\n */\nwysihtml5.dom.getStyle = (function() {\n  var stylePropertyMapping = {\n        \"float\": (\"styleFloat\" in document.createElement(\"div\").style) ? \"styleFloat\" : \"cssFloat\"\n      },\n      REG_EXP_CAMELIZE = /\\-[a-z]/g;\n\n  function camelize(str) {\n    return str.replace(REG_EXP_CAMELIZE, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  }\n\n  return function(property) {\n    return {\n      from: function(element) {\n        if (element.nodeType !== wysihtml5.ELEMENT_NODE) {\n          return;\n        }\n\n        var doc               = element.ownerDocument,\n            camelizedProperty = stylePropertyMapping[property] || camelize(property),\n            style             = element.style,\n            currentStyle      = element.currentStyle,\n            styleValue        = style[camelizedProperty];\n        if (styleValue) {\n          return styleValue;\n        }\n\n        // currentStyle is no standard and only supported by Opera and IE but it has one important advantage over the standard-compliant\n        // window.getComputedStyle, since it returns css property values in their original unit:\n        // If you set an elements width to \"50%\", window.getComputedStyle will give you it's current width in px while currentStyle\n        // gives you the original \"50%\".\n        // Opera supports both, currentStyle and window.getComputedStyle, that's why checking for currentStyle should have higher prio\n        if (currentStyle) {\n          try {\n            return currentStyle[camelizedProperty];\n          } catch(e) {\n            //ie will occasionally fail for unknown reasons. swallowing exception\n          }\n        }\n\n        var win                 = doc.defaultView || doc.parentWindow,\n            needsOverflowReset  = (property === \"height\" || property === \"width\") && element.nodeName === \"TEXTAREA\",\n            originalOverflow,\n            returnValue;\n\n        if (win.getComputedStyle) {\n          // Chrome and Safari both calculate a wrong width and height for textareas when they have scroll bars\n          // therfore we remove and restore the scrollbar and calculate the value in between\n          if (needsOverflowReset) {\n            originalOverflow = style.overflow;\n            style.overflow = \"hidden\";\n          }\n          returnValue = win.getComputedStyle(element, null).getPropertyValue(property);\n          if (needsOverflowReset) {\n            style.overflow = originalOverflow || \"\";\n          }\n          return returnValue;\n        }\n      }\n    };\n  };\n})();\n;wysihtml5.dom.getTextNodes = function(node, ingoreEmpty){\n  var all = [];\n  for (node=node.firstChild;node;node=node.nextSibling){\n    if (node.nodeType == 3) {\n      if (!ingoreEmpty || !(/^\\s*$/).test(node.innerText || node.textContent)) {\n        all.push(node);\n      }\n    } else {\n      all = all.concat(wysihtml5.dom.getTextNodes(node, ingoreEmpty));\n    }\n  }\n  return all;\n};;/**\n * High performant way to check whether an element with a specific tag name is in the given document\n * Optimized for being heavily executed\n * Unleashes the power of live node lists\n *\n * @param {Object} doc The document object of the context where to check\n * @param {String} tagName Upper cased tag name\n * @example\n *    wysihtml5.dom.hasElementWithTagName(document, \"IMG\");\n */\nwysihtml5.dom.hasElementWithTagName = (function() {\n  var LIVE_CACHE          = {},\n      DOCUMENT_IDENTIFIER = 1;\n\n  function _getDocumentIdentifier(doc) {\n    return doc._wysihtml5_identifier || (doc._wysihtml5_identifier = DOCUMENT_IDENTIFIER++);\n  }\n\n  return function(doc, tagName) {\n    var key         = _getDocumentIdentifier(doc) + \":\" + tagName,\n        cacheEntry  = LIVE_CACHE[key];\n    if (!cacheEntry) {\n      cacheEntry = LIVE_CACHE[key] = doc.getElementsByTagName(tagName);\n    }\n\n    return cacheEntry.length > 0;\n  };\n})();\n;/**\n * High performant way to check whether an element with a specific class name is in the given document\n * Optimized for being heavily executed\n * Unleashes the power of live node lists\n *\n * @param {Object} doc The document object of the context where to check\n * @param {String} tagName Upper cased tag name\n * @example\n *    wysihtml5.dom.hasElementWithClassName(document, \"foobar\");\n */\n(function(wysihtml5) {\n  var LIVE_CACHE          = {},\n      DOCUMENT_IDENTIFIER = 1;\n\n  function _getDocumentIdentifier(doc) {\n    return doc._wysihtml5_identifier || (doc._wysihtml5_identifier = DOCUMENT_IDENTIFIER++);\n  }\n\n  wysihtml5.dom.hasElementWithClassName = function(doc, className) {\n    // getElementsByClassName is not supported by IE<9\n    // but is sometimes mocked via library code (which then doesn't return live node lists)\n    if (!wysihtml5.browser.supportsNativeGetElementsByClassName()) {\n      return !!doc.querySelector(\".\" + className);\n    }\n\n    var key         = _getDocumentIdentifier(doc) + \":\" + className,\n        cacheEntry  = LIVE_CACHE[key];\n    if (!cacheEntry) {\n      cacheEntry = LIVE_CACHE[key] = doc.getElementsByClassName(className);\n    }\n\n    return cacheEntry.length > 0;\n  };\n})(wysihtml5);\n;wysihtml5.dom.insert = function(elementToInsert) {\n  return {\n    after: function(element) {\n      element.parentNode.insertBefore(elementToInsert, element.nextSibling);\n    },\n\n    before: function(element) {\n      element.parentNode.insertBefore(elementToInsert, element);\n    },\n\n    into: function(element) {\n      element.appendChild(elementToInsert);\n    }\n  };\n};\n;wysihtml5.dom.insertCSS = function(rules) {\n  rules = rules.join(\"\\n\");\n\n  return {\n    into: function(doc) {\n      var styleElement = doc.createElement(\"style\");\n      styleElement.type = \"text/css\";\n\n      if (styleElement.styleSheet) {\n        styleElement.styleSheet.cssText = rules;\n      } else {\n        styleElement.appendChild(doc.createTextNode(rules));\n      }\n\n      var link = doc.querySelector(\"head link\");\n      if (link) {\n        link.parentNode.insertBefore(styleElement, link);\n        return;\n      } else {\n        var head = doc.querySelector(\"head\");\n        if (head) {\n          head.appendChild(styleElement);\n        }\n      }\n    }\n  };\n};\n;// TODO: Refactor dom tree traversing here\n(function(wysihtml5) {\n  wysihtml5.dom.lineBreaks = function(node) {\n\n    function _isLineBreak(n) {\n      return n.nodeName === \"BR\";\n    }\n\n    /**\n     * Checks whether the elment causes a visual line break\n     * (<br> or block elements)\n     */\n    function _isLineBreakOrBlockElement(element) {\n      if (_isLineBreak(element)) {\n        return true;\n      }\n\n      if (wysihtml5.dom.getStyle(\"display\").from(element) === \"block\") {\n        return true;\n      }\n\n      return false;\n    }\n\n    return {\n\n      /* wysihtml5.dom.lineBreaks(element).add();\n       *\n       * Adds line breaks before and after the given node if the previous and next siblings\n       * aren't already causing a visual line break (block element or <br>)\n       */\n      add: function(options) {\n        var doc             = node.ownerDocument,\n          nextSibling     = wysihtml5.dom.domNode(node).next({ignoreBlankTexts: true}),\n          previousSibling = wysihtml5.dom.domNode(node).prev({ignoreBlankTexts: true});\n\n        if (nextSibling && !_isLineBreakOrBlockElement(nextSibling)) {\n          wysihtml5.dom.insert(doc.createElement(\"br\")).after(node);\n        }\n        if (previousSibling && !_isLineBreakOrBlockElement(previousSibling)) {\n          wysihtml5.dom.insert(doc.createElement(\"br\")).before(node);\n        }\n      },\n\n      /* wysihtml5.dom.lineBreaks(element).remove();\n       *\n       * Removes line breaks before and after the given node\n       */\n      remove: function(options) {\n        var nextSibling     = wysihtml5.dom.domNode(node).next({ignoreBlankTexts: true}),\n            previousSibling = wysihtml5.dom.domNode(node).prev({ignoreBlankTexts: true});\n\n        if (nextSibling && _isLineBreak(nextSibling)) {\n          nextSibling.parentNode.removeChild(nextSibling);\n        }\n        if (previousSibling && _isLineBreak(previousSibling)) {\n          previousSibling.parentNode.removeChild(previousSibling);\n        }\n      }\n    };\n  };\n})(wysihtml5);;/**\n * Method to set dom events\n *\n * @example\n *    wysihtml5.dom.observe(iframe.contentWindow.document.body, [\"focus\", \"blur\"], function() { ... });\n */\nwysihtml5.dom.observe = function(element, eventNames, handler) {\n  eventNames = typeof(eventNames) === \"string\" ? [eventNames] : eventNames;\n\n  var handlerWrapper,\n      eventName,\n      i       = 0,\n      length  = eventNames.length;\n\n  for (; i<length; i++) {\n    eventName = eventNames[i];\n    if (element.addEventListener) {\n      element.addEventListener(eventName, handler, false);\n    } else {\n      handlerWrapper = function(event) {\n        if (!(\"target\" in event)) {\n          event.target = event.srcElement;\n        }\n        event.preventDefault = event.preventDefault || function() {\n          this.returnValue = false;\n        };\n        event.stopPropagation = event.stopPropagation || function() {\n          this.cancelBubble = true;\n        };\n        handler.call(element, event);\n      };\n      element.attachEvent(\"on\" + eventName, handlerWrapper);\n    }\n  }\n\n  return {\n    stop: function() {\n      var eventName,\n          i       = 0,\n          length  = eventNames.length;\n      for (; i<length; i++) {\n        eventName = eventNames[i];\n        if (element.removeEventListener) {\n          element.removeEventListener(eventName, handler, false);\n        } else {\n          element.detachEvent(\"on\" + eventName, handlerWrapper);\n        }\n      }\n    }\n  };\n};\n;/**\n * HTML Sanitizer\n * Rewrites the HTML based on given rules\n *\n * @param {Element|String} elementOrHtml HTML String to be sanitized OR element whose content should be sanitized\n * @param {Object} [rules] List of rules for rewriting the HTML, if there's no rule for an element it will\n *    be converted to a \"span\". Each rule is a key/value pair where key is the tag to convert, and value the\n *    desired substitution.\n * @param {Object} context Document object in which to parse the html, needed to sandbox the parsing\n *\n * @return {Element|String} Depends on the elementOrHtml parameter. When html then the sanitized html as string elsewise the element.\n *\n * @example\n *    var userHTML = '<div id=\"foo\" onclick=\"alert(1);\"><p><font color=\"red\">foo</font><script>alert(1);</script></p></div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      tags {\n *        p:      \"div\",      // Rename p tags to div tags\n *        font:   \"span\"      // Rename font tags to span tags\n *        div:    true,       // Keep them, also possible (same result when passing: \"div\" or true)\n *        script: undefined   // Remove script elements\n *      }\n *    });\n *    // => <div><div><span>foo bar</span></div></div>\n *\n *    var userHTML = '<table><tbody><tr><td>I'm a table!</td></tr></tbody></table>';\n *    wysihtml5.dom.parse(userHTML);\n *    // => '<span><span><span><span>I'm a table!</span></span></span></span>'\n *\n *    var userHTML = '<div>foobar<br>foobar</div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      tags: {\n *        div: undefined,\n *        br:  true\n *      }\n *    });\n *    // => ''\n *\n *    var userHTML = '<div class=\"red\">foo</div><div class=\"pink\">bar</div>';\n *    wysihtml5.dom.parse(userHTML, {\n *      classes: {\n *        red:    1,\n *        green:  1\n *      },\n *      tags: {\n *        div: {\n *          rename_tag:     \"p\"\n *        }\n *      }\n *    });\n *    // => '<p class=\"red\">foo</p><p>bar</p>'\n */\n\nwysihtml5.dom.parse = function(elementOrHtml_current, config_current) {\n  /* TODO: Currently escaped module pattern as otherwise folloowing default swill be shared among multiple editors.\n   * Refactor whole code as this method while workind is kind of awkward too */\n\n  /**\n   * It's not possible to use a XMLParser/DOMParser as HTML5 is not always well-formed XML\n   * new DOMParser().parseFromString('<img src=\"foo.gif\">') will cause a parseError since the\n   * node isn't closed\n   *\n   * Therefore we've to use the browser's ordinary HTML parser invoked by setting innerHTML.\n   */\n  var NODE_TYPE_MAPPING = {\n        \"1\": _handleElement,\n        \"3\": _handleText,\n        \"8\": _handleComment\n      },\n      // Rename unknown tags to this\n      DEFAULT_NODE_NAME   = \"span\",\n      WHITE_SPACE_REG_EXP = /\\s+/,\n      defaultRules        = { tags: {}, classes: {} },\n      currentRules        = {};\n\n  /**\n   * Iterates over all childs of the element, recreates them, appends them into a document fragment\n   * which later replaces the entire body content\n   */\n   function parse(elementOrHtml, config) {\n    wysihtml5.lang.object(currentRules).merge(defaultRules).merge(config.rules).get();\n\n    var context       = config.context || elementOrHtml.ownerDocument || document,\n        fragment      = context.createDocumentFragment(),\n        isString      = typeof(elementOrHtml) === \"string\",\n        clearInternals = false,\n        element,\n        newNode,\n        firstChild;\n\n    if (config.clearInternals === true) {\n      clearInternals = true;\n    }\n\n    if (isString) {\n      element = wysihtml5.dom.getAsDom(elementOrHtml, context);\n    } else {\n      element = elementOrHtml;\n    }\n\n    if (currentRules.selectors) {\n      _applySelectorRules(element, currentRules.selectors);\n    }\n\n    while (element.firstChild) {\n      firstChild = element.firstChild;\n      newNode = _convert(firstChild, config.cleanUp, clearInternals, config.uneditableClass);\n      if (newNode) {\n        fragment.appendChild(newNode);\n      }\n      if (firstChild !== newNode) {\n        element.removeChild(firstChild);\n      }\n    }\n\n    if (config.unjoinNbsps) {\n      // replace joined non-breakable spaces with unjoined\n      var txtnodes = wysihtml5.dom.getTextNodes(fragment);\n      for (var n = txtnodes.length; n--;) {\n        txtnodes[n].nodeValue = txtnodes[n].nodeValue.replace(/([\\S\\u00A0])\\u00A0/gi, \"$1 \");\n      }\n    }\n\n    // Clear element contents\n    element.innerHTML = \"\";\n\n    // Insert new DOM tree\n    element.appendChild(fragment);\n\n    return isString ? wysihtml5.quirks.getCorrectInnerHTML(element) : element;\n  }\n\n  function _convert(oldNode, cleanUp, clearInternals, uneditableClass) {\n    var oldNodeType     = oldNode.nodeType,\n        oldChilds       = oldNode.childNodes,\n        oldChildsLength = oldChilds.length,\n        method          = NODE_TYPE_MAPPING[oldNodeType],\n        i               = 0,\n        fragment,\n        newNode,\n        newChild;\n\n    // Passes directly elemets with uneditable class\n    if (uneditableClass && oldNodeType === 1 && wysihtml5.dom.hasClass(oldNode, uneditableClass)) {\n        return oldNode;\n    }\n\n    newNode = method && method(oldNode, clearInternals);\n\n    // Remove or unwrap node in case of return value null or false\n    if (!newNode) {\n        if (newNode === false) {\n            // false defines that tag should be removed but contents should remain (unwrap)\n            fragment = oldNode.ownerDocument.createDocumentFragment();\n\n            for (i = oldChildsLength; i--;) {\n              if (oldChilds[i]) {\n                newChild = _convert(oldChilds[i], cleanUp, clearInternals, uneditableClass);\n                if (newChild) {\n                  if (oldChilds[i] === newChild) {\n                    i--;\n                  }\n                  fragment.insertBefore(newChild, fragment.firstChild);\n                }\n              }\n            }\n\n            if (wysihtml5.dom.getStyle(\"display\").from(oldNode) === \"block\") {\n              fragment.appendChild(oldNode.ownerDocument.createElement(\"br\"));\n            }\n\n            // TODO: try to minimize surplus spaces\n            if (wysihtml5.lang.array([\n                \"div\", \"pre\", \"p\",\n                \"table\", \"td\", \"th\",\n                \"ul\", \"ol\", \"li\",\n                \"dd\", \"dl\",\n                \"footer\", \"header\", \"section\",\n                \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"\n            ]).contains(oldNode.nodeName.toLowerCase()) && oldNode.parentNode.lastChild !== oldNode) {\n                // add space at first when unwraping non-textflow elements\n                if (!oldNode.nextSibling || oldNode.nextSibling.nodeType !== 3 || !(/^\\s/).test(oldNode.nextSibling.nodeValue)) {\n                  fragment.appendChild(oldNode.ownerDocument.createTextNode(\" \"));\n                }\n            }\n\n            if (fragment.normalize) {\n              fragment.normalize();\n            }\n            return fragment;\n        } else {\n          // Remove\n          return null;\n        }\n    }\n\n    // Converts all childnodes\n    for (i=0; i<oldChildsLength; i++) {\n      if (oldChilds[i]) {\n        newChild = _convert(oldChilds[i], cleanUp, clearInternals, uneditableClass);\n        if (newChild) {\n          if (oldChilds[i] === newChild) {\n            i--;\n          }\n          newNode.appendChild(newChild);\n        }\n      }\n    }\n\n    // Cleanup senseless <span> elements\n    if (cleanUp &&\n        newNode.nodeName.toLowerCase() === DEFAULT_NODE_NAME &&\n        (!newNode.childNodes.length ||\n         ((/^\\s*$/gi).test(newNode.innerHTML) && (clearInternals || (oldNode.className !== \"_wysihtml5-temp-placeholder\" && oldNode.className !== \"rangySelectionBoundary\"))) ||\n         !newNode.attributes.length)\n        ) {\n      fragment = newNode.ownerDocument.createDocumentFragment();\n      while (newNode.firstChild) {\n        fragment.appendChild(newNode.firstChild);\n      }\n      if (fragment.normalize) {\n        fragment.normalize();\n      }\n      return fragment;\n    }\n\n    if (newNode.normalize) {\n      newNode.normalize();\n    }\n    return newNode;\n  }\n\n  function _applySelectorRules (element, selectorRules) {\n    var sel, method, els;\n\n    for (sel in selectorRules) {\n      if (selectorRules.hasOwnProperty(sel)) {\n        if (wysihtml5.lang.object(selectorRules[sel]).isFunction()) {\n          method = selectorRules[sel];\n        } else if (typeof(selectorRules[sel]) === \"string\" && elementHandlingMethods[selectorRules[sel]]) {\n          method = elementHandlingMethods[selectorRules[sel]];\n        }\n        els = element.querySelectorAll(sel);\n        for (var i = els.length; i--;) {\n          method(els[i]);\n        }\n      }\n    }\n  }\n\n  function _handleElement(oldNode, clearInternals) {\n    var rule,\n        newNode,\n        tagRules    = currentRules.tags,\n        nodeName    = oldNode.nodeName.toLowerCase(),\n        scopeName   = oldNode.scopeName,\n        renameTag;\n\n    /**\n     * We already parsed that element\n     * ignore it! (yes, this sometimes happens in IE8 when the html is invalid)\n     */\n    if (oldNode._wysihtml5) {\n      return null;\n    }\n    oldNode._wysihtml5 = 1;\n\n    if (oldNode.className === \"wysihtml5-temp\") {\n      return null;\n    }\n\n    /**\n     * IE is the only browser who doesn't include the namespace in the\n     * nodeName, that's why we have to prepend it by ourselves\n     * scopeName is a proprietary IE feature\n     * read more here http://msdn.microsoft.com/en-us/library/ms534388(v=vs.85).aspx\n     */\n    if (scopeName && scopeName != \"HTML\") {\n      nodeName = scopeName + \":\" + nodeName;\n    }\n    /**\n     * Repair node\n     * IE is a bit bitchy when it comes to invalid nested markup which includes unclosed tags\n     * A <p> doesn't need to be closed according HTML4-5 spec, we simply replace it with a <div> to preserve its content and layout\n     */\n    if (\"outerHTML\" in oldNode) {\n      if (!wysihtml5.browser.autoClosesUnclosedTags() &&\n          oldNode.nodeName === \"P\" &&\n          oldNode.outerHTML.slice(-4).toLowerCase() !== \"</p>\") {\n        nodeName = \"div\";\n      }\n    }\n\n    if (nodeName in tagRules) {\n      rule = tagRules[nodeName];\n      if (!rule || rule.remove) {\n        return null;\n      } else if (rule.unwrap) {\n        return false;\n      }\n      rule = typeof(rule) === \"string\" ? { rename_tag: rule } : rule;\n    } else if (oldNode.firstChild) {\n      rule = { rename_tag: DEFAULT_NODE_NAME };\n    } else {\n      // Remove empty unknown elements\n      return null;\n    }\n\n    // tests if type condition is met or node should be removed/unwrapped/renamed\n    if (rule.one_of_type && !_testTypes(oldNode, currentRules, rule.one_of_type, clearInternals)) {\n      if (rule.remove_action) {\n        if (rule.remove_action === \"unwrap\") {\n          return false;\n        } else if (rule.remove_action === \"rename\") {\n          renameTag = rule.remove_action_rename_to || DEFAULT_NODE_NAME;\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    }\n\n    newNode = oldNode.ownerDocument.createElement(renameTag || rule.rename_tag || nodeName);\n    _handleAttributes(oldNode, newNode, rule, clearInternals);\n    _handleStyles(oldNode, newNode, rule);\n\n    oldNode = null;\n\n    if (newNode.normalize) { newNode.normalize(); }\n    return newNode;\n  }\n\n  function _testTypes(oldNode, rules, types, clearInternals) {\n    var definition, type;\n\n    // do not interfere with placeholder span or pasting caret position is not maintained\n    if (oldNode.nodeName === \"SPAN\" && !clearInternals && (oldNode.className === \"_wysihtml5-temp-placeholder\" || oldNode.className === \"rangySelectionBoundary\")) {\n      return true;\n    }\n\n    for (type in types) {\n      if (types.hasOwnProperty(type) && rules.type_definitions && rules.type_definitions[type]) {\n        definition = rules.type_definitions[type];\n        if (_testType(oldNode, definition)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function array_contains(a, obj) {\n      var i = a.length;\n      while (i--) {\n         if (a[i] === obj) {\n             return true;\n         }\n      }\n      return false;\n  }\n\n  function _testType(oldNode, definition) {\n\n    var nodeClasses = oldNode.getAttribute(\"class\"),\n        nodeStyles =  oldNode.getAttribute(\"style\"),\n        classesLength, s, s_corrected, a, attr, currentClass, styleProp;\n\n    // test for methods\n    if (definition.methods) {\n      for (var m in definition.methods) {\n        if (definition.methods.hasOwnProperty(m) && typeCeckMethods[m]) {\n\n          if (typeCeckMethods[m](oldNode)) {\n            return true;\n          }\n        }\n      }\n    }\n\n    // test for classes, if one found return true\n    if (nodeClasses && definition.classes) {\n      nodeClasses = nodeClasses.replace(/^\\s+/g, '').replace(/\\s+$/g, '').split(WHITE_SPACE_REG_EXP);\n      classesLength = nodeClasses.length;\n      for (var i = 0; i < classesLength; i++) {\n        if (definition.classes[nodeClasses[i]]) {\n          return true;\n        }\n      }\n    }\n\n    // test for styles, if one found return true\n    if (nodeStyles && definition.styles) {\n\n      nodeStyles = nodeStyles.split(';');\n      for (s in definition.styles) {\n        if (definition.styles.hasOwnProperty(s)) {\n          for (var sp = nodeStyles.length; sp--;) {\n            styleProp = nodeStyles[sp].split(':');\n\n            if (styleProp[0].replace(/\\s/g, '').toLowerCase() === s) {\n              if (definition.styles[s] === true || definition.styles[s] === 1 || wysihtml5.lang.array(definition.styles[s]).contains(styleProp[1].replace(/\\s/g, '').toLowerCase()) ) {\n                return true;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // test for attributes in general against regex match\n    if (definition.attrs) {\n        for (a in definition.attrs) {\n            if (definition.attrs.hasOwnProperty(a)) {\n                attr = wysihtml5.dom.getAttribute(oldNode, a);\n                if (typeof(attr) === \"string\") {\n                    if (attr.search(definition.attrs[a]) > -1) {\n                        return true;\n                    }\n                }\n            }\n        }\n    }\n    return false;\n  }\n\n  function _handleStyles(oldNode, newNode, rule) {\n    var s, v;\n    if(rule && rule.keep_styles) {\n      for (s in rule.keep_styles) {\n        if (rule.keep_styles.hasOwnProperty(s)) {\n          v = (s === \"float\") ? oldNode.style.styleFloat || oldNode.style.cssFloat : oldNode.style[s];\n          // value can be regex and if so should match or style skipped\n          if (rule.keep_styles[s] instanceof RegExp && !(rule.keep_styles[s].test(v))) {\n            continue;\n          }\n          if (s === \"float\") {\n            // IE compability\n            newNode.style[(oldNode.style.styleFloat) ? 'styleFloat': 'cssFloat'] = v;\n           } else if (oldNode.style[s]) {\n             newNode.style[s] = v;\n           }\n        }\n      }\n    }\n  };\n\n  function _getAttributesBeginningWith(beginning, attributes) {\n    var returnAttributes = [];\n    for (var attr in attributes) {\n      if (attributes.hasOwnProperty(attr) && attr.indexOf(beginning) === 0) {\n        returnAttributes.push(attr);\n      }\n    }\n    return returnAttributes;\n  }\n\n  function _checkAttribute(attributeName, attributeValue, methodName, nodeName) {\n    var method = attributeCheckMethods[methodName],\n        newAttributeValue;\n\n    if (method) {\n      if (attributeValue || (attributeName === \"alt\" && nodeName == \"IMG\")) {\n        newAttributeValue = method(attributeValue);\n        if (typeof(newAttributeValue) === \"string\") {\n          return newAttributeValue;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function _checkAttributes(oldNode, local_attributes) {\n    var globalAttributes  = wysihtml5.lang.object(currentRules.attributes || {}).clone(), // global values for check/convert values of attributes\n        checkAttributes   = wysihtml5.lang.object(globalAttributes).merge( wysihtml5.lang.object(local_attributes || {}).clone()).get(),\n        attributes        = {},\n        oldAttributes     = wysihtml5.dom.getAttributes(oldNode),\n        attributeName, newValue, matchingAttributes;\n\n    for (attributeName in checkAttributes) {\n      if ((/\\*$/).test(attributeName)) {\n\n        matchingAttributes = _getAttributesBeginningWith(attributeName.slice(0,-1), oldAttributes);\n        for (var i = 0, imax = matchingAttributes.length; i < imax; i++) {\n\n          newValue = _checkAttribute(matchingAttributes[i], oldAttributes[matchingAttributes[i]], checkAttributes[attributeName], oldNode.nodeName);\n          if (newValue !== false) {\n            attributes[matchingAttributes[i]] = newValue;\n          }\n        }\n      } else {\n        newValue = _checkAttribute(attributeName, oldAttributes[attributeName], checkAttributes[attributeName], oldNode.nodeName);\n        if (newValue !== false) {\n          attributes[attributeName] = newValue;\n        }\n      }\n    }\n\n    return attributes;\n  }\n\n  // TODO: refactor. Too long to read\n  function _handleAttributes(oldNode, newNode, rule, clearInternals) {\n    var attributes          = {},                         // fresh new set of attributes to set on newNode\n        setClass            = rule.set_class,             // classes to set\n        addClass            = rule.add_class,             // add classes based on existing attributes\n        addStyle            = rule.add_style,             // add styles based on existing attributes\n        setAttributes       = rule.set_attributes,        // attributes to set on the current node\n        allowedClasses      = currentRules.classes,\n        i                   = 0,\n        classes             = [],\n        styles              = [],\n        newClasses          = [],\n        oldClasses          = [],\n        classesLength,\n        newClassesLength,\n        currentClass,\n        newClass,\n        attributeName,\n        method;\n\n    if (setAttributes) {\n      attributes = wysihtml5.lang.object(setAttributes).clone();\n    }\n\n    // check/convert values of attributes\n    attributes = wysihtml5.lang.object(attributes).merge(_checkAttributes(oldNode,  rule.check_attributes)).get();\n\n    if (setClass) {\n      classes.push(setClass);\n    }\n\n    if (addClass) {\n      for (attributeName in addClass) {\n        method = addClassMethods[addClass[attributeName]];\n        if (!method) {\n          continue;\n        }\n        newClass = method(wysihtml5.dom.getAttribute(oldNode, attributeName));\n        if (typeof(newClass) === \"string\") {\n          classes.push(newClass);\n        }\n      }\n    }\n\n    if (addStyle) {\n      for (attributeName in addStyle) {\n        method = addStyleMethods[addStyle[attributeName]];\n        if (!method) {\n          continue;\n        }\n\n        newStyle = method(wysihtml5.dom.getAttribute(oldNode, attributeName));\n        if (typeof(newStyle) === \"string\") {\n          styles.push(newStyle);\n        }\n      }\n    }\n\n\n    if (typeof(allowedClasses) === \"string\" && allowedClasses === \"any\" && oldNode.getAttribute(\"class\")) {\n      if (currentRules.classes_blacklist) {\n        oldClasses = oldNode.getAttribute(\"class\");\n        if (oldClasses) {\n          classes = classes.concat(oldClasses.split(WHITE_SPACE_REG_EXP));\n        }\n\n        classesLength = classes.length;\n        for (; i<classesLength; i++) {\n          currentClass = classes[i];\n          if (!currentRules.classes_blacklist[currentClass]) {\n            newClasses.push(currentClass);\n          }\n        }\n\n        if (newClasses.length) {\n          attributes[\"class\"] = wysihtml5.lang.array(newClasses).unique().join(\" \");\n        }\n\n      } else {\n        attributes[\"class\"] = oldNode.getAttribute(\"class\");\n      }\n    } else {\n      // make sure that wysihtml5 temp class doesn't get stripped out\n      if (!clearInternals) {\n        allowedClasses[\"_wysihtml5-temp-placeholder\"] = 1;\n        allowedClasses[\"_rangySelectionBoundary\"] = 1;\n        allowedClasses[\"wysiwyg-tmp-selected-cell\"] = 1;\n      }\n\n      // add old classes last\n      oldClasses = oldNode.getAttribute(\"class\");\n      if (oldClasses) {\n        classes = classes.concat(oldClasses.split(WHITE_SPACE_REG_EXP));\n      }\n      classesLength = classes.length;\n      for (; i<classesLength; i++) {\n        currentClass = classes[i];\n        if (allowedClasses[currentClass]) {\n          newClasses.push(currentClass);\n        }\n      }\n\n      if (newClasses.length) {\n        attributes[\"class\"] = wysihtml5.lang.array(newClasses).unique().join(\" \");\n      }\n    }\n\n    // remove table selection class if present\n    if (attributes[\"class\"] && clearInternals) {\n      attributes[\"class\"] = attributes[\"class\"].replace(\"wysiwyg-tmp-selected-cell\", \"\");\n      if ((/^\\s*$/g).test(attributes[\"class\"])) {\n        delete attributes[\"class\"];\n      }\n    }\n\n    if (styles.length) {\n      attributes[\"style\"] = wysihtml5.lang.array(styles).unique().join(\" \");\n    }\n\n    // set attributes on newNode\n    for (attributeName in attributes) {\n      // Setting attributes can cause a js error in IE under certain circumstances\n      // eg. on a <img> under https when it's new attribute value is non-https\n      // TODO: Investigate this further and check for smarter handling\n      try {\n        newNode.setAttribute(attributeName, attributes[attributeName]);\n      } catch(e) {}\n    }\n\n    // IE8 sometimes loses the width/height attributes when those are set before the \"src\"\n    // so we make sure to set them again\n    if (attributes.src) {\n      if (typeof(attributes.width) !== \"undefined\") {\n        newNode.setAttribute(\"width\", attributes.width);\n      }\n      if (typeof(attributes.height) !== \"undefined\") {\n        newNode.setAttribute(\"height\", attributes.height);\n      }\n    }\n  }\n\n  var INVISIBLE_SPACE_REG_EXP = /\\uFEFF/g;\n  function _handleText(oldNode) {\n    var nextSibling = oldNode.nextSibling;\n    if (nextSibling && nextSibling.nodeType === wysihtml5.TEXT_NODE) {\n      // Concatenate text nodes\n      nextSibling.data = oldNode.data.replace(INVISIBLE_SPACE_REG_EXP, \"\") + nextSibling.data.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n    } else {\n      // \\uFEFF = wysihtml5.INVISIBLE_SPACE (used as a hack in certain rich text editing situations)\n      var data = oldNode.data.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n      return oldNode.ownerDocument.createTextNode(data);\n    }\n  }\n\n  function _handleComment(oldNode) {\n    if (currentRules.comments) {\n      return oldNode.ownerDocument.createComment(oldNode.nodeValue);\n    }\n  }\n\n  // ------------ attribute checks ------------ \\\\\n  var attributeCheckMethods = {\n    url: (function() {\n      var REG_EXP = /^https?:\\/\\//i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    src: (function() {\n      var REG_EXP = /^(\\/|https?:\\/\\/)/i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    href: (function() {\n      var REG_EXP = /^(#|\\/|https?:\\/\\/|mailto:)/i;\n      return function(attributeValue) {\n        if (!attributeValue || !attributeValue.match(REG_EXP)) {\n          return null;\n        }\n        return attributeValue.replace(REG_EXP, function(match) {\n          return match.toLowerCase();\n        });\n      };\n    })(),\n\n    alt: (function() {\n      var REG_EXP = /[^ a-z0-9_\\-]/gi;\n      return function(attributeValue) {\n        if (!attributeValue) {\n          return \"\";\n        }\n        return attributeValue.replace(REG_EXP, \"\");\n      };\n    })(),\n\n    numbers: (function() {\n      var REG_EXP = /\\D/g;\n      return function(attributeValue) {\n        attributeValue = (attributeValue || \"\").replace(REG_EXP, \"\");\n        return attributeValue || null;\n      };\n    })(),\n\n    any: (function() {\n      return function(attributeValue) {\n        return attributeValue;\n      };\n    })()\n  };\n\n  // ------------ style converter (converts an html attribute to a style) ------------ \\\\\n  var addStyleMethods = {\n    align_text: (function() {\n      var mapping = {\n        left:     \"text-align: left;\",\n        right:    \"text-align: right;\",\n        center:   \"text-align: center;\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n  };\n\n  // ------------ class converter (converts an html attribute to a class name) ------------ \\\\\n  var addClassMethods = {\n    align_img: (function() {\n      var mapping = {\n        left:   \"wysiwyg-float-left\",\n        right:  \"wysiwyg-float-right\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    align_text: (function() {\n      var mapping = {\n        left:     \"wysiwyg-text-align-left\",\n        right:    \"wysiwyg-text-align-right\",\n        center:   \"wysiwyg-text-align-center\",\n        justify:  \"wysiwyg-text-align-justify\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    clear_br: (function() {\n      var mapping = {\n        left:   \"wysiwyg-clear-left\",\n        right:  \"wysiwyg-clear-right\",\n        both:   \"wysiwyg-clear-both\",\n        all:    \"wysiwyg-clear-both\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).toLowerCase()];\n      };\n    })(),\n\n    size_font: (function() {\n      var mapping = {\n        \"1\": \"wysiwyg-font-size-xx-small\",\n        \"2\": \"wysiwyg-font-size-small\",\n        \"3\": \"wysiwyg-font-size-medium\",\n        \"4\": \"wysiwyg-font-size-large\",\n        \"5\": \"wysiwyg-font-size-x-large\",\n        \"6\": \"wysiwyg-font-size-xx-large\",\n        \"7\": \"wysiwyg-font-size-xx-large\",\n        \"-\": \"wysiwyg-font-size-smaller\",\n        \"+\": \"wysiwyg-font-size-larger\"\n      };\n      return function(attributeValue) {\n        return mapping[String(attributeValue).charAt(0)];\n      };\n    })()\n  };\n\n  // checks if element is possibly visible\n  var typeCeckMethods = {\n    has_visible_contet: (function() {\n      var txt,\n          isVisible = false,\n          visibleElements = ['img', 'video', 'picture', 'br', 'script', 'noscript',\n                             'style', 'table', 'iframe', 'object', 'embed', 'audio',\n                             'svg', 'input', 'button', 'select','textarea', 'canvas'];\n\n      return function(el) {\n\n        // has visible innertext. so is visible\n        txt = (el.innerText || el.textContent).replace(/\\s/g, '');\n        if (txt && txt.length > 0) {\n          return true;\n        }\n\n        // matches list of visible dimensioned elements\n        for (var i = visibleElements.length; i--;) {\n          if (el.querySelector(visibleElements[i])) {\n            return true;\n          }\n        }\n\n        // try to measure dimesions in last resort. (can find only of elements in dom)\n        if (el.offsetWidth && el.offsetWidth > 0 && el.offsetHeight && el.offsetHeight > 0) {\n          return true;\n        }\n\n        return false;\n      };\n    })()\n  };\n\n  var elementHandlingMethods = {\n    unwrap: function (element) {\n      wysihtml5.dom.unwrap(element);\n    },\n\n    remove: function (element) {\n      element.parentNode.removeChild(element);\n    }\n  };\n\n  return parse(elementOrHtml_current, config_current);\n};\n;/**\n * Checks for empty text node childs and removes them\n *\n * @param {Element} node The element in which to cleanup\n * @example\n *    wysihtml5.dom.removeEmptyTextNodes(element);\n */\nwysihtml5.dom.removeEmptyTextNodes = function(node) {\n  var childNode,\n      childNodes        = wysihtml5.lang.array(node.childNodes).get(),\n      childNodesLength  = childNodes.length,\n      i                 = 0;\n  for (; i<childNodesLength; i++) {\n    childNode = childNodes[i];\n    if (childNode.nodeType === wysihtml5.TEXT_NODE && childNode.data === \"\") {\n      childNode.parentNode.removeChild(childNode);\n    }\n  }\n};\n;/**\n * Renames an element (eg. a <div> to a <p>) and keeps its childs\n *\n * @param {Element} element The list element which should be renamed\n * @param {Element} newNodeName The desired tag name\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <ul id=\"list\">\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n *\n *    <script>\n *      wysihtml5.dom.renameElement(document.getElementById(\"list\"), \"ol\");\n *    </script>\n *\n *    <!-- Will result in: -->\n *    <ol>\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ol>\n */\nwysihtml5.dom.renameElement = function(element, newNodeName) {\n  var newElement = element.ownerDocument.createElement(newNodeName),\n      firstChild;\n  while (firstChild = element.firstChild) {\n    newElement.appendChild(firstChild);\n  }\n  wysihtml5.dom.copyAttributes([\"align\", \"className\"]).from(element).to(newElement);\n  element.parentNode.replaceChild(newElement, element);\n  return newElement;\n};\n;/**\n * Takes an element, removes it and replaces it with it's childs\n *\n * @param {Object} node The node which to replace with it's child nodes\n * @example\n *    <div id=\"foo\">\n *      <span>hello</span>\n *    </div>\n *    <script>\n *      // Remove #foo and replace with it's children\n *      wysihtml5.dom.replaceWithChildNodes(document.getElementById(\"foo\"));\n *    </script>\n */\nwysihtml5.dom.replaceWithChildNodes = function(node) {\n  if (!node.parentNode) {\n    return;\n  }\n\n  if (!node.firstChild) {\n    node.parentNode.removeChild(node);\n    return;\n  }\n\n  var fragment = node.ownerDocument.createDocumentFragment();\n  while (node.firstChild) {\n    fragment.appendChild(node.firstChild);\n  }\n  node.parentNode.replaceChild(fragment, node);\n  node = fragment = null;\n};\n;/**\n * Unwraps an unordered/ordered list\n *\n * @param {Element} element The list element which should be unwrapped\n *\n * @example\n *    <!-- Assume the following dom: -->\n *    <ul id=\"list\">\n *      <li>eminem</li>\n *      <li>dr. dre</li>\n *      <li>50 Cent</li>\n *    </ul>\n *\n *    <script>\n *      wysihtml5.dom.resolveList(document.getElementById(\"list\"));\n *    </script>\n *\n *    <!-- Will result in: -->\n *    eminem<br>\n *    dr. dre<br>\n *    50 Cent<br>\n */\n(function(dom) {\n  function _isBlockElement(node) {\n    return dom.getStyle(\"display\").from(node) === \"block\";\n  }\n\n  function _isLineBreak(node) {\n    return node.nodeName === \"BR\";\n  }\n\n  function _appendLineBreak(element) {\n    var lineBreak = element.ownerDocument.createElement(\"br\");\n    element.appendChild(lineBreak);\n  }\n\n  function resolveList(list, useLineBreaks) {\n    if (!list.nodeName.match(/^(MENU|UL|OL)$/)) {\n      return;\n    }\n\n    var doc             = list.ownerDocument,\n        fragment        = doc.createDocumentFragment(),\n        previousSibling = wysihtml5.dom.domNode(list).prev({ignoreBlankTexts: true}),\n        firstChild,\n        lastChild,\n        isLastChild,\n        shouldAppendLineBreak,\n        paragraph,\n        listItem;\n\n    if (useLineBreaks) {\n      // Insert line break if list is after a non-block element\n      if (previousSibling && !_isBlockElement(previousSibling) && !_isLineBreak(previousSibling)) {\n        _appendLineBreak(fragment);\n      }\n\n      while (listItem = (list.firstElementChild || list.firstChild)) {\n        lastChild = listItem.lastChild;\n        while (firstChild = listItem.firstChild) {\n          isLastChild           = firstChild === lastChild;\n          // This needs to be done before appending it to the fragment, as it otherwise will lose style information\n          shouldAppendLineBreak = isLastChild && !_isBlockElement(firstChild) && !_isLineBreak(firstChild);\n          fragment.appendChild(firstChild);\n          if (shouldAppendLineBreak) {\n            _appendLineBreak(fragment);\n          }\n        }\n\n        listItem.parentNode.removeChild(listItem);\n      }\n    } else {\n      while (listItem = (list.firstElementChild || list.firstChild)) {\n        if (listItem.querySelector && listItem.querySelector(\"div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6\")) {\n          while (firstChild = listItem.firstChild) {\n            fragment.appendChild(firstChild);\n          }\n        } else {\n          paragraph = doc.createElement(\"p\");\n          while (firstChild = listItem.firstChild) {\n            paragraph.appendChild(firstChild);\n          }\n          fragment.appendChild(paragraph);\n        }\n        listItem.parentNode.removeChild(listItem);\n      }\n    }\n\n    list.parentNode.replaceChild(fragment, list);\n  }\n\n  dom.resolveList = resolveList;\n})(wysihtml5.dom);\n;/**\n * Sandbox for executing javascript, parsing css styles and doing dom operations in a secure way\n *\n * Browser Compatibility:\n *  - Secure in MSIE 6+, but only when the user hasn't made changes to his security level \"restricted\"\n *  - Partially secure in other browsers (Firefox, Opera, Safari, Chrome, ...)\n *\n * Please note that this class can't benefit from the HTML5 sandbox attribute for the following reasons:\n *    - sandboxing doesn't work correctly with inlined content (src=\"javascript:'<html>...</html>'\")\n *    - sandboxing of physical documents causes that the dom isn't accessible anymore from the outside (iframe.contentWindow, ...)\n *    - setting the \"allow-same-origin\" flag would fix that, but then still javascript and dom events refuse to fire\n *    - therefore the \"allow-scripts\" flag is needed, which then would deactivate any security, as the js executed inside the iframe\n *      can do anything as if the sandbox attribute wasn't set\n *\n * @param {Function} [readyCallback] Method that gets invoked when the sandbox is ready\n * @param {Object} [config] Optional parameters\n *\n * @example\n *    new wysihtml5.dom.Sandbox(function(sandbox) {\n *      sandbox.getWindow().document.body.innerHTML = '<img src=foo.gif onerror=\"alert(document.cookie)\">';\n *    });\n */\n(function(wysihtml5) {\n  var /**\n       * Default configuration\n       */\n      doc                 = document,\n      /**\n       * Properties to unset/protect on the window object\n       */\n      windowProperties    = [\n        \"parent\", \"top\", \"opener\", \"frameElement\", \"frames\",\n        \"localStorage\", \"globalStorage\", \"sessionStorage\", \"indexedDB\"\n      ],\n      /**\n       * Properties on the window object which are set to an empty function\n       */\n      windowProperties2   = [\n        \"open\", \"close\", \"openDialog\", \"showModalDialog\",\n        \"alert\", \"confirm\", \"prompt\",\n        \"openDatabase\", \"postMessage\",\n        \"XMLHttpRequest\", \"XDomainRequest\"\n      ],\n      /**\n       * Properties to unset/protect on the document object\n       */\n      documentProperties  = [\n        \"referrer\",\n        \"write\", \"open\", \"close\"\n      ];\n\n  wysihtml5.dom.Sandbox = Base.extend(\n    /** @scope wysihtml5.dom.Sandbox.prototype */ {\n\n    constructor: function(readyCallback, config) {\n      this.callback = readyCallback || wysihtml5.EMPTY_FUNCTION;\n      this.config   = wysihtml5.lang.object({}).merge(config).get();\n      this.editableArea   = this._createIframe();\n    },\n\n    insertInto: function(element) {\n      if (typeof(element) === \"string\") {\n        element = doc.getElementById(element);\n      }\n\n      element.appendChild(this.editableArea);\n    },\n\n    getIframe: function() {\n      return this.editableArea;\n    },\n\n    getWindow: function() {\n      this._readyError();\n    },\n\n    getDocument: function() {\n      this._readyError();\n    },\n\n    destroy: function() {\n      var iframe = this.getIframe();\n      iframe.parentNode.removeChild(iframe);\n    },\n\n    _readyError: function() {\n      throw new Error(\"wysihtml5.Sandbox: Sandbox iframe isn't loaded yet\");\n    },\n\n    /**\n     * Creates the sandbox iframe\n     *\n     * Some important notes:\n     *  - We can't use HTML5 sandbox for now:\n     *    setting it causes that the iframe's dom can't be accessed from the outside\n     *    Therefore we need to set the \"allow-same-origin\" flag which enables accessing the iframe's dom\n     *    But then there's another problem, DOM events (focus, blur, change, keypress, ...) aren't fired.\n     *    In order to make this happen we need to set the \"allow-scripts\" flag.\n     *    A combination of allow-scripts and allow-same-origin is almost the same as setting no sandbox attribute at all.\n     *  - Chrome & Safari, doesn't seem to support sandboxing correctly when the iframe's html is inlined (no physical document)\n     *  - IE needs to have the security=\"restricted\" attribute set before the iframe is\n     *    inserted into the dom tree\n     *  - Believe it or not but in IE \"security\" in document.createElement(\"iframe\") is false, even\n     *    though it supports it\n     *  - When an iframe has security=\"restricted\", in IE eval() & execScript() don't work anymore\n     *  - IE doesn't fire the onload event when the content is inlined in the src attribute, therefore we rely\n     *    on the onreadystatechange event\n     */\n    _createIframe: function() {\n      var that   = this,\n          iframe = doc.createElement(\"iframe\");\n      iframe.className = \"wysihtml5-sandbox\";\n      wysihtml5.dom.setAttributes({\n        \"security\":           \"restricted\",\n        \"allowtransparency\":  \"true\",\n        \"frameborder\":        0,\n        \"width\":              0,\n        \"height\":             0,\n        \"marginwidth\":        0,\n        \"marginheight\":       0\n      }).on(iframe);\n\n      // Setting the src like this prevents ssl warnings in IE6\n      if (wysihtml5.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()) {\n        iframe.src = \"javascript:'<html></html>'\";\n      }\n\n      iframe.onload = function() {\n        iframe.onreadystatechange = iframe.onload = null;\n        that._onLoadIframe(iframe);\n      };\n\n      iframe.onreadystatechange = function() {\n        if (/loaded|complete/.test(iframe.readyState)) {\n          iframe.onreadystatechange = iframe.onload = null;\n          that._onLoadIframe(iframe);\n        }\n      };\n\n      return iframe;\n    },\n\n    /**\n     * Callback for when the iframe has finished loading\n     */\n    _onLoadIframe: function(iframe) {\n      // don't resume when the iframe got unloaded (eg. by removing it from the dom)\n      if (!wysihtml5.dom.contains(doc.documentElement, iframe)) {\n        return;\n      }\n\n      var that           = this,\n          iframeWindow   = iframe.contentWindow,\n          iframeDocument = iframe.contentWindow.document,\n          charset        = doc.characterSet || doc.charset || \"utf-8\",\n          sandboxHtml    = this._getHtml({\n            charset:      charset,\n            stylesheets:  this.config.stylesheets\n          });\n\n      // Create the basic dom tree including proper DOCTYPE and charset\n      iframeDocument.open(\"text/html\", \"replace\");\n      iframeDocument.write(sandboxHtml);\n      iframeDocument.close();\n\n      this.getWindow = function() { return iframe.contentWindow; };\n      this.getDocument = function() { return iframe.contentWindow.document; };\n\n      // Catch js errors and pass them to the parent's onerror event\n      // addEventListener(\"error\") doesn't work properly in some browsers\n      // TODO: apparently this doesn't work in IE9!\n      iframeWindow.onerror = function(errorMessage, fileName, lineNumber) {\n        throw new Error(\"wysihtml5.Sandbox: \" + errorMessage, fileName, lineNumber);\n      };\n\n      if (!wysihtml5.browser.supportsSandboxedIframes()) {\n        // Unset a bunch of sensitive variables\n        // Please note: This isn't hack safe!\n        // It more or less just takes care of basic attacks and prevents accidental theft of sensitive information\n        // IE is secure though, which is the most important thing, since IE is the only browser, who\n        // takes over scripts & styles into contentEditable elements when copied from external websites\n        // or applications (Microsoft Word, ...)\n        var i, length;\n        for (i=0, length=windowProperties.length; i<length; i++) {\n          this._unset(iframeWindow, windowProperties[i]);\n        }\n        for (i=0, length=windowProperties2.length; i<length; i++) {\n          this._unset(iframeWindow, windowProperties2[i], wysihtml5.EMPTY_FUNCTION);\n        }\n        for (i=0, length=documentProperties.length; i<length; i++) {\n          this._unset(iframeDocument, documentProperties[i]);\n        }\n        // This doesn't work in Safari 5\n        // See http://stackoverflow.com/questions/992461/is-it-possible-to-override-document-cookie-in-webkit\n        this._unset(iframeDocument, \"cookie\", \"\", true);\n      }\n\n      this.loaded = true;\n\n      // Trigger the callback\n      setTimeout(function() { that.callback(that); }, 0);\n    },\n\n    _getHtml: function(templateVars) {\n      var stylesheets = templateVars.stylesheets,\n          html        = \"\",\n          i           = 0,\n          length;\n      stylesheets = typeof(stylesheets) === \"string\" ? [stylesheets] : stylesheets;\n      if (stylesheets) {\n        length = stylesheets.length;\n        for (; i<length; i++) {\n          html += '<link rel=\"stylesheet\" href=\"' + stylesheets[i] + '\">';\n        }\n      }\n      templateVars.stylesheets = html;\n\n      return wysihtml5.lang.string(\n        '<!DOCTYPE html><html><head>'\n        + '<meta charset=\"#{charset}\">#{stylesheets}</head>'\n        + '<body></body></html>'\n      ).interpolate(templateVars);\n    },\n\n    /**\n     * Method to unset/override existing variables\n     * @example\n     *    // Make cookie unreadable and unwritable\n     *    this._unset(document, \"cookie\", \"\", true);\n     */\n    _unset: function(object, property, value, setter) {\n      try { object[property] = value; } catch(e) {}\n\n      try { object.__defineGetter__(property, function() { return value; }); } catch(e) {}\n      if (setter) {\n        try { object.__defineSetter__(property, function() {}); } catch(e) {}\n      }\n\n      if (!wysihtml5.browser.crashesWhenDefineProperty(property)) {\n        try {\n          var config = {\n            get: function() { return value; }\n          };\n          if (setter) {\n            config.set = function() {};\n          }\n          Object.defineProperty(object, property, config);\n        } catch(e) {}\n      }\n    }\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var doc = document;\n  wysihtml5.dom.ContentEditableArea = Base.extend({\n      getContentEditable: function() {\n        return this.element;\n      },\n\n      getWindow: function() {\n        return this.element.ownerDocument.defaultView;\n      },\n\n      getDocument: function() {\n        return this.element.ownerDocument;\n      },\n\n      constructor: function(readyCallback, config, contentEditable) {\n        this.callback = readyCallback || wysihtml5.EMPTY_FUNCTION;\n        this.config   = wysihtml5.lang.object({}).merge(config).get();\n        if (contentEditable) {\n            this.element = this._bindElement(contentEditable);\n        } else {\n            this.element = this._createElement();\n        }\n      },\n\n      // creates a new contenteditable and initiates it\n      _createElement: function() {\n        var element = doc.createElement(\"div\");\n        element.className = \"wysihtml5-sandbox\";\n        this._loadElement(element);\n        return element;\n      },\n\n      // initiates an allready existent contenteditable\n      _bindElement: function(contentEditable) {\n        contentEditable.className = (contentEditable.className && contentEditable.className != '') ? contentEditable.className + \" wysihtml5-sandbox\" : \"wysihtml5-sandbox\";\n        this._loadElement(contentEditable, true);\n        return contentEditable;\n      },\n\n      _loadElement: function(element, contentExists) {\n          var that = this;\n        if (!contentExists) {\n            var sandboxHtml = this._getHtml();\n            element.innerHTML = sandboxHtml;\n        }\n\n        this.getWindow = function() { return element.ownerDocument.defaultView; };\n        this.getDocument = function() { return element.ownerDocument; };\n\n        // Catch js errors and pass them to the parent's onerror event\n        // addEventListener(\"error\") doesn't work properly in some browsers\n        // TODO: apparently this doesn't work in IE9!\n        // TODO: figure out and bind the errors logic for contenteditble mode\n        /*iframeWindow.onerror = function(errorMessage, fileName, lineNumber) {\n          throw new Error(\"wysihtml5.Sandbox: \" + errorMessage, fileName, lineNumber);\n        }\n        */\n        this.loaded = true;\n        // Trigger the callback\n        setTimeout(function() { that.callback(that); }, 0);\n      },\n\n      _getHtml: function(templateVars) {\n        return '';\n      }\n\n  });\n})(wysihtml5);\n;(function() {\n  var mapping = {\n    \"className\": \"class\"\n  };\n  wysihtml5.dom.setAttributes = function(attributes) {\n    return {\n      on: function(element) {\n        for (var i in attributes) {\n          element.setAttribute(mapping[i] || i, attributes[i]);\n        }\n      }\n    };\n  };\n})();\n;wysihtml5.dom.setStyles = function(styles) {\n  return {\n    on: function(element) {\n      var style = element.style;\n      if (typeof(styles) === \"string\") {\n        style.cssText += \";\" + styles;\n        return;\n      }\n      for (var i in styles) {\n        if (i === \"float\") {\n          style.cssFloat = styles[i];\n          style.styleFloat = styles[i];\n        } else {\n          style[i] = styles[i];\n        }\n      }\n    }\n  };\n};\n;/**\n * Simulate HTML5 placeholder attribute\n *\n * Needed since\n *    - div[contentEditable] elements don't support it\n *    - older browsers (such as IE8 and Firefox 3.6) don't support it at all\n *\n * @param {Object} parent Instance of main wysihtml5.Editor class\n * @param {Element} view Instance of wysihtml5.views.* class\n * @param {String} placeholderText\n *\n * @example\n *    wysihtml.dom.simulatePlaceholder(this, composer, \"Foobar\");\n */\n(function(dom) {\n  dom.simulatePlaceholder = function(editor, view, placeholderText) {\n    var CLASS_NAME = \"placeholder\",\n        unset = function() {\n          var composerIsVisible   = view.element.offsetWidth > 0 && view.element.offsetHeight > 0;\n          if (view.hasPlaceholderSet()) {\n            view.clear();\n            view.element.focus();\n            if (composerIsVisible ) {\n              setTimeout(function() {\n                var sel = view.selection.getSelection();\n                if (!sel.focusNode || !sel.anchorNode) {\n                  view.selection.selectNode(view.element.firstChild || view.element);\n                }\n              }, 0);\n            }\n          }\n          view.placeholderSet = false;\n          dom.removeClass(view.element, CLASS_NAME);\n        },\n        set = function() {\n          if (view.isEmpty()) {\n            view.placeholderSet = true;\n            view.setValue(placeholderText);\n            dom.addClass(view.element, CLASS_NAME);\n          }\n        };\n\n    editor\n      .on(\"set_placeholder\", set)\n      .on(\"unset_placeholder\", unset)\n      .on(\"focus:composer\", unset)\n      .on(\"paste:composer\", unset)\n      .on(\"blur:composer\", set);\n\n    set();\n  };\n})(wysihtml5.dom);\n;(function(dom) {\n  var documentElement = document.documentElement;\n  if (\"textContent\" in documentElement) {\n    dom.setTextContent = function(element, text) {\n      element.textContent = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.textContent;\n    };\n  } else if (\"innerText\" in documentElement) {\n    dom.setTextContent = function(element, text) {\n      element.innerText = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.innerText;\n    };\n  } else {\n    dom.setTextContent = function(element, text) {\n      element.nodeValue = text;\n    };\n\n    dom.getTextContent = function(element) {\n      return element.nodeValue;\n    };\n  }\n})(wysihtml5.dom);\n\n;/**\n * Get a set of attribute from one element\n *\n * IE gives wrong results for hasAttribute/getAttribute, for example:\n *    var td = document.createElement(\"td\");\n *    td.getAttribute(\"rowspan\"); // => \"1\" in IE\n *\n * Therefore we have to check the element's outerHTML for the attribute\n*/\n\nwysihtml5.dom.getAttribute = function(node, attributeName) {\n  var HAS_GET_ATTRIBUTE_BUG = !wysihtml5.browser.supportsGetAttributeCorrectly();\n  attributeName = attributeName.toLowerCase();\n  var nodeName = node.nodeName;\n  if (nodeName == \"IMG\" && attributeName == \"src\" && wysihtml5.dom.isLoadedImage(node) === true) {\n    // Get 'src' attribute value via object property since this will always contain the\n    // full absolute url (http://...)\n    // this fixes a very annoying bug in firefox (ver 3.6 & 4) and IE 8 where images copied from the same host\n    // will have relative paths, which the sanitizer strips out (see attributeCheckMethods.url)\n    return node.src;\n  } else if (HAS_GET_ATTRIBUTE_BUG && \"outerHTML\" in node) {\n    // Don't trust getAttribute/hasAttribute in IE 6-8, instead check the element's outerHTML\n    var outerHTML      = node.outerHTML.toLowerCase(),\n        // TODO: This might not work for attributes without value: <input disabled>\n        hasAttribute   = outerHTML.indexOf(\" \" + attributeName +  \"=\") != -1;\n\n    return hasAttribute ? node.getAttribute(attributeName) : null;\n  } else{\n    return node.getAttribute(attributeName);\n  }\n};\n;/**\n * Get all attributes of an element\n *\n * IE gives wrong results for hasAttribute/getAttribute, for example:\n *    var td = document.createElement(\"td\");\n *    td.getAttribute(\"rowspan\"); // => \"1\" in IE\n *\n * Therefore we have to check the element's outerHTML for the attribute\n*/\n\nwysihtml5.dom.getAttributes = function(node) {\n  var HAS_GET_ATTRIBUTE_BUG = !wysihtml5.browser.supportsGetAttributeCorrectly(),\n      nodeName = node.nodeName,\n      attributes = [],\n      attr;\n\n  for (attr in node.attributes) {\n    if ((node.attributes.hasOwnProperty && node.attributes.hasOwnProperty(attr)) || (!node.attributes.hasOwnProperty && Object.prototype.hasOwnProperty.call(node.attributes, attr)))  {\n      if (node.attributes[attr].specified) {\n        if (nodeName == \"IMG\" && node.attributes[attr].name.toLowerCase() == \"src\" && wysihtml5.dom.isLoadedImage(node) === true) {\n          attributes['src'] = node.src;\n        } else if (wysihtml5.lang.array(['rowspan', 'colspan']).contains(node.attributes[attr].name.toLowerCase()) && HAS_GET_ATTRIBUTE_BUG) {\n          if (node.attributes[attr].value !== 1) {\n            attributes[node.attributes[attr].name] = node.attributes[attr].value;\n          }\n        } else {\n          attributes[node.attributes[attr].name] = node.attributes[attr].value;\n        }\n      }\n    }\n  }\n  return attributes;\n};;/**\n   * Check whether the given node is a proper loaded image\n   * FIXME: Returns undefined when unknown (Chrome, Safari)\n*/\n\nwysihtml5.dom.isLoadedImage = function (node) {\n  try {\n    return node.complete && !node.mozMatchesSelector(\":-moz-broken\");\n  } catch(e) {\n    if (node.complete && node.readyState === \"complete\") {\n      return true;\n    }\n  }\n};\n;(function(wysihtml5) {\n\n    var api = wysihtml5.dom;\n\n    var MapCell = function(cell) {\n      this.el = cell;\n      this.isColspan= false;\n      this.isRowspan= false;\n      this.firstCol= true;\n      this.lastCol= true;\n      this.firstRow= true;\n      this.lastRow= true;\n      this.isReal= true;\n      this.spanCollection= [];\n      this.modified = false;\n    };\n\n    var TableModifyerByCell = function (cell, table) {\n        if (cell) {\n            this.cell = cell;\n            this.table = api.getParentElement(cell, { nodeName: [\"TABLE\"] });\n        } else if (table) {\n            this.table = table;\n            this.cell = this.table.querySelectorAll('th, td')[0];\n        }\n    };\n\n    function queryInList(list, query) {\n        var ret = [],\n            q;\n        for (var e = 0, len = list.length; e < len; e++) {\n            q = list[e].querySelectorAll(query);\n            if (q) {\n                for(var i = q.length; i--; ret.unshift(q[i]));\n            }\n        }\n        return ret;\n    }\n\n    function removeElement(el) {\n        el.parentNode.removeChild(el);\n    }\n\n    function insertAfter(referenceNode, newNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    }\n\n    function nextNode(node, tag) {\n        var element = node.nextSibling;\n        while (element.nodeType !=1) {\n            element = element.nextSibling;\n            if (!tag || tag == element.tagName.toLowerCase()) {\n                return element;\n            }\n        }\n        return null;\n    }\n\n    TableModifyerByCell.prototype = {\n\n        addSpannedCellToMap: function(cell, map, r, c, cspan, rspan) {\n            var spanCollect = [],\n                rmax = r + ((rspan) ? parseInt(rspan, 10) - 1 : 0),\n                cmax = c + ((cspan) ? parseInt(cspan, 10) - 1 : 0);\n\n            for (var rr = r; rr <= rmax; rr++) {\n                if (typeof map[rr] == \"undefined\") { map[rr] = []; }\n                for (var cc = c; cc <= cmax; cc++) {\n                    map[rr][cc] = new MapCell(cell);\n                    map[rr][cc].isColspan = (cspan && parseInt(cspan, 10) > 1);\n                    map[rr][cc].isRowspan = (rspan && parseInt(rspan, 10) > 1);\n                    map[rr][cc].firstCol = cc == c;\n                    map[rr][cc].lastCol = cc == cmax;\n                    map[rr][cc].firstRow = rr == r;\n                    map[rr][cc].lastRow = rr == rmax;\n                    map[rr][cc].isReal = cc == c && rr == r;\n                    map[rr][cc].spanCollection = spanCollect;\n\n                    spanCollect.push(map[rr][cc]);\n                }\n            }\n        },\n\n        setCellAsModified: function(cell) {\n            cell.modified = true;\n            if (cell.spanCollection.length > 0) {\n              for (var s = 0, smax = cell.spanCollection.length; s < smax; s++) {\n                cell.spanCollection[s].modified = true;\n              }\n            }\n        },\n\n        setTableMap: function() {\n            var map = [];\n            var tableRows = this.getTableRows(),\n                ridx, row, cells, cidx, cell,\n                c,\n                cspan, rspan;\n\n            for (ridx = 0; ridx < tableRows.length; ridx++) {\n                row = tableRows[ridx];\n                cells = this.getRowCells(row);\n                c = 0;\n                if (typeof map[ridx] == \"undefined\") { map[ridx] = []; }\n                for (cidx = 0; cidx < cells.length; cidx++) {\n                    cell = cells[cidx];\n\n                    // If cell allready set means it is set by col or rowspan,\n                    // so increase cols index until free col is found\n                    while (typeof map[ridx][c] != \"undefined\") { c++; }\n\n                    cspan = api.getAttribute(cell, 'colspan');\n                    rspan = api.getAttribute(cell, 'rowspan');\n\n                    if (cspan || rspan) {\n                        this.addSpannedCellToMap(cell, map, ridx, c, cspan, rspan);\n                        c = c + ((cspan) ? parseInt(cspan, 10) : 1);\n                    } else {\n                        map[ridx][c] = new MapCell(cell);\n                        c++;\n                    }\n                }\n            }\n            this.map = map;\n            return map;\n        },\n\n        getRowCells: function(row) {\n            var inlineTables = this.table.querySelectorAll('table'),\n                inlineCells = (inlineTables) ? queryInList(inlineTables, 'th, td') : [],\n                allCells = row.querySelectorAll('th, td'),\n                tableCells = (inlineCells.length > 0) ? wysihtml5.lang.array(allCells).without(inlineCells) : allCells;\n\n            return tableCells;\n        },\n\n        getTableRows: function() {\n          var inlineTables = this.table.querySelectorAll('table'),\n              inlineRows = (inlineTables) ? queryInList(inlineTables, 'tr') : [],\n              allRows = this.table.querySelectorAll('tr'),\n              tableRows = (inlineRows.length > 0) ? wysihtml5.lang.array(allRows).without(inlineRows) : allRows;\n\n          return tableRows;\n        },\n\n        getMapIndex: function(cell) {\n          var r_length = this.map.length,\n              c_length = (this.map && this.map[0]) ? this.map[0].length : 0;\n\n          for (var r_idx = 0;r_idx < r_length; r_idx++) {\n              for (var c_idx = 0;c_idx < c_length; c_idx++) {\n                  if (this.map[r_idx][c_idx].el === cell) {\n                      return {'row': r_idx, 'col': c_idx};\n                  }\n              }\n          }\n          return false;\n        },\n\n        getElementAtIndex: function(idx) {\n            this.setTableMap();\n            if (this.map[idx.row] && this.map[idx.row][idx.col] && this.map[idx.row][idx.col].el) {\n                return this.map[idx.row][idx.col].el;\n            }\n            return null;\n        },\n\n        getMapElsTo: function(to_cell) {\n            var els = [];\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(to_cell);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            if (this.idx_start != null && this.idx_end != null) {\n                for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                    for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n                        els.push(this.map[row][col].el);\n                    }\n                }\n            }\n            return els;\n        },\n\n        orderSelectionEnds: function(secondcell) {\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(secondcell);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            return {\n                \"start\": this.map[this.idx_start.row][this.idx_start.col].el,\n                \"end\": this.map[this.idx_end.row][this.idx_end.col].el\n            };\n        },\n\n        createCells: function(tag, nr, attrs) {\n            var doc = this.table.ownerDocument,\n                frag = doc.createDocumentFragment(),\n                cell;\n            for (var i = 0; i < nr; i++) {\n                cell = doc.createElement(tag);\n\n                if (attrs) {\n                    for (var attr in attrs) {\n                        if (attrs.hasOwnProperty(attr)) {\n                            cell.setAttribute(attr, attrs[attr]);\n                        }\n                    }\n                }\n\n                // add non breaking space\n                cell.appendChild(document.createTextNode(\"\\u00a0\"));\n\n                frag.appendChild(cell);\n            }\n            return frag;\n        },\n\n        // Returns next real cell (not part of spanned cell unless first) on row if selected index is not real. I no real cells -1 will be returned\n        correctColIndexForUnreals: function(col, row) {\n            var r = this.map[row],\n                corrIdx = -1;\n            for (var i = 0, max = col; i < col; i++) {\n                if (r[i].isReal){\n                    corrIdx++;\n                }\n            }\n            return corrIdx;\n        },\n\n        getLastNewCellOnRow: function(row, rowLimit) {\n            var cells = this.getRowCells(row),\n                cell, idx;\n\n            for (var cidx = 0, cmax = cells.length; cidx < cmax; cidx++) {\n                cell = cells[cidx];\n                idx = this.getMapIndex(cell);\n                if (idx === false || (typeof rowLimit != \"undefined\" && idx.row != rowLimit)) {\n                    return cell;\n                }\n            }\n            return null;\n        },\n\n        removeEmptyTable: function() {\n            var cells = this.table.querySelectorAll('td, th');\n            if (!cells || cells.length == 0) {\n                removeElement(this.table);\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        // Splits merged cell on row to unique cells\n        splitRowToCells: function(cell) {\n            if (cell.isColspan) {\n                var colspan = parseInt(api.getAttribute(cell.el, 'colspan') || 1, 10),\n                    cType = cell.el.tagName.toLowerCase();\n                if (colspan > 1) {\n                    var newCells = this.createCells(cType, colspan -1);\n                    insertAfter(cell.el, newCells);\n                }\n                cell.el.removeAttribute('colspan');\n            }\n        },\n\n        getRealRowEl: function(force, idx) {\n            var r = null,\n                c = null;\n\n            idx = idx || this.idx;\n\n            for (var cidx = 0, cmax = this.map[idx.row].length; cidx < cmax; cidx++) {\n                c = this.map[idx.row][cidx];\n                if (c.isReal) {\n                    r = api.getParentElement(c.el, { nodeName: [\"TR\"] });\n                    if (r) {\n                        return r;\n                    }\n                }\n            }\n\n            if (r === null && force) {\n                r = api.getParentElement(this.map[idx.row][idx.col].el, { nodeName: [\"TR\"] }) || null;\n            }\n\n            return r;\n        },\n\n        injectRowAt: function(row, col, colspan, cType, c) {\n            var r = this.getRealRowEl(false, {'row': row, 'col': col}),\n                new_cells = this.createCells(cType, colspan);\n\n            if (r) {\n                var n_cidx = this.correctColIndexForUnreals(col, row);\n                if (n_cidx >= 0) {\n                    insertAfter(this.getRowCells(r)[n_cidx], new_cells);\n                } else {\n                    r.insertBefore(new_cells, r.firstChild);\n                }\n            } else {\n                var rr = this.table.ownerDocument.createElement('tr');\n                rr.appendChild(new_cells);\n                insertAfter(api.getParentElement(c.el, { nodeName: [\"TR\"] }), rr);\n            }\n        },\n\n        canMerge: function(to) {\n            this.to = to;\n            this.setTableMap();\n            this.idx_start = this.getMapIndex(this.cell);\n            this.idx_end = this.getMapIndex(this.to);\n\n            // switch indexes if start is bigger than end\n            if (this.idx_start.row > this.idx_end.row || (this.idx_start.row == this.idx_end.row && this.idx_start.col > this.idx_end.col)) {\n                var temp_idx = this.idx_start;\n                this.idx_start = this.idx_end;\n                this.idx_end = temp_idx;\n            }\n            if (this.idx_start.col > this.idx_end.col) {\n                var temp_cidx = this.idx_start.col;\n                this.idx_start.col = this.idx_end.col;\n                this.idx_end.col = temp_cidx;\n            }\n\n            for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n                    if (this.map[row][col].isColspan || this.map[row][col].isRowspan) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        },\n\n        decreaseCellSpan: function(cell, span) {\n            var nr = parseInt(api.getAttribute(cell.el, span), 10) - 1;\n            if (nr >= 1) {\n                cell.el.setAttribute(span, nr);\n            } else {\n                cell.el.removeAttribute(span);\n                if (span == 'colspan') {\n                    cell.isColspan = false;\n                }\n                if (span == 'rowspan') {\n                    cell.isRowspan = false;\n                }\n                cell.firstCol = true;\n                cell.lastCol = true;\n                cell.firstRow = true;\n                cell.lastRow = true;\n                cell.isReal = true;\n            }\n        },\n\n        removeSurplusLines: function() {\n            var row, cell, ridx, rmax, cidx, cmax, allRowspan;\n\n            this.setTableMap();\n            if (this.map) {\n                ridx = 0;\n                rmax = this.map.length;\n                for (;ridx < rmax; ridx++) {\n                    row = this.map[ridx];\n                    allRowspan = true;\n                    cidx = 0;\n                    cmax = row.length;\n                    for (; cidx < cmax; cidx++) {\n                        cell = row[cidx];\n                        if (!(api.getAttribute(cell.el, \"rowspan\") && parseInt(api.getAttribute(cell.el, \"rowspan\"), 10) > 1 && cell.firstRow !== true)) {\n                            allRowspan = false;\n                            break;\n                        }\n                    }\n                    if (allRowspan) {\n                        cidx = 0;\n                        for (; cidx < cmax; cidx++) {\n                            this.decreaseCellSpan(row[cidx], 'rowspan');\n                        }\n                    }\n                }\n\n                // remove rows without cells\n                var tableRows = this.getTableRows();\n                ridx = 0;\n                rmax = tableRows.length;\n                for (;ridx < rmax; ridx++) {\n                    row = tableRows[ridx];\n                    if (row.childNodes.length == 0 && (/^\\s*$/.test(row.textContent || row.innerText))) {\n                        removeElement(row);\n                    }\n                }\n            }\n        },\n\n        fillMissingCells: function() {\n            var r_max = 0,\n                c_max = 0,\n                prevcell = null;\n\n            this.setTableMap();\n            if (this.map) {\n\n                // find maximal dimensions of broken table\n                r_max = this.map.length;\n                for (var ridx = 0; ridx < r_max; ridx++) {\n                    if (this.map[ridx].length > c_max) { c_max = this.map[ridx].length; }\n                }\n\n                for (var row = 0; row < r_max; row++) {\n                    for (var col = 0; col < c_max; col++) {\n                        if (this.map[row] && !this.map[row][col]) {\n                            if (col > 0) {\n                                this.map[row][col] = new MapCell(this.createCells('td', 1));\n                                prevcell = this.map[row][col-1];\n                                if (prevcell && prevcell.el && prevcell.el.parent) { // if parent does not exist element is removed from dom\n                                    insertAfter(this.map[row][col-1].el, this.map[row][col].el);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n\n        rectify: function() {\n            if (!this.removeEmptyTable()) {\n                this.removeSurplusLines();\n                this.fillMissingCells();\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        unmerge: function() {\n            if (this.rectify()) {\n                this.setTableMap();\n                this.idx = this.getMapIndex(this.cell);\n\n                if (this.idx) {\n                    var thisCell = this.map[this.idx.row][this.idx.col],\n                        colspan = (api.getAttribute(thisCell.el, \"colspan\")) ? parseInt(api.getAttribute(thisCell.el, \"colspan\"), 10) : 1,\n                        cType = thisCell.el.tagName.toLowerCase();\n\n                    if (thisCell.isRowspan) {\n                        var rowspan = parseInt(api.getAttribute(thisCell.el, \"rowspan\"), 10);\n                        if (rowspan > 1) {\n                            for (var nr = 1, maxr = rowspan - 1; nr <= maxr; nr++){\n                                this.injectRowAt(this.idx.row + nr, this.idx.col, colspan, cType, thisCell);\n                            }\n                        }\n                        thisCell.el.removeAttribute('rowspan');\n                    }\n                    this.splitRowToCells(thisCell);\n                }\n            }\n        },\n\n        // merges cells from start cell (defined in creating obj) to \"to\" cell\n        merge: function(to) {\n            if (this.rectify()) {\n                if (this.canMerge(to)) {\n                    var rowspan = this.idx_end.row - this.idx_start.row + 1,\n                        colspan = this.idx_end.col - this.idx_start.col + 1;\n\n                    for (var row = this.idx_start.row, maxr = this.idx_end.row; row <= maxr; row++) {\n                        for (var col = this.idx_start.col, maxc = this.idx_end.col; col <= maxc; col++) {\n\n                            if (row == this.idx_start.row && col == this.idx_start.col) {\n                                if (rowspan > 1) {\n                                    this.map[row][col].el.setAttribute('rowspan', rowspan);\n                                }\n                                if (colspan > 1) {\n                                    this.map[row][col].el.setAttribute('colspan', colspan);\n                                }\n                            } else {\n                                // transfer content\n                                if (!(/^\\s*<br\\/?>\\s*$/.test(this.map[row][col].el.innerHTML.toLowerCase()))) {\n                                    this.map[this.idx_start.row][this.idx_start.col].el.innerHTML += ' ' + this.map[row][col].el.innerHTML;\n                                }\n                                removeElement(this.map[row][col].el);\n                            }\n                        }\n                    }\n                    this.rectify();\n                } else {\n                    if (window.console) {\n                        console.log('Do not know how to merge allready merged cells.');\n                    }\n                }\n            }\n        },\n\n        // Decreases rowspan of a cell if it is done on first cell of rowspan row (real cell)\n        // Cell is moved to next row (if it is real)\n        collapseCellToNextRow: function(cell) {\n            var cellIdx = this.getMapIndex(cell.el),\n                newRowIdx = cellIdx.row + 1,\n                newIdx = {'row': newRowIdx, 'col': cellIdx.col};\n\n            if (newRowIdx < this.map.length) {\n\n                var row = this.getRealRowEl(false, newIdx);\n                if (row !== null) {\n                    var n_cidx = this.correctColIndexForUnreals(newIdx.col, newIdx.row);\n                    if (n_cidx >= 0) {\n                        insertAfter(this.getRowCells(row)[n_cidx], cell.el);\n                    } else {\n                        var lastCell = this.getLastNewCellOnRow(row, newRowIdx);\n                        if (lastCell !== null) {\n                            insertAfter(lastCell, cell.el);\n                        } else {\n                            row.insertBefore(cell.el, row.firstChild);\n                        }\n                    }\n                    if (parseInt(api.getAttribute(cell.el, 'rowspan'), 10) > 2) {\n                        cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) - 1);\n                    } else {\n                        cell.el.removeAttribute('rowspan');\n                    }\n                }\n            }\n        },\n\n        // Removes a cell when removing a row\n        // If is rowspan cell then decreases the rowspan\n        // and moves cell to next row if needed (is first cell of rowspan)\n        removeRowCell: function(cell) {\n            if (cell.isReal) {\n               if (cell.isRowspan) {\n                   this.collapseCellToNextRow(cell);\n               } else {\n                   removeElement(cell.el);\n               }\n            } else {\n                if (parseInt(api.getAttribute(cell.el, 'rowspan'), 10) > 2) {\n                    cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) - 1);\n                } else {\n                    cell.el.removeAttribute('rowspan');\n                }\n            }\n        },\n\n        getRowElementsByCell: function() {\n            var cells = [];\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                var modRow = this.map[this.idx.row];\n                for (var cidx = 0, cmax = modRow.length; cidx < cmax; cidx++) {\n                    if (modRow[cidx].isReal) {\n                        cells.push(modRow[cidx].el);\n                    }\n                }\n            }\n            return cells;\n        },\n\n        getColumnElementsByCell: function() {\n            var cells = [];\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++) {\n                    if (this.map[ridx][this.idx.col] && this.map[ridx][this.idx.col].isReal) {\n                        cells.push(this.map[ridx][this.idx.col].el);\n                    }\n                }\n            }\n            return cells;\n        },\n\n        // Removes the row of selected cell\n        removeRow: function() {\n            var oldRow = api.getParentElement(this.cell, { nodeName: [\"TR\"] });\n            if (oldRow) {\n                this.setTableMap();\n                this.idx = this.getMapIndex(this.cell);\n                if (this.idx !== false) {\n                    var modRow = this.map[this.idx.row];\n                    for (var cidx = 0, cmax = modRow.length; cidx < cmax; cidx++) {\n                        if (!modRow[cidx].modified) {\n                            this.setCellAsModified(modRow[cidx]);\n                            this.removeRowCell(modRow[cidx]);\n                        }\n                    }\n                }\n                removeElement(oldRow);\n            }\n        },\n\n        removeColCell: function(cell) {\n            if (cell.isColspan) {\n                if (parseInt(api.getAttribute(cell.el, 'colspan'), 10) > 2) {\n                    cell.el.setAttribute('colspan', parseInt(api.getAttribute(cell.el, 'colspan'), 10) - 1);\n                } else {\n                    cell.el.removeAttribute('colspan');\n                }\n            } else if (cell.isReal) {\n                removeElement(cell.el);\n            }\n        },\n\n        removeColumn: function() {\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++) {\n                    if (!this.map[ridx][this.idx.col].modified) {\n                        this.setCellAsModified(this.map[ridx][this.idx.col]);\n                        this.removeColCell(this.map[ridx][this.idx.col]);\n                    }\n                }\n            }\n        },\n\n        // removes row or column by selected cell element\n        remove: function(what) {\n            if (this.rectify()) {\n                switch (what) {\n                    case 'row':\n                        this.removeRow();\n                    break;\n                    case 'column':\n                        this.removeColumn();\n                    break;\n                }\n                this.rectify();\n            }\n        },\n\n        addRow: function(where) {\n            var doc = this.table.ownerDocument;\n\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (where == \"below\" && api.getAttribute(this.cell, 'rowspan')) {\n                this.idx.row = this.idx.row + parseInt(api.getAttribute(this.cell, 'rowspan'), 10) - 1;\n            }\n\n            if (this.idx !== false) {\n                var modRow = this.map[this.idx.row],\n                    newRow = doc.createElement('tr');\n\n                for (var ridx = 0, rmax = modRow.length; ridx < rmax; ridx++) {\n                    if (!modRow[ridx].modified) {\n                        this.setCellAsModified(modRow[ridx]);\n                        this.addRowCell(modRow[ridx], newRow, where);\n                    }\n                }\n\n                switch (where) {\n                    case 'below':\n                        insertAfter(this.getRealRowEl(true), newRow);\n                    break;\n                    case 'above':\n                        var cr = api.getParentElement(this.map[this.idx.row][this.idx.col].el, { nodeName: [\"TR\"] });\n                        if (cr) {\n                            cr.parentNode.insertBefore(newRow, cr);\n                        }\n                    break;\n                }\n            }\n        },\n\n        addRowCell: function(cell, row, where) {\n            var colSpanAttr = (cell.isColspan) ? {\"colspan\" : api.getAttribute(cell.el, 'colspan')} : null;\n            if (cell.isReal) {\n                if (where != 'above' && cell.isRowspan) {\n                    cell.el.setAttribute('rowspan', parseInt(api.getAttribute(cell.el,'rowspan'), 10) + 1);\n                } else {\n                    row.appendChild(this.createCells('td', 1, colSpanAttr));\n                }\n            } else {\n                if (where != 'above' && cell.isRowspan && cell.lastRow) {\n                    row.appendChild(this.createCells('td', 1, colSpanAttr));\n                } else if (c.isRowspan) {\n                    cell.el.attr('rowspan', parseInt(api.getAttribute(cell.el, 'rowspan'), 10) + 1);\n                }\n            }\n        },\n\n        add: function(where) {\n            if (this.rectify()) {\n                if (where == 'below' || where == 'above') {\n                    this.addRow(where);\n                }\n                if (where == 'before' || where == 'after') {\n                    this.addColumn(where);\n                }\n            }\n        },\n\n        addColCell: function (cell, ridx, where) {\n            var doAdd,\n                cType = cell.el.tagName.toLowerCase();\n\n            // defines add cell vs expand cell conditions\n            // true means add\n            switch (where) {\n                case \"before\":\n                    doAdd = (!cell.isColspan || cell.firstCol);\n                break;\n                case \"after\":\n                    doAdd = (!cell.isColspan || cell.lastCol || (cell.isColspan && c.el == this.cell));\n                break;\n            }\n\n            if (doAdd){\n                // adds a cell before or after current cell element\n                switch (where) {\n                    case \"before\":\n                        cell.el.parentNode.insertBefore(this.createCells(cType, 1), cell.el);\n                    break;\n                    case \"after\":\n                        insertAfter(cell.el, this.createCells(cType, 1));\n                    break;\n                }\n\n                // handles if cell has rowspan\n                if (cell.isRowspan) {\n                    this.handleCellAddWithRowspan(cell, ridx+1, where);\n                }\n\n            } else {\n                // expands cell\n                cell.el.setAttribute('colspan',  parseInt(api.getAttribute(cell.el, 'colspan'), 10) + 1);\n            }\n        },\n\n        addColumn: function(where) {\n            var row, modCell;\n\n            this.setTableMap();\n            this.idx = this.getMapIndex(this.cell);\n            if (where == \"after\" && api.getAttribute(this.cell, 'colspan')) {\n              this.idx.col = this.idx.col + parseInt(api.getAttribute(this.cell, 'colspan'), 10) - 1;\n            }\n\n            if (this.idx !== false) {\n                for (var ridx = 0, rmax = this.map.length; ridx < rmax; ridx++ ) {\n                    row = this.map[ridx];\n                    if (row[this.idx.col]) {\n                        modCell = row[this.idx.col];\n                        if (!modCell.modified) {\n                            this.setCellAsModified(modCell);\n                            this.addColCell(modCell, ridx , where);\n                        }\n                    }\n                }\n            }\n        },\n\n        handleCellAddWithRowspan: function (cell, ridx, where) {\n            var addRowsNr = parseInt(api.getAttribute(this.cell, 'rowspan'), 10) - 1,\n                crow = api.getParentElement(cell.el, { nodeName: [\"TR\"] }),\n                cType = cell.el.tagName.toLowerCase(),\n                cidx, temp_r_cells,\n                doc = this.table.ownerDocument,\n                nrow;\n\n            for (var i = 0; i < addRowsNr; i++) {\n                cidx = this.correctColIndexForUnreals(this.idx.col, (ridx + i));\n                crow = nextNode(crow, 'tr');\n                if (crow) {\n                    if (cidx > 0) {\n                        switch (where) {\n                            case \"before\":\n                                temp_r_cells = this.getRowCells(crow);\n                                if (cidx > 0 && this.map[ridx + i][this.idx.col].el != temp_r_cells[cidx] && cidx == temp_r_cells.length - 1) {\n                                     insertAfter(temp_r_cells[cidx], this.createCells(cType, 1));\n                                } else {\n                                    temp_r_cells[cidx].parentNode.insertBefore(this.createCells(cType, 1), temp_r_cells[cidx]);\n                                }\n\n                            break;\n                            case \"after\":\n                                insertAfter(this.getRowCells(crow)[cidx], this.createCells(cType, 1));\n                            break;\n                        }\n                    } else {\n                        crow.insertBefore(this.createCells(cType, 1), crow.firstChild);\n                    }\n                } else {\n                    nrow = doc.createElement('tr');\n                    nrow.appendChild(this.createCells(cType, 1));\n                    this.table.appendChild(nrow);\n                }\n            }\n        }\n    };\n\n    api.table = {\n        getCellsBetween: function(cell1, cell2) {\n            var c1 = new TableModifyerByCell(cell1);\n            return c1.getMapElsTo(cell2);\n        },\n\n        addCells: function(cell, where) {\n            var c = new TableModifyerByCell(cell);\n            c.add(where);\n        },\n\n        removeCells: function(cell, what) {\n            var c = new TableModifyerByCell(cell);\n            c.remove(what);\n        },\n\n        mergeCellsBetween: function(cell1, cell2) {\n            var c1 = new TableModifyerByCell(cell1);\n            c1.merge(cell2);\n        },\n\n        unmergeCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            c.unmerge();\n        },\n\n        orderSelectionEnds: function(cell, cell2) {\n            var c = new TableModifyerByCell(cell);\n            return c.orderSelectionEnds(cell2);\n        },\n\n        indexOf: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            c.setTableMap();\n            return c.getMapIndex(cell);\n        },\n\n        findCell: function(table, idx) {\n            var c = new TableModifyerByCell(null, table);\n            return c.getElementAtIndex(idx);\n        },\n\n        findRowByCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            return c.getRowElementsByCell();\n        },\n\n        findColumnByCell: function(cell) {\n            var c = new TableModifyerByCell(cell);\n            return c.getColumnElementsByCell();\n        },\n\n        canMerge: function(cell1, cell2) {\n            var c = new TableModifyerByCell(cell1);\n            return c.canMerge(cell2);\n        }\n    };\n\n\n\n})(wysihtml5);\n;// does a selector query on element or array of elements\n\nwysihtml5.dom.query = function(elements, query) {\n    var ret = [],\n        q;\n\n    if (elements.nodeType) {\n        elements = [elements];\n    }\n\n    for (var e = 0, len = elements.length; e < len; e++) {\n        q = elements[e].querySelectorAll(query);\n        if (q) {\n            for(var i = q.length; i--; ret.unshift(q[i]));\n        }\n    }\n    return ret;\n};\n;wysihtml5.dom.compareDocumentPosition = (function() {\n  var documentElement = document.documentElement;\n  if (documentElement.compareDocumentPosition) {\n    return function(container, element) {\n      return container.compareDocumentPosition(element);\n    };\n  } else {\n    return function( container, element ) {\n      // implementation borrowed from https://github.com/tmpvar/jsdom/blob/681a8524b663281a0f58348c6129c8c184efc62c/lib/jsdom/level3/core.js // MIT license\n      var thisOwner, otherOwner;\n\n      if( container.nodeType === 9) // Node.DOCUMENT_NODE\n        thisOwner = container;\n      else\n        thisOwner = container.ownerDocument;\n\n      if( element.nodeType === 9) // Node.DOCUMENT_NODE\n        otherOwner = element;\n      else\n        otherOwner = element.ownerDocument;\n\n      if( container === element ) return 0;\n      if( container === element.ownerDocument ) return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n      if( container.ownerDocument === element ) return 2 + 8;  //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n      if( thisOwner !== otherOwner ) return 1; // Node.DOCUMENT_POSITION_DISCONNECTED;\n\n      // Text nodes for attributes does not have a _parentNode. So we need to find them as attribute child.\n      if( container.nodeType === 2 /*Node.ATTRIBUTE_NODE*/ && container.childNodes && wysihtml5.lang.array(container.childNodes).indexOf( element ) !== -1)\n        return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n\n      if( element.nodeType === 2 /*Node.ATTRIBUTE_NODE*/ && element.childNodes && wysihtml5.lang.array(element.childNodes).indexOf( container ) !== -1)\n        return 2 + 8; //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n\n      var point = container;\n      var parents = [ ];\n      var previous = null;\n      while( point ) {\n        if( point == element ) return 2 + 8; //Node.DOCUMENT_POSITION_PRECEDING + Node.DOCUMENT_POSITION_CONTAINS;\n        parents.push( point );\n        point = point.parentNode;\n      }\n      point = element;\n      previous = null;\n      while( point ) {\n        if( point == container ) return 4 + 16; //Node.DOCUMENT_POSITION_FOLLOWING + Node.DOCUMENT_POSITION_CONTAINED_BY;\n        var location_index = wysihtml5.lang.array(parents).indexOf( point );\n        if( location_index !== -1) {\n         var smallest_common_ancestor = parents[ location_index ];\n         var this_index = wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf( parents[location_index - 1]);//smallest_common_ancestor.childNodes.toArray().indexOf( parents[location_index - 1] );\n         var other_index = wysihtml5.lang.array(smallest_common_ancestor.childNodes).indexOf( previous ); //smallest_common_ancestor.childNodes.toArray().indexOf( previous );\n         if( this_index > other_index ) {\n               return 2; //Node.DOCUMENT_POSITION_PRECEDING;\n         }\n         else {\n           return 4; //Node.DOCUMENT_POSITION_FOLLOWING;\n         }\n        }\n        previous = point;\n        point = point.parentNode;\n      }\n      return 1; //Node.DOCUMENT_POSITION_DISCONNECTED;\n    };\n  }\n})();\n;wysihtml5.dom.unwrap = function(node) {\n  if (node.parentNode) {\n    while (node.lastChild) {\n      wysihtml5.dom.insert(node.lastChild).after(node);\n    }\n    node.parentNode.removeChild(node);\n  }\n};;/* \n * Methods for fetching pasted html before it gets inserted into content\n**/\n\n/* Modern event.clipboardData driven approach.\n * Advantage is that it does not have to loose selection or modify dom to catch the data. \n * IE does not support though.\n**/\nwysihtml5.dom.getPastedHtml = function(event) {\n  var html;\n  if (event.clipboardData) {\n    if (wysihtml5.lang.array(event.clipboardData.types).contains('text/html')) {\n      html = event.clipboardData.getData('text/html');\n    } else if (wysihtml5.lang.array(event.clipboardData.types).contains('text/plain')) {\n      html = wysihtml5.lang.string(event.clipboardData.getData('text/plain')).escapeHTML(true, true);\n    }\n  }\n  return html;\n};\n\n/* Older temprorary contenteditable as paste source catcher method for fallbacks */\nwysihtml5.dom.getPastedHtmlWithDiv = function (composer, f) {\n  var selBookmark = composer.selection.getBookmark(),\n      doc = composer.element.ownerDocument,\n      cleanerDiv = doc.createElement('DIV');\n  \n  doc.body.appendChild(cleanerDiv);\n\n  cleanerDiv.style.width = \"1px\";\n  cleanerDiv.style.height = \"1px\";\n  cleanerDiv.style.overflow = \"hidden\";\n\n  cleanerDiv.setAttribute('contenteditable', 'true');\n  cleanerDiv.focus();\n\n  setTimeout(function () {\n    composer.selection.setBookmark(selBookmark);\n    f(cleanerDiv.innerHTML);\n    cleanerDiv.parentNode.removeChild(cleanerDiv);\n  }, 0);\n};;/**\n * Fix most common html formatting misbehaviors of browsers implementation when inserting\n * content via copy & paste contentEditable\n *\n * @author Christopher Blum\n */\nwysihtml5.quirks.cleanPastedHTML = (function() {\n\n  var styleToRegex = function (styleStr) {\n    var trimmedStr = wysihtml5.lang.string(styleStr).trim(),\n        escapedStr = trimmedStr.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n\n    return new RegExp(\"^((?!^\" + escapedStr + \"$).)*$\", \"i\");\n  };\n\n  var extendRulesWithStyleExceptions = function (rules, exceptStyles) {\n    var newRules = wysihtml5.lang.object(rules).clone(true),\n        tag, style;\n\n    for (tag in newRules.tags) {\n\n      if (newRules.tags.hasOwnProperty(tag)) {\n        if (newRules.tags[tag].keep_styles) {\n          for (style in newRules.tags[tag].keep_styles) {\n            if (newRules.tags[tag].keep_styles.hasOwnProperty(style)) {\n              if (exceptStyles[style]) {\n                newRules.tags[tag].keep_styles[style] = styleToRegex(exceptStyles[style]);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return newRules;\n  };\n\n  var pickRuleset = function(ruleset, html) {\n    var pickedSet, defaultSet;\n\n    if (!ruleset) {\n      return null;\n    }\n\n    for (var i = 0, max = ruleset.length; i < max; i++) {\n      if (!ruleset[i].condition) {\n        defaultSet = ruleset[i].set;\n      }\n      if (ruleset[i].condition && ruleset[i].condition.test(html)) {\n        return ruleset[i].set;\n      }\n    }\n\n    return defaultSet;\n  };\n\n  return function(html, options) {\n    var exceptStyles = {\n          'color': wysihtml5.dom.getStyle(\"color\").from(options.referenceNode),\n          'fontSize': wysihtml5.dom.getStyle(\"font-size\").from(options.referenceNode)\n        },\n        rules = extendRulesWithStyleExceptions(pickRuleset(options.rules, html) || {}, exceptStyles),\n        newHtml;\n\n    newHtml = wysihtml5.dom.parse(html, {\n      \"rules\": rules,\n      \"cleanUp\": true, // <span> elements, empty or without attributes, should be removed/replaced with their content\n      \"context\": options.referenceNode.ownerDocument,\n      \"uneditableClass\": options.uneditableClass,\n      \"clearInternals\" : true, // don't paste temprorary selection and other markings\n      \"unjoinNbsps\" : true\n    });\n\n    return newHtml;\n  };\n\n})();;/**\n * IE and Opera leave an empty paragraph in the contentEditable element after clearing it\n *\n * @param {Object} contentEditableElement The contentEditable element to observe for clearing events\n * @exaple\n *    wysihtml5.quirks.ensureProperClearing(myContentEditableElement);\n */\nwysihtml5.quirks.ensureProperClearing = (function() {\n  var clearIfNecessary = function() {\n    var element = this;\n    setTimeout(function() {\n      var innerHTML = element.innerHTML.toLowerCase();\n      if (innerHTML == \"<p>&nbsp;</p>\" ||\n          innerHTML == \"<p>&nbsp;</p><p>&nbsp;</p>\") {\n        element.innerHTML = \"\";\n      }\n    }, 0);\n  };\n\n  return function(composer) {\n    wysihtml5.dom.observe(composer.element, [\"cut\", \"keydown\"], clearIfNecessary);\n  };\n})();\n;// See https://bugzilla.mozilla.org/show_bug.cgi?id=664398\n//\n// In Firefox this:\n//      var d = document.createElement(\"div\");\n//      d.innerHTML ='<a href=\"~\"></a>';\n//      d.innerHTML;\n// will result in:\n//      <a href=\"%7E\"></a>\n// which is wrong\n(function(wysihtml5) {\n  var TILDE_ESCAPED = \"%7E\";\n  wysihtml5.quirks.getCorrectInnerHTML = function(element) {\n    var innerHTML = element.innerHTML;\n    if (innerHTML.indexOf(TILDE_ESCAPED) === -1) {\n      return innerHTML;\n    }\n\n    var elementsWithTilde = element.querySelectorAll(\"[href*='~'], [src*='~']\"),\n        url,\n        urlToSearch,\n        length,\n        i;\n    for (i=0, length=elementsWithTilde.length; i<length; i++) {\n      url         = elementsWithTilde[i].href || elementsWithTilde[i].src;\n      urlToSearch = wysihtml5.lang.string(url).replace(\"~\").by(TILDE_ESCAPED);\n      innerHTML   = wysihtml5.lang.string(innerHTML).replace(urlToSearch).by(url);\n    }\n    return innerHTML;\n  };\n})(wysihtml5);\n;/**\n * Force rerendering of a given element\n * Needed to fix display misbehaviors of IE\n *\n * @param {Element} element The element object which needs to be rerendered\n * @example\n *    wysihtml5.quirks.redraw(document.body);\n */\n(function(wysihtml5) {\n  var CLASS_NAME = \"wysihtml5-quirks-redraw\";\n\n  wysihtml5.quirks.redraw = function(element) {\n    wysihtml5.dom.addClass(element, CLASS_NAME);\n    wysihtml5.dom.removeClass(element, CLASS_NAME);\n\n    // Following hack is needed for firefox to make sure that image resize handles are properly removed\n    try {\n      var doc = element.ownerDocument;\n      doc.execCommand(\"italic\", false, null);\n      doc.execCommand(\"italic\", false, null);\n    } catch(e) {}\n  };\n})(wysihtml5);\n;wysihtml5.quirks.tableCellsSelection = function(editable, editor) {\n\n    var dom = wysihtml5.dom,\n        select = {\n            table: null,\n            start: null,\n            end: null,\n            cells: null,\n            select: selectCells\n        },\n        selection_class = \"wysiwyg-tmp-selected-cell\",\n        moveHandler = null,\n        upHandler = null;\n\n    function init () {\n\n        dom.observe(editable, \"mousedown\", function(event) {\n          var target = wysihtml5.dom.getParentElement(event.target, { nodeName: [\"TD\", \"TH\"] });\n          if (target) {\n              handleSelectionMousedown(target);\n          }\n        });\n\n        return select;\n    }\n\n    function handleSelectionMousedown (target) {\n      select.start = target;\n      select.end = target;\n      select.cells = [target];\n      select.table = dom.getParentElement(select.start, { nodeName: [\"TABLE\"] });\n\n      if (select.table) {\n        removeCellSelections();\n        dom.addClass(target, selection_class);\n        moveHandler = dom.observe(editable, \"mousemove\", handleMouseMove);\n        upHandler = dom.observe(editable, \"mouseup\", handleMouseUp);\n        editor.fire(\"tableselectstart\").fire(\"tableselectstart:composer\");\n      }\n    }\n\n    // remove all selection classes\n    function removeCellSelections () {\n        if (editable) {\n            var selectedCells = editable.querySelectorAll('.' + selection_class);\n            if (selectedCells.length > 0) {\n              for (var i = 0; i < selectedCells.length; i++) {\n                  dom.removeClass(selectedCells[i], selection_class);\n              }\n            }\n        }\n    }\n\n    function addSelections (cells) {\n      for (var i = 0; i < cells.length; i++) {\n        dom.addClass(cells[i], selection_class);\n      }\n    }\n\n    function handleMouseMove (event) {\n      var curTable = null,\n          cell = dom.getParentElement(event.target, { nodeName: [\"TD\",\"TH\"] }),\n          oldEnd;\n\n      if (cell && select.table && select.start) {\n        curTable =  dom.getParentElement(cell, { nodeName: [\"TABLE\"] });\n        if (curTable && curTable === select.table) {\n          removeCellSelections();\n          oldEnd = select.end;\n          select.end = cell;\n          select.cells = dom.table.getCellsBetween(select.start, cell);\n          if (select.cells.length > 1) {\n            editor.composer.selection.deselect();\n          }\n          addSelections(select.cells);\n          if (select.end !== oldEnd) {\n            editor.fire(\"tableselectchange\").fire(\"tableselectchange:composer\");\n          }\n        }\n      }\n    }\n\n    function handleMouseUp (event) {\n      moveHandler.stop();\n      upHandler.stop();\n      editor.fire(\"tableselect\").fire(\"tableselect:composer\");\n      setTimeout(function() {\n        bindSideclick();\n      },0);\n    }\n\n    function bindSideclick () {\n        var sideClickHandler = dom.observe(editable.ownerDocument, \"click\", function(event) {\n          sideClickHandler.stop();\n          if (dom.getParentElement(event.target, { nodeName: [\"TABLE\"] }) != select.table) {\n              removeCellSelections();\n              select.table = null;\n              select.start = null;\n              select.end = null;\n              editor.fire(\"tableunselect\").fire(\"tableunselect:composer\");\n          }\n        });\n    }\n\n    function selectCells (start, end) {\n        select.start = start;\n        select.end = end;\n        select.table = dom.getParentElement(select.start, { nodeName: [\"TABLE\"] });\n        selectedCells = dom.table.getCellsBetween(select.start, select.end);\n        addSelections(selectedCells);\n        bindSideclick();\n        editor.fire(\"tableselect\").fire(\"tableselect:composer\");\n    }\n\n    return init();\n\n};\n;(function(wysihtml5) {\n  var RGBA_REGEX     = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*([\\d\\.]+)\\s*\\)/i,\n      RGB_REGEX      = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/i,\n      HEX6_REGEX     = /^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,\n      HEX3_REGEX     = /^#([0-9a-f])([0-9a-f])([0-9a-f])/i;\n\n  var param_REGX = function (p) {\n    return new RegExp(\"(^|\\\\s|;)\" + p + \"\\\\s*:\\\\s*[^;$]+\" , \"gi\");\n  };\n\n  wysihtml5.quirks.styleParser = {\n\n    parseColor: function(stylesStr, paramName) {\n      var paramRegex = param_REGX(paramName),\n          params = stylesStr.match(paramRegex),\n          radix = 10,\n          str, colorMatch;\n\n      if (params) {\n        for (var i = params.length; i--;) {\n          params[i] = wysihtml5.lang.string(params[i].split(':')[1]).trim();\n        }\n        str = params[params.length-1];\n\n        if (RGBA_REGEX.test(str)) {\n          colorMatch = str.match(RGBA_REGEX);\n        } else if (RGB_REGEX.test(str)) {\n          colorMatch = str.match(RGB_REGEX);\n        } else if (HEX6_REGEX.test(str)) {\n          colorMatch = str.match(HEX6_REGEX);\n          radix = 16;\n        } else if (HEX3_REGEX.test(str)) {\n          colorMatch = str.match(HEX3_REGEX);\n          colorMatch.shift();\n          colorMatch.push(1);\n          return wysihtml5.lang.array(colorMatch).map(function(d, idx) {\n            return (idx < 3) ? (parseInt(d, 16) * 16) + parseInt(d, 16): parseFloat(d);\n          });\n        }\n\n        if (colorMatch) {\n          colorMatch.shift();\n          if (!colorMatch[3]) {\n            colorMatch.push(1);\n          }\n          return wysihtml5.lang.array(colorMatch).map(function(d, idx) {\n            return (idx < 3) ? parseInt(d, radix): parseFloat(d);\n          });\n        }\n      }\n      return false;\n    },\n\n    unparseColor: function(val, props) {\n      if (props) {\n        if (props == \"hex\") {\n          return (val[0].toString(16).toUpperCase()) + (val[1].toString(16).toUpperCase()) + (val[2].toString(16).toUpperCase());\n        } else if (props == \"hash\") {\n          return \"#\" + (val[0].toString(16).toUpperCase()) + (val[1].toString(16).toUpperCase()) + (val[2].toString(16).toUpperCase());\n        } else if (props == \"rgb\") {\n          return \"rgb(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \")\";\n        } else if (props == \"rgba\") {\n          return \"rgba(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3] + \")\";\n        } else if (props == \"csv\") {\n          return  val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3];\n        }\n      }\n\n      if (val[3] && val[3] !== 1) {\n        return \"rgba(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \",\" + val[3] + \")\";\n      } else {\n        return \"rgb(\" + val[0] + \",\" + val[1] + \",\" + val[2] + \")\";\n      }\n    },\n\n    parseFontSize: function(stylesStr) {\n      var params = stylesStr.match(param_REGX('font-size'));\n      if (params) {\n        return wysihtml5.lang.string(params[params.length - 1].split(':')[1]).trim();\n      }\n      return false;\n    }\n  };\n\n})(wysihtml5);\n;/**\n * Selection API\n *\n * @example\n *    var selection = new wysihtml5.Selection(editor);\n */\n(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  function _getCumulativeOffsetTop(element) {\n    var top = 0;\n    if (element.parentNode) {\n      do {\n        top += element.offsetTop || 0;\n        element = element.offsetParent;\n      } while (element);\n    }\n    return top;\n  }\n\n  // Provides the depth of ``descendant`` relative to ``ancestor``\n  function getDepth(ancestor, descendant) {\n      var ret = 0;\n      while (descendant !== ancestor) {\n          ret++;\n          descendant = descendant.parentNode;\n          if (!descendant)\n              throw new Error(\"not a descendant of ancestor!\");\n      }\n      return ret;\n  }\n\n  // Should fix the obtained ranges that cannot surrond contents normally to apply changes upon\n  // Being considerate to firefox that sets range start start out of span and end inside on doubleclick initiated selection\n  function expandRangeToSurround(range) {\n      if (range.canSurroundContents()) return;\n\n      var common = range.commonAncestorContainer,\n          start_depth = getDepth(common, range.startContainer),\n          end_depth = getDepth(common, range.endContainer);\n\n      while(!range.canSurroundContents()) {\n        // In the following branches, we cannot just decrement the depth variables because the setStartBefore/setEndAfter may move the start or end of the range more than one level relative to ``common``. So we need to recompute the depth.\n        if (start_depth > end_depth) {\n            range.setStartBefore(range.startContainer);\n            start_depth = getDepth(common, range.startContainer);\n        }\n        else {\n            range.setEndAfter(range.endContainer);\n            end_depth = getDepth(common, range.endContainer);\n        }\n      }\n  }\n\n  wysihtml5.Selection = Base.extend(\n    /** @scope wysihtml5.Selection.prototype */ {\n    constructor: function(editor, contain, unselectableClass) {\n      // Make sure that our external range library is initialized\n      window.rangy.init();\n\n      this.editor   = editor;\n      this.composer = editor.composer;\n      this.doc      = this.composer.doc;\n      this.contain = contain;\n      this.unselectableClass = unselectableClass || false;\n    },\n\n    /**\n     * Get the current selection as a bookmark to be able to later restore it\n     *\n     * @return {Object} An object that represents the current selection\n     */\n    getBookmark: function() {\n      var range = this.getRange();\n      if (range) expandRangeToSurround(range);\n      return range && range.cloneRange();\n    },\n\n    /**\n     * Restore a selection retrieved via wysihtml5.Selection.prototype.getBookmark\n     *\n     * @param {Object} bookmark An object that represents the current selection\n     */\n    setBookmark: function(bookmark) {\n      if (!bookmark) {\n        return;\n      }\n\n      this.setSelection(bookmark);\n    },\n\n    /**\n     * Set the caret in front of the given node\n     *\n     * @param {Object} node The element or text node where to position the caret in front of\n     * @example\n     *    selection.setBefore(myElement);\n     */\n    setBefore: function(node) {\n      var range = rangy.createRange(this.doc);\n      range.setStartBefore(node);\n      range.setEndBefore(node);\n      return this.setSelection(range);\n    },\n\n    /**\n     * Set the caret after the given node\n     *\n     * @param {Object} node The element or text node where to position the caret in front of\n     * @example\n     *    selection.setBefore(myElement);\n     */\n    setAfter: function(node) {\n      var range = rangy.createRange(this.doc);\n\n      range.setStartAfter(node);\n      range.setEndAfter(node);\n      return this.setSelection(range);\n    },\n\n    /**\n     * Ability to select/mark nodes\n     *\n     * @param {Element} node The node/element to select\n     * @example\n     *    selection.selectNode(document.getElementById(\"my-image\"));\n     */\n    selectNode: function(node, avoidInvisibleSpace) {\n      var range           = rangy.createRange(this.doc),\n          isElement       = node.nodeType === wysihtml5.ELEMENT_NODE,\n          canHaveHTML     = \"canHaveHTML\" in node ? node.canHaveHTML : (node.nodeName !== \"IMG\"),\n          content         = isElement ? node.innerHTML : node.data,\n          isEmpty         = (content === \"\" || content === wysihtml5.INVISIBLE_SPACE),\n          displayStyle    = dom.getStyle(\"display\").from(node),\n          isBlockElement  = (displayStyle === \"block\" || displayStyle === \"list-item\");\n\n      if (isEmpty && isElement && canHaveHTML && !avoidInvisibleSpace) {\n        // Make sure that caret is visible in node by inserting a zero width no breaking space\n        try { node.innerHTML = wysihtml5.INVISIBLE_SPACE; } catch(e) {}\n      }\n\n      if (canHaveHTML) {\n        range.selectNodeContents(node);\n      } else {\n        range.selectNode(node);\n      }\n\n      if (canHaveHTML && isEmpty && isElement) {\n        range.collapse(isBlockElement);\n      } else if (canHaveHTML && isEmpty) {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n\n      this.setSelection(range);\n    },\n\n    /**\n     * Get the node which contains the selection\n     *\n     * @param {Boolean} [controlRange] (only IE) Whether it should return the selected ControlRange element when the selection type is a \"ControlRange\"\n     * @return {Object} The node that contains the caret\n     * @example\n     *    var nodeThatContainsCaret = selection.getSelectedNode();\n     */\n    getSelectedNode: function(controlRange) {\n      var selection,\n          range;\n\n      if (controlRange && this.doc.selection && this.doc.selection.type === \"Control\") {\n        range = this.doc.selection.createRange();\n        if (range && range.length) {\n          return range.item(0);\n        }\n      }\n\n      selection = this.getSelection(this.doc);\n      if (selection.focusNode === selection.anchorNode) {\n        return selection.focusNode;\n      } else {\n        range = this.getRange(this.doc);\n        return range ? range.commonAncestorContainer : this.doc.body;\n      }\n    },\n\n    fixSelBorders: function() {\n      var range = this.getRange();\n      expandRangeToSurround(range);\n      this.setSelection(range);\n    },\n\n    getSelectedOwnNodes: function(controlRange) {\n      var selection,\n          ranges = this.getOwnRanges(),\n          ownNodes = [];\n\n      for (var i = 0, maxi = ranges.length; i < maxi; i++) {\n          ownNodes.push(ranges[i].commonAncestorContainer || this.doc.body);\n      }\n      return ownNodes;\n    },\n\n    findNodesInSelection: function(nodeTypes) {\n      var ranges = this.getOwnRanges(),\n          nodes = [], curNodes;\n      for (var i = 0, maxi = ranges.length; i < maxi; i++) {\n        curNodes = ranges[i].getNodes([1], function(node) {\n            return wysihtml5.lang.array(nodeTypes).contains(node.nodeName);\n        });\n        nodes = nodes.concat(curNodes);\n      }\n      return nodes;\n    },\n\n    containsUneditable: function() {\n      var uneditables = this.getOwnUneditables(),\n          selection = this.getSelection();\n\n      for (var i = 0, maxi = uneditables.length; i < maxi; i++) {\n        if (selection.containsNode(uneditables[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    deleteContents: function()  {\n      var ranges = this.getOwnRanges();\n      for (var i = ranges.length; i--;) {\n        ranges[i].deleteContents();\n      }\n      this.setSelection(ranges[0]);\n    },\n\n    getPreviousNode: function(node, ignoreEmpty) {\n      if (!node) {\n        var selection = this.getSelection();\n        node = selection.anchorNode;\n      }\n\n      if (node === this.contain) {\n          return false;\n      }\n\n      var ret = node.previousSibling,\n          parent;\n\n      if (ret === this.contain) {\n          return false;\n      }\n\n      if (ret && ret.nodeType !== 3 && ret.nodeType !== 1) {\n         // do not count comments and other node types\n         ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (ret && ret.nodeType === 3 && (/^\\s*$/).test(ret.textContent)) {\n        // do not count empty textnodes as previus nodes\n        ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (ignoreEmpty && ret && ret.nodeType === 1 && !wysihtml5.lang.array([\"BR\", \"HR\", \"IMG\"]).contains(ret.nodeName) && (/^[\\s]*$/).test(ret.innerHTML)) {\n        // Do not count empty nodes if param set.\n        // Contenteditable tends to bypass and delete these silently when deleting with caret\n        ret = this.getPreviousNode(ret, ignoreEmpty);\n      } else if (!ret && node !== this.contain) {\n        parent = node.parentNode;\n        if (parent !== this.contain) {\n            ret = this.getPreviousNode(parent, ignoreEmpty);\n        }\n      }\n\n      return (ret !== this.contain) ? ret : false;\n    },\n\n    getSelectionParentsByTag: function(tagName) {\n      var nodes = this.getSelectedOwnNodes(),\n          curEl, parents = [];\n\n      for (var i = 0, maxi = nodes.length; i < maxi; i++) {\n        curEl = (nodes[i].nodeName &&  nodes[i].nodeName === 'LI') ? nodes[i] : wysihtml5.dom.getParentElement(nodes[i], { nodeName: ['LI']}, false, this.contain);\n        if (curEl) {\n          parents.push(curEl);\n        }\n      }\n      return (parents.length) ? parents : null;\n    },\n\n    getRangeToNodeEnd: function() {\n      if (this.isCollapsed()) {\n        var range = this.getRange(),\n            sNode = range.startContainer,\n            pos = range.startOffset,\n            lastR = rangy.createRange(this.doc);\n\n        lastR.selectNodeContents(sNode);\n        lastR.setStart(sNode, pos);\n        return lastR;\n      }\n    },\n\n    caretIsLastInSelection: function() {\n      var r = rangy.createRange(this.doc),\n          s = this.getSelection(),\n          endc = this.getRangeToNodeEnd().cloneContents(),\n          endtxt = endc.textContent;\n\n      return (/^\\s*$/).test(endtxt);\n    },\n\n    caretIsFirstInSelection: function() {\n      var r = rangy.createRange(this.doc),\n          s = this.getSelection(),\n          range = this.getRange(),\n          startNode = range.startContainer;\n      \n      if (startNode.nodeType === wysihtml5.TEXT_NODE) {\n        return this.isCollapsed() && (startNode.nodeType === wysihtml5.TEXT_NODE && (/^\\s*$/).test(startNode.data.substr(0,range.startOffset)));\n      } else {\n        r.selectNodeContents(this.getRange().commonAncestorContainer);\n        r.collapse(true);\n        return (this.isCollapsed() && (r.startContainer === s.anchorNode || r.endContainer === s.anchorNode) && r.startOffset === s.anchorOffset);\n      }\n    },\n\n    caretIsInTheBeginnig: function(ofNode) {\n        var selection = this.getSelection(),\n            node = selection.anchorNode,\n            offset = selection.anchorOffset;\n        if (ofNode) {\n          return (offset === 0 && (node.nodeName && node.nodeName === ofNode.toUpperCase() || wysihtml5.dom.getParentElement(node.parentNode, { nodeName: ofNode }, 1)));\n        } else {\n          return (offset === 0 && !this.getPreviousNode(node, true));\n        }\n    },\n\n    caretIsBeforeUneditable: function() {\n      var selection = this.getSelection(),\n          node = selection.anchorNode,\n          offset = selection.anchorOffset;\n\n      if (offset === 0) {\n        var prevNode = this.getPreviousNode(node, true);\n        if (prevNode) {\n          var uneditables = this.getOwnUneditables();\n          for (var i = 0, maxi = uneditables.length; i < maxi; i++) {\n            if (prevNode === uneditables[i]) {\n              return uneditables[i];\n            }\n          }\n        }\n      }\n      return false;\n    },\n\n    // TODO: Figure out a method from following 2 that would work universally\n    executeAndRestoreRangy: function(method, restoreScrollPosition) {\n      var win = this.doc.defaultView || this.doc.parentWindow,\n          sel = rangy.saveSelection(win);\n\n      if (!sel) {\n        method();\n      } else {\n        try {\n          method();\n        } catch(e) {\n          setTimeout(function() { throw e; }, 0);\n        }\n      }\n      rangy.restoreSelection(sel);\n    },\n\n    // TODO: has problems in chrome 12. investigate block level and uneditable area inbetween\n    executeAndRestore: function(method, restoreScrollPosition) {\n      var body                  = this.doc.body,\n          oldScrollTop          = restoreScrollPosition && body.scrollTop,\n          oldScrollLeft         = restoreScrollPosition && body.scrollLeft,\n          className             = \"_wysihtml5-temp-placeholder\",\n          placeholderHtml       = '<span class=\"' + className + '\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n          range                 = this.getRange(true),\n          caretPlaceholder,\n          newCaretPlaceholder,\n          nextSibling, prevSibling,\n          node, node2, range2,\n          newRange;\n\n      // Nothing selected, execute and say goodbye\n      if (!range) {\n        method(body, body);\n        return;\n      }\n\n      if (!range.collapsed) {\n        range2 = range.cloneRange();\n        node2 = range2.createContextualFragment(placeholderHtml);\n        range2.collapse(false);\n        range2.insertNode(node2);\n        range2.detach();\n      }\n\n      node = range.createContextualFragment(placeholderHtml);\n      range.insertNode(node);\n\n      if (node2) {\n        caretPlaceholder = this.contain.querySelectorAll(\".\" + className);\n        range.setStartBefore(caretPlaceholder[0]);\n        range.setEndAfter(caretPlaceholder[caretPlaceholder.length -1]);\n      }\n      this.setSelection(range);\n\n      // Make sure that a potential error doesn't cause our placeholder element to be left as a placeholder\n      try {\n        method(range.startContainer, range.endContainer);\n      } catch(e) {\n        setTimeout(function() { throw e; }, 0);\n      }\n      caretPlaceholder = this.contain.querySelectorAll(\".\" + className);\n      if (caretPlaceholder && caretPlaceholder.length) {\n        newRange = rangy.createRange(this.doc);\n        nextSibling = caretPlaceholder[0].nextSibling;\n        if (caretPlaceholder.length > 1) {\n          prevSibling = caretPlaceholder[caretPlaceholder.length -1].previousSibling;\n        }\n        if (prevSibling && nextSibling) {\n          newRange.setStartBefore(nextSibling);\n          newRange.setEndAfter(prevSibling);\n        } else {\n          newCaretPlaceholder = this.doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n          dom.insert(newCaretPlaceholder).after(caretPlaceholder[0]);\n          newRange.setStartBefore(newCaretPlaceholder);\n          newRange.setEndAfter(newCaretPlaceholder);\n        }\n        this.setSelection(newRange);\n        for (var i = caretPlaceholder.length; i--;) {\n         caretPlaceholder[i].parentNode.removeChild(caretPlaceholder[i]);\n        }\n\n      } else {\n        // fallback for when all hell breaks loose\n        this.contain.focus();\n      }\n\n      if (restoreScrollPosition) {\n        body.scrollTop  = oldScrollTop;\n        body.scrollLeft = oldScrollLeft;\n      }\n\n      // Remove it again, just to make sure that the placeholder is definitely out of the dom tree\n      try {\n        caretPlaceholder.parentNode.removeChild(caretPlaceholder);\n      } catch(e2) {}\n    },\n\n    set: function(node, offset) {\n      var newRange = rangy.createRange(this.doc);\n      newRange.setStart(node, offset || 0);\n      this.setSelection(newRange);\n    },\n\n    /**\n     * Insert html at the caret position and move the cursor after the inserted html\n     *\n     * @param {String} html HTML string to insert\n     * @example\n     *    selection.insertHTML(\"<p>foobar</p>\");\n     */\n    insertHTML: function(html) {\n      var range     = rangy.createRange(this.doc),\n          node = this.doc.createElement('DIV'),\n          fragment = this.doc.createDocumentFragment(),\n          lastChild;\n\n      node.innerHTML = html;\n      lastChild = node.lastChild;\n\n      while (node.firstChild) {\n        fragment.appendChild(node.firstChild);\n      }\n      this.insertNode(fragment);\n\n      if (lastChild) {\n        this.setAfter(lastChild);\n      }\n    },\n\n    /**\n     * Insert a node at the caret position and move the cursor behind it\n     *\n     * @param {Object} node HTML string to insert\n     * @example\n     *    selection.insertNode(document.createTextNode(\"foobar\"));\n     */\n    insertNode: function(node) {\n      var range = this.getRange();\n      if (range) {\n        range.insertNode(node);\n      }\n    },\n\n    /**\n     * Wraps current selection with the given node\n     *\n     * @param {Object} node The node to surround the selected elements with\n     */\n    surround: function(nodeOptions) {\n      var ranges = this.getOwnRanges(),\n          node, nodes = [];\n      if (ranges.length == 0) {\n        return nodes;\n      }\n\n      for (var i = ranges.length; i--;) {\n        node = this.doc.createElement(nodeOptions.nodeName);\n        nodes.push(node);\n        if (nodeOptions.className) {\n          node.className = nodeOptions.className;\n        }\n        if (nodeOptions.cssStyle) {\n          node.setAttribute('style', nodeOptions.cssStyle);\n        }\n        try {\n          // This only works when the range boundaries are not overlapping other elements\n          ranges[i].surroundContents(node);\n          this.selectNode(node);\n        } catch(e) {\n          // fallback\n          node.appendChild(ranges[i].extractContents());\n          ranges[i].insertNode(node);\n        }\n      }\n      return nodes;\n    },\n\n    deblockAndSurround: function(nodeOptions) {\n      var tempElement = this.doc.createElement('div'),\n          range = rangy.createRange(this.doc),\n          tempDivElements,\n          tempElements,\n          firstChild;\n\n      tempElement.className = nodeOptions.className;\n\n      this.composer.commands.exec(\"formatBlock\", nodeOptions.nodeName, nodeOptions.className);\n      tempDivElements = this.contain.querySelectorAll(\".\" + nodeOptions.className);\n      if (tempDivElements[0]) {\n        tempDivElements[0].parentNode.insertBefore(tempElement, tempDivElements[0]);\n\n        range.setStartBefore(tempDivElements[0]);\n        range.setEndAfter(tempDivElements[tempDivElements.length - 1]);\n        tempElements = range.extractContents();\n\n        while (tempElements.firstChild) {\n          firstChild = tempElements.firstChild;\n          if (firstChild.nodeType == 1 && wysihtml5.dom.hasClass(firstChild, nodeOptions.className)) {\n            while (firstChild.firstChild) {\n              tempElement.appendChild(firstChild.firstChild);\n            }\n            if (firstChild.nodeName !== \"BR\") { tempElement.appendChild(this.doc.createElement('br')); }\n            tempElements.removeChild(firstChild);\n          } else {\n            tempElement.appendChild(firstChild);\n          }\n        }\n      } else {\n        tempElement = null;\n      }\n\n      return tempElement;\n    },\n\n    /**\n     * Scroll the current caret position into the view\n     * FIXME: This is a bit hacky, there might be a smarter way of doing this\n     *\n     * @example\n     *    selection.scrollIntoView();\n     */\n    scrollIntoView: function() {\n      var doc           = this.doc,\n          tolerance     = 5, // px\n          hasScrollBars = doc.documentElement.scrollHeight > doc.documentElement.offsetHeight,\n          tempElement   = doc._wysihtml5ScrollIntoViewElement = doc._wysihtml5ScrollIntoViewElement || (function() {\n            var element = doc.createElement(\"span\");\n            // The element needs content in order to be able to calculate it's position properly\n            element.innerHTML = wysihtml5.INVISIBLE_SPACE;\n            return element;\n          })(),\n          offsetTop;\n\n      if (hasScrollBars) {\n        this.insertNode(tempElement);\n        offsetTop = _getCumulativeOffsetTop(tempElement);\n        tempElement.parentNode.removeChild(tempElement);\n        if (offsetTop >= (doc.body.scrollTop + doc.documentElement.offsetHeight - tolerance)) {\n          doc.body.scrollTop = offsetTop;\n        }\n      }\n    },\n\n    /**\n     * Select line where the caret is in\n     */\n    selectLine: function() {\n      if (wysihtml5.browser.supportsSelectionModify()) {\n        this._selectLine_W3C();\n      } else if (this.doc.selection) {\n        this._selectLine_MSIE();\n      }\n    },\n\n    /**\n     * See https://developer.mozilla.org/en/DOM/Selection/modify\n     */\n    _selectLine_W3C: function() {\n      var win       = this.doc.defaultView,\n          selection = win.getSelection();\n      selection.modify(\"move\", \"left\", \"lineboundary\");\n      selection.modify(\"extend\", \"right\", \"lineboundary\");\n    },\n\n    _selectLine_MSIE: function() {\n      var range       = this.doc.selection.createRange(),\n          rangeTop    = range.boundingTop,\n          scrollWidth = this.doc.body.scrollWidth,\n          rangeBottom,\n          rangeEnd,\n          measureNode,\n          i,\n          j;\n\n      if (!range.moveToPoint) {\n        return;\n      }\n\n      if (rangeTop === 0) {\n        // Don't know why, but when the selection ends at the end of a line\n        // range.boundingTop is 0\n        measureNode = this.doc.createElement(\"span\");\n        this.insertNode(measureNode);\n        rangeTop = measureNode.offsetTop;\n        measureNode.parentNode.removeChild(measureNode);\n      }\n\n      rangeTop += 1;\n\n      for (i=-10; i<scrollWidth; i+=2) {\n        try {\n          range.moveToPoint(i, rangeTop);\n          break;\n        } catch(e1) {}\n      }\n\n      // Investigate the following in order to handle multi line selections\n      // rangeBottom = rangeTop + (rangeHeight ? (rangeHeight - 1) : 0);\n      rangeBottom = rangeTop;\n      rangeEnd = this.doc.selection.createRange();\n      for (j=scrollWidth; j>=0; j--) {\n        try {\n          rangeEnd.moveToPoint(j, rangeBottom);\n          break;\n        } catch(e2) {}\n      }\n\n      range.setEndPoint(\"EndToEnd\", rangeEnd);\n      range.select();\n    },\n\n    getText: function() {\n      var selection = this.getSelection();\n      return selection ? selection.toString() : \"\";\n    },\n\n    getNodes: function(nodeType, filter) {\n      var range = this.getRange();\n      if (range) {\n        return range.getNodes([nodeType], filter);\n      } else {\n        return [];\n      }\n    },\n\n    fixRangeOverflow: function(range) {\n      if (this.contain && this.contain.firstChild && range) {\n        var containment = range.compareNode(this.contain);\n        if (containment !== 2) {\n          if (containment === 1) {\n            range.setStartBefore(this.contain.firstChild);\n          }\n          if (containment === 0) {\n            range.setEndAfter(this.contain.lastChild);\n          }\n          if (containment === 3) {\n            range.setStartBefore(this.contain.firstChild);\n            range.setEndAfter(this.contain.lastChild);\n          }\n        } else if (this._detectInlineRangeProblems(range)) {\n          var previousElementSibling = range.endContainer.previousElementSibling;\n          if (previousElementSibling) {\n            range.setEnd(previousElementSibling, this._endOffsetForNode(previousElementSibling));\n          }\n        }\n      }\n    },\n\n    _endOffsetForNode: function(node) {\n      var range = document.createRange();\n      range.selectNodeContents(node);\n      return range.endOffset;\n    },\n\n    _detectInlineRangeProblems: function(range) {\n      var position = dom.compareDocumentPosition(range.startContainer, range.endContainer);\n      return (\n        range.endOffset == 0 &&\n        position & 4 //Node.DOCUMENT_POSITION_FOLLOWING\n      );\n    },\n\n    getRange: function(dontFix) {\n      var selection = this.getSelection(),\n          range = selection && selection.rangeCount && selection.getRangeAt(0);\n\n      if (dontFix !== true) {\n        this.fixRangeOverflow(range);\n      }\n\n      return range;\n    },\n\n    getOwnUneditables: function() {\n      var allUneditables = dom.query(this.contain, '.' + this.unselectableClass),\n          deepUneditables = dom.query(allUneditables, '.' + this.unselectableClass);\n\n      return wysihtml5.lang.array(allUneditables).without(deepUneditables);\n    },\n\n    // Returns an array of ranges that belong only to this editable\n    // Needed as uneditable block in contenteditabel can split range into pieces\n    // If manipulating content reverse loop is usually needed as manipulation can shift subsequent ranges\n    getOwnRanges: function()  {\n      var ranges = [],\n          r = this.getRange(),\n          tmpRanges;\n\n      if (r) { ranges.push(r); }\n\n      if (this.unselectableClass && this.contain && r) {\n          var uneditables = this.getOwnUneditables(),\n              tmpRange;\n          if (uneditables.length > 0) {\n            for (var i = 0, imax = uneditables.length; i < imax; i++) {\n              tmpRanges = [];\n              for (var j = 0, jmax = ranges.length; j < jmax; j++) {\n                if (ranges[j]) {\n                  switch (ranges[j].compareNode(uneditables[i])) {\n                    case 2:\n                      // all selection inside uneditable. remove\n                    break;\n                    case 3:\n                      //section begins before and ends after uneditable. spilt\n                      tmpRange = ranges[j].cloneRange();\n                      tmpRange.setEndBefore(uneditables[i]);\n                      tmpRanges.push(tmpRange);\n\n                      tmpRange = ranges[j].cloneRange();\n                      tmpRange.setStartAfter(uneditables[i]);\n                      tmpRanges.push(tmpRange);\n                    break;\n                    default:\n                      // in all other cases uneditable does not touch selection. dont modify\n                      tmpRanges.push(ranges[j]);\n                  }\n                }\n                ranges = tmpRanges;\n              }\n            }\n          }\n      }\n      return ranges;\n    },\n\n    getSelection: function() {\n      return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow);\n    },\n\n    setSelection: function(range) {\n      var win       = this.doc.defaultView || this.doc.parentWindow,\n          selection = rangy.getSelection(win);\n      return selection.setSingleRange(range);\n    },\n\n    createRange: function() {\n      return rangy.createRange(this.doc);\n    },\n\n    isCollapsed: function() {\n        return this.getSelection().isCollapsed;\n    },\n\n    getHtml: function() {\n      return this.getSelection().toHtml();\n    },\n\n    isEndToEndInNode: function(nodeNames) {\n      var range = this.getRange(),\n          parentElement = range.commonAncestorContainer,\n          startNode = range.startContainer,\n          endNode = range.endContainer;\n\n\n        if (parentElement.nodeType === wysihtml5.TEXT_NODE) {\n          parentElement = parentElement.parentNode;\n        }\n\n        if (startNode.nodeType === wysihtml5.TEXT_NODE && !(/^\\s*$/).test(startNode.data.substr(range.startOffset))) {\n          return false;\n        }\n\n        if (endNode.nodeType === wysihtml5.TEXT_NODE && !(/^\\s*$/).test(endNode.data.substr(range.endOffset))) {\n          return false;\n        }\n\n        while (startNode && startNode !== parentElement) {\n          if (startNode.nodeType !== wysihtml5.TEXT_NODE && !wysihtml5.dom.contains(parentElement, startNode)) {\n            return false;\n          }\n          if (wysihtml5.dom.domNode(startNode).prev({ignoreBlankTexts: true})) {\n            return false;\n          }\n          startNode = startNode.parentNode;\n        }\n\n        while (endNode && endNode !== parentElement) {\n          if (endNode.nodeType !== wysihtml5.TEXT_NODE && !wysihtml5.dom.contains(parentElement, endNode)) {\n            return false;\n          }\n          if (wysihtml5.dom.domNode(endNode).next({ignoreBlankTexts: true})) {\n            return false;\n          }\n          endNode = endNode.parentNode;\n        }\n\n        return (wysihtml5.lang.array(nodeNames).contains(parentElement.nodeName)) ? parentElement : false;\n    },\n\n    deselect: function() {\n      var sel = this.getSelection();\n      sel && sel.removeAllRanges();\n    }\n  });\n\n})(wysihtml5);\n;/**\n * Inspired by the rangy CSS Applier module written by Tim Down and licensed under the MIT license.\n * http://code.google.com/p/rangy/\n *\n * changed in order to be able ...\n *    - to use custom tags\n *    - to detect and replace similar css classes via reg exp\n */\n(function(wysihtml5, rangy) {\n  var defaultTagName = \"span\";\n\n  var REG_EXP_WHITE_SPACE = /\\s+/g;\n\n  function hasClass(el, cssClass, regExp) {\n    if (!el.className) {\n      return false;\n    }\n\n    var matchingClassNames = el.className.match(regExp) || [];\n    return matchingClassNames[matchingClassNames.length - 1] === cssClass;\n  }\n\n  function hasStyleAttr(el, regExp) {\n    if (!el.getAttribute || !el.getAttribute('style')) {\n      return false;\n    }\n    var matchingStyles = el.getAttribute('style').match(regExp);\n    return  (el.getAttribute('style').match(regExp)) ? true : false;\n  }\n\n  function addStyle(el, cssStyle, regExp) {\n    if (el.getAttribute('style')) {\n      removeStyle(el, regExp);\n      if (el.getAttribute('style') && !(/^\\s*$/).test(el.getAttribute('style'))) {\n        el.setAttribute('style', cssStyle + \";\" + el.getAttribute('style'));\n      } else {\n        el.setAttribute('style', cssStyle);\n      }\n    } else {\n      el.setAttribute('style', cssStyle);\n    }\n  }\n\n  function addClass(el, cssClass, regExp) {\n    if (el.className) {\n      removeClass(el, regExp);\n      el.className += \" \" + cssClass;\n    } else {\n      el.className = cssClass;\n    }\n  }\n\n  function removeClass(el, regExp) {\n    if (el.className) {\n      el.className = el.className.replace(regExp, \"\");\n    }\n  }\n\n  function removeStyle(el, regExp) {\n    var s,\n        s2 = [];\n    if (el.getAttribute('style')) {\n      s = el.getAttribute('style').split(';');\n      for (var i = s.length; i--;) {\n        if (!s[i].match(regExp) && !(/^\\s*$/).test(s[i])) {\n          s2.push(s[i]);\n        }\n      }\n      if (s2.length) {\n        el.setAttribute('style', s2.join(';'));\n      } else {\n        el.removeAttribute('style');\n      }\n    }\n  }\n\n  function getMatchingStyleRegexp(el, style) {\n    var regexes = [],\n        sSplit = style.split(';'),\n        elStyle = el.getAttribute('style');\n\n    if (elStyle) {\n      elStyle = elStyle.replace(/\\s/gi, '').toLowerCase();\n      regexes.push(new RegExp(\"(^|\\\\s|;)\" + style.replace(/\\s/gi, '').replace(/([\\(\\)])/gi, \"\\\\$1\").toLowerCase().replace(\";\", \";?\").replace(/rgb\\\\\\((\\d+),(\\d+),(\\d+)\\\\\\)/gi, \"\\\\s?rgb\\\\($1,\\\\s?$2,\\\\s?$3\\\\)\"), \"gi\"));\n\n      for (var i = sSplit.length; i-- > 0;) {\n        if (!(/^\\s*$/).test(sSplit[i])) {\n          regexes.push(new RegExp(\"(^|\\\\s|;)\" + sSplit[i].replace(/\\s/gi, '').replace(/([\\(\\)])/gi, \"\\\\$1\").toLowerCase().replace(\";\", \";?\").replace(/rgb\\\\\\((\\d+),(\\d+),(\\d+)\\\\\\)/gi, \"\\\\s?rgb\\\\($1,\\\\s?$2,\\\\s?$3\\\\)\"), \"gi\"));\n        }\n      }\n      for (var j = 0, jmax = regexes.length; j < jmax; j++) {\n        if (elStyle.match(regexes[j])) {\n          return regexes[j];\n        }\n      }\n    }\n\n    return false;\n  }\n\n  function isMatchingAllready(node, tags, style, className) {\n    if (style) {\n      return getMatchingStyleRegexp(node, style);\n    } else if (className) {\n      return wysihtml5.dom.hasClass(node, className);\n    } else {\n      return rangy.dom.arrayContains(tags, node.tagName.toLowerCase());\n    }\n  }\n\n  function areMatchingAllready(nodes, tags, style, className) {\n    for (var i = nodes.length; i--;) {\n      if (!isMatchingAllready(nodes[i], tags, style, className)) {\n        return false;\n      }\n    }\n    return nodes.length ? true : false;\n  }\n\n  function removeOrChangeStyle(el, style, regExp) {\n\n    var exactRegex = getMatchingStyleRegexp(el, style);\n    if (exactRegex) {\n      // adding same style value on property again removes style\n      removeStyle(el, exactRegex);\n      return \"remove\";\n    } else {\n      // adding new style value changes value\n      addStyle(el, style, regExp);\n      return \"change\";\n    }\n  }\n\n  function hasSameClasses(el1, el2) {\n    return el1.className.replace(REG_EXP_WHITE_SPACE, \" \") == el2.className.replace(REG_EXP_WHITE_SPACE, \" \");\n  }\n\n  function replaceWithOwnChildren(el) {\n    var parent = el.parentNode;\n    while (el.firstChild) {\n      parent.insertBefore(el.firstChild, el);\n    }\n    parent.removeChild(el);\n  }\n\n  function elementsHaveSameNonClassAttributes(el1, el2) {\n    if (el1.attributes.length != el2.attributes.length) {\n      return false;\n    }\n    for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n      attr1 = el1.attributes[i];\n      name = attr1.name;\n      if (name != \"class\") {\n        attr2 = el2.attributes.getNamedItem(name);\n        if (attr1.specified != attr2.specified) {\n          return false;\n        }\n        if (attr1.specified && attr1.nodeValue !== attr2.nodeValue) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  function isSplitPoint(node, offset) {\n    if (rangy.dom.isCharacterDataNode(node)) {\n      if (offset == 0) {\n        return !!node.previousSibling;\n      } else if (offset == node.length) {\n        return !!node.nextSibling;\n      } else {\n        return true;\n      }\n    }\n\n    return offset > 0 && offset < node.childNodes.length;\n  }\n\n  function splitNodeAt(node, descendantNode, descendantOffset, container) {\n    var newNode;\n    if (rangy.dom.isCharacterDataNode(descendantNode)) {\n      if (descendantOffset == 0) {\n        descendantOffset = rangy.dom.getNodeIndex(descendantNode);\n        descendantNode = descendantNode.parentNode;\n      } else if (descendantOffset == descendantNode.length) {\n        descendantOffset = rangy.dom.getNodeIndex(descendantNode) + 1;\n        descendantNode = descendantNode.parentNode;\n      } else {\n        newNode = rangy.dom.splitDataNode(descendantNode, descendantOffset);\n      }\n    }\n    if (!newNode) {\n      if (!container || descendantNode !== container) {\n\n        newNode = descendantNode.cloneNode(false);\n        if (newNode.id) {\n          newNode.removeAttribute(\"id\");\n        }\n        var child;\n        while ((child = descendantNode.childNodes[descendantOffset])) {\n          newNode.appendChild(child);\n        }\n        rangy.dom.insertAfter(newNode, descendantNode);\n\n      }\n    }\n    return (descendantNode == node) ? newNode :  splitNodeAt(node, newNode.parentNode, rangy.dom.getNodeIndex(newNode), container);\n  }\n\n  function Merge(firstNode) {\n    this.isElementMerge = (firstNode.nodeType == wysihtml5.ELEMENT_NODE);\n    this.firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n    this.textNodes = [this.firstTextNode];\n  }\n\n  Merge.prototype = {\n    doMerge: function() {\n      var textBits = [], textNode, parent, text;\n      for (var i = 0, len = this.textNodes.length; i < len; ++i) {\n        textNode = this.textNodes[i];\n        parent = textNode.parentNode;\n        textBits[i] = textNode.data;\n        if (i) {\n          parent.removeChild(textNode);\n          if (!parent.hasChildNodes()) {\n            parent.parentNode.removeChild(parent);\n          }\n        }\n      }\n      this.firstTextNode.data = text = textBits.join(\"\");\n      return text;\n    },\n\n    getLength: function() {\n      var i = this.textNodes.length, len = 0;\n      while (i--) {\n        len += this.textNodes[i].length;\n      }\n      return len;\n    },\n\n    toString: function() {\n      var textBits = [];\n      for (var i = 0, len = this.textNodes.length; i < len; ++i) {\n        textBits[i] = \"'\" + this.textNodes[i].data + \"'\";\n      }\n      return \"[Merge(\" + textBits.join(\",\") + \")]\";\n    }\n  };\n\n  function HTMLApplier(tagNames, cssClass, similarClassRegExp, normalize, cssStyle, similarStyleRegExp, container) {\n    this.tagNames = tagNames || [defaultTagName];\n    this.cssClass = cssClass || ((cssClass === false) ? false : \"\");\n    this.similarClassRegExp = similarClassRegExp;\n    this.cssStyle = cssStyle || \"\";\n    this.similarStyleRegExp = similarStyleRegExp;\n    this.normalize = normalize;\n    this.applyToAnyTagName = false;\n    this.container = container;\n  }\n\n  HTMLApplier.prototype = {\n    getAncestorWithClass: function(node) {\n      var cssClassMatch;\n      while (node) {\n        cssClassMatch = this.cssClass ? hasClass(node, this.cssClass, this.similarClassRegExp) : (this.cssStyle !== \"\") ? false : true;\n        if (node.nodeType == wysihtml5.ELEMENT_NODE && node.getAttribute(\"contenteditable\") != \"false\" &&  rangy.dom.arrayContains(this.tagNames, node.tagName.toLowerCase()) && cssClassMatch) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    },\n\n    // returns parents of node with given style attribute\n    getAncestorWithStyle: function(node) {\n      var cssStyleMatch;\n      while (node) {\n        cssStyleMatch = this.cssStyle ? hasStyleAttr(node, this.similarStyleRegExp) : false;\n\n        if (node.nodeType == wysihtml5.ELEMENT_NODE && node.getAttribute(\"contenteditable\") != \"false\" && rangy.dom.arrayContains(this.tagNames, node.tagName.toLowerCase()) && cssStyleMatch) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    },\n\n    getMatchingAncestor: function(node) {\n      var ancestor = this.getAncestorWithClass(node),\n          matchType = false;\n\n      if (!ancestor) {\n        ancestor = this.getAncestorWithStyle(node);\n        if (ancestor) {\n          matchType = \"style\";\n        }\n      } else {\n        if (this.cssStyle) {\n          matchType = \"class\";\n        }\n      }\n\n      return {\n        \"element\": ancestor,\n        \"type\": matchType\n      };\n    },\n\n    // Normalizes nodes after applying a CSS class to a Range.\n    postApply: function(textNodes, range) {\n      var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n\n      var merges = [], currentMerge;\n\n      var rangeStartNode = firstNode, rangeEndNode = lastNode;\n      var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n\n      var textNode, precedingTextNode;\n\n      for (var i = 0, len = textNodes.length; i < len; ++i) {\n        textNode = textNodes[i];\n        precedingTextNode = null;\n        if (textNode && textNode.parentNode) {\n          precedingTextNode = this.getAdjacentMergeableTextNode(textNode.parentNode, false);\n        }\n        if (precedingTextNode) {\n          if (!currentMerge) {\n            currentMerge = new Merge(precedingTextNode);\n            merges.push(currentMerge);\n          }\n          currentMerge.textNodes.push(textNode);\n          if (textNode === firstNode) {\n            rangeStartNode = currentMerge.firstTextNode;\n            rangeStartOffset = rangeStartNode.length;\n          }\n          if (textNode === lastNode) {\n            rangeEndNode = currentMerge.firstTextNode;\n            rangeEndOffset = currentMerge.getLength();\n          }\n        } else {\n          currentMerge = null;\n        }\n      }\n      // Test whether the first node after the range needs merging\n      if(lastNode && lastNode.parentNode) {\n        var nextTextNode = this.getAdjacentMergeableTextNode(lastNode.parentNode, true);\n        if (nextTextNode) {\n          if (!currentMerge) {\n            currentMerge = new Merge(lastNode);\n            merges.push(currentMerge);\n          }\n          currentMerge.textNodes.push(nextTextNode);\n        }\n      }\n      // Do the merges\n      if (merges.length) {\n        for (i = 0, len = merges.length; i < len; ++i) {\n          merges[i].doMerge();\n        }\n        // Set the range boundaries\n        range.setStart(rangeStartNode, rangeStartOffset);\n        range.setEnd(rangeEndNode, rangeEndOffset);\n      }\n    },\n\n    getAdjacentMergeableTextNode: function(node, forward) {\n        var isTextNode = (node.nodeType == wysihtml5.TEXT_NODE);\n        var el = isTextNode ? node.parentNode : node;\n        var adjacentNode;\n        var propName = forward ? \"nextSibling\" : \"previousSibling\";\n        if (isTextNode) {\n          // Can merge if the node's previous/next sibling is a text node\n          adjacentNode = node[propName];\n          if (adjacentNode && adjacentNode.nodeType == wysihtml5.TEXT_NODE) {\n            return adjacentNode;\n          }\n        } else {\n          // Compare element with its sibling\n          adjacentNode = el[propName];\n          if (adjacentNode && this.areElementsMergeable(node, adjacentNode)) {\n            return adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n          }\n        }\n        return null;\n    },\n\n    areElementsMergeable: function(el1, el2) {\n      return rangy.dom.arrayContains(this.tagNames, (el1.tagName || \"\").toLowerCase())\n        && rangy.dom.arrayContains(this.tagNames, (el2.tagName || \"\").toLowerCase())\n        && hasSameClasses(el1, el2)\n        && elementsHaveSameNonClassAttributes(el1, el2);\n    },\n\n    createContainer: function(doc) {\n      var el = doc.createElement(this.tagNames[0]);\n      if (this.cssClass) {\n        el.className = this.cssClass;\n      }\n      if (this.cssStyle) {\n        el.setAttribute('style', this.cssStyle);\n      }\n      return el;\n    },\n\n    applyToTextNode: function(textNode) {\n      var parent = textNode.parentNode;\n      if (parent.childNodes.length == 1 && rangy.dom.arrayContains(this.tagNames, parent.tagName.toLowerCase())) {\n\n        if (this.cssClass) {\n          addClass(parent, this.cssClass, this.similarClassRegExp);\n        }\n        if (this.cssStyle) {\n          addStyle(parent, this.cssStyle, this.similarStyleRegExp);\n        }\n      } else {\n        var el = this.createContainer(rangy.dom.getDocument(textNode));\n        textNode.parentNode.insertBefore(el, textNode);\n        el.appendChild(textNode);\n      }\n    },\n\n    isRemovable: function(el) {\n      return rangy.dom.arrayContains(this.tagNames, el.tagName.toLowerCase()) &&\n              wysihtml5.lang.string(el.className).trim() === \"\" &&\n              (\n                !el.getAttribute('style') ||\n                wysihtml5.lang.string(el.getAttribute('style')).trim() === \"\"\n              );\n    },\n\n    undoToTextNode: function(textNode, range, ancestorWithClass, ancestorWithStyle) {\n      var styleMode = (ancestorWithClass) ? false : true,\n          ancestor = ancestorWithClass || ancestorWithStyle,\n          styleChanged = false;\n      if (!range.containsNode(ancestor)) {\n        // Split out the portion of the ancestor from which we can remove the CSS class\n        var ancestorRange = range.cloneRange();\n            ancestorRange.selectNode(ancestor);\n\n        if (ancestorRange.isPointInRange(range.endContainer, range.endOffset) && isSplitPoint(range.endContainer, range.endOffset)) {\n            splitNodeAt(ancestor, range.endContainer, range.endOffset, this.container);\n            range.setEndAfter(ancestor);\n        }\n        if (ancestorRange.isPointInRange(range.startContainer, range.startOffset) && isSplitPoint(range.startContainer, range.startOffset)) {\n            ancestor = splitNodeAt(ancestor, range.startContainer, range.startOffset, this.container);\n        }\n      }\n\n      if (!styleMode && this.similarClassRegExp) {\n        removeClass(ancestor, this.similarClassRegExp);\n      }\n\n      if (styleMode && this.similarStyleRegExp) {\n        styleChanged = (removeOrChangeStyle(ancestor, this.cssStyle, this.similarStyleRegExp) === \"change\");\n      }\n      if (this.isRemovable(ancestor) && !styleChanged) {\n        replaceWithOwnChildren(ancestor);\n      }\n    },\n\n    applyToRange: function(range) {\n        var textNodes;\n        for (var ri = range.length; ri--;) {\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n\n            if (!textNodes.length) {\n              try {\n                var node = this.createContainer(range[ri].endContainer.ownerDocument);\n                range[ri].surroundContents(node);\n                this.selectNode(range[ri], node);\n                return;\n              } catch(e) {}\n            }\n\n            range[ri].splitBoundaries();\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n            if (textNodes.length) {\n              var textNode;\n\n              for (var i = 0, len = textNodes.length; i < len; ++i) {\n                textNode = textNodes[i];\n                if (!this.getMatchingAncestor(textNode).element) {\n                  this.applyToTextNode(textNode);\n                }\n              }\n\n              range[ri].setStart(textNodes[0], 0);\n              textNode = textNodes[textNodes.length - 1];\n              range[ri].setEnd(textNode, textNode.length);\n\n              if (this.normalize) {\n                this.postApply(textNodes, range[ri]);\n              }\n            }\n\n        }\n    },\n\n    undoToRange: function(range) {\n      var textNodes, textNode, ancestorWithClass, ancestorWithStyle, ancestor;\n      for (var ri = range.length; ri--;) {\n\n          textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n          if (textNodes.length) {\n            range[ri].splitBoundaries();\n            textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n          } else {\n            var doc = range[ri].endContainer.ownerDocument,\n                node = doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n            range[ri].insertNode(node);\n            range[ri].selectNode(node);\n            textNodes = [node];\n          }\n\n          for (var i = 0, len = textNodes.length; i < len; ++i) {\n            if (range[ri].isValid()) {\n              textNode = textNodes[i];\n\n              ancestor = this.getMatchingAncestor(textNode);\n              if (ancestor.type === \"style\") {\n                this.undoToTextNode(textNode, range[ri], false, ancestor.element);\n              } else if (ancestor.element) {\n                this.undoToTextNode(textNode, range[ri], ancestor.element);\n              }\n            }\n          }\n\n          if (len == 1) {\n            this.selectNode(range[ri], textNodes[0]);\n          } else {\n            range[ri].setStart(textNodes[0], 0);\n            textNode = textNodes[textNodes.length - 1];\n            range[ri].setEnd(textNode, textNode.length);\n\n            if (this.normalize) {\n              this.postApply(textNodes, range[ri]);\n            }\n          }\n\n      }\n    },\n\n    selectNode: function(range, node) {\n      var isElement       = node.nodeType === wysihtml5.ELEMENT_NODE,\n          canHaveHTML     = \"canHaveHTML\" in node ? node.canHaveHTML : true,\n          content         = isElement ? node.innerHTML : node.data,\n          isEmpty         = (content === \"\" || content === wysihtml5.INVISIBLE_SPACE);\n\n      if (isEmpty && isElement && canHaveHTML) {\n        // Make sure that caret is visible in node by inserting a zero width no breaking space\n        try { node.innerHTML = wysihtml5.INVISIBLE_SPACE; } catch(e) {}\n      }\n      range.selectNodeContents(node);\n      if (isEmpty && isElement) {\n        range.collapse(false);\n      } else if (isEmpty) {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n    },\n\n    getTextSelectedByRange: function(textNode, range) {\n      var textRange = range.cloneRange();\n      textRange.selectNodeContents(textNode);\n\n      var intersectionRange = textRange.intersection(range);\n      var text = intersectionRange ? intersectionRange.toString() : \"\";\n      textRange.detach();\n\n      return text;\n    },\n\n    isAppliedToRange: function(range) {\n      var ancestors = [],\n          appliedType = \"full\",\n          ancestor, styleAncestor, textNodes;\n\n      for (var ri = range.length; ri--;) {\n\n        textNodes = range[ri].getNodes([wysihtml5.TEXT_NODE]);\n        if (!textNodes.length) {\n          ancestor = this.getMatchingAncestor(range[ri].startContainer).element;\n\n          return (ancestor) ? {\n            \"elements\": [ancestor],\n            \"coverage\": appliedType\n          } : false;\n        }\n\n        for (var i = 0, len = textNodes.length, selectedText; i < len; ++i) {\n          selectedText = this.getTextSelectedByRange(textNodes[i], range[ri]);\n          ancestor = this.getMatchingAncestor(textNodes[i]).element;\n          if (ancestor && selectedText != \"\") {\n            ancestors.push(ancestor);\n\n            if (wysihtml5.dom.getTextNodes(ancestor, true).length === 1) {\n              appliedType = \"full\";\n            } else if (appliedType === \"full\") {\n              appliedType = \"inline\";\n            }\n          } else if (!ancestor) {\n            appliedType = \"partial\";\n          }\n        }\n\n      }\n\n      return (ancestors.length) ? {\n        \"elements\": ancestors,\n        \"coverage\": appliedType\n      } : false;\n    },\n\n    toggleRange: function(range) {\n      var isApplied = this.isAppliedToRange(range),\n          parentsExactMatch;\n\n      if (isApplied) {\n        if (isApplied.coverage === \"full\") {\n          this.undoToRange(range);\n        } else if (isApplied.coverage === \"inline\") {\n          parentsExactMatch = areMatchingAllready(isApplied.elements, this.tagNames, this.cssStyle, this.cssClass);\n          this.undoToRange(range);\n          if (!parentsExactMatch) {\n            this.applyToRange(range);\n          }\n        } else {\n          // partial\n          if (!areMatchingAllready(isApplied.elements, this.tagNames, this.cssStyle, this.cssClass)) {\n            this.undoToRange(range);\n          }\n          this.applyToRange(range);\n        }\n      } else {\n        this.applyToRange(range);\n      }\n    }\n  };\n\n  wysihtml5.selection.HTMLApplier = HTMLApplier;\n\n})(wysihtml5, rangy);\n;/**\n * Rich Text Query/Formatting Commands\n *\n * @example\n *    var commands = new wysihtml5.Commands(editor);\n */\nwysihtml5.Commands = Base.extend(\n  /** @scope wysihtml5.Commands.prototype */ {\n  constructor: function(editor) {\n    this.editor   = editor;\n    this.composer = editor.composer;\n    this.doc      = this.composer.doc;\n  },\n\n  /**\n   * Check whether the browser supports the given command\n   *\n   * @param {String} command The command string which to check (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @example\n   *    commands.supports(\"createLink\");\n   */\n  support: function(command) {\n    return wysihtml5.browser.supportsCommand(this.doc, command);\n  },\n\n  /**\n   * Check whether the browser supports the given command\n   *\n   * @param {String} command The command string which to execute (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @param {String} [value] The command value parameter, needed for some commands (\"createLink\", \"insertImage\", ...), optional for commands that don't require one (\"bold\", \"underline\", ...)\n   * @example\n   *    commands.exec(\"insertImage\", \"http://a1.twimg.com/profile_images/113868655/schrei_twitter_reasonably_small.jpg\");\n   */\n  exec: function(command, value) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.exec,\n        result  = null;\n\n    this.editor.fire(\"beforecommand:composer\");\n\n    if (method) {\n      args.unshift(this.composer);\n      result = method.apply(obj, args);\n    } else {\n      try {\n        // try/catch for buggy firefox\n        result = this.doc.execCommand(command, false, value);\n      } catch(e) {}\n    }\n\n    this.editor.fire(\"aftercommand:composer\");\n    return result;\n  },\n\n  /**\n   * Check whether the current command is active\n   * If the caret is within a bold text, then calling this with command \"bold\" should return true\n   *\n   * @param {String} command The command string which to check (eg. \"bold\", \"italic\", \"insertUnorderedList\")\n   * @param {String} [commandValue] The command value parameter (eg. for \"insertImage\" the image src)\n   * @return {Boolean} Whether the command is active\n   * @example\n   *    var isCurrentSelectionBold = commands.state(\"bold\");\n   */\n  state: function(command, commandValue) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.state;\n    if (method) {\n      args.unshift(this.composer);\n      return method.apply(obj, args);\n    } else {\n      try {\n        // try/catch for buggy firefox\n        return this.doc.queryCommandState(command);\n      } catch(e) {\n        return false;\n      }\n    }\n  },\n\n  /* Get command state parsed value if command has stateValue parsing function */\n  stateValue: function(command) {\n    var obj     = wysihtml5.commands[command],\n        args    = wysihtml5.lang.array(arguments).get(),\n        method  = obj && obj.stateValue;\n    if (method) {\n      args.unshift(this.composer);\n      return method.apply(obj, args);\n    } else {\n      return false;\n    }\n  }\n});\n;wysihtml5.commands.bold = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"b\");\n  },\n\n  state: function(composer, command) {\n    // element.ownerDocument.queryCommandState(\"bold\") results:\n    // firefox: only <b>\n    // chrome:  <b>, <strong>, <h1>, <h2>, ...\n    // ie:      <b>, <strong>\n    // opera:   <b>, <strong>\n    return wysihtml5.commands.formatInline.state(composer, command, \"b\");\n  }\n};\n\n;(function(wysihtml5) {\n  var undef,\n      NODE_NAME = \"A\",\n      dom       = wysihtml5.dom;\n\n  function _format(composer, attributes) {\n    var doc             = composer.doc,\n        tempClass       = \"_wysihtml5-temp-\" + (+new Date()),\n        tempClassRegExp = /non-matching-class/g,\n        i               = 0,\n        length,\n        anchors,\n        anchor,\n        hasElementChild,\n        isEmpty,\n        elementToSetCaretAfter,\n        textContent,\n        whiteSpace,\n        j;\n    wysihtml5.commands.formatInline.exec(composer, undef, NODE_NAME, tempClass, tempClassRegExp, undef, undef, true, true);\n    anchors = doc.querySelectorAll(NODE_NAME + \".\" + tempClass);\n    length  = anchors.length;\n    for (; i<length; i++) {\n      anchor = anchors[i];\n      anchor.removeAttribute(\"class\");\n      for (j in attributes) {\n        // Do not set attribute \"text\" as it is meant for setting string value if created link has no textual data\n        if (j !== \"text\") {\n          anchor.setAttribute(j, attributes[j]);\n        }\n      }\n    }\n\n    elementToSetCaretAfter = anchor;\n    if (length === 1) {\n      textContent = dom.getTextContent(anchor);\n      hasElementChild = !!anchor.querySelector(\"*\");\n      isEmpty = textContent === \"\" || textContent === wysihtml5.INVISIBLE_SPACE;\n      if (!hasElementChild && isEmpty) {\n        dom.setTextContent(anchor, attributes.text || anchor.href);\n        whiteSpace = doc.createTextNode(\" \");\n        composer.selection.setAfter(anchor);\n        dom.insert(whiteSpace).after(anchor);\n        elementToSetCaretAfter = whiteSpace;\n      }\n    }\n    composer.selection.setAfter(elementToSetCaretAfter);\n  }\n\n  // Changes attributes of links\n  function _changeLinks(composer, anchors, attributes) {\n    var oldAttrs;\n    for (var a = anchors.length; a--;) {\n\n      // Remove all old attributes\n      oldAttrs = anchors[a].attributes;\n      for (var oa = oldAttrs.length; oa--;) {\n        anchors[a].removeAttribute(oldAttrs.item(oa).name);\n      }\n\n      // Set new attributes\n      for (var j in attributes) {\n        if (attributes.hasOwnProperty(j)) {\n          anchors[a].setAttribute(j, attributes[j]);\n        }\n      }\n\n    }\n  }\n\n  wysihtml5.commands.createLink = {\n    /**\n     * TODO: Use HTMLApplier or formatInline here\n     *\n     * Turns selection into a link\n     * If selection is already a link, it just changes the attributes\n     *\n     * @example\n     *    // either ...\n     *    wysihtml5.commands.createLink.exec(composer, \"createLink\", \"http://www.google.de\");\n     *    // ... or ...\n     *    wysihtml5.commands.createLink.exec(composer, \"createLink\", { href: \"http://www.google.de\", target: \"_blank\" });\n     */\n    exec: function(composer, command, value) {\n      var anchors = this.state(composer, command);\n      if (anchors) {\n        // Selection contains links then change attributes of these links\n        composer.selection.executeAndRestore(function() {\n          _changeLinks(composer, anchors, value);\n        });\n      } else {\n        // Create links\n        value = typeof(value) === \"object\" ? value : { href: value };\n        _format(composer, value);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"A\");\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  function _removeFormat(composer, anchors) {\n    var length  = anchors.length,\n        i       = 0,\n        anchor,\n        codeElement,\n        textContent;\n    for (; i<length; i++) {\n      anchor      = anchors[i];\n      codeElement = dom.getParentElement(anchor, { nodeName: \"code\" });\n      textContent = dom.getTextContent(anchor);\n\n      // if <a> contains url-like text content, rename it to <code> to prevent re-autolinking\n      // else replace <a> with its childNodes\n      if (textContent.match(dom.autoLink.URL_REG_EXP) && !codeElement) {\n        // <code> element is used to prevent later auto-linking of the content\n        codeElement = dom.renameElement(anchor, \"code\");\n      } else {\n        dom.replaceWithChildNodes(anchor);\n      }\n    }\n  }\n\n  wysihtml5.commands.removeLink = {\n    /*\n     * If selection is a link, it removes the link and wraps it with a <code> element\n     * The <code> element is needed to avoid auto linking\n     *\n     * @example\n     *    wysihtml5.commands.createLink.exec(composer, \"removeLink\");\n     */\n\n    exec: function(composer, command) {\n      var anchors = this.state(composer, command);\n      if (anchors) {\n        composer.selection.executeAndRestore(function() {\n          _removeFormat(composer, anchors);\n        });\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"A\");\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"fontSize\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /wysiwyg-font-size-[0-9a-z\\-]+/g;\n\n  wysihtml5.commands.fontSize = {\n    exec: function(composer, command, size) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", \"wysiwyg-font-size-\" + size, REG_EXP);\n    },\n\n    state: function(composer, command, size) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", \"wysiwyg-font-size-\" + size, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;/* In case font size adjustment to any number defined by user is preferred, we cannot use classes and must use inline styles. */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)font-size\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.fontSizeStyle = {\n    exec: function(composer, command, size) {\n      size = (typeof(size) == \"object\") ? size.size : size;\n      if (!(/^\\s*$/).test(size)) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, \"font-size:\" + size, REG_EXP);\n      }\n    },\n\n    state: function(composer, command, size) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"font-size\", REG_EXP);\n    },\n\n    stateValue: function(composer, command) {\n      var st = this.state(composer, command),\n          styleStr, fontsizeMatches,\n          val = false;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n          st = st[0];\n      }\n      if (st) {\n        styleStr = st.getAttribute('style');\n        if (styleStr) {\n          return wysihtml5.quirks.styleParser.parseFontSize(styleStr);\n        }\n      }\n      return false;\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"foreColor\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /wysiwyg-color-[0-9a-z]+/g;\n\n  wysihtml5.commands.foreColor = {\n    exec: function(composer, command, color) {\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", \"wysiwyg-color-\" + color, REG_EXP);\n    },\n\n    state: function(composer, command, color) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", \"wysiwyg-color-\" + color, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;/**\n * document.execCommand(\"foreColor\") will create either inline styles (firefox, chrome) or use font tags\n * which we don't want\n * Instead we set a css class\n */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)color\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.foreColorStyle = {\n    exec: function(composer, command, color) {\n      var colorVals  = wysihtml5.quirks.styleParser.parseColor((typeof(color) == \"object\") ? \"color:\" + color.color : \"color:\" + color, \"color\"),\n          colString;\n\n      if (colorVals) {\n        colString = \"color: rgb(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ');';\n        if (colorVals[3] !== 1) {\n          colString += \"color: rgba(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ',' + colorVals[3] + ');';\n        }\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, colString, REG_EXP);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"color\", REG_EXP);\n    },\n\n    stateValue: function(composer, command, props) {\n      var st = this.state(composer, command),\n          colorStr;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n        st = st[0];\n      }\n\n      if (st) {\n        colorStr = st.getAttribute('style');\n        if (colorStr) {\n          if (colorStr) {\n            val = wysihtml5.quirks.styleParser.parseColor(colorStr, \"color\");\n            return wysihtml5.quirks.styleParser.unparseColor(val, props);\n          }\n        }\n      }\n      return false;\n    }\n\n  };\n})(wysihtml5);\n;/* In case background adjustment to any color defined by user is preferred, we cannot use classes and must use inline styles. */\n(function(wysihtml5) {\n  var REG_EXP = /(\\s|^)background-color\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.bgColorStyle = {\n    exec: function(composer, command, color) {\n      var colorVals  = wysihtml5.quirks.styleParser.parseColor((typeof(color) == \"object\") ? \"background-color:\" + color.color : \"background-color:\" + color, \"background-color\"),\n          colString;\n\n      if (colorVals) {\n        colString = \"background-color: rgb(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ');';\n        if (colorVals[3] !== 1) {\n          colString += \"background-color: rgba(\" + colorVals[0] + ',' + colorVals[1] + ',' + colorVals[2] + ',' + colorVals[3] + ');';\n        }\n        wysihtml5.commands.formatInline.execWithToggle(composer, command, \"span\", false, false, colString, REG_EXP);\n      }\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"span\", false, false, \"background-color\", REG_EXP);\n    },\n\n    stateValue: function(composer, command, props) {\n      var st = this.state(composer, command),\n          colorStr,\n          val = false;\n\n      if (st && wysihtml5.lang.object(st).isArray()) {\n        st = st[0];\n      }\n\n      if (st) {\n        colorStr = st.getAttribute('style');\n        if (colorStr) {\n          val = wysihtml5.quirks.styleParser.parseColor(colorStr, \"background-color\");\n          return wysihtml5.quirks.styleParser.unparseColor(val, props);\n        }\n      }\n      return false;\n    }\n\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      // Following elements are grouped\n      // when the caret is within a H1 and the H4 is invoked, the H1 should turn into H4\n      // instead of creating a H4 within a H1 which would result in semantically invalid html\n      BLOCK_ELEMENTS_GROUP    = [\"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\", \"P\", \"PRE\", \"DIV\"];\n\n  /**\n   * Remove similiar classes (based on classRegExp)\n   * and add the desired class name\n   */\n  function _addClass(element, className, classRegExp) {\n    if (element.className) {\n      _removeClass(element, classRegExp);\n      element.className = wysihtml5.lang.string(element.className + \" \" + className).trim();\n    } else {\n      element.className = className;\n    }\n  }\n\n  function _addStyle(element, cssStyle, styleRegExp) {\n    _removeStyle(element, styleRegExp);\n    if (element.getAttribute('style')) {\n      element.setAttribute('style', wysihtml5.lang.string(element.getAttribute('style') + \" \" + cssStyle).trim());\n    } else {\n      element.setAttribute('style', cssStyle);\n    }\n  }\n\n  function _removeClass(element, classRegExp) {\n    var ret = classRegExp.test(element.className);\n    element.className = element.className.replace(classRegExp, \"\");\n    if (wysihtml5.lang.string(element.className).trim() == '') {\n        element.removeAttribute('class');\n    }\n    return ret;\n  }\n\n  function _removeStyle(element, styleRegExp) {\n    var ret = styleRegExp.test(element.getAttribute('style'));\n    element.setAttribute('style', (element.getAttribute('style') || \"\").replace(styleRegExp, \"\"));\n    if (wysihtml5.lang.string(element.getAttribute('style') || \"\").trim() == '') {\n      element.removeAttribute('style');\n    }\n    return ret;\n  }\n\n  function _removeLastChildIfLineBreak(node) {\n    var lastChild = node.lastChild;\n    if (lastChild && _isLineBreak(lastChild)) {\n      lastChild.parentNode.removeChild(lastChild);\n    }\n  }\n\n  function _isLineBreak(node) {\n    return node.nodeName === \"BR\";\n  }\n\n  /**\n   * Execute native query command\n   * and if necessary modify the inserted node's className\n   */\n  function _execCommand(doc, composer, command, nodeName, className) {\n    var ranges = composer.selection.getOwnRanges();\n    for (var i = ranges.length; i--;){\n      composer.selection.getSelection().removeAllRanges();\n      composer.selection.setSelection(ranges[i]);\n      if (className) {\n        var eventListener = dom.observe(doc, \"DOMNodeInserted\", function(event) {\n          var target = event.target,\n              displayStyle;\n          if (target.nodeType !== wysihtml5.ELEMENT_NODE) {\n            return;\n          }\n          displayStyle = dom.getStyle(\"display\").from(target);\n          if (displayStyle.substr(0, 6) !== \"inline\") {\n            // Make sure that only block elements receive the given class\n            target.className += \" \" + className;\n          }\n        });\n      }\n      doc.execCommand(command, false, nodeName);\n\n      if (eventListener) {\n        eventListener.stop();\n      }\n    }\n  }\n\n  function _selectionWrap(composer, options) {\n    if (composer.selection.isCollapsed()) {\n        composer.selection.selectLine();\n    }\n\n    var surroundedNodes = composer.selection.surround(options);\n    for (var i = 0, imax = surroundedNodes.length; i < imax; i++) {\n      wysihtml5.dom.lineBreaks(surroundedNodes[i]).remove();\n      _removeLastChildIfLineBreak(surroundedNodes[i]);\n    }\n\n    // rethink restoring selection\n    // composer.selection.selectNode(element, wysihtml5.browser.displaysCaretInEmptyContentEditableCorrectly());\n  }\n\n  function _hasClasses(element) {\n    return !!wysihtml5.lang.string(element.className).trim();\n  }\n\n  function _hasStyles(element) {\n    return !!wysihtml5.lang.string(element.getAttribute('style') || '').trim();\n  }\n\n  wysihtml5.commands.formatBlock = {\n    exec: function(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp) {\n      var doc             = composer.doc,\n          blockElements    = this.state(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp),\n          useLineBreaks   = composer.config.useLineBreaks,\n          defaultNodeName = useLineBreaks ? \"DIV\" : \"P\",\n          selectedNodes, classRemoveAction, blockRenameFound, styleRemoveAction, blockElement;\n      nodeName = typeof(nodeName) === \"string\" ? nodeName.toUpperCase() : nodeName;\n\n      if (blockElements.length) {\n        composer.selection.executeAndRestoreRangy(function() {\n          for (var b = blockElements.length; b--;) {\n            if (classRegExp) {\n              classRemoveAction = _removeClass(blockElements[b], classRegExp);\n            }\n            if (styleRegExp) {\n              styleRemoveAction = _removeStyle(blockElements[b], styleRegExp);\n            }\n\n            if ((styleRemoveAction || classRemoveAction) && nodeName === null && blockElements[b].nodeName != defaultNodeName) {\n              // dont rename or remove element when just setting block formating class or style\n              return;\n            }\n\n            var hasClasses = _hasClasses(blockElements[b]),\n                hasStyles = _hasStyles(blockElements[b]);\n\n            if (!hasClasses && !hasStyles && (useLineBreaks || nodeName === \"P\")) {\n              // Insert a line break afterwards and beforewards when there are siblings\n              // that are not of type line break or block element\n              wysihtml5.dom.lineBreaks(blockElements[b]).add();\n              dom.replaceWithChildNodes(blockElements[b]);\n            } else {\n              // Make sure that styling is kept by renaming the element to a <div> or <p> and copying over the class name\n              dom.renameElement(blockElements[b], nodeName === \"P\" ? \"DIV\" : defaultNodeName);\n            }\n          }\n        });\n\n        return;\n      }\n\n      // Find similiar block element and rename it (<h2 class=\"foo\"></h2>  =>  <h1 class=\"foo\"></h1>)\n      if (nodeName === null || wysihtml5.lang.array(BLOCK_ELEMENTS_GROUP).contains(nodeName)) {\n        selectedNodes = composer.selection.findNodesInSelection(BLOCK_ELEMENTS_GROUP).concat(composer.selection.getSelectedOwnNodes());\n        composer.selection.executeAndRestoreRangy(function() {\n          for (var n = selectedNodes.length; n--;) {\n            blockElement = dom.getParentElement(selectedNodes[n], {\n              nodeName: BLOCK_ELEMENTS_GROUP\n            });\n            if (blockElement == composer.element) {\n              blockElement = null;\n            }\n            if (blockElement) {\n                // Rename current block element to new block element and add class\n                if (nodeName) {\n                  blockElement = dom.renameElement(blockElement, nodeName);\n                }\n                if (className) {\n                  _addClass(blockElement, className, classRegExp);\n                }\n                if (cssStyle) {\n                  _addStyle(blockElement, cssStyle, styleRegExp);\n                }\n              blockRenameFound = true;\n            }\n          }\n\n        });\n\n        if (blockRenameFound) {\n          return;\n        }\n      }\n\n      _selectionWrap(composer, {\n        \"nodeName\": (nodeName || defaultNodeName),\n        \"className\": className || null,\n        \"cssStyle\": cssStyle || null\n      });\n    },\n\n    state: function(composer, command, nodeName, className, classRegExp, cssStyle, styleRegExp) {\n      var nodes = composer.selection.getSelectedOwnNodes(),\n          parents = [],\n          parent;\n\n      nodeName = typeof(nodeName) === \"string\" ? nodeName.toUpperCase() : nodeName;\n\n      //var selectedNode = composer.selection.getSelectedNode();\n      for (var i = 0, maxi = nodes.length; i < maxi; i++) {\n        parent = dom.getParentElement(nodes[i], {\n          nodeName:     nodeName,\n          className:    className,\n          classRegExp:  classRegExp,\n          cssStyle:     cssStyle,\n          styleRegExp:  styleRegExp\n        });\n        if (parent && wysihtml5.lang.array(parents).indexOf(parent) == -1) {\n          parents.push(parent);\n        }\n      }\n      if (parents.length == 0) {\n        return false;\n      }\n      return parents;\n    }\n\n\n  };\n})(wysihtml5);\n;/* Formats block for as a <pre><code class=\"classname\"></code></pre> block\n * Useful in conjuction for sytax highlight utility: highlight.js\n *\n * Usage:\n *\n * editorInstance.composer.commands.exec(\"formatCode\", \"language-html\");\n*/\n\nwysihtml5.commands.formatCode = {\n\n  exec: function(composer, command, classname) {\n    var pre = this.state(composer),\n        code, range, selectedNodes;\n    if (pre) {\n      // caret is already within a <pre><code>...</code></pre>\n      composer.selection.executeAndRestore(function() {\n        code = pre.querySelector(\"code\");\n        wysihtml5.dom.replaceWithChildNodes(pre);\n        if (code) {\n          wysihtml5.dom.replaceWithChildNodes(code);\n        }\n      });\n    } else {\n      // Wrap in <pre><code>...</code></pre>\n      range = composer.selection.getRange();\n      selectedNodes = range.extractContents();\n      pre = composer.doc.createElement(\"pre\");\n      code = composer.doc.createElement(\"code\");\n\n      if (classname) {\n        code.className = classname;\n      }\n\n      pre.appendChild(code);\n      code.appendChild(selectedNodes);\n      range.insertNode(pre);\n      composer.selection.selectNode(pre);\n    }\n  },\n\n  state: function(composer) {\n    var selectedNode = composer.selection.getSelectedNode();\n    if (selectedNode && selectedNode.nodeName && selectedNode.nodeName == \"PRE\"&&\n        selectedNode.firstChild && selectedNode.firstChild.nodeName && selectedNode.firstChild.nodeName == \"CODE\") {\n      return selectedNode;\n    } else {\n      return wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"CODE\" }) && wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"PRE\" });\n    }\n  }\n};;/**\n * formatInline scenarios for tag \"B\" (| = caret, |foo| = selected text)\n *\n *   #1 caret in unformatted text:\n *      abcdefg|\n *   output:\n *      abcdefg<b>|</b>\n *\n *   #2 unformatted text selected:\n *      abc|deg|h\n *   output:\n *      abc<b>|deg|</b>h\n *\n *   #3 unformatted text selected across boundaries:\n *      ab|c <span>defg|h</span>\n *   output:\n *      ab<b>|c </b><span><b>defg</b>|h</span>\n *\n *   #4 formatted text entirely selected\n *      <b>|abc|</b>\n *   output:\n *      |abc|\n *\n *   #5 formatted text partially selected\n *      <b>ab|c|</b>\n *   output:\n *      <b>ab</b>|c|\n *\n *   #6 formatted text selected across boundaries\n *      <span>ab|c</span> <b>de|fgh</b>\n *   output:\n *      <span>ab|c</span> de|<b>fgh</b>\n */\n(function(wysihtml5) {\n  var // Treat <b> as <strong> and vice versa\n      ALIAS_MAPPING = {\n        \"strong\": \"b\",\n        \"em\":     \"i\",\n        \"b\":      \"strong\",\n        \"i\":      \"em\"\n      },\n      htmlApplier = {};\n\n  function _getTagNames(tagName) {\n    var alias = ALIAS_MAPPING[tagName];\n    return alias ? [tagName.toLowerCase(), alias.toLowerCase()] : [tagName.toLowerCase()];\n  }\n\n  function _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, container) {\n    var identifier = tagName;\n    \n    if (className) {\n      identifier += \":\" + className;\n    }\n    if (cssStyle) {\n      identifier += \":\" + cssStyle;\n    }\n\n    if (!htmlApplier[identifier]) {\n      htmlApplier[identifier] = new wysihtml5.selection.HTMLApplier(_getTagNames(tagName), className, classRegExp, true, cssStyle, styleRegExp, container);\n    }\n\n    return htmlApplier[identifier];\n  }\n\n  wysihtml5.commands.formatInline = {\n    exec: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, dontRestoreSelect, noCleanup) {\n      var range = composer.selection.createRange(),\n          ownRanges = composer.selection.getOwnRanges();\n\n      if (!ownRanges || ownRanges.length == 0) {\n        return false;\n      }\n      composer.selection.getSelection().removeAllRanges();\n\n      _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, composer.element).toggleRange(ownRanges);\n\n      if (!dontRestoreSelect) {\n        range.setStart(ownRanges[0].startContainer,  ownRanges[0].startOffset);\n        range.setEnd(\n          ownRanges[ownRanges.length - 1].endContainer,\n          ownRanges[ownRanges.length - 1].endOffset\n        );\n        composer.selection.setSelection(range);\n        composer.selection.executeAndRestore(function() {\n          if (!noCleanup) {\n            composer.cleanUp();\n          }\n        }, true, true);\n      } else if (!noCleanup) {\n        composer.cleanUp();\n      }\n    },\n\n    // Executes so that if collapsed caret is in a state and executing that state it should unformat that state\n    // It is achieved by selecting the entire state element before executing.\n    // This works on built in contenteditable inline format commands\n    execWithToggle: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) {\n      var that = this;\n\n      if (this.state(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) &&\n        composer.selection.isCollapsed() &&\n        !composer.selection.caretIsLastInSelection() &&\n        !composer.selection.caretIsFirstInSelection()\n      ) {\n        var state_element = that.state(composer, command, tagName, className, classRegExp)[0];\n        composer.selection.executeAndRestoreRangy(function() {\n          var parent = state_element.parentNode;\n          composer.selection.selectNode(state_element, true);\n          wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, true, true);\n        });\n      } else {\n        if (this.state(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) && !composer.selection.isCollapsed()) {\n          composer.selection.executeAndRestoreRangy(function() {\n            wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp, true, true);\n          });\n        } else {\n          wysihtml5.commands.formatInline.exec(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp);\n        }\n      }\n    },\n\n    state: function(composer, command, tagName, className, classRegExp, cssStyle, styleRegExp) {\n      var doc           = composer.doc,\n          aliasTagName  = ALIAS_MAPPING[tagName] || tagName,\n          ownRanges, isApplied;\n\n      // Check whether the document contains a node with the desired tagName\n      if (!wysihtml5.dom.hasElementWithTagName(doc, tagName) &&\n          !wysihtml5.dom.hasElementWithTagName(doc, aliasTagName)) {\n        return false;\n      }\n\n       // Check whether the document contains a node with the desired className\n      if (className && !wysihtml5.dom.hasElementWithClassName(doc, className)) {\n         return false;\n      }\n\n      ownRanges = composer.selection.getOwnRanges();\n\n      if (!ownRanges || ownRanges.length === 0) {\n        return false;\n      }\n\n      isApplied = _getApplier(tagName, className, classRegExp, cssStyle, styleRegExp, composer.element).isAppliedToRange(ownRanges);\n\n      return (isApplied && isApplied.elements) ? isApplied.elements : false;\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n\n  wysihtml5.commands.insertBlockQuote = {\n    exec: function(composer, command) {\n      var state = this.state(composer, command),\n          endToEndParent = composer.selection.isEndToEndInNode(['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P']),\n          prevNode, nextNode;\n\n      composer.selection.executeAndRestore(function() {\n        if (state) {\n          if (composer.config.useLineBreaks) {\n             wysihtml5.dom.lineBreaks(state).add();\n          }\n          wysihtml5.dom.unwrap(state);\n        } else {\n          if (composer.selection.isCollapsed()) {\n            composer.selection.selectLine();\n          }\n          \n          if (endToEndParent) {\n            var qouteEl = endToEndParent.ownerDocument.createElement('blockquote');\n            wysihtml5.dom.insert(qouteEl).after(endToEndParent);\n            qouteEl.appendChild(endToEndParent);\n          } else {\n            composer.selection.surround({nodeName: \"blockquote\"});\n          }\n        }\n      });\n    },\n    state: function(composer, command) {\n      var selectedNode  = composer.selection.getSelectedNode(),\n          node = wysihtml5.dom.getParentElement(selectedNode, { nodeName: \"BLOCKQUOTE\" }, false, composer.element);\n\n      return (node) ? node : false;\n    }\n  };\n\n})(wysihtml5);;wysihtml5.commands.insertHTML = {\n  exec: function(composer, command, html) {\n    if (composer.commands.support(command)) {\n      composer.doc.execCommand(command, false, html);\n    } else {\n      composer.selection.insertHTML(html);\n    }\n  },\n\n  state: function() {\n    return false;\n  }\n};\n;(function(wysihtml5) {\n  var NODE_NAME = \"IMG\";\n\n  wysihtml5.commands.insertImage = {\n    /**\n     * Inserts an <img>\n     * If selection is already an image link, it removes it\n     *\n     * @example\n     *    // either ...\n     *    wysihtml5.commands.insertImage.exec(composer, \"insertImage\", \"http://www.google.de/logo.jpg\");\n     *    // ... or ...\n     *    wysihtml5.commands.insertImage.exec(composer, \"insertImage\", { src: \"http://www.google.de/logo.jpg\", title: \"foo\" });\n     */\n    exec: function(composer, command, value) {\n      value = typeof(value) === \"object\" ? value : { src: value };\n\n      var doc     = composer.doc,\n          image   = this.state(composer),\n          textNode,\n          parent;\n\n      if (image) {\n        // Image already selected, set the caret before it and delete it\n        composer.selection.setBefore(image);\n        parent = image.parentNode;\n        parent.removeChild(image);\n\n        // and it's parent <a> too if it hasn't got any other relevant child nodes\n        wysihtml5.dom.removeEmptyTextNodes(parent);\n        if (parent.nodeName === \"A\" && !parent.firstChild) {\n          composer.selection.setAfter(parent);\n          parent.parentNode.removeChild(parent);\n        }\n\n        // firefox and ie sometimes don't remove the image handles, even though the image got removed\n        wysihtml5.quirks.redraw(composer.element);\n        return;\n      }\n\n      image = doc.createElement(NODE_NAME);\n\n      for (var i in value) {\n        image.setAttribute(i === \"className\" ? \"class\" : i, value[i]);\n      }\n\n      composer.selection.insertNode(image);\n      if (wysihtml5.browser.hasProblemsSettingCaretAfterImg()) {\n        textNode = doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n        composer.selection.insertNode(textNode);\n        composer.selection.setAfter(textNode);\n      } else {\n        composer.selection.setAfter(image);\n      }\n    },\n\n    state: function(composer) {\n      var doc = composer.doc,\n          selectedNode,\n          text,\n          imagesInSelection;\n\n      if (!wysihtml5.dom.hasElementWithTagName(doc, NODE_NAME)) {\n        return false;\n      }\n\n      selectedNode = composer.selection.getSelectedNode();\n      if (!selectedNode) {\n        return false;\n      }\n\n      if (selectedNode.nodeName === NODE_NAME) {\n        // This works perfectly in IE\n        return selectedNode;\n      }\n\n      if (selectedNode.nodeType !== wysihtml5.ELEMENT_NODE) {\n        return false;\n      }\n\n      text = composer.selection.getText();\n      text = wysihtml5.lang.string(text).trim();\n      if (text) {\n        return false;\n      }\n\n      imagesInSelection = composer.selection.getNodes(wysihtml5.ELEMENT_NODE, function(node) {\n        return node.nodeName === \"IMG\";\n      });\n\n      if (imagesInSelection.length !== 1) {\n        return false;\n      }\n\n      return imagesInSelection[0];\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var LINE_BREAK = \"<br>\" + (wysihtml5.browser.needsSpaceAfterLineBreak() ? \" \" : \"\");\n\n  wysihtml5.commands.insertLineBreak = {\n    exec: function(composer, command) {\n      if (composer.commands.support(command)) {\n        composer.doc.execCommand(command, false, null);\n        if (!wysihtml5.browser.autoScrollsToCaret()) {\n          composer.selection.scrollIntoView();\n        }\n      } else {\n        composer.commands.exec(\"insertHTML\", LINE_BREAK);\n      }\n    },\n\n    state: function() {\n      return false;\n    }\n  };\n})(wysihtml5);\n;wysihtml5.commands.insertOrderedList = {\n  exec: function(composer, command) {\n    wysihtml5.commands.insertList.exec(composer, command, \"OL\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.insertList.state(composer, command, \"OL\");\n  }\n};\n;wysihtml5.commands.insertUnorderedList = {\n  exec: function(composer, command) {\n    wysihtml5.commands.insertList.exec(composer, command, \"UL\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.insertList.state(composer, command, \"UL\");\n  }\n};\n;wysihtml5.commands.insertList = (function(wysihtml5) {\n\n  var isNode = function(node, name) {\n    if (node && node.nodeName) {\n      if (typeof name === 'string') {\n        name = [name];\n      }\n      for (var n = name.length; n--;) {\n        if (node.nodeName === name[n]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  var findListEl = function(node, nodeName, composer) {\n    var ret = {\n          el: null,\n          other: false\n        };\n\n    if (node) {\n      var parentLi = wysihtml5.dom.getParentElement(node, { nodeName: \"LI\" }),\n          otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\";\n\n      if (isNode(node, nodeName)) {\n        ret.el = node;\n      } else if (isNode(node, otherNodeName)) {\n        ret = {\n          el: node,\n          other: true\n        };\n      } else if (parentLi) {\n        if (isNode(parentLi.parentNode, nodeName)) {\n          ret.el = parentLi.parentNode;\n        } else if (isNode(parentLi.parentNode, otherNodeName)) {\n          ret = {\n            el : parentLi.parentNode,\n            other: true\n          };\n        }\n      }\n    }\n\n    // do not count list elements outside of composer\n    if (ret.el && !composer.element.contains(ret.el)) {\n      ret.el = null;\n    }\n\n    return ret;\n  };\n\n  var handleSameTypeList = function(el, nodeName, composer) {\n    var otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\",\n        otherLists, innerLists;\n    // Unwrap list\n    // <ul><li>foo</li><li>bar</li></ul>\n    // becomes:\n    // foo<br>bar<br>\n    composer.selection.executeAndRestore(function() {\n      var otherLists = getListsInSelection(otherNodeName, composer);\n      if (otherLists.length) {\n        for (var l = otherLists.length; l--;) {\n          wysihtml5.dom.renameElement(otherLists[l], nodeName.toLowerCase());\n        }\n      } else {\n        innerLists = getListsInSelection(['OL', 'UL'], composer);\n        for (var i = innerLists.length; i--;) {\n          wysihtml5.dom.resolveList(innerLists[i], composer.config.useLineBreaks);\n        }\n        wysihtml5.dom.resolveList(el, composer.config.useLineBreaks);\n      }\n    });\n  };\n\n  var handleOtherTypeList =  function(el, nodeName, composer) {\n    var otherNodeName = (nodeName === \"UL\") ? \"OL\" : \"UL\";\n    // Turn an ordered list into an unordered list\n    // <ol><li>foo</li><li>bar</li></ol>\n    // becomes:\n    // <ul><li>foo</li><li>bar</li></ul>\n    // Also rename other lists in selection\n    composer.selection.executeAndRestore(function() {\n      var renameLists = [el].concat(getListsInSelection(otherNodeName, composer));\n\n      // All selection inner lists get renamed too\n      for (var l = renameLists.length; l--;) {\n        wysihtml5.dom.renameElement(renameLists[l], nodeName.toLowerCase());\n      }\n    });\n  };\n\n  var getListsInSelection = function(nodeName, composer) {\n      var ranges = composer.selection.getOwnRanges(),\n          renameLists = [];\n\n      for (var r = ranges.length; r--;) {\n        renameLists = renameLists.concat(ranges[r].getNodes([1], function(node) {\n          return isNode(node, nodeName);\n        }));\n      }\n\n      return renameLists;\n  };\n\n  var createListFallback = function(nodeName, composer) {\n    // Fallback for Create list\n    composer.selection.executeAndRestoreRangy(function() {\n      var tempClassName =  \"_wysihtml5-temp-\" + new Date().getTime(),\n          tempElement = composer.selection.deblockAndSurround({\n            \"nodeName\": \"div\",\n            \"className\": tempClassName\n          }),\n          isEmpty, list;\n\n      // This space causes new lists to never break on enter \n      var INVISIBLE_SPACE_REG_EXP = /\\uFEFF/g;\n      tempElement.innerHTML = tempElement.innerHTML.replace(INVISIBLE_SPACE_REG_EXP, \"\");\n      \n      if (tempElement) {\n        isEmpty = wysihtml5.lang.array([\"\", \"<br>\", wysihtml5.INVISIBLE_SPACE]).contains(tempElement.innerHTML);\n        list = wysihtml5.dom.convertToList(tempElement, nodeName.toLowerCase(), composer.parent.config.uneditableContainerClassname);\n        if (isEmpty) {\n          composer.selection.selectNode(list.querySelector(\"li\"), true);\n        }\n      }\n    });\n  };\n\n  return {\n    exec: function(composer, command, nodeName) {\n      var doc           = composer.doc,\n          cmd           = (nodeName === \"OL\") ? \"insertOrderedList\" : \"insertUnorderedList\",\n          selectedNode  = composer.selection.getSelectedNode(),\n          list          = findListEl(selectedNode, nodeName, composer);\n\n      if (!list.el) {\n        if (composer.commands.support(cmd)) {\n          doc.execCommand(cmd, false, null);\n        } else {\n          createListFallback(nodeName, composer);\n        }\n      } else if (list.other) {\n        handleOtherTypeList(list.el, nodeName, composer);\n      } else {\n        handleSameTypeList(list.el, nodeName, composer);\n      }\n    },\n\n    state: function(composer, command, nodeName) {\n      var selectedNode = composer.selection.getSelectedNode(),\n          list         = findListEl(selectedNode, nodeName, composer);\n\n      return (list.el && !list.other) ? list.el : false;\n    }\n  };\n\n})(wysihtml5);;wysihtml5.commands.italic = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"i\");\n  },\n\n  state: function(composer, command) {\n    // element.ownerDocument.queryCommandState(\"italic\") results:\n    // firefox: only <i>\n    // chrome:  <i>, <em>, <blockquote>, ...\n    // ie:      <i>, <em>\n    // opera:   only <i>\n    return wysihtml5.commands.formatInline.state(composer, command, \"i\");\n  }\n};\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-center\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyCenter = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-left\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyLeft = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-right\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyRight = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var CLASS_NAME  = \"wysiwyg-text-align-justify\",\n      REG_EXP     = /wysiwyg-text-align-[0-9a-z]+/g;\n\n  wysihtml5.commands.justifyFull = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, CLASS_NAME, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: right;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignRightStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: left;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignLeftStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;(function(wysihtml5) {\n  var STYLE_STR  = \"text-align: center;\",\n      REG_EXP = /(\\s|^)text-align\\s*:\\s*[^;\\s]+;?/gi;\n\n  wysihtml5.commands.alignCenterStyle = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatBlock.exec(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatBlock.state(composer, \"formatBlock\", null, null, null, STYLE_STR, REG_EXP);\n    }\n  };\n})(wysihtml5);\n;wysihtml5.commands.redo = {\n  exec: function(composer) {\n    return composer.undoManager.redo();\n  },\n\n  state: function(composer) {\n    return false;\n  }\n};\n;wysihtml5.commands.underline = {\n  exec: function(composer, command) {\n    wysihtml5.commands.formatInline.execWithToggle(composer, command, \"u\");\n  },\n\n  state: function(composer, command) {\n    return wysihtml5.commands.formatInline.state(composer, command, \"u\");\n  }\n};\n;wysihtml5.commands.undo = {\n  exec: function(composer) {\n    return composer.undoManager.undo();\n  },\n\n  state: function(composer) {\n    return false;\n  }\n};\n;wysihtml5.commands.createTable = {\n  exec: function(composer, command, value) {\n      var col, row, html;\n      if (value && value.cols && value.rows && parseInt(value.cols, 10) > 0 && parseInt(value.rows, 10) > 0) {\n          if (value.tableStyle) {\n            html = \"<table style=\\\"\" + value.tableStyle + \"\\\">\";\n          } else {\n            html = \"<table>\";\n          }\n          html += \"<tbody>\";\n          for (row = 0; row < value.rows; row ++) {\n              html += '<tr>';\n              for (col = 0; col < value.cols; col ++) {\n                  html += \"<td>&nbsp;</td>\";\n              }\n              html += '</tr>';\n          }\n          html += \"</tbody></table>\";\n          composer.commands.exec(\"insertHTML\", html);\n          //composer.selection.insertHTML(html);\n      }\n\n\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.mergeTableCells = {\n  exec: function(composer, command) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n          if (this.state(composer, command)) {\n              wysihtml5.dom.table.unmergeCell(composer.tableSelection.start);\n          } else {\n              wysihtml5.dom.table.mergeCellsBetween(composer.tableSelection.start, composer.tableSelection.end);\n          }\n      }\n  },\n\n  state: function(composer, command) {\n      if (composer.tableSelection) {\n          var start = composer.tableSelection.start,\n              end = composer.tableSelection.end;\n          if (start && end && start == end &&\n              ((\n                  wysihtml5.dom.getAttribute(start, \"colspan\") &&\n                  parseInt(wysihtml5.dom.getAttribute(start, \"colspan\"), 10) > 1\n              ) || (\n                  wysihtml5.dom.getAttribute(start, \"rowspan\") &&\n                  parseInt(wysihtml5.dom.getAttribute(start, \"rowspan\"), 10) > 1\n              ))\n          ) {\n              return [start];\n          }\n      }\n      return false;\n  }\n};\n;wysihtml5.commands.addTableCells = {\n  exec: function(composer, command, value) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n\n          // switches start and end if start is bigger than end (reverse selection)\n          var tableSelect = wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start, composer.tableSelection.end);\n          if (value == \"before\" || value == \"above\") {\n              wysihtml5.dom.table.addCells(tableSelect.start, value);\n          } else if (value == \"after\" || value == \"below\") {\n              wysihtml5.dom.table.addCells(tableSelect.end, value);\n          }\n          setTimeout(function() {\n              composer.tableSelection.select(tableSelect.start, tableSelect.end);\n          },0);\n      }\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.deleteTableCells = {\n  exec: function(composer, command, value) {\n      if (composer.tableSelection && composer.tableSelection.start && composer.tableSelection.end) {\n          var tableSelect = wysihtml5.dom.table.orderSelectionEnds(composer.tableSelection.start, composer.tableSelection.end),\n              idx = wysihtml5.dom.table.indexOf(tableSelect.start),\n              selCell,\n              table = composer.tableSelection.table;\n\n          wysihtml5.dom.table.removeCells(tableSelect.start, value);\n          setTimeout(function() {\n              // move selection to next or previous if not present\n              selCell = wysihtml5.dom.table.findCell(table, idx);\n\n              if (!selCell){\n                  if (value == \"row\") {\n                      selCell = wysihtml5.dom.table.findCell(table, {\n                          \"row\": idx.row - 1,\n                          \"col\": idx.col\n                      });\n                  }\n\n                  if (value == \"column\") {\n                      selCell = wysihtml5.dom.table.findCell(table, {\n                          \"row\": idx.row,\n                          \"col\": idx.col - 1\n                      });\n                  }\n              }\n              if (selCell) {\n                  composer.tableSelection.select(selCell, selCell);\n              }\n          }, 0);\n\n      }\n  },\n\n  state: function(composer, command) {\n      return false;\n  }\n};\n;wysihtml5.commands.indentList = {\n  exec: function(composer, command, value) {\n    var listEls = composer.selection.getSelectionParentsByTag('LI');\n    if (listEls) {\n      return this.tryToPushLiLevel(listEls, composer.selection);\n    }\n    return false;\n  },\n\n  state: function(composer, command) {\n      return false;\n  },\n\n  tryToPushLiLevel: function(liNodes, selection) {\n    var listTag, list, prevLi, liNode, prevLiList,\n        found = false;\n\n    selection.executeAndRestoreRangy(function() {\n\n      for (var i = liNodes.length; i--;) {\n        liNode = liNodes[i];\n        listTag = (liNode.parentNode.nodeName === 'OL') ? 'OL' : 'UL';\n        list = liNode.ownerDocument.createElement(listTag);\n        prevLi = wysihtml5.dom.domNode(liNode).prev({nodeTypes: [wysihtml5.ELEMENT_NODE]});\n        prevLiList = (prevLi) ? prevLi.querySelector('ul, ol') : null;\n\n        if (prevLi) {\n          if (prevLiList) {\n            prevLiList.appendChild(liNode);\n          } else {\n            list.appendChild(liNode);\n            prevLi.appendChild(list);\n          }\n          found = true;\n        }\n      }\n\n    });\n    return found;\n  }\n};\n;wysihtml5.commands.outdentList = {\n  exec: function(composer, command, value) {\n    var listEls = composer.selection.getSelectionParentsByTag('LI');\n    if (listEls) {\n      return this.tryToPullLiLevel(listEls, composer);\n    }\n    return false;\n  },\n\n  state: function(composer, command) {\n      return false;\n  },\n\n  tryToPullLiLevel: function(liNodes, composer) {\n    var listNode, outerListNode, outerLiNode, list, prevLi, liNode, afterList,\n        found = false,\n        that = this;\n\n    composer.selection.executeAndRestoreRangy(function() {\n\n      for (var i = liNodes.length; i--;) {\n        liNode = liNodes[i];\n        if (liNode.parentNode) {\n          listNode = liNode.parentNode;\n\n          if (listNode.tagName === 'OL' || listNode.tagName === 'UL') {\n            found = true;\n\n            outerListNode = wysihtml5.dom.getParentElement(listNode.parentNode, { nodeName: ['OL', 'UL']}, false, composer.element);\n            outerLiNode = wysihtml5.dom.getParentElement(listNode.parentNode, { nodeName: ['LI']}, false, composer.element);\n\n            if (outerListNode && outerLiNode) {\n\n              if (liNode.nextSibling) {\n                afterList = that.getAfterList(listNode, liNode);\n                liNode.appendChild(afterList);\n              }\n              outerListNode.insertBefore(liNode, outerLiNode.nextSibling);\n\n            } else {\n\n              if (liNode.nextSibling) {\n                afterList = that.getAfterList(listNode, liNode);\n                liNode.appendChild(afterList);\n              }\n\n              for (var j = liNode.childNodes.length; j--;) {\n                listNode.parentNode.insertBefore(liNode.childNodes[j], listNode.nextSibling);\n              }\n\n              listNode.parentNode.insertBefore(document.createElement('br'), listNode.nextSibling);\n              liNode.parentNode.removeChild(liNode);\n\n            }\n\n            // cleanup\n            if (listNode.childNodes.length === 0) {\n                listNode.parentNode.removeChild(listNode);\n            }\n          }\n        }\n      }\n\n    });\n    return found;\n  },\n\n  getAfterList: function(listNode, liNode) {\n    var nodeName = listNode.nodeName,\n        newList = document.createElement(nodeName);\n\n    while (liNode.nextSibling) {\n      newList.appendChild(liNode.nextSibling);\n    }\n    return newList;\n  }\n\n};;/**\n * Undo Manager for wysihtml5\n * slightly inspired by http://rniwa.com/editing/undomanager.html#the-undomanager-interface\n */\n(function(wysihtml5) {\n  var Z_KEY               = 90,\n      Y_KEY               = 89,\n      BACKSPACE_KEY       = 8,\n      DELETE_KEY          = 46,\n      MAX_HISTORY_ENTRIES = 25,\n      DATA_ATTR_NODE      = \"data-wysihtml5-selection-node\",\n      DATA_ATTR_OFFSET    = \"data-wysihtml5-selection-offset\",\n      UNDO_HTML           = '<span id=\"_wysihtml5-undo\" class=\"_wysihtml5-temp\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n      REDO_HTML           = '<span id=\"_wysihtml5-redo\" class=\"_wysihtml5-temp\">' + wysihtml5.INVISIBLE_SPACE + '</span>',\n      dom                 = wysihtml5.dom;\n\n  function cleanTempElements(doc) {\n    var tempElement;\n    while (tempElement = doc.querySelector(\"._wysihtml5-temp\")) {\n      tempElement.parentNode.removeChild(tempElement);\n    }\n  }\n\n  wysihtml5.UndoManager = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.UndoManager.prototype */ {\n    constructor: function(editor) {\n      this.editor = editor;\n      this.composer = editor.composer;\n      this.element = this.composer.element;\n\n      this.position = 0;\n      this.historyStr = [];\n      this.historyDom = [];\n\n      this.transact();\n\n      this._observe();\n    },\n\n    _observe: function() {\n      var that      = this,\n          doc       = this.composer.sandbox.getDocument(),\n          lastKey;\n\n      // Catch CTRL+Z and CTRL+Y\n      dom.observe(this.element, \"keydown\", function(event) {\n        if (event.altKey || (!event.ctrlKey && !event.metaKey)) {\n          return;\n        }\n\n        var keyCode = event.keyCode,\n            isUndo = keyCode === Z_KEY && !event.shiftKey,\n            isRedo = (keyCode === Z_KEY && event.shiftKey) || (keyCode === Y_KEY);\n\n        if (isUndo) {\n          that.undo();\n          event.preventDefault();\n        } else if (isRedo) {\n          that.redo();\n          event.preventDefault();\n        }\n      });\n\n      // Catch delete and backspace\n      dom.observe(this.element, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n        if (keyCode === lastKey) {\n          return;\n        }\n\n        lastKey = keyCode;\n\n        if (keyCode === BACKSPACE_KEY || keyCode === DELETE_KEY) {\n          that.transact();\n        }\n      });\n\n      this.editor\n        .on(\"newword:composer\", function() {\n          that.transact();\n        })\n\n        .on(\"beforecommand:composer\", function() {\n          that.transact();\n        });\n    },\n\n    transact: function() {\n      var previousHtml      = this.historyStr[this.position - 1],\n          currentHtml       = this.composer.getValue(false, false),\n          composerIsVisible   = this.element.offsetWidth > 0 && this.element.offsetHeight > 0,\n          range, node, offset, element, position;\n\n      if (currentHtml === previousHtml) {\n        return;\n      }\n\n      var length = this.historyStr.length = this.historyDom.length = this.position;\n      if (length > MAX_HISTORY_ENTRIES) {\n        this.historyStr.shift();\n        this.historyDom.shift();\n        this.position--;\n      }\n\n      this.position++;\n\n      if (composerIsVisible) {\n        // Do not start saving selection if composer is not visible\n        range   = this.composer.selection.getRange();\n        node    = (range && range.startContainer) ? range.startContainer : this.element;\n        offset  = (range && range.startOffset) ? range.startOffset : 0;\n\n        if (node.nodeType === wysihtml5.ELEMENT_NODE) {\n          element = node;\n        } else {\n          element  = node.parentNode;\n          position = this.getChildNodeIndex(element, node);\n        }\n\n        element.setAttribute(DATA_ATTR_OFFSET, offset);\n        if (typeof(position) !== \"undefined\") {\n          element.setAttribute(DATA_ATTR_NODE, position);\n        }\n      }\n\n      var clone = this.element.cloneNode(!!currentHtml);\n      this.historyDom.push(clone);\n      this.historyStr.push(currentHtml);\n\n      if (element) {\n        element.removeAttribute(DATA_ATTR_OFFSET);\n        element.removeAttribute(DATA_ATTR_NODE);\n      }\n\n    },\n\n    undo: function() {\n      this.transact();\n\n      if (!this.undoPossible()) {\n        return;\n      }\n\n      this.set(this.historyDom[--this.position - 1]);\n      this.editor.fire(\"undo:composer\");\n    },\n\n    redo: function() {\n      if (!this.redoPossible()) {\n        return;\n      }\n\n      this.set(this.historyDom[++this.position - 1]);\n      this.editor.fire(\"redo:composer\");\n    },\n\n    undoPossible: function() {\n      return this.position > 1;\n    },\n\n    redoPossible: function() {\n      return this.position < this.historyStr.length;\n    },\n\n    set: function(historyEntry) {\n      this.element.innerHTML = \"\";\n\n      var i = 0,\n          childNodes = historyEntry.childNodes,\n          length = historyEntry.childNodes.length;\n\n      for (; i<length; i++) {\n        this.element.appendChild(childNodes[i].cloneNode(true));\n      }\n\n      // Restore selection\n      var offset,\n          node,\n          position;\n\n      if (historyEntry.hasAttribute(DATA_ATTR_OFFSET)) {\n        offset    = historyEntry.getAttribute(DATA_ATTR_OFFSET);\n        position  = historyEntry.getAttribute(DATA_ATTR_NODE);\n        node      = this.element;\n      } else {\n        node      = this.element.querySelector(\"[\" + DATA_ATTR_OFFSET + \"]\") || this.element;\n        offset    = node.getAttribute(DATA_ATTR_OFFSET);\n        position  = node.getAttribute(DATA_ATTR_NODE);\n        node.removeAttribute(DATA_ATTR_OFFSET);\n        node.removeAttribute(DATA_ATTR_NODE);\n      }\n\n      if (position !== null) {\n        node = this.getChildNodeByIndex(node, +position);\n      }\n\n      this.composer.selection.set(node, offset);\n    },\n\n    getChildNodeIndex: function(parent, child) {\n      var i           = 0,\n          childNodes  = parent.childNodes,\n          length      = childNodes.length;\n      for (; i<length; i++) {\n        if (childNodes[i] === child) {\n          return i;\n        }\n      }\n    },\n\n    getChildNodeByIndex: function(parent, index) {\n      return parent.childNodes[index];\n    }\n  });\n})(wysihtml5);\n;/**\n * TODO: the following methods still need unit test coverage\n */\nwysihtml5.views.View = Base.extend(\n  /** @scope wysihtml5.views.View.prototype */ {\n  constructor: function(parent, textareaElement, config) {\n    this.parent   = parent;\n    this.element  = textareaElement;\n    this.config   = config;\n    if (!this.config.noTextarea) {\n        this._observeViewChange();\n    }\n  },\n\n  _observeViewChange: function() {\n    var that = this;\n    this.parent.on(\"beforeload\", function() {\n      that.parent.on(\"change_view\", function(view) {\n        if (view === that.name) {\n          that.parent.currentView = that;\n          that.show();\n          // Using tiny delay here to make sure that the placeholder is set before focusing\n          setTimeout(function() { that.focus(); }, 0);\n        } else {\n          that.hide();\n        }\n      });\n    });\n  },\n\n  focus: function() {\n    if (this.element.ownerDocument.querySelector(\":focus\") === this.element) {\n      return;\n    }\n\n    try { this.element.focus(); } catch(e) {}\n  },\n\n  hide: function() {\n    this.element.style.display = \"none\";\n  },\n\n  show: function() {\n    this.element.style.display = \"\";\n  },\n\n  disable: function() {\n    this.element.setAttribute(\"disabled\", \"disabled\");\n  },\n\n  enable: function() {\n    this.element.removeAttribute(\"disabled\");\n  }\n});\n;(function(wysihtml5) {\n  var dom       = wysihtml5.dom,\n      browser   = wysihtml5.browser;\n\n  wysihtml5.views.Composer = wysihtml5.views.View.extend(\n    /** @scope wysihtml5.views.Composer.prototype */ {\n    name: \"composer\",\n\n    // Needed for firefox in order to display a proper caret in an empty contentEditable\n    CARET_HACK: \"<br>\",\n\n    constructor: function(parent, editableElement, config) {\n      this.base(parent, editableElement, config);\n      if (!this.config.noTextarea) {\n          this.textarea = this.parent.textarea;\n      } else {\n          this.editableArea = editableElement;\n      }\n      if (this.config.contentEditableMode) {\n          this._initContentEditableArea();\n      } else {\n          this._initSandbox();\n      }\n    },\n\n    clear: function() {\n      this.element.innerHTML = browser.displaysCaretInEmptyContentEditableCorrectly() ? \"\" : this.CARET_HACK;\n    },\n\n    getValue: function(parse, clearInternals) {\n      var value = this.isEmpty() ? \"\" : wysihtml5.quirks.getCorrectInnerHTML(this.element);\n      if (parse !== false) {\n        value = this.parent.parse(value, (clearInternals === false) ? false : true);\n      }\n\n      return value;\n    },\n\n    setValue: function(html, parse) {\n      if (parse) {\n        html = this.parent.parse(html);\n      }\n\n      try {\n        this.element.innerHTML = html;\n      } catch (e) {\n        this.element.innerText = html;\n      }\n    },\n\n    cleanUp: function() {\n        this.parent.parse(this.element);\n    },\n\n    show: function() {\n      this.editableArea.style.display = this._displayStyle || \"\";\n\n      if (!this.config.noTextarea && !this.textarea.element.disabled) {\n        // Firefox needs this, otherwise contentEditable becomes uneditable\n        this.disable();\n        this.enable();\n      }\n    },\n\n    hide: function() {\n      this._displayStyle = dom.getStyle(\"display\").from(this.editableArea);\n      if (this._displayStyle === \"none\") {\n        this._displayStyle = null;\n      }\n      this.editableArea.style.display = \"none\";\n    },\n\n    disable: function() {\n      this.parent.fire(\"disable:composer\");\n      this.element.removeAttribute(\"contentEditable\");\n    },\n\n    enable: function() {\n      this.parent.fire(\"enable:composer\");\n      this.element.setAttribute(\"contentEditable\", \"true\");\n    },\n\n    focus: function(setToEnd) {\n      // IE 8 fires the focus event after .focus()\n      // This is needed by our simulate_placeholder.js to work\n      // therefore we clear it ourselves this time\n      if (wysihtml5.browser.doesAsyncFocus() && this.hasPlaceholderSet()) {\n        this.clear();\n      }\n\n      this.base();\n\n      var lastChild = this.element.lastChild;\n      if (setToEnd && lastChild && this.selection) {\n        if (lastChild.nodeName === \"BR\") {\n          this.selection.setBefore(this.element.lastChild);\n        } else {\n          this.selection.setAfter(this.element.lastChild);\n        }\n      }\n    },\n\n    getTextContent: function() {\n      return dom.getTextContent(this.element);\n    },\n\n    hasPlaceholderSet: function() {\n      return this.getTextContent() == ((this.config.noTextarea) ? this.editableArea.getAttribute(\"data-placeholder\") : this.textarea.element.getAttribute(\"placeholder\")) && this.placeholderSet;\n    },\n\n    isEmpty: function() {\n      var innerHTML = this.element.innerHTML.toLowerCase();\n      return (/^(\\s|<br>|<\\/br>|<p>|<\\/p>)*$/i).test(innerHTML)  ||\n             innerHTML === \"\"            ||\n             innerHTML === \"<br>\"        ||\n             innerHTML === \"<p></p>\"     ||\n             innerHTML === \"<p><br></p>\" ||\n             this.hasPlaceholderSet();\n    },\n\n    _initContentEditableArea: function() {\n        var that = this;\n\n        if (this.config.noTextarea) {\n            this.sandbox = new dom.ContentEditableArea(function() {\n                that._create();\n            }, {}, this.editableArea);\n        } else {\n            this.sandbox = new dom.ContentEditableArea(function() {\n                that._create();\n            });\n            this.editableArea = this.sandbox.getContentEditable();\n            dom.insert(this.editableArea).after(this.textarea.element);\n            this._createWysiwygFormField();\n        }\n    },\n\n    _initSandbox: function() {\n      var that = this;\n\n      this.sandbox = new dom.Sandbox(function() {\n        that._create();\n      }, {\n        stylesheets:  this.config.stylesheets\n      });\n      this.editableArea  = this.sandbox.getIframe();\n\n      var textareaElement = this.textarea.element;\n      dom.insert(this.editableArea).after(textareaElement);\n\n      this._createWysiwygFormField();\n    },\n\n    // Creates hidden field which tells the server after submit, that the user used an wysiwyg editor\n    _createWysiwygFormField: function() {\n        if (this.textarea.element.form) {\n          var hiddenField = document.createElement(\"input\");\n          hiddenField.type   = \"hidden\";\n          hiddenField.name   = \"_wysihtml5_mode\";\n          hiddenField.value  = 1;\n          dom.insert(hiddenField).after(this.textarea.element);\n        }\n    },\n\n    _create: function() {\n      var that = this;\n      this.doc                = this.sandbox.getDocument();\n      this.element            = (this.config.contentEditableMode) ? this.sandbox.getContentEditable() : this.doc.body;\n      if (!this.config.noTextarea) {\n          this.textarea           = this.parent.textarea;\n          this.element.innerHTML  = this.textarea.getValue(true, false);\n      } else {\n          this.cleanUp(); // cleans contenteditable on initiation as it may contain html\n      }\n\n      // Make sure our selection handler is ready\n      this.selection = new wysihtml5.Selection(this.parent, this.element, this.config.uneditableContainerClassname);\n\n      // Make sure commands dispatcher is ready\n      this.commands  = new wysihtml5.Commands(this.parent);\n\n      if (!this.config.noTextarea) {\n          dom.copyAttributes([\n              \"className\", \"spellcheck\", \"title\", \"lang\", \"dir\", \"accessKey\"\n          ]).from(this.textarea.element).to(this.element);\n      }\n\n      dom.addClass(this.element, this.config.composerClassName);\n      //\n      // Make the editor look like the original textarea, by syncing styles\n      if (this.config.style && !this.config.contentEditableMode) {\n        this.style();\n      }\n\n      this.observe();\n\n      var name = this.config.name;\n      if (name) {\n        dom.addClass(this.element, name);\n        if (!this.config.contentEditableMode) { dom.addClass(this.editableArea, name); }\n      }\n\n      this.enable();\n\n      if (!this.config.noTextarea && this.textarea.element.disabled) {\n        this.disable();\n      }\n\n      // Simulate html5 placeholder attribute on contentEditable element\n      var placeholderText = typeof(this.config.placeholder) === \"string\"\n        ? this.config.placeholder\n        : ((this.config.noTextarea) ? this.editableArea.getAttribute(\"data-placeholder\") : this.textarea.element.getAttribute(\"placeholder\"));\n      if (placeholderText) {\n        dom.simulatePlaceholder(this.parent, this, placeholderText);\n      }\n\n      // Make sure that the browser avoids using inline styles whenever possible\n      this.commands.exec(\"styleWithCSS\", false);\n\n      this._initAutoLinking();\n      this._initObjectResizing();\n      this._initUndoManager();\n      this._initLineBreaking();\n\n      // Simulate html5 autofocus on contentEditable element\n      // This doesn't work on IOS (5.1.1)\n      if (!this.config.noTextarea && (this.textarea.element.hasAttribute(\"autofocus\") || document.querySelector(\":focus\") == this.textarea.element) && !browser.isIos()) {\n        setTimeout(function() { that.focus(true); }, 100);\n      }\n\n      // IE sometimes leaves a single paragraph, which can't be removed by the user\n      if (!browser.clearsContentEditableCorrectly()) {\n        wysihtml5.quirks.ensureProperClearing(this);\n      }\n\n      // Set up a sync that makes sure that textarea and editor have the same content\n      if (this.initSync && this.config.sync) {\n        this.initSync();\n      }\n\n      // Okay hide the textarea, we are ready to go\n      if (!this.config.noTextarea) { this.textarea.hide(); }\n\n      // Fire global (before-)load event\n      this.parent.fire(\"beforeload\").fire(\"load\");\n    },\n\n    _initAutoLinking: function() {\n      var that                           = this,\n          supportsDisablingOfAutoLinking = browser.canDisableAutoLinking(),\n          supportsAutoLinking            = browser.doesAutoLinkingInContentEditable();\n      if (supportsDisablingOfAutoLinking) {\n        this.commands.exec(\"autoUrlDetect\", false);\n      }\n\n      if (!this.config.autoLink) {\n        return;\n      }\n\n      // Only do the auto linking by ourselves when the browser doesn't support auto linking\n      // OR when he supports auto linking but we were able to turn it off (IE9+)\n      if (!supportsAutoLinking || (supportsAutoLinking && supportsDisablingOfAutoLinking)) {\n        this.parent.on(\"newword:composer\", function() {\n          if (dom.getTextContent(that.element).match(dom.autoLink.URL_REG_EXP)) {\n            that.selection.executeAndRestore(function(startContainer, endContainer) {\n              var uneditables = that.element.querySelectorAll(\".\" + that.config.uneditableContainerClassname),\n                  isInUneditable = false;\n\n              for (var i = uneditables.length; i--;) {\n                if (wysihtml5.dom.contains(uneditables[i], endContainer)) {\n                  isInUneditable = true;\n                }\n              }\n\n              if (!isInUneditable) dom.autoLink(endContainer.parentNode, [that.config.uneditableContainerClassname]);\n            });\n          }\n        });\n\n        dom.observe(this.element, \"blur\", function() {\n          dom.autoLink(that.element, [that.config.uneditableContainerClassname]);\n        });\n      }\n\n      // Assuming we have the following:\n      //  <a href=\"http://www.google.de\">http://www.google.de</a>\n      // If a user now changes the url in the innerHTML we want to make sure that\n      // it's synchronized with the href attribute (as long as the innerHTML is still a url)\n      var // Use a live NodeList to check whether there are any links in the document\n          links           = this.sandbox.getDocument().getElementsByTagName(\"a\"),\n          // The autoLink helper method reveals a reg exp to detect correct urls\n          urlRegExp       = dom.autoLink.URL_REG_EXP,\n          getTextContent  = function(element) {\n            var textContent = wysihtml5.lang.string(dom.getTextContent(element)).trim();\n            if (textContent.substr(0, 4) === \"www.\") {\n              textContent = \"http://\" + textContent;\n            }\n            return textContent;\n          };\n\n      dom.observe(this.element, \"keydown\", function(event) {\n        if (!links.length) {\n          return;\n        }\n\n        var selectedNode = that.selection.getSelectedNode(event.target.ownerDocument),\n            link         = dom.getParentElement(selectedNode, { nodeName: \"A\" }, 4),\n            textContent;\n\n        if (!link) {\n          return;\n        }\n\n        textContent = getTextContent(link);\n        // keydown is fired before the actual content is changed\n        // therefore we set a timeout to change the href\n        setTimeout(function() {\n          var newTextContent = getTextContent(link);\n          if (newTextContent === textContent) {\n            return;\n          }\n\n          // Only set href when new href looks like a valid url\n          if (newTextContent.match(urlRegExp)) {\n            link.setAttribute(\"href\", newTextContent);\n          }\n        }, 0);\n      });\n    },\n\n    _initObjectResizing: function() {\n      this.commands.exec(\"enableObjectResizing\", true);\n\n      // IE sets inline styles after resizing objects\n      // The following lines make sure that the width/height css properties\n      // are copied over to the width/height attributes\n      if (browser.supportsEvent(\"resizeend\")) {\n        var properties        = [\"width\", \"height\"],\n            propertiesLength  = properties.length,\n            element           = this.element;\n\n        dom.observe(element, \"resizeend\", function(event) {\n          var target = event.target || event.srcElement,\n              style  = target.style,\n              i      = 0,\n              property;\n\n          if (target.nodeName !== \"IMG\") {\n            return;\n          }\n\n          for (; i<propertiesLength; i++) {\n            property = properties[i];\n            if (style[property]) {\n              target.setAttribute(property, parseInt(style[property], 10));\n              style[property] = \"\";\n            }\n          }\n\n          // After resizing IE sometimes forgets to remove the old resize handles\n          wysihtml5.quirks.redraw(element);\n        });\n      }\n    },\n\n    _initUndoManager: function() {\n      this.undoManager = new wysihtml5.UndoManager(this.parent);\n    },\n\n    _initLineBreaking: function() {\n      var that                              = this,\n          USE_NATIVE_LINE_BREAK_INSIDE_TAGS = [\"LI\", \"P\", \"H1\", \"H2\", \"H3\", \"H4\", \"H5\", \"H6\"],\n          LIST_TAGS                         = [\"UL\", \"OL\", \"MENU\"];\n\n      function adjust(selectedNode) {\n        var parentElement = dom.getParentElement(selectedNode, { nodeName: [\"P\", \"DIV\"] }, 2);\n        if (parentElement && dom.contains(that.element, parentElement)) {\n          that.selection.executeAndRestore(function() {\n            if (that.config.useLineBreaks) {\n              dom.replaceWithChildNodes(parentElement);\n            } else if (parentElement.nodeName !== \"P\") {\n              dom.renameElement(parentElement, \"p\");\n            }\n          });\n        }\n      }\n\n      if (!this.config.useLineBreaks) {\n        dom.observe(this.element, [\"focus\", \"keydown\"], function() {\n          if (that.isEmpty()) {\n            var paragraph = that.doc.createElement(\"P\");\n            that.element.innerHTML = \"\";\n            that.element.appendChild(paragraph);\n            if (!browser.displaysCaretInEmptyContentEditableCorrectly()) {\n              paragraph.innerHTML = \"<br>\";\n              that.selection.setBefore(paragraph.firstChild);\n            } else {\n              that.selection.selectNode(paragraph, true);\n            }\n          }\n        });\n      }\n\n      // Under certain circumstances Chrome + Safari create nested <p> or <hX> tags after paste\n      // Inserting an invisible white space in front of it fixes the issue\n      // This is too hacky and causes selection not to replace content on paste in chrome\n     /* if (browser.createsNestedInvalidMarkupAfterPaste()) {\n        dom.observe(this.element, \"paste\", function(event) {\n          var invisibleSpace = that.doc.createTextNode(wysihtml5.INVISIBLE_SPACE);\n          that.selection.insertNode(invisibleSpace);\n        });\n      }*/\n\n\n      dom.observe(this.element, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n\n        if (event.shiftKey) {\n          return;\n        }\n\n        if (keyCode !== wysihtml5.ENTER_KEY && keyCode !== wysihtml5.BACKSPACE_KEY) {\n          return;\n        }\n        var blockElement = dom.getParentElement(that.selection.getSelectedNode(), { nodeName: USE_NATIVE_LINE_BREAK_INSIDE_TAGS }, 4);\n        if (blockElement) {\n          setTimeout(function() {\n            // Unwrap paragraph after leaving a list or a H1-6\n            var selectedNode = that.selection.getSelectedNode(),\n                list;\n\n            if (blockElement.nodeName === \"LI\") {\n              if (!selectedNode) {\n                return;\n              }\n\n              list = dom.getParentElement(selectedNode, { nodeName: LIST_TAGS }, 2);\n\n              if (!list) {\n                adjust(selectedNode);\n              }\n            }\n\n            if (keyCode === wysihtml5.ENTER_KEY && blockElement.nodeName.match(/^H[1-6]$/)) {\n              adjust(selectedNode);\n            }\n          }, 0);\n          return;\n        }\n\n        if (that.config.useLineBreaks && keyCode === wysihtml5.ENTER_KEY && !wysihtml5.browser.insertsLineBreaksOnReturn()) {\n          event.preventDefault();\n          that.commands.exec(\"insertLineBreak\");\n\n        }\n      });\n    }\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom             = wysihtml5.dom,\n      doc             = document,\n      win             = window,\n      HOST_TEMPLATE   = doc.createElement(\"div\"),\n      /**\n       * Styles to copy from textarea to the composer element\n       */\n      TEXT_FORMATTING = [\n        \"background-color\",\n        \"color\", \"cursor\",\n        \"font-family\", \"font-size\", \"font-style\", \"font-variant\", \"font-weight\",\n        \"line-height\", \"letter-spacing\",\n        \"text-align\", \"text-decoration\", \"text-indent\", \"text-rendering\",\n        \"word-break\", \"word-wrap\", \"word-spacing\"\n      ],\n      /**\n       * Styles to copy from textarea to the iframe\n       */\n      BOX_FORMATTING = [\n        \"background-color\",\n        \"border-collapse\",\n        \"border-bottom-color\", \"border-bottom-style\", \"border-bottom-width\",\n        \"border-left-color\", \"border-left-style\", \"border-left-width\",\n        \"border-right-color\", \"border-right-style\", \"border-right-width\",\n        \"border-top-color\", \"border-top-style\", \"border-top-width\",\n        \"clear\", \"display\", \"float\",\n        \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n        \"outline-color\", \"outline-offset\", \"outline-width\", \"outline-style\",\n        \"padding-left\", \"padding-right\", \"padding-top\", \"padding-bottom\",\n        \"position\", \"top\", \"left\", \"right\", \"bottom\", \"z-index\",\n        \"vertical-align\", \"text-align\",\n        \"-webkit-box-sizing\", \"-moz-box-sizing\", \"-ms-box-sizing\", \"box-sizing\",\n        \"-webkit-box-shadow\", \"-moz-box-shadow\", \"-ms-box-shadow\",\"box-shadow\",\n        \"-webkit-border-top-right-radius\", \"-moz-border-radius-topright\", \"border-top-right-radius\",\n        \"-webkit-border-bottom-right-radius\", \"-moz-border-radius-bottomright\", \"border-bottom-right-radius\",\n        \"-webkit-border-bottom-left-radius\", \"-moz-border-radius-bottomleft\", \"border-bottom-left-radius\",\n        \"-webkit-border-top-left-radius\", \"-moz-border-radius-topleft\", \"border-top-left-radius\",\n        \"width\", \"height\"\n      ],\n      ADDITIONAL_CSS_RULES = [\n        \"html                 { height: 100%; }\",\n        \"body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }\",\n        \"body > p:first-child { margin-top: 0; }\",\n        \"._wysihtml5-temp     { display: none; }\",\n        wysihtml5.browser.isGecko ?\n          \"body.placeholder { color: graytext !important; }\" :\n          \"body.placeholder { color: #a9a9a9 !important; }\",\n        // Ensure that user see's broken images and can delete them\n        \"img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }\"\n      ];\n\n  /**\n   * With \"setActive\" IE offers a smart way of focusing elements without scrolling them into view:\n   * http://msdn.microsoft.com/en-us/library/ms536738(v=vs.85).aspx\n   *\n   * Other browsers need a more hacky way: (pssst don't tell my mama)\n   * In order to prevent the element being scrolled into view when focusing it, we simply\n   * move it out of the scrollable area, focus it, and reset it's position\n   */\n  var focusWithoutScrolling = function(element) {\n    if (element.setActive) {\n      // Following line could cause a js error when the textarea is invisible\n      // See https://github.com/xing/wysihtml5/issues/9\n      try { element.setActive(); } catch(e) {}\n    } else {\n      var elementStyle = element.style,\n          originalScrollTop = doc.documentElement.scrollTop || doc.body.scrollTop,\n          originalScrollLeft = doc.documentElement.scrollLeft || doc.body.scrollLeft,\n          originalStyles = {\n            position:         elementStyle.position,\n            top:              elementStyle.top,\n            left:             elementStyle.left,\n            WebkitUserSelect: elementStyle.WebkitUserSelect\n          };\n\n      dom.setStyles({\n        position:         \"absolute\",\n        top:              \"-99999px\",\n        left:             \"-99999px\",\n        // Don't ask why but temporarily setting -webkit-user-select to none makes the whole thing performing smoother\n        WebkitUserSelect: \"none\"\n      }).on(element);\n\n      element.focus();\n\n      dom.setStyles(originalStyles).on(element);\n\n      if (win.scrollTo) {\n        // Some browser extensions unset this method to prevent annoyances\n        // \"Better PopUp Blocker\" for Chrome http://code.google.com/p/betterpopupblocker/source/browse/trunk/blockStart.js#100\n        // Issue: http://code.google.com/p/betterpopupblocker/issues/detail?id=1\n        win.scrollTo(originalScrollLeft, originalScrollTop);\n      }\n    }\n  };\n\n\n  wysihtml5.views.Composer.prototype.style = function() {\n    var that                  = this,\n        originalActiveElement = doc.querySelector(\":focus\"),\n        textareaElement       = this.textarea.element,\n        hasPlaceholder        = textareaElement.hasAttribute(\"placeholder\"),\n        originalPlaceholder   = hasPlaceholder && textareaElement.getAttribute(\"placeholder\"),\n        originalDisplayValue  = textareaElement.style.display,\n        originalDisabled      = textareaElement.disabled,\n        displayValueForCopying;\n\n    this.focusStylesHost      = HOST_TEMPLATE.cloneNode(false);\n    this.blurStylesHost       = HOST_TEMPLATE.cloneNode(false);\n    this.disabledStylesHost   = HOST_TEMPLATE.cloneNode(false);\n\n    // Remove placeholder before copying (as the placeholder has an affect on the computed style)\n    if (hasPlaceholder) {\n      textareaElement.removeAttribute(\"placeholder\");\n    }\n\n    if (textareaElement === originalActiveElement) {\n      textareaElement.blur();\n    }\n\n    // enable for copying styles\n    textareaElement.disabled = false;\n\n    // set textarea to display=\"none\" to get cascaded styles via getComputedStyle\n    textareaElement.style.display = displayValueForCopying = \"none\";\n\n    if ((textareaElement.getAttribute(\"rows\") && dom.getStyle(\"height\").from(textareaElement) === \"auto\") ||\n        (textareaElement.getAttribute(\"cols\") && dom.getStyle(\"width\").from(textareaElement) === \"auto\")) {\n      textareaElement.style.display = displayValueForCopying = originalDisplayValue;\n    }\n\n    // --------- iframe styles (has to be set before editor styles, otherwise IE9 sets wrong fontFamily on blurStylesHost) ---------\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.editableArea).andTo(this.blurStylesHost);\n\n    // --------- editor styles ---------\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.element).andTo(this.blurStylesHost);\n\n    // --------- apply standard rules ---------\n    dom.insertCSS(ADDITIONAL_CSS_RULES).into(this.element.ownerDocument);\n\n    // --------- :disabled styles ---------\n    textareaElement.disabled = true;\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.disabledStylesHost);\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.disabledStylesHost);\n    textareaElement.disabled = originalDisabled;\n\n    // --------- :focus styles ---------\n    textareaElement.style.display = originalDisplayValue;\n    focusWithoutScrolling(textareaElement);\n    textareaElement.style.display = displayValueForCopying;\n\n    dom.copyStyles(BOX_FORMATTING).from(textareaElement).to(this.focusStylesHost);\n    dom.copyStyles(TEXT_FORMATTING).from(textareaElement).to(this.focusStylesHost);\n\n    // reset textarea\n    textareaElement.style.display = originalDisplayValue;\n\n    dom.copyStyles([\"display\"]).from(textareaElement).to(this.editableArea);\n\n    // Make sure that we don't change the display style of the iframe when copying styles oblur/onfocus\n    // this is needed for when the change_view event is fired where the iframe is hidden and then\n    // the blur event fires and re-displays it\n    var boxFormattingStyles = wysihtml5.lang.array(BOX_FORMATTING).without([\"display\"]);\n\n    // --------- restore focus ---------\n    if (originalActiveElement) {\n      originalActiveElement.focus();\n    } else {\n      textareaElement.blur();\n    }\n\n    // --------- restore placeholder ---------\n    if (hasPlaceholder) {\n      textareaElement.setAttribute(\"placeholder\", originalPlaceholder);\n    }\n\n    // --------- Sync focus/blur styles ---------\n    this.parent.on(\"focus:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.focusStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.focusStylesHost).to(that.element);\n    });\n\n    this.parent.on(\"blur:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.blurStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.blurStylesHost).to(that.element);\n    });\n\n    this.parent.observe(\"disable:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.disabledStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.disabledStylesHost).to(that.element);\n    });\n\n    this.parent.observe(\"enable:composer\", function() {\n      dom.copyStyles(boxFormattingStyles) .from(that.blurStylesHost).to(that.editableArea);\n      dom.copyStyles(TEXT_FORMATTING)     .from(that.blurStylesHost).to(that.element);\n    });\n\n    return this;\n  };\n})(wysihtml5);\n;/**\n * Taking care of events\n *  - Simulating 'change' event on contentEditable element\n *  - Handling drag & drop logic\n *  - Catch paste events\n *  - Dispatch proprietary newword:composer event\n *  - Keyboard shortcuts\n */\n(function(wysihtml5) {\n  var dom       = wysihtml5.dom,\n      browser   = wysihtml5.browser,\n      /**\n       * Map keyCodes to query commands\n       */\n      shortcuts = {\n        \"66\": \"bold\",     // B\n        \"73\": \"italic\",   // I\n        \"85\": \"underline\" // U\n      };\n\n  var deleteAroundEditable = function(selection, uneditable, element) {\n    // merge node with previous node from uneditable\n    var prevNode = selection.getPreviousNode(uneditable, true),\n        curNode = selection.getSelectedNode();\n\n    if (curNode.nodeType !== 1 && curNode.parentNode !== element) { curNode = curNode.parentNode; }\n    if (prevNode) {\n      if (curNode.nodeType == 1) {\n        var first = curNode.firstChild;\n\n        if (prevNode.nodeType == 1) {\n          while (curNode.firstChild) {\n            prevNode.appendChild(curNode.firstChild);\n          }\n        } else {\n          while (curNode.firstChild) {\n            uneditable.parentNode.insertBefore(curNode.firstChild, uneditable);\n          }\n        }\n        if (curNode.parentNode) {\n          curNode.parentNode.removeChild(curNode);\n        }\n        selection.setBefore(first);\n      } else {\n        if (prevNode.nodeType == 1) {\n          prevNode.appendChild(curNode);\n        } else {\n          uneditable.parentNode.insertBefore(curNode, uneditable);\n        }\n        selection.setBefore(curNode);\n      }\n    }\n  };\n\n  var handleDeleteKeyPress = function(event, selection, element, composer) {\n    if (selection.isCollapsed()) {\n      if (selection.caretIsInTheBeginnig('LI')) {\n        event.preventDefault();\n        composer.commands.exec('outdentList');\n      } else if (selection.caretIsInTheBeginnig()) {\n        event.preventDefault();\n      } else {\n\n        if (selection.caretIsFirstInSelection() &&\n            selection.getPreviousNode() &&\n            selection.getPreviousNode().nodeName &&\n            (/^H\\d$/gi).test(selection.getPreviousNode().nodeName)\n        ) {\n          var prevNode = selection.getPreviousNode();\n          event.preventDefault();\n          if ((/^\\s*$/).test(prevNode.textContent || prevNode.innerText)) {\n            // heading is empty\n            prevNode.parentNode.removeChild(prevNode);\n          } else {\n            var range = prevNode.ownerDocument.createRange();\n            range.selectNodeContents(prevNode);\n            range.collapse(false);\n            selection.setSelection(range);\n          }\n        }\n\n        var beforeUneditable = selection.caretIsBeforeUneditable();\n        // Do a special delete if caret would delete uneditable\n        if (beforeUneditable) {\n          event.preventDefault();\n          deleteAroundEditable(selection, beforeUneditable, element);\n        }\n      }\n    } else {\n      if (selection.containsUneditable()) {\n        event.preventDefault();\n        selection.deleteContents();\n      }\n    }\n  };\n\n  var handleTabKeyDown = function(composer, element) {\n    if (!composer.selection.isCollapsed()) {\n      composer.selection.deleteContents();\n    } else if (composer.selection.caretIsInTheBeginnig('LI')) {\n      if (composer.commands.exec('indentList')) return;\n    }\n\n    // Is &emsp; close enough to tab. Could not find enough counter arguments for now.\n    composer.commands.exec(\"insertHTML\", \"&emsp;\");\n  };\n\n  wysihtml5.views.Composer.prototype.observe = function() {\n    var that                = this,\n        state               = this.getValue(false, false),\n        container           = (this.sandbox.getIframe) ? this.sandbox.getIframe() : this.sandbox.getContentEditable(),\n        element             = this.element,\n        focusBlurElement    = (browser.supportsEventsInIframeCorrectly() || this.sandbox.getContentEditable) ? element : this.sandbox.getWindow(),\n        pasteEvents         = [\"drop\", \"paste\", \"beforepaste\"],\n        interactionEvents   = [\"drop\", \"paste\", \"mouseup\", \"focus\", \"keyup\"];\n\n    // --------- destroy:composer event ---------\n    dom.observe(container, \"DOMNodeRemoved\", function() {\n      clearInterval(domNodeRemovedInterval);\n      that.parent.fire(\"destroy:composer\");\n    });\n\n    // DOMNodeRemoved event is not supported in IE 8\n    if (!browser.supportsMutationEvents()) {\n        var domNodeRemovedInterval = setInterval(function() {\n          if (!dom.contains(document.documentElement, container)) {\n            clearInterval(domNodeRemovedInterval);\n            that.parent.fire(\"destroy:composer\");\n          }\n        }, 250);\n    }\n\n    // --------- User interaction tracking --\n\n    dom.observe(focusBlurElement, interactionEvents, function() {\n      setTimeout(function() {\n        that.parent.fire(\"interaction\").fire(\"interaction:composer\");\n      }, 0);\n    });\n\n\n    if (this.config.handleTables) {\n      if(!this.tableClickHandle && this.doc.execCommand && wysihtml5.browser.supportsCommand(this.doc, \"enableObjectResizing\") && wysihtml5.browser.supportsCommand(this.doc, \"enableInlineTableEditing\")) {\n        if (this.sandbox.getIframe) {\n          this.tableClickHandle = dom.observe(container , [\"focus\", \"mouseup\", \"mouseover\"], function() {\n            that.doc.execCommand(\"enableObjectResizing\", false, \"false\");\n            that.doc.execCommand(\"enableInlineTableEditing\", false, \"false\");\n            that.tableClickHandle.stop();\n          });\n        } else {\n          setTimeout(function() {\n            that.doc.execCommand(\"enableObjectResizing\", false, \"false\");\n            that.doc.execCommand(\"enableInlineTableEditing\", false, \"false\");\n          }, 0);\n        }\n      }\n      this.tableSelection = wysihtml5.quirks.tableCellsSelection(element, that.parent);\n    }\n\n    // --------- Focus & blur logic ---------\n    dom.observe(focusBlurElement, \"focus\", function(event) {\n      that.parent.fire(\"focus\", event).fire(\"focus:composer\", event);\n\n      // Delay storing of state until all focus handler are fired\n      // especially the one which resets the placeholder\n      setTimeout(function() { state = that.getValue(false, false); }, 0);\n    });\n\n    dom.observe(focusBlurElement, \"blur\", function(event) {\n      if (state !== that.getValue(false, false)) {\n        //create change event if supported (all except IE8)\n        var changeevent = event;\n        if(typeof Object.create == 'function') {\n          changeevent = Object.create(event, { type: { value: 'change' } });\n        }\n        that.parent.fire(\"change\", changeevent).fire(\"change:composer\", changeevent);\n      }\n      that.parent.fire(\"blur\", event).fire(\"blur:composer\", event);\n    });\n\n    // --------- Drag & Drop logic ---------\n    dom.observe(element, \"dragenter\", function() {\n      that.parent.fire(\"unset_placeholder\");\n    });\n\n    dom.observe(element, pasteEvents, function(event) {\n      that.parent.fire(event.type, event).fire(event.type + \":composer\", event);\n    });\n\n\n    if (this.config.copyedFromMarking) {\n      // If supported the copied source is based directly on selection\n      // Very useful for webkit based browsers where copy will otherwise contain a lot of code and styles based on whatever and not actually in selection.\n      dom.observe(element, \"copy\", function(event) {\n        if (event.clipboardData) {\n          event.clipboardData.setData(\"text/html\", that.config.copyedFromMarking + that.selection.getHtml());\n          event.preventDefault();\n        }\n        that.parent.fire(event.type, event).fire(event.type + \":composer\", event);\n      });\n    }\n\n    // --------- neword event ---------\n    dom.observe(element, \"keyup\", function(event) {\n      var keyCode = event.keyCode;\n      if (keyCode === wysihtml5.SPACE_KEY || keyCode === wysihtml5.ENTER_KEY) {\n        that.parent.fire(\"newword:composer\");\n      }\n    });\n\n    this.parent.on(\"paste:composer\", function() {\n      setTimeout(function() { that.parent.fire(\"newword:composer\"); }, 0);\n    });\n\n    // --------- Make sure that images are selected when clicking on them ---------\n    if (!browser.canSelectImagesInContentEditable()) {\n      dom.observe(element, \"mousedown\", function(event) {\n        var target = event.target;\n        var allImages = element.querySelectorAll('img'),\n            notMyImages = element.querySelectorAll('.' + that.config.uneditableContainerClassname + ' img'),\n            myImages = wysihtml5.lang.array(allImages).without(notMyImages);\n\n        if (target.nodeName === \"IMG\" && wysihtml5.lang.array(myImages).contains(target)) {\n          that.selection.selectNode(target);\n        }\n      });\n    }\n\n    if (!browser.canSelectImagesInContentEditable()) {\n        dom.observe(element, \"drop\", function(event) {\n            // TODO: if I knew how to get dropped elements list from event I could limit it to only IMG element case\n            setTimeout(function() {\n                that.selection.getSelection().removeAllRanges();\n            }, 0);\n        });\n    }\n\n    if (browser.hasHistoryIssue() && browser.supportsSelectionModify()) {\n      dom.observe(element, \"keydown\", function(event) {\n        if (!event.metaKey && !event.ctrlKey) {\n          return;\n        }\n\n        var keyCode   = event.keyCode,\n            win       = element.ownerDocument.defaultView,\n            selection = win.getSelection();\n\n        if (keyCode === 37 || keyCode === 39) {\n          if (keyCode === 37) {\n            selection.modify(\"extend\", \"left\", \"lineboundary\");\n            if (!event.shiftKey) {\n              selection.collapseToStart();\n            }\n          }\n          if (keyCode === 39) {\n            selection.modify(\"extend\", \"right\", \"lineboundary\");\n            if (!event.shiftKey) {\n              selection.collapseToEnd();\n            }\n          }\n          event.preventDefault();\n        }\n      });\n    }\n\n    // --------- Shortcut logic ---------\n    dom.observe(element, \"keydown\", function(event) {\n      var keyCode  = event.keyCode,\n          command  = shortcuts[keyCode];\n      if ((event.ctrlKey || event.metaKey) && !event.altKey && command) {\n        that.commands.exec(command);\n        event.preventDefault();\n      }\n      if (keyCode === 8) {\n        // delete key\n        handleDeleteKeyPress(event, that.selection, element, that);\n      } else if (that.config.handleTabKey && keyCode === 9) {\n        event.preventDefault();\n        handleTabKeyDown(that, element);\n      }\n    });\n\n    // --------- Make sure that when pressing backspace/delete on selected images deletes the image and it's anchor ---------\n    dom.observe(element, \"keydown\", function(event) {\n      var target  = that.selection.getSelectedNode(true),\n          keyCode = event.keyCode,\n          parent;\n      if (target && target.nodeName === \"IMG\" && (keyCode === wysihtml5.BACKSPACE_KEY || keyCode === wysihtml5.DELETE_KEY)) { // 8 => backspace, 46 => delete\n        parent = target.parentNode;\n        // delete the <img>\n        parent.removeChild(target);\n        // and it's parent <a> too if it hasn't got any other child nodes\n        if (parent.nodeName === \"A\" && !parent.firstChild) {\n          parent.parentNode.removeChild(parent);\n        }\n\n        setTimeout(function() { wysihtml5.quirks.redraw(element); }, 0);\n        event.preventDefault();\n      }\n    });\n\n    // --------- IE 8+9 focus the editor when the iframe is clicked (without actually firing the 'focus' event on the <body>) ---------\n    if (!this.config.contentEditableMode && browser.hasIframeFocusIssue()) {\n      dom.observe(container, \"focus\", function() {\n        setTimeout(function() {\n          if (that.doc.querySelector(\":focus\") !== that.element) {\n            that.focus();\n          }\n        }, 0);\n      });\n\n      dom.observe(this.element, \"blur\", function() {\n        setTimeout(function() {\n          that.selection.getSelection().removeAllRanges();\n        }, 0);\n      });\n    }\n\n    // --------- Show url in tooltip when hovering links or images ---------\n    var titlePrefixes = {\n      IMG: \"Image: \",\n      A:   \"Link: \"\n    };\n\n    dom.observe(element, \"mouseover\", function(event) {\n      var target   = event.target,\n          nodeName = target.nodeName,\n          title;\n      if (nodeName !== \"A\" && nodeName !== \"IMG\") {\n        return;\n      }\n      var hasTitle = target.hasAttribute(\"title\");\n      if(!hasTitle){\n        title = titlePrefixes[nodeName] + (target.getAttribute(\"href\") || target.getAttribute(\"src\"));\n        target.setAttribute(\"title\", title);\n      }\n    });\n  };\n})(wysihtml5);\n;/**\n * Class that takes care that the value of the composer and the textarea is always in sync\n */\n(function(wysihtml5) {\n  var INTERVAL = 400;\n\n  wysihtml5.views.Synchronizer = Base.extend(\n    /** @scope wysihtml5.views.Synchronizer.prototype */ {\n\n    constructor: function(editor, textarea, composer) {\n      this.editor   = editor;\n      this.textarea = textarea;\n      this.composer = composer;\n\n      this._observe();\n    },\n\n    /**\n     * Sync html from composer to textarea\n     * Takes care of placeholders\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the textarea\n     */\n    fromComposerToTextarea: function(shouldParseHtml) {\n      this.textarea.setValue(wysihtml5.lang.string(this.composer.getValue(false, false)).trim(), shouldParseHtml);\n    },\n\n    /**\n     * Sync value of textarea to composer\n     * Takes care of placeholders\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the composer\n     */\n    fromTextareaToComposer: function(shouldParseHtml) {\n      var textareaValue = this.textarea.getValue(false, false);\n      if (textareaValue) {\n        this.composer.setValue(textareaValue, shouldParseHtml);\n      } else {\n        this.composer.clear();\n        this.editor.fire(\"set_placeholder\");\n      }\n    },\n\n    /**\n     * Invoke syncing based on view state\n     * @param {Boolean} shouldParseHtml Whether the html should be sanitized before inserting it into the composer/textarea\n     */\n    sync: function(shouldParseHtml) {\n      if (this.editor.currentView.name === \"textarea\") {\n        this.fromTextareaToComposer(shouldParseHtml);\n      } else {\n        this.fromComposerToTextarea(shouldParseHtml);\n      }\n    },\n\n    /**\n     * Initializes interval-based syncing\n     * also makes sure that on-submit the composer's content is synced with the textarea\n     * immediately when the form gets submitted\n     */\n    _observe: function() {\n      var interval,\n          that          = this,\n          form          = this.textarea.element.form,\n          startInterval = function() {\n            interval = setInterval(function() { that.fromComposerToTextarea(); }, INTERVAL);\n          },\n          stopInterval  = function() {\n            clearInterval(interval);\n            interval = null;\n          };\n\n      startInterval();\n\n      if (form) {\n        // If the textarea is in a form make sure that after onreset and onsubmit the composer\n        // has the correct state\n        wysihtml5.dom.observe(form, \"submit\", function() {\n          that.sync(true);\n        });\n        wysihtml5.dom.observe(form, \"reset\", function() {\n          setTimeout(function() { that.fromTextareaToComposer(); }, 0);\n        });\n      }\n\n      this.editor.on(\"change_view\", function(view) {\n        if (view === \"composer\" && !interval) {\n          that.fromTextareaToComposer(true);\n          startInterval();\n        } else if (view === \"textarea\") {\n          that.fromComposerToTextarea(true);\n          stopInterval();\n        }\n      });\n\n      this.editor.on(\"destroy:composer\", stopInterval);\n    }\n  });\n})(wysihtml5);\n;wysihtml5.views.Textarea = wysihtml5.views.View.extend(\n  /** @scope wysihtml5.views.Textarea.prototype */ {\n  name: \"textarea\",\n\n  constructor: function(parent, textareaElement, config) {\n    this.base(parent, textareaElement, config);\n\n    this._observe();\n  },\n\n  clear: function() {\n    this.element.value = \"\";\n  },\n\n  getValue: function(parse) {\n    var value = this.isEmpty() ? \"\" : this.element.value;\n    if (parse !== false) {\n      value = this.parent.parse(value);\n    }\n    return value;\n  },\n\n  setValue: function(html, parse) {\n    if (parse) {\n      html = this.parent.parse(html);\n    }\n    this.element.value = html;\n  },\n\n  cleanUp: function() {\n      var html = this.parent.parse(this.element.value);\n      this.element.value = html;\n  },\n\n  hasPlaceholderSet: function() {\n    var supportsPlaceholder = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),\n        placeholderText     = this.element.getAttribute(\"placeholder\") || null,\n        value               = this.element.value,\n        isEmpty             = !value;\n    return (supportsPlaceholder && isEmpty) || (value === placeholderText);\n  },\n\n  isEmpty: function() {\n    return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet();\n  },\n\n  _observe: function() {\n    var element = this.element,\n        parent  = this.parent,\n        eventMapping = {\n          focusin:  \"focus\",\n          focusout: \"blur\"\n        },\n        /**\n         * Calling focus() or blur() on an element doesn't synchronously trigger the attached focus/blur events\n         * This is the case for focusin and focusout, so let's use them whenever possible, kkthxbai\n         */\n        events = wysihtml5.browser.supportsEvent(\"focusin\") ? [\"focusin\", \"focusout\", \"change\"] : [\"focus\", \"blur\", \"change\"];\n\n    parent.on(\"beforeload\", function() {\n      wysihtml5.dom.observe(element, events, function(event) {\n        var eventName = eventMapping[event.type] || event.type;\n        parent.fire(eventName).fire(eventName + \":textarea\");\n      });\n\n      wysihtml5.dom.observe(element, [\"paste\", \"drop\"], function() {\n        setTimeout(function() { parent.fire(\"paste\").fire(\"paste:textarea\"); }, 0);\n      });\n    });\n  }\n});\n;/**\n * WYSIHTML5 Editor\n *\n * @param {Element} editableElement Reference to the textarea which should be turned into a rich text interface\n * @param {Object} [config] See defaultConfig object below for explanation of each individual config option\n *\n * @events\n *    load\n *    beforeload (for internal use only)\n *    focus\n *    focus:composer\n *    focus:textarea\n *    blur\n *    blur:composer\n *    blur:textarea\n *    change\n *    change:composer\n *    change:textarea\n *    paste\n *    paste:composer\n *    paste:textarea\n *    newword:composer\n *    destroy:composer\n *    undo:composer\n *    redo:composer\n *    beforecommand:composer\n *    aftercommand:composer\n *    enable:composer\n *    disable:composer\n *    change_view\n */\n(function(wysihtml5) {\n  var undef;\n\n  var defaultConfig = {\n    // Give the editor a name, the name will also be set as class name on the iframe and on the iframe's body\n    name:                 undef,\n    // Whether the editor should look like the textarea (by adopting styles)\n    style:                true,\n    // Id of the toolbar element, pass falsey value if you don't want any toolbar logic\n    toolbar:              undef,\n    // Whether toolbar is displayed after init by script automatically.\n    // Can be set to false if toolobar is set to display only on editable area focus\n    showToolbarAfterInit: true,\n    // Whether urls, entered by the user should automatically become clickable-links\n    autoLink:             true,\n    // Includes table editing events and cell selection tracking\n    handleTables:         true,\n    // Tab key inserts tab into text as default behaviour. It can be disabled to regain keyboard navigation\n    handleTabKey:         true,\n    // Object which includes parser rules to apply when html gets cleaned\n    // See parser_rules/*.js for examples\n    parserRules:          { tags: { br: {}, span: {}, div: {}, p: {} }, classes: {} },\n    // Object which includes parser when the user inserts content via copy & paste. If null parserRules will be used instead\n    pasteParserRulesets: null,\n    // Parser method to use when the user inserts content\n    parser:               wysihtml5.dom.parse,\n    // Class name which should be set on the contentEditable element in the created sandbox iframe, can be styled via the 'stylesheets' option\n    composerClassName:    \"wysihtml5-editor\",\n    // Class name to add to the body when the wysihtml5 editor is supported\n    bodyClassName:        \"wysihtml5-supported\",\n    // By default wysihtml5 will insert a <br> for line breaks, set this to false to use <p>\n    useLineBreaks:        true,\n    // Array (or single string) of stylesheet urls to be loaded in the editor's iframe\n    stylesheets:          [],\n    // Placeholder text to use, defaults to the placeholder attribute on the textarea element\n    placeholderText:      undef,\n    // Whether the rich text editor should be rendered on touch devices (wysihtml5 >= 0.3.0 comes with basic support for iOS 5)\n    supportTouchDevices:  true,\n    // Whether senseless <span> elements (empty or without attributes) should be removed/replaced with their content\n    cleanUp:              true,\n    // Whether to use div instead of secure iframe\n    contentEditableMode: false,\n    // Classname of container that editor should not touch and pass through\n    // Pass false to disable\n    uneditableContainerClassname: \"wysihtml5-uneditable-container\",\n    // Browsers that support copied source handling will get a marking of the origin of the copied source (for determinig code cleanup rules on paste)\n    // Also copied source is based directly on selection - \n    // (very useful for webkit based browsers where copy will otherwise contain a lot of code and styles based on whatever and not actually in selection).\n    // If falsy value is passed source override is also disabled\n    copyedFromMarking: '<meta name=\"copied-from\" content=\"wysihtml5\">'\n  };\n\n  wysihtml5.Editor = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.Editor.prototype */ {\n    constructor: function(editableElement, config) {\n      this.editableElement  = typeof(editableElement) === \"string\" ? document.getElementById(editableElement) : editableElement;\n      this.config           = wysihtml5.lang.object({}).merge(defaultConfig).merge(config).get();\n      this._isCompatible    = wysihtml5.browser.supported();\n\n      if (this.editableElement.nodeName.toLowerCase() != \"textarea\") {\n          this.config.contentEditableMode = true;\n          this.config.noTextarea = true;\n      }\n      if (!this.config.noTextarea) {\n          this.textarea         = new wysihtml5.views.Textarea(this, this.editableElement, this.config);\n          this.currentView      = this.textarea;\n      }\n\n      // Sort out unsupported/unwanted browsers here\n      if (!this._isCompatible || (!this.config.supportTouchDevices && wysihtml5.browser.isTouchDevice())) {\n        var that = this;\n        setTimeout(function() { that.fire(\"beforeload\").fire(\"load\"); }, 0);\n        return;\n      }\n\n      // Add class name to body, to indicate that the editor is supported\n      wysihtml5.dom.addClass(document.body, this.config.bodyClassName);\n\n      this.composer = new wysihtml5.views.Composer(this, this.editableElement, this.config);\n      this.currentView = this.composer;\n\n      if (typeof(this.config.parser) === \"function\") {\n        this._initParser();\n      }\n\n      this.on(\"beforeload\", this.handleBeforeLoad);\n    },\n\n    handleBeforeLoad: function() {\n        if (!this.config.noTextarea) {\n            this.synchronizer = new wysihtml5.views.Synchronizer(this, this.textarea, this.composer);\n        }\n        if (this.config.toolbar) {\n          this.toolbar = new wysihtml5.toolbar.Toolbar(this, this.config.toolbar, this.config.showToolbarAfterInit);\n        }\n    },\n\n    isCompatible: function() {\n      return this._isCompatible;\n    },\n\n    clear: function() {\n      this.currentView.clear();\n      return this;\n    },\n\n    getValue: function(parse, clearInternals) {\n      return this.currentView.getValue(parse, clearInternals);\n    },\n\n    setValue: function(html, parse) {\n      this.fire(\"unset_placeholder\");\n\n      if (!html) {\n        return this.clear();\n      }\n\n      this.currentView.setValue(html, parse);\n      return this;\n    },\n\n    cleanUp: function() {\n        this.currentView.cleanUp();\n    },\n\n    focus: function(setToEnd) {\n      this.currentView.focus(setToEnd);\n      return this;\n    },\n\n    /**\n     * Deactivate editor (make it readonly)\n     */\n    disable: function() {\n      this.currentView.disable();\n      return this;\n    },\n\n    /**\n     * Activate editor\n     */\n    enable: function() {\n      this.currentView.enable();\n      return this;\n    },\n\n    isEmpty: function() {\n      return this.currentView.isEmpty();\n    },\n\n    hasPlaceholderSet: function() {\n      return this.currentView.hasPlaceholderSet();\n    },\n\n    parse: function(htmlOrElement, clearInternals) {\n      var parseContext = (this.config.contentEditableMode) ? document : ((this.composer) ? this.composer.sandbox.getDocument() : null);\n      var returnValue = this.config.parser(htmlOrElement, {\n        \"rules\": this.config.parserRules,\n        \"cleanUp\": this.config.cleanUp,\n        \"context\": parseContext,\n        \"uneditableClass\": this.config.uneditableContainerClassname,\n        \"clearInternals\" : clearInternals\n      });\n      if (typeof(htmlOrElement) === \"object\") {\n        wysihtml5.quirks.redraw(htmlOrElement);\n      }\n      return returnValue;\n    },\n\n    /**\n     * Prepare html parser logic\n     *  - Observes for paste and drop\n     */\n    _initParser: function() {\n      var that = this,\n          oldHtml,\n          cleanHtml;\n\n      if (wysihtml5.browser.supportsModenPaste()) {\n        this.on(\"paste:composer\", function(event) {\n          event.preventDefault();\n          oldHtml = wysihtml5.dom.getPastedHtml(event);\n          if (oldHtml) {\n            that._cleanAndPaste(oldHtml);\n          }\n        });\n\n      } else {\n        this.on(\"beforepaste:composer\", function(event) {\n          event.preventDefault();\n          wysihtml5.dom.getPastedHtmlWithDiv(that.composer, function(pastedHTML) {\n            if (pastedHTML) {\n              that._cleanAndPaste(pastedHTML);\n            }\n          });\n        });\n\n      }\n    },\n\n    _cleanAndPaste: function (oldHtml) {\n      var cleanHtml = wysihtml5.quirks.cleanPastedHTML(oldHtml, {\n        \"referenceNode\": this.composer.element,\n        \"rules\": this.config.pasteParserRulesets || [{\"set\": this.config.parserRules}],\n        \"uneditableClass\": this.config.uneditableContainerClassname\n      });\n      this.composer.selection.deleteContents();\n      this.composer.selection.insertHTML(cleanHtml);\n    }\n  });\n})(wysihtml5);\n;/**\n * Toolbar Dialog\n *\n * @param {Element} link The toolbar link which causes the dialog to show up\n * @param {Element} container The dialog container\n *\n * @example\n *    <!-- Toolbar link -->\n *    <a data-wysihtml5-command=\"insertImage\">insert an image</a>\n *\n *    <!-- Dialog -->\n *    <div data-wysihtml5-dialog=\"insertImage\" style=\"display: none;\">\n *      <label>\n *        URL: <input data-wysihtml5-dialog-field=\"src\" value=\"http://\">\n *      </label>\n *      <label>\n *        Alternative text: <input data-wysihtml5-dialog-field=\"alt\" value=\"\">\n *      </label>\n *    </div>\n *\n *    <script>\n *      var dialog = new wysihtml5.toolbar.Dialog(\n *        document.querySelector(\"[data-wysihtml5-command='insertImage']\"),\n *        document.querySelector(\"[data-wysihtml5-dialog='insertImage']\")\n *      );\n *      dialog.observe(\"save\", function(attributes) {\n *        // do something\n *      });\n *    </script>\n */\n(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      CLASS_NAME_OPENED       = \"wysihtml5-command-dialog-opened\",\n      SELECTOR_FORM_ELEMENTS  = \"input, select, textarea\",\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n\n  wysihtml5.toolbar.Dialog = wysihtml5.lang.Dispatcher.extend(\n    /** @scope wysihtml5.toolbar.Dialog.prototype */ {\n    constructor: function(link, container) {\n      this.link       = link;\n      this.container  = container;\n    },\n\n    _observe: function() {\n      if (this._observed) {\n        return;\n      }\n\n      var that = this,\n          callbackWrapper = function(event) {\n            var attributes = that._serialize();\n            if (attributes == that.elementToChange) {\n              that.fire(\"edit\", attributes);\n            } else {\n              that.fire(\"save\", attributes);\n            }\n            that.hide();\n            event.preventDefault();\n            event.stopPropagation();\n          };\n\n      dom.observe(that.link, \"click\", function() {\n        if (dom.hasClass(that.link, CLASS_NAME_OPENED)) {\n          setTimeout(function() { that.hide(); }, 0);\n        }\n      });\n\n      dom.observe(this.container, \"keydown\", function(event) {\n        var keyCode = event.keyCode;\n        if (keyCode === wysihtml5.ENTER_KEY) {\n          callbackWrapper(event);\n        }\n        if (keyCode === wysihtml5.ESCAPE_KEY) {\n          that.fire(\"cancel\");\n          that.hide();\n        }\n      });\n\n      dom.delegate(this.container, \"[data-wysihtml5-dialog-action=save]\", \"click\", callbackWrapper);\n\n      dom.delegate(this.container, \"[data-wysihtml5-dialog-action=cancel]\", \"click\", function(event) {\n        that.fire(\"cancel\");\n        that.hide();\n        event.preventDefault();\n        event.stopPropagation();\n      });\n\n      var formElements  = this.container.querySelectorAll(SELECTOR_FORM_ELEMENTS),\n          i             = 0,\n          length        = formElements.length,\n          _clearInterval = function() { clearInterval(that.interval); };\n      for (; i<length; i++) {\n        dom.observe(formElements[i], \"change\", _clearInterval);\n      }\n\n      this._observed = true;\n    },\n\n    /**\n     * Grabs all fields in the dialog and puts them in key=>value style in an object which\n     * then gets returned\n     */\n    _serialize: function() {\n      var data    = this.elementToChange || {},\n          fields  = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length  = fields.length,\n          i       = 0;\n\n      for (; i<length; i++) {\n        data[fields[i].getAttribute(ATTRIBUTE_FIELDS)] = fields[i].value;\n      }\n      return data;\n    },\n\n    /**\n     * Takes the attributes of the \"elementToChange\"\n     * and inserts them in their corresponding dialog input fields\n     *\n     * Assume the \"elementToChange\" looks like this:\n     *    <a href=\"http://www.google.com\" target=\"_blank\">foo</a>\n     *\n     * and we have the following dialog:\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"href\" value=\"\">\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"target\" value=\"\">\n     *\n     * after calling _interpolate() the dialog will look like this\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"href\" value=\"http://www.google.com\">\n     *    <input type=\"text\" data-wysihtml5-dialog-field=\"target\" value=\"_blank\">\n     *\n     * Basically it adopted the attribute values into the corresponding input fields\n     *\n     */\n    _interpolate: function(avoidHiddenFields) {\n      var field,\n          fieldName,\n          newValue,\n          focusedElement = document.querySelector(\":focus\"),\n          fields         = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length         = fields.length,\n          i              = 0;\n      for (; i<length; i++) {\n        field = fields[i];\n\n        // Never change elements where the user is currently typing in\n        if (field === focusedElement) {\n          continue;\n        }\n\n        // Don't update hidden fields\n        // See https://github.com/xing/wysihtml5/pull/14\n        if (avoidHiddenFields && field.type === \"hidden\") {\n          continue;\n        }\n\n        fieldName = field.getAttribute(ATTRIBUTE_FIELDS);\n        newValue  = (this.elementToChange && typeof(this.elementToChange) !== 'boolean') ? (this.elementToChange.getAttribute(fieldName) || \"\") : field.defaultValue;\n        field.value = newValue;\n      }\n    },\n\n    /**\n     * Show the dialog element\n     */\n    show: function(elementToChange) {\n      if (dom.hasClass(this.link, CLASS_NAME_OPENED)) {\n        return;\n      }\n\n      var that        = this,\n          firstField  = this.container.querySelector(SELECTOR_FORM_ELEMENTS);\n      this.elementToChange = elementToChange;\n      this._observe();\n      this._interpolate();\n      if (elementToChange) {\n        this.interval = setInterval(function() { that._interpolate(true); }, 500);\n      }\n      dom.addClass(this.link, CLASS_NAME_OPENED);\n      this.container.style.display = \"\";\n      this.fire(\"show\");\n      if (firstField && !elementToChange) {\n        try {\n          firstField.focus();\n        } catch(e) {}\n      }\n    },\n\n    /**\n     * Hide the dialog element\n     */\n    hide: function() {\n      clearInterval(this.interval);\n      this.elementToChange = null;\n      dom.removeClass(this.link, CLASS_NAME_OPENED);\n      this.container.style.display = \"none\";\n      this.fire(\"hide\");\n    }\n  });\n})(wysihtml5);\n;/**\n * Converts speech-to-text and inserts this into the editor\n * As of now (2011/03/25) this only is supported in Chrome >= 11\n *\n * Note that it sends the recorded audio to the google speech recognition api:\n * http://stackoverflow.com/questions/4361826/does-chrome-have-buil-in-speech-recognition-for-input-type-text-x-webkit-speec\n *\n * Current HTML5 draft can be found here\n * http://lists.w3.org/Archives/Public/public-xg-htmlspeech/2011Feb/att-0020/api-draft.html\n *\n * \"Accessing Google Speech API Chrome 11\"\n * http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/\n */\n(function(wysihtml5) {\n  var dom = wysihtml5.dom;\n\n  var linkStyles = {\n    position: \"relative\"\n  };\n\n  var wrapperStyles = {\n    left:     0,\n    margin:   0,\n    opacity:  0,\n    overflow: \"hidden\",\n    padding:  0,\n    position: \"absolute\",\n    top:      0,\n    zIndex:   1\n  };\n\n  var inputStyles = {\n    cursor:     \"inherit\",\n    fontSize:   \"50px\",\n    height:     \"50px\",\n    marginTop:  \"-25px\",\n    outline:    0,\n    padding:    0,\n    position:   \"absolute\",\n    right:      \"-4px\",\n    top:        \"50%\"\n  };\n\n  var inputAttributes = {\n    \"x-webkit-speech\": \"\",\n    \"speech\":          \"\"\n  };\n\n  wysihtml5.toolbar.Speech = function(parent, link) {\n    var input = document.createElement(\"input\");\n    if (!wysihtml5.browser.supportsSpeechApiOn(input)) {\n      link.style.display = \"none\";\n      return;\n    }\n    var lang = parent.editor.textarea.element.getAttribute(\"lang\");\n    if (lang) {\n      inputAttributes.lang = lang;\n    }\n\n    var wrapper = document.createElement(\"div\");\n\n    wysihtml5.lang.object(wrapperStyles).merge({\n      width:  link.offsetWidth  + \"px\",\n      height: link.offsetHeight + \"px\"\n    });\n\n    dom.insert(input).into(wrapper);\n    dom.insert(wrapper).into(link);\n\n    dom.setStyles(inputStyles).on(input);\n    dom.setAttributes(inputAttributes).on(input);\n\n    dom.setStyles(wrapperStyles).on(wrapper);\n    dom.setStyles(linkStyles).on(link);\n\n    var eventName = \"onwebkitspeechchange\" in input ? \"webkitspeechchange\" : \"speechchange\";\n    dom.observe(input, eventName, function() {\n      parent.execCommand(\"insertText\", input.value);\n      input.value = \"\";\n    });\n\n    dom.observe(input, \"click\", function(event) {\n      if (dom.hasClass(link, \"wysihtml5-command-disabled\")) {\n        event.preventDefault();\n      }\n\n      event.stopPropagation();\n    });\n  };\n})(wysihtml5);\n;/**\n * Toolbar\n *\n * @param {Object} parent Reference to instance of Editor instance\n * @param {Element} container Reference to the toolbar container element\n *\n * @example\n *    <div id=\"toolbar\">\n *      <a data-wysihtml5-command=\"createLink\">insert link</a>\n *      <a data-wysihtml5-command=\"formatBlock\" data-wysihtml5-command-value=\"h1\">insert h1</a>\n *    </div>\n *\n *    <script>\n *      var toolbar = new wysihtml5.toolbar.Toolbar(editor, document.getElementById(\"toolbar\"));\n *    </script>\n */\n(function(wysihtml5) {\n  var CLASS_NAME_COMMAND_DISABLED   = \"wysihtml5-command-disabled\",\n      CLASS_NAME_COMMANDS_DISABLED  = \"wysihtml5-commands-disabled\",\n      CLASS_NAME_COMMAND_ACTIVE     = \"wysihtml5-command-active\",\n      CLASS_NAME_ACTION_ACTIVE      = \"wysihtml5-action-active\",\n      dom                           = wysihtml5.dom;\n\n  wysihtml5.toolbar.Toolbar = Base.extend(\n    /** @scope wysihtml5.toolbar.Toolbar.prototype */ {\n    constructor: function(editor, container, showOnInit) {\n      this.editor     = editor;\n      this.container  = typeof(container) === \"string\" ? document.getElementById(container) : container;\n      this.composer   = editor.composer;\n\n      this._getLinks(\"command\");\n      this._getLinks(\"action\");\n\n      this._observe();\n      if (showOnInit) { this.show(); }\n\n      if (editor.config.classNameCommandDisabled != null) {\n        CLASS_NAME_COMMAND_DISABLED = editor.config.classNameCommandDisabled;\n      }\n      if (editor.config.classNameCommandsDisabled != null) {\n        CLASS_NAME_COMMANDS_DISABLED = editor.config.classNameCommandsDisabled;\n      }\n      if (editor.config.classNameCommandActive != null) {\n        CLASS_NAME_COMMAND_ACTIVE = editor.config.classNameCommandActive;\n      }\n      if (editor.config.classNameActionActive != null) {\n        CLASS_NAME_ACTION_ACTIVE = editor.config.classNameActionActive;\n      }\n\n      var speechInputLinks  = this.container.querySelectorAll(\"[data-wysihtml5-command=insertSpeech]\"),\n          length            = speechInputLinks.length,\n          i                 = 0;\n      for (; i<length; i++) {\n        new wysihtml5.toolbar.Speech(this, speechInputLinks[i]);\n      }\n    },\n\n    _getLinks: function(type) {\n      var links   = this[type + \"Links\"] = wysihtml5.lang.array(this.container.querySelectorAll(\"[data-wysihtml5-\" + type + \"]\")).get(),\n          length  = links.length,\n          i       = 0,\n          mapping = this[type + \"Mapping\"] = {},\n          link,\n          group,\n          name,\n          value,\n          dialog;\n      for (; i<length; i++) {\n        link    = links[i];\n        name    = link.getAttribute(\"data-wysihtml5-\" + type);\n        value   = link.getAttribute(\"data-wysihtml5-\" + type + \"-value\");\n        group   = this.container.querySelector(\"[data-wysihtml5-\" + type + \"-group='\" + name + \"']\");\n        dialog  = this._getDialog(link, name);\n\n        mapping[name + \":\" + value] = {\n          link:   link,\n          group:  group,\n          name:   name,\n          value:  value,\n          dialog: dialog,\n          state:  false\n        };\n      }\n    },\n\n    _getDialog: function(link, command) {\n      var that          = this,\n          dialogElement = this.container.querySelector(\"[data-wysihtml5-dialog='\" + command + \"']\"),\n          dialog,\n          caretBookmark;\n\n      if (dialogElement) {\n        if (wysihtml5.toolbar[\"Dialog_\" + command]) {\n            dialog = new wysihtml5.toolbar[\"Dialog_\" + command](link, dialogElement);\n        } else {\n            dialog = new wysihtml5.toolbar.Dialog(link, dialogElement);\n        }\n\n        dialog.on(\"show\", function() {\n          caretBookmark = that.composer.selection.getBookmark();\n\n          that.editor.fire(\"show:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n\n        dialog.on(\"save\", function(attributes) {\n          if (caretBookmark) {\n            that.composer.selection.setBookmark(caretBookmark);\n          }\n          that._execCommand(command, attributes);\n\n          that.editor.fire(\"save:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n\n        dialog.on(\"cancel\", function() {\n          that.editor.focus(false);\n          that.editor.fire(\"cancel:dialog\", { command: command, dialogContainer: dialogElement, commandLink: link });\n        });\n      }\n      return dialog;\n    },\n\n    /**\n     * @example\n     *    var toolbar = new wysihtml5.Toolbar();\n     *    // Insert a <blockquote> element or wrap current selection in <blockquote>\n     *    toolbar.execCommand(\"formatBlock\", \"blockquote\");\n     */\n    execCommand: function(command, commandValue) {\n      if (this.commandsDisabled) {\n        return;\n      }\n\n      var commandObj = this.commandMapping[command + \":\" + commandValue];\n\n      // Show dialog when available\n      if (commandObj && commandObj.dialog && !commandObj.state) {\n        commandObj.dialog.show();\n      } else {\n        this._execCommand(command, commandValue);\n      }\n    },\n\n    _execCommand: function(command, commandValue) {\n      // Make sure that composer is focussed (false => don't move caret to the end)\n      this.editor.focus(false);\n\n      this.composer.commands.exec(command, commandValue);\n      this._updateLinkStates();\n    },\n\n    execAction: function(action) {\n      var editor = this.editor;\n      if (action === \"change_view\") {\n        if (editor.textarea) {\n            if (editor.currentView === editor.textarea) {\n              editor.fire(\"change_view\", \"composer\");\n            } else {\n              editor.fire(\"change_view\", \"textarea\");\n            }\n        }\n      }\n      if (action == \"showSource\") {\n          editor.fire(\"showSource\");\n      }\n    },\n\n    _observe: function() {\n      var that      = this,\n          editor    = this.editor,\n          container = this.container,\n          links     = this.commandLinks.concat(this.actionLinks),\n          length    = links.length,\n          i         = 0;\n\n      for (; i<length; i++) {\n        // 'javascript:;' and unselectable=on Needed for IE, but done in all browsers to make sure that all get the same css applied\n        // (you know, a:link { ... } doesn't match anchors with missing href attribute)\n        if (links[i].nodeName === \"A\") {\n          dom.setAttributes({\n            href:         \"javascript:;\",\n            unselectable: \"on\"\n          }).on(links[i]);\n        } else {\n          dom.setAttributes({ unselectable: \"on\" }).on(links[i]);\n        }\n      }\n\n      // Needed for opera and chrome\n      dom.delegate(container, \"[data-wysihtml5-command], [data-wysihtml5-action]\", \"mousedown\", function(event) { event.preventDefault(); });\n\n      dom.delegate(container, \"[data-wysihtml5-command]\", \"click\", function(event) {\n        var link          = this,\n            command       = link.getAttribute(\"data-wysihtml5-command\"),\n            commandValue  = link.getAttribute(\"data-wysihtml5-command-value\");\n        that.execCommand(command, commandValue);\n        event.preventDefault();\n      });\n\n      dom.delegate(container, \"[data-wysihtml5-action]\", \"click\", function(event) {\n        var action = this.getAttribute(\"data-wysihtml5-action\");\n        that.execAction(action);\n        event.preventDefault();\n      });\n\n      editor.on(\"interaction:composer\", function() {\n          that._updateLinkStates();\n      });\n\n      editor.on(\"focus:composer\", function() {\n        that.bookmark = null;\n      });\n\n      if (this.editor.config.handleTables) {\n          editor.on(\"tableselect:composer\", function() {\n              that.container.querySelectorAll('[data-wysihtml5-hiddentools=\"table\"]')[0].style.display = \"\";\n          });\n          editor.on(\"tableunselect:composer\", function() {\n              that.container.querySelectorAll('[data-wysihtml5-hiddentools=\"table\"]')[0].style.display = \"none\";\n          });\n      }\n\n      editor.on(\"change_view\", function(currentView) {\n        // Set timeout needed in order to let the blur event fire first\n        if (editor.textarea) {\n            setTimeout(function() {\n              that.commandsDisabled = (currentView !== \"composer\");\n              that._updateLinkStates();\n              if (that.commandsDisabled) {\n                dom.addClass(container, CLASS_NAME_COMMANDS_DISABLED);\n              } else {\n                dom.removeClass(container, CLASS_NAME_COMMANDS_DISABLED);\n              }\n            }, 0);\n        }\n      });\n    },\n\n    _updateLinkStates: function() {\n\n      var commandMapping    = this.commandMapping,\n          actionMapping     = this.actionMapping,\n          i,\n          state,\n          action,\n          command;\n      // every millisecond counts... this is executed quite often\n      for (i in commandMapping) {\n        command = commandMapping[i];\n        if (this.commandsDisabled) {\n          state = false;\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            command.dialog.hide();\n          }\n        } else {\n          state = this.composer.commands.state(command.name, command.value);\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_DISABLED);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_DISABLED);\n          }\n        }\n        if (command.state === state) {\n          continue;\n        }\n\n        command.state = state;\n        if (state) {\n          dom.addClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.addClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            if (typeof(state) === \"object\" || wysihtml5.lang.object(state).isArray()) {\n\n              if (!command.dialog.multiselect && wysihtml5.lang.object(state).isArray()) {\n                // Grab first and only object/element in state array, otherwise convert state into boolean\n                // to avoid showing a dialog for multiple selected elements which may have different attributes\n                // eg. when two links with different href are selected, the state will be an array consisting of both link elements\n                // but the dialog interface can only update one\n                state = state.length === 1 ? state[0] : true;\n                command.state = state;\n              }\n              command.dialog.show(state);\n            } else {\n              command.dialog.hide();\n            }\n          }\n        } else {\n          dom.removeClass(command.link, CLASS_NAME_COMMAND_ACTIVE);\n          if (command.group) {\n            dom.removeClass(command.group, CLASS_NAME_COMMAND_ACTIVE);\n          }\n          if (command.dialog) {\n            command.dialog.hide();\n          }\n        }\n      }\n\n      for (i in actionMapping) {\n        action = actionMapping[i];\n\n        if (action.name === \"change_view\") {\n          action.state = this.editor.currentView === this.editor.textarea;\n          if (action.state) {\n            dom.addClass(action.link, CLASS_NAME_ACTION_ACTIVE);\n          } else {\n            dom.removeClass(action.link, CLASS_NAME_ACTION_ACTIVE);\n          }\n        }\n      }\n    },\n\n    show: function() {\n      this.container.style.display = \"\";\n    },\n\n    hide: function() {\n      this.container.style.display = \"none\";\n    }\n  });\n\n})(wysihtml5);\n;(function(wysihtml5) {\n    wysihtml5.toolbar.Dialog_createTable = wysihtml5.toolbar.Dialog.extend({\n        show: function(elementToChange) {\n            this.base(elementToChange);\n\n        }\n\n    });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n  wysihtml5.toolbar.Dialog_foreColorStyle = wysihtml5.toolbar.Dialog.extend({\n    multiselect: true,\n\n    _serialize: function() {\n      var data    = {},\n          fields  = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length  = fields.length,\n          i       = 0;\n\n      for (; i<length; i++) {\n        data[fields[i].getAttribute(ATTRIBUTE_FIELDS)] = fields[i].value;\n      }\n      return data;\n    },\n\n    _interpolate: function(avoidHiddenFields) {\n      var field,\n          fieldName,\n          newValue,\n          focusedElement = document.querySelector(\":focus\"),\n          fields         = this.container.querySelectorAll(SELECTOR_FIELDS),\n          length         = fields.length,\n          i              = 0,\n          firstElement   = (this.elementToChange) ? ((wysihtml5.lang.object(this.elementToChange).isArray()) ? this.elementToChange[0] : this.elementToChange) : null,\n          colorStr       = (firstElement) ? firstElement.getAttribute('style') : null,\n          color          = (colorStr) ? wysihtml5.quirks.styleParser.parseColor(colorStr, \"color\") : null;\n\n      for (; i<length; i++) {\n        field = fields[i];\n        // Never change elements where the user is currently typing in\n        if (field === focusedElement) {\n          continue;\n        }\n        // Don't update hidden fields3\n        if (avoidHiddenFields && field.type === \"hidden\") {\n          continue;\n        }\n        if (field.getAttribute(ATTRIBUTE_FIELDS) === \"color\") {\n          if (color) {\n            if (color[3] && color[3] != 1) {\n              field.value = \"rgba(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \",\" + color[3] + \");\";\n            } else {\n              field.value = \"rgb(\" + color[0] + \",\" + color[1] + \",\" + color[2] + \");\";\n            }\n          } else {\n            field.value = \"rgb(0,0,0);\";\n          }\n        }\n      }\n    }\n\n  });\n})(wysihtml5);\n;(function(wysihtml5) {\n  var dom                     = wysihtml5.dom,\n      SELECTOR_FIELDS         = \"[data-wysihtml5-dialog-field]\",\n      ATTRIBUTE_FIELDS        = \"data-wysihtml5-dialog-field\";\n\n  wysihtml5.toolbar.Dialog_fontSizeStyle = wysihtml5.toolbar.Dialog.extend({\n    multiselect: true,\n\n    _serialize: function() {\n      return {\"size\" : this.container.querySelector('[data-wysihtml5-dialog-field=\"size\"]').value};\n    },\n\n    _interpolate: function(avoidHiddenFields) {\n      var focusedElement = document.querySelector(\":focus\"),\n          field          = this.container.querySelector(\"[data-wysihtml5-dialog-field='size']\"),\n          firstElement   = (this.elementToChange) ? ((wysihtml5.lang.object(this.elementToChange).isArray()) ? this.elementToChange[0] : this.elementToChange) : null,\n          styleStr       = (firstElement) ? firstElement.getAttribute('style') : null,\n          size           = (styleStr) ? wysihtml5.quirks.styleParser.parseFontSize(styleStr) : null;\n\n      if (field && field !== focusedElement && size && !(/^\\s*$/).test(size)) {\n        field.value = size;\n      }\n    }\n\n  });\n})(wysihtml5);\n/*!\n\n handlebars v1.3.0\n\nCopyright (C) 2011 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n@license\n*/\nvar Handlebars=function(){var a=function(){\"use strict\";function a(a){this.string=a}var b;return a.prototype.toString=function(){return\"\"+this.string},b=a}(),b=function(a){\"use strict\";function b(a){return h[a]||\"&amp;\"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=\"\"+a,j.test(a)?a.replace(i,b):a):\"\"}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},i=/[&<>\"'`]/g,j=/[&<>\"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return\"function\"==typeof a};l(/x/)&&(l=function(a){return\"function\"==typeof a&&\"[object Function]\"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&\"object\"==typeof a?\"[object Array]\"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){\"use strict\";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=\" - \"+d+\":\"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=[\"description\",\"fileName\",\"lineNumber\",\"message\",\"name\",\"number\",\"stack\"];return a.prototype=new Error,b=a}(),d=function(a,b){\"use strict\";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper(\"helperMissing\",function(a){if(2===arguments.length)return void 0;throw new h(\"Missing helper: '\"+a+\"'\")}),a.registerHelper(\"blockHelperMissing\",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper(\"each\",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g=\"\";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&\"object\"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper(\"if\",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper(\"unless\",function(b,c){return a.helpers[\"if\"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper(\"with\",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper(\"log\",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i=\"1.3.0\";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:\"<= 1.0.rc.2\",2:\"== 1.0.0-rc.3\",3:\"== 1.0.0-rc.4\",4:\">= 1.0.0\"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o=\"[object Object]\";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h(\"Arg not supported with multiple helpers\");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:\"debug\",1:\"info\",2:\"warn\",3:\"error\"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];\"undefined\"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){\"use strict\";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l(\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\"+d+\") or downgrade your runtime to an older version (\"+e+\").\")}throw new l(\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\"+a[1]+\").\")}}function e(a,b){if(!b)throw new l(\"No environment passed to template\");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l(\"The partial \"+c+\" could not be compiled when running in runtime-only mode\")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l(\"The partial \"+b+\" could not be found\");return a instanceof Function?a(c,g):void 0}function i(){return\"\"}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){\"use strict\";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();this[\"wysihtml5\"] = this[\"wysihtml5\"] || {};\nthis[\"wysihtml5\"][\"tpl\"] = this[\"wysihtml5\"][\"tpl\"] || {};\n\nthis[\"wysihtml5\"][\"tpl\"][\"blockquote\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \" \\n      <span class=\\\"fa fa-quote-left\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-quote\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"blockquote\\\" data-wysihtml5-display-format-name=\\\"false\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"color\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\n  buffer += \"<li class=\\\"dropdown\\\">\\n  <a class=\\\"btn btn-default dropdown-toggle \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-toggle=\\\"dropdown\\\" tabindex=\\\"-1\\\">\\n    <span class=\\\"current-color\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.black)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n    <b class=\\\"caret\\\"></b>\\n  </a>\\n  <ul class=\\\"dropdown-menu\\\">\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"black\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"black\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.black)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"silver\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"silver\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.silver)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"gray\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"gray\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.gray)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"maroon\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"maroon\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.maroon)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"red\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"red\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.red)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"purple\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"purple\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.purple)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"green\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"green\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.green)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"olive\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"olive\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.olive)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"navy\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"navy\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.navy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"blue\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"blue\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.blue)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><div class=\\\"wysihtml5-colors\\\" data-wysihtml5-command-value=\\\"orange\\\"></div><a class=\\\"wysihtml5-colors-title\\\" data-wysihtml5-command=\\\"foreColor\\\" data-wysihtml5-command-value=\\\"orange\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.colours)),stack1 == null || stack1 === false ? stack1 : stack1.orange)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n  </ul>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"emphasis\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"small\\\" title=\\\"CTRL+S\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.small)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    \";\n  return buffer;\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"bold\\\" title=\\\"CTRL+B\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.bold)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"italic\\\" title=\\\"CTRL+I\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.italic)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"underline\\\" title=\\\"CTRL+U\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.underline)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.emphasis)),stack1 == null || stack1 === false ? stack1 : stack1.small), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"font-styles\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-font\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-font\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li class=\\\"dropdown\\\">\\n  <a class=\\\"btn btn-default dropdown-toggle \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\" data-toggle=\\\"dropdown\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    <span class=\\\"current-font\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.normal)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</span>\\n    <b class=\\\"caret\\\"></b>\\n  </a>\\n  <ul class=\\\"dropdown-menu\\\">\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"p\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.normal)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h1\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h1)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h2\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h2)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h3\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h3)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h4\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h4)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h5\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h5)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n    <li><a data-wysihtml5-command=\\\"formatBlock\\\" data-wysihtml5-command-value=\\\"h6\\\" tabindex=\\\"-1\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.font_styles)),stack1 == null || stack1 === false ? stack1 : stack1.h6)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a></li>\\n  </ul>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"html\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n        <span class=\\\"fa fa-pencil\\\"></span>\\n      \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n        <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n      \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-action=\\\"change_view\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.html)),stack1 == null || stack1 === false ? stack1 : stack1.edit)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n      \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"image\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"modal-sm\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-file-image-o\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-picture\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"bootstrap-wysihtml5-insert-image-modal modal fade\\\" data-wysihtml5-dialog=\\\"insertImage\\\">\\n    <div class=\\\"modal-dialog \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.smallmodals), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header\\\">\\n          <a class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</a>\\n          <h3>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h3>\\n        </div>\\n        <div class=\\\"modal-body\\\">\\n          <div class=\\\"form-group\\\">\\n            <input value=\\\"http://\\\" class=\\\"bootstrap-wysihtml5-insert-image-url form-control\\\" data-wysihtml5-dialog-field=\\\"src\\\">\\n          </div> \\n        </div>\\n        <div class=\\\"modal-footer\\\">\\n          <a class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"cancel\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.cancel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n          <a class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\"  data-wysihtml5-dialog-action=\\\"save\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertImage\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.image)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"link\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  \n  return \"modal-sm\";\n  }\n\nfunction program3(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-share-square-o\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-share\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"bootstrap-wysihtml5-insert-link-modal modal fade\\\" data-wysihtml5-dialog=\\\"createLink\\\">\\n    <div class=\\\"modal-dialog \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.smallmodals), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\\">\\n      <div class=\\\"modal-content\\\">\\n        <div class=\\\"modal-header\\\">\\n          <a class=\\\"close\\\" data-dismiss=\\\"modal\\\">&times;</a>\\n          <h3>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</h3>\\n        </div>\\n        <div class=\\\"modal-body\\\">\\n          <div class=\\\"form-group\\\">\\n            <input value=\\\"http://\\\" class=\\\"bootstrap-wysihtml5-insert-link-url form-control\\\" data-wysihtml5-dialog-field=\\\"href\\\">\\n          </div> \\n          <div class=\\\"checkbox\\\">\\n            <label> \\n              <input type=\\\"checkbox\\\" class=\\\"bootstrap-wysihtml5-insert-link-target\\\" checked>\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.target)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\n            </label>\\n          </div>\\n        </div>\\n        <div class=\\\"modal-footer\\\">\\n          <a class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"cancel\\\" href=\\\"#\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.cancel)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n          <a href=\\\"#\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\" data-wysihtml5-dialog-action=\\\"save\\\">\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"</a>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"createLink\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.link)),stack1 == null || stack1 === false ? stack1 : stack1.insert)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(7, program7, data),fn:self.program(5, program5, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n  </a>\\n</li>\\n\";\n  return buffer;\n  });\n\nthis[\"wysihtml5\"][\"tpl\"][\"lists\"] = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {\n  this.compilerInfo = [4,'>= 1.0.0'];\nhelpers = this.merge(helpers, Handlebars.helpers); data = data || {};\n  var buffer = \"\", stack1, functionType=\"function\", escapeExpression=this.escapeExpression, self=this;\n\nfunction program1(depth0,data) {\n  \n  var buffer = \"\", stack1;\n  buffer += \"btn-\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1));\n  return buffer;\n  }\n\nfunction program3(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-list-ul\\\"></span>\\n    \";\n  }\n\nfunction program5(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-list\\\"></span>\\n    \";\n  }\n\nfunction program7(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-list-ol\\\"></span>\\n    \";\n  }\n\nfunction program9(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-th-list\\\"></span>\\n    \";\n  }\n\nfunction program11(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-outdent\\\"></span>\\n    \";\n  }\n\nfunction program13(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-indent-right\\\"></span>\\n    \";\n  }\n\nfunction program15(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"fa fa-indent\\\"></span>\\n    \";\n  }\n\nfunction program17(depth0,data) {\n  \n  \n  return \"\\n      <span class=\\\"glyphicon glyphicon-indent-left\\\"></span>\\n    \";\n  }\n\n  buffer += \"<li>\\n  <div class=\\\"btn-group\\\">\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertUnorderedList\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.unordered)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(5, program5, data),fn:self.program(3, program3, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"insertOrderedList\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.ordered)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(9, program9, data),fn:self.program(7, program7, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"Outdent\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.outdent)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(13, program13, data),fn:self.program(11, program11, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n    <a class=\\\"btn \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.size), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \" btn-default\\\" data-wysihtml5-command=\\\"Indent\\\" title=\\\"\"\n    + escapeExpression(((stack1 = ((stack1 = ((stack1 = (depth0 && depth0.locale)),stack1 == null || stack1 === false ? stack1 : stack1.lists)),stack1 == null || stack1 === false ? stack1 : stack1.indent)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))\n    + \"\\\" tabindex=\\\"-1\\\">\\n    \";\n  stack1 = helpers['if'].call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.options)),stack1 == null || stack1 === false ? stack1 : stack1.toolbar)),stack1 == null || stack1 === false ? stack1 : stack1.fa), {hash:{},inverse:self.program(17, program17, data),fn:self.program(15, program15, data),data:data});\n  if(stack1 || stack1 === 0) { buffer += stack1; }\n  buffer += \"\\n    </a>\\n  </div>\\n</li>\\n\";\n  return buffer;\n  });(function (factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define('bootstrap.wysihtml5', ['jquery', 'wysihtml5', 'bootstrap', 'bootstrap.wysihtml5.templates', 'bootstrap.wysihtml5.commands'], factory);\n  } else {\n    // Browser globals\n    factory(jQuery, wysihtml5); // jshint ignore:line\n  }\n}(function ($, wysihtml5) {\n  'use strict';\n  var bsWysihtml5 = function($, wysihtml5) {\n\n    var templates = function(key, locale, options) {\n      if(wysihtml5.tpl[key]) {\n        return wysihtml5.tpl[key]({locale: locale, options: options});\n      }\n    };\n\n    var Wysihtml5 = function(el, options) {\n      this.el = el;\n      var toolbarOpts = $.extend(true, {}, defaultOptions, options);\n      for(var t in toolbarOpts.customTemplates) {\n        if (toolbarOpts.customTemplates.hasOwnProperty(t)) {\n          wysihtml5.tpl[t] = toolbarOpts.customTemplates[t];\n        }\n      }\n      this.toolbar = this.createToolbar(el, toolbarOpts);\n      this.editor =  this.createEditor(toolbarOpts);\n    };\n\n    Wysihtml5.prototype = {\n\n      constructor: Wysihtml5,\n\n      createEditor: function(options) {\n        options = options || {};\n\n        // Add the toolbar to a clone of the options object so multiple instances\n        // of the WYISYWG don't break because 'toolbar' is already defined\n        options = $.extend(true, {}, options);\n        options.toolbar = this.toolbar[0];\n        \n        this.initializeEditor(this.el[0], options);\n      },\n\n\n      initializeEditor: function(el, options) {\n        var editor = new wysihtml5.Editor(this.el[0], options);\n\n        editor.on('beforeload', this.syncBootstrapDialogEvents);\n        editor.on('beforeload', this.loadParserRules);\n\n        // #30 - body is in IE 10 not created by default, which leads to nullpointer\n        // 2014/02/13 - adapted to wysihtml5-0.4, does not work in IE\n        if(editor.composer.editableArea.contentDocument) {\n          this.addMoreShortcuts(editor, \n                                editor.composer.editableArea.contentDocument.body || editor.composer.editableArea.contentDocument, \n                                options.shortcuts);\n        } else {\n          this.addMoreShortcuts(editor, editor.composer.editableArea, options.shortcuts);    \n        }\n\n        if(options && options.events) {\n          for(var eventName in options.events) {\n            if (options.events.hasOwnProperty(eventName)) {\n              editor.on(eventName, options.events[eventName]);\n            }\n          }\n        }\n\n        return editor;\n      },\n\n      loadParserRules: function() {\n        if($.type(this.config.parserRules) === 'string') {\n          $.ajax({\n            dataType: 'json',\n            url: this.config.parserRules,\n            context: this,\n            error: function (jqXHR, textStatus, errorThrown) {\n              console.log(errorThrown);\n            },\n            success: function (parserRules) {\n              this.config.parserRules = parserRules;\n              console.log('parserrules loaded');\n            }\n          });\n        }\n\n        if(this.config.pasteParserRulesets && $.type(this.config.pasteParserRulesets) === 'string') {\n          $.ajax({\n            dataType: 'json',\n            url: this.config.pasteParserRulesets,\n            context: this,\n            error: function (jqXHR, textStatus, errorThrown) {\n              console.log(errorThrown);\n            },\n            success: function (pasteParserRulesets) {\n              this.config.pasteParserRulesets = pasteParserRulesets;\n            }\n          });\n        }\n      },\n\n      //sync wysihtml5 events for dialogs with bootstrap events\n      syncBootstrapDialogEvents: function() {\n        var editor = this;\n        $.map(this.toolbar.commandMapping, function(value) {\n          return [value];\n        }).filter(function(commandObj) {\n          return commandObj.dialog;\n        }).map(function(commandObj) {\n          return commandObj.dialog;\n        }).forEach(function(dialog) {\n          dialog.on('show', function() {\n            $(this.container).modal('show');\n          });\n          dialog.on('hide', function() {\n            $(this.container).modal('hide');\n            setTimeout(editor.composer.focus, 0);\n          });\n          $(dialog.container).on('shown.bs.modal', function () {\n            $(this).find('input, select, textarea').first().focus();\n          });\n        });\n        this.on('change_view', function() {\n          $(this.toolbar.container.children).find('a.btn').not('[data-wysihtml5-action=\"change_view\"]').toggleClass('disabled');\n        });\n      },\n\n      createToolbar: function(el, options) {\n        var self = this;\n        var toolbar = $('<ul/>', {\n          'class' : 'wysihtml5-toolbar',\n          'style': 'display:none'\n        });\n        var culture = options.locale || defaultOptions.locale || 'en';\n        if(!locale.hasOwnProperty(culture)) {\n          console.debug('Locale \\'' + culture + '\\' not found. Available locales are: ' + Object.keys(locale) + '. Falling back to \\'en\\'.');\n          culture = 'en';\n        }\n        var localeObject = $.extend(true, {}, locale.en, locale[culture]);\n        for(var key in options.toolbar) {\n          if(options.toolbar[key]) {\n            toolbar.append(templates(key, localeObject, options));\n          }\n        }\n\n        toolbar.find('a[data-wysihtml5-command=\"formatBlock\"]').click(function(e) {\n          var target = e.delegateTarget || e.target || e.srcElement,\n          el = $(target),\n          showformat = el.data('wysihtml5-display-format-name'),\n          formatname = el.data('wysihtml5-format-name') || el.html();\n          if(showformat === undefined || showformat === 'true') {\n            self.toolbar.find('.current-font').text(formatname);\n          }\n        });\n\n        toolbar.find('a[data-wysihtml5-command=\"foreColor\"]').click(function(e) {\n          var target = e.target || e.srcElement;\n          var el = $(target);\n          self.toolbar.find('.current-color').text(el.html());\n        });\n\n        this.el.before(toolbar);\n\n        return toolbar;\n      },\n\n      addMoreShortcuts: function(editor, el, shortcuts) {\n        /* some additional shortcuts */\n        wysihtml5.dom.observe(el, 'keydown', function(event) {\n          var keyCode  = event.keyCode,\n          command  = shortcuts[keyCode];\n          if ((event.ctrlKey || event.metaKey || event.altKey) && command && wysihtml5.commands[command]) {\n            var commandObj = editor.toolbar.commandMapping[command + ':null'];\n            if (commandObj && commandObj.dialog && !commandObj.state) {\n              commandObj.dialog.show();\n            } else {\n              wysihtml5.commands[command].exec(editor.composer, command);\n            }\n            event.preventDefault();\n          }\n        });\n      }\n    };\n\n    // these define our public api\n    var methods = {\n      resetDefaults: function() {\n        $.fn.wysihtml5.defaultOptions = $.extend(true, {}, $.fn.wysihtml5.defaultOptionsCache);\n      },\n      bypassDefaults: function(options) {\n        return this.each(function () {\n          var $this = $(this);\n          $this.data('wysihtml5', new Wysihtml5($this, options));\n        });\n      },\n      shallowExtend: function (options) {\n        var settings = $.extend({}, $.fn.wysihtml5.defaultOptions, options || {}, $(this).data());\n        var that = this;\n        return methods.bypassDefaults.apply(that, [settings]);\n      },\n      deepExtend: function(options) {\n        var settings = $.extend(true, {}, $.fn.wysihtml5.defaultOptions, options || {});\n        var that = this;\n        return methods.bypassDefaults.apply(that, [settings]);\n      },\n      init: function(options) {\n        var that = this;\n        return methods.shallowExtend.apply(that, [options]);\n      }\n    };\n\n    $.fn.wysihtml5 = function ( method ) {\n      if ( methods[method] ) {\n        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n      } else if ( typeof method === 'object' || ! method ) {\n        return methods.init.apply( this, arguments );\n      } else {\n        $.error( 'Method ' +  method + ' does not exist on jQuery.wysihtml5' );\n      }    \n    };\n\n    $.fn.wysihtml5.Constructor = Wysihtml5;\n\n    var defaultOptions = $.fn.wysihtml5.defaultOptions = {\n      toolbar: {\n        'font-styles': true,\n        'color': false,\n        'emphasis': {\n          'small': true\n        },\n        'blockquote': true,\n        'lists': true,\n        'html': false,\n        'link': true,\n        'image': true,\n        'smallmodals': false\n      },\n      useLineBreaks: false,\n      parserRules: {\n        classes: {\n          'wysiwyg-color-silver' : 1,\n          'wysiwyg-color-gray' : 1,\n          'wysiwyg-color-white' : 1,\n          'wysiwyg-color-maroon' : 1,\n          'wysiwyg-color-red' : 1,\n          'wysiwyg-color-purple' : 1,\n          'wysiwyg-color-fuchsia' : 1,\n          'wysiwyg-color-green' : 1,\n          'wysiwyg-color-lime' : 1,\n          'wysiwyg-color-olive' : 1,\n          'wysiwyg-color-yellow' : 1,\n          'wysiwyg-color-navy' : 1,\n          'wysiwyg-color-blue' : 1,\n          'wysiwyg-color-teal' : 1,\n          'wysiwyg-color-aqua' : 1,\n          'wysiwyg-color-orange' : 1\n        },\n        tags: {\n          'b':  {},\n          'i':  {},\n          'strong': {},\n          'em': {},\n          'p': {},\n          'br': {},\n          'ol': {},\n          'ul': {},\n          'li': {},\n          'h1': {},\n          'h2': {},\n          'h3': {},\n          'h4': {},\n          'h5': {},\n          'h6': {},\n          'blockquote': {},\n          'u': 1,\n          'img': {\n            'check_attributes': {\n              'width': 'numbers',\n              'alt': 'alt',\n              'src': 'url',\n              'height': 'numbers'\n            }\n          },\n          'a':  {\n            'check_attributes': {\n              'href': 'url'\n            },\n            'set_attributes': {\n              'target': '_blank',\n              'rel': 'nofollow'\n            }\n          },\n          'span': 1,\n          'div': 1,\n          'small': 1,\n          'code': 1,\n          'pre': 1\n        }\n      },\n      locale: 'en',\n      shortcuts: {\n        '83': 'small',// S\n        '75': 'createLink'// K\n      }\n    };\n\n    if (typeof $.fn.wysihtml5.defaultOptionsCache === 'undefined') {\n      $.fn.wysihtml5.defaultOptionsCache = $.extend(true, {}, $.fn.wysihtml5.defaultOptions);\n    }\n\n    var locale = $.fn.wysihtml5.locale = {};\n  };\n  bsWysihtml5($, wysihtml5);\n}));\n(function(wysihtml5) {\n  wysihtml5.commands.small = {\n    exec: function(composer, command) {\n      return wysihtml5.commands.formatInline.exec(composer, command, \"small\");\n    },\n\n    state: function(composer, command) {\n      return wysihtml5.commands.formatInline.state(composer, command, \"small\");\n    }\n  };\n})(wysihtml5);\n\n/**\n * English translation for bootstrap-wysihtml5\n */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('bootstrap.wysihtml5.en-US', ['jquery', 'bootstrap.wysihtml5'], factory);\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n  $.fn.wysihtml5.locale.en = $.fn.wysihtml5.locale['en-US'] = {\n    font_styles: {\n      normal: 'Normal text',\n      h1: 'Heading 1',\n      h2: 'Heading 2',\n      h3: 'Heading 3',\n      h4: 'Heading 4',\n      h5: 'Heading 5',\n      h6: 'Heading 6'\n    },\n    emphasis: {\n      bold: 'Bold',\n      italic: 'Italic',\n      underline: 'Underline',\n      small: 'Small'\n    },\n    lists: {\n      unordered: 'Unordered list',\n      ordered: 'Ordered list',\n      outdent: 'Outdent',\n      indent: 'Indent'\n    },\n    link: {\n      insert: 'Insert link',\n      cancel: 'Cancel',\n      target: 'Open link in new window'\n    },\n    image: {\n      insert: 'Insert image',\n      cancel: 'Cancel'\n    },\n    html: {\n      edit: 'Edit HTML'\n    },\n    colours: {\n      black: 'Black',\n      silver: 'Silver',\n      gray: 'Grey',\n      maroon: 'Maroon',\n      red: 'Red',\n      purple: 'Purple',\n      green: 'Green',\n      olive: 'Olive',\n      navy: 'Navy',\n      blue: 'Blue',\n      orange: 'Orange'\n    }\n  };\n}));\n","/*\n    jQuery Masked Input Plugin\n    Copyright (c) 2007 - 2015 Josh Bush (digitalbush.com)\n    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)\n    Version: 1.4.1\n*/\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:\"[0-9]\",a:\"[A-Za-z]\",\"*\":\"[A-Za-z0-9]\"},autoclear:!0,dataName:\"rawMaskFn\",placeholder:\"_\"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(\":hidden\"))return\"number\"==typeof a?(b=\"number\"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd(\"character\",b),c.moveStart(\"character\",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart(\"character\",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger(\"unmask\")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(\"\"),function(a,b){\"?\"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger(\"unmask\").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop(\"readonly\")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop(\"readonly\")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(\"\"))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join(\"\")===D?(B.val()&&B.val(\"\"),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(\"\"),function(a,b){return\"?\"!=a?i[a]?p(b):a:void 0}),D=C.join(\"\"),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join(\"\")}),B.one(\"unmask\",function(){B.off(\".mask\").removeData(a.mask.dataName)}).on(\"focus.mask\",function(){if(!B.prop(\"readonly\")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){B.get(0)===document.activeElement&&(z(),a==c.replace(\"?\",\"\").length?B.caret(0,a):B.caret(a))},10)}}).on(\"blur.mask\",v).on(\"keydown.mask\",w).on(\"keypress.mask\",x).on(\"input.mask paste.mask\",function(){B.prop(\"readonly\")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off(\"input.mask\").on(\"input.mask\",u),A()})}})});","\"use strict\";\r\n\r\n$('ul.slimmenu').slimmenu({\r\n    resizeWidth: '992',\r\n    collapserTitle: 'Main Menu',\r\n    animSpeed: 250,\r\n    indentChildren: true,\r\n    childrenIndenter: ''\r\n});\r\n\r\n\r\n// Countdown\r\n$('.countdown').each(function() {\r\n    var count = $(this);\r\n    $(this).countdown({\r\n        zeroCallback: function(options) {\r\n            var newDate = new Date(),\r\n                newDate = newDate.setHours(newDate.getHours() + 130);\r\n\r\n            $(count).attr(\"data-countdown\", newDate);\r\n            $(count).countdown({\r\n                unixFormat: true\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n\r\n$('.btn').button();\r\n\r\n$(\"[rel='tooltip']\").tooltip();\r\n\r\n$('.form-group').each(function() {\r\n    var self = $(this),\r\n        input = self.find('input');\r\n\r\n    input.focus(function() {\r\n        self.addClass('form-group-focus');\r\n    })\r\n\r\n    input.blur(function() {\r\n        if (input.val()) {\r\n            self.addClass('form-group-filled');\r\n        } else {\r\n            self.removeClass('form-group-filled');\r\n        }\r\n        self.removeClass('form-group-focus');\r\n    });\r\n});\r\n\r\n// $('.typeahead').typeahead({\r\n//     hint: true,\r\n//     highlight: true,\r\n//     minLength: 3,\r\n//     limit: 8\r\n// }, {\r\n//     source: function(q, cb) {\r\n//         return $.ajax({\r\n//             dataType: 'json',\r\n//             type: 'get',\r\n//             url: 'http://gd.geobytes.com/AutoCompleteCity?callback=?&q=' + q,\r\n//             chache: false,\r\n//             success: function(data) {\r\n//                 var result = [];\r\n//                 $.each(data, function(index, val) {\r\n//                     result.push({\r\n//                         value: val\r\n//                     });\r\n//                 });\r\n//                 cb(result);\r\n//             }\r\n//         });\r\n//     }\r\n// });\r\n\r\n\r\n$('input.date-pick, .input-daterange, .date-pick-inline').datepicker({\r\n    todayHighlight: true\r\n});\r\n\r\n\r\n\r\n$('input.date-pick, .input-daterange input[name=\"start\"]').datepicker('setDate', 'today');\r\n$('.input-daterange input[name=\"end\"]').datepicker('setDate', '+7d');\r\n\r\n$('input.time-pick').timepicker({\r\n    minuteStep: 15,\r\n    showInpunts: false\r\n})\r\n\r\n$('input.date-pick-years').datepicker({\r\n    startView: 2\r\n});\r\n\r\n\r\n\r\n\r\n// $('.booking-item-price-calc .checkbox label').click(function() {\r\n//     var checkbox = $(this).find('input'),\r\n//         // checked = $(checkboxDiv).hasClass('checked'),\r\n//         checked = $(checkbox).prop('checked'),\r\n//         price = parseInt($(this).find('span.pull-right').html().replace('$', '')),\r\n//         eqPrice = $('#car-equipment-total'),\r\n//         tPrice = $('#car-total'),\r\n//         eqPriceInt = parseInt(eqPrice.attr('data-value')),\r\n//         tPriceInt = parseInt(tPrice.attr('data-value')),\r\n//         value,\r\n//         animateInt = function(val, el, plus) {\r\n//             value = function() {\r\n//                 if (plus) {\r\n//                     return el.attr('data-value', val + price);\r\n//                 } else {\r\n//                     return el.attr('data-value', val - price);\r\n//                 }\r\n//             };\r\n//             return $({\r\n//                 val: val\r\n//             }).animate({\r\n//                 val: parseInt(value().attr('data-value'))\r\n//             }, {\r\n//                 duration: 500,\r\n//                 easing: 'swing',\r\n//                 step: function() {\r\n//                     if (plus) {\r\n//                         el.text(Math.ceil(this.val));\r\n//                     } else {\r\n//                         el.text(Math.floor(this.val));\r\n//                     }\r\n//                 }\r\n//             });\r\n//         };\r\n//     if (!checked) {\r\n//         animateInt(eqPriceInt, eqPrice, true);\r\n//         animateInt(tPriceInt, tPrice, true);\r\n//     } else {\r\n//         animateInt(eqPriceInt, eqPrice, false);\r\n//         animateInt(tPriceInt, tPrice, false);\r\n//     }\r\n// });\r\n\r\n\r\n$('div.bg-parallax').each(function() {\r\n    var $obj = $(this);\r\n    if($(window).width() > 992 ){\r\n        $(window).scroll(function() {\r\n            var animSpeed;\r\n            if ($obj.hasClass('bg-blur')) {\r\n                animSpeed = 10;\r\n            } else {\r\n                animSpeed = 15;\r\n            }\r\n            var yPos = -($(window).scrollTop() / animSpeed);\r\n            var bgpos = '50% ' + yPos + 'px';\r\n            $obj.css('background-position', bgpos);\r\n\r\n        });\r\n    }\r\n});\r\n\r\n\r\n\r\n$(document).ready(\r\n    function() {\r\n\r\n        if(/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())){\r\n            $('body').niceScroll();\r\n        }else{\r\n            $(\"html, body\").niceScroll().remove();\r\n        }\r\n\r\n        // Owl Carousel\r\n        var owlCarousel = $('#owl-carousel'),\r\n            owlItems = owlCarousel.attr('data-items'),\r\n            owlCarouselSlider = $('#owl-carousel-slider'),\r\n            owlNav = owlCarouselSlider.attr('data-nav');\r\n        // owlSliderPagination = owlCarouselSlider.attr('data-pagination');\r\n\r\n        owlCarousel.owlCarousel({\r\n            items: owlItems,\r\n            navigation: true,\r\n            navigationText: ['', '']\r\n        });\r\n\r\n        owlCarouselSlider.owlCarousel({\r\n            slideSpeed: 300,\r\n            paginationSpeed: 400,\r\n            // pagination: owlSliderPagination,\r\n            singleItem: true,\r\n            navigation: true,\r\n            navigationText: ['', ''],\r\n            transitionStyle: 'fade',\r\n            autoPlay: 4500\r\n        });\r\n\r\n\r\n    // footer always on bottom\r\n    var docHeight = $(window).height();\r\n   var footerHeight = $('#main-footer').height();\r\n   var footerTop = $('#main-footer').position().top + footerHeight;\r\n\r\n   if (footerTop < docHeight) {\r\n    $('#main-footer').css('margin-top', (docHeight - footerTop) + 'px');\r\n   }\r\n    }\r\n\r\n\r\n);\r\n\r\n\r\n$('.nav-drop').dropit();\r\n\r\n\r\n$(\"#price-slider\").ionRangeSlider({\r\n    min: 130,\r\n    max: 575,\r\n    type: 'double',\r\n    prefix: \"$\",\r\n    // maxPostfix: \"+\",\r\n    prettify: false,\r\n    hasGrid: true\r\n});\r\n\r\n$('.i-check, .i-radio').iCheck({\r\n    checkboxClass: 'i-check',\r\n    radioClass: 'i-radio'\r\n});\r\n\r\n\r\n\r\n$('.booking-item-review-expand').click(function(event) {\r\n    console.log('baz');\r\n    var parent = $(this).parent('.booking-item-review-content');\r\n    if (parent.hasClass('expanded')) {\r\n        parent.removeClass('expanded');\r\n    } else {\r\n        parent.addClass('expanded');\r\n    }\r\n});\r\n\r\n\r\n$('.stats-list-select > li > .booking-item-rating-stars > li').each(function() {\r\n    var list = $(this).parent(),\r\n        listItems = list.children(),\r\n        itemIndex = $(this).index();\r\n\r\n    $(this).hover(function() {\r\n        for (var i = 0; i < listItems.length; i++) {\r\n            if (i <= itemIndex) {\r\n                $(listItems[i]).addClass('hovered');\r\n            } else {\r\n                break;\r\n            }\r\n        };\r\n        $(this).click(function() {\r\n            for (var i = 0; i < listItems.length; i++) {\r\n                if (i <= itemIndex) {\r\n                    $(listItems[i]).addClass('selected');\r\n                } else {\r\n                    $(listItems[i]).removeClass('selected');\r\n                }\r\n            };\r\n        });\r\n    }, function() {\r\n        listItems.removeClass('hovered');\r\n    });\r\n});\r\n\r\n\r\n\r\n$('.booking-item-container').children('.booking-item').click(function(event) {\r\n    if ($(this).hasClass('active')) {\r\n        $(this).removeClass('active');\r\n        $(this).parent().removeClass('active');\r\n    } else {\r\n        $(this).addClass('active');\r\n        $(this).parent().addClass('active');\r\n        $(this).delay(1500).queue(function() {\r\n            $(this).addClass('viewed')\r\n        });\r\n    }\r\n});\r\n\r\n\r\n// $('.form-group-cc-number input').payment('formatCardNumber');\r\n// $('.form-group-cc-date input').payment('formatCardExpiry');\r\n// $('.form-group-cc-cvc input').payment('formatCardCVC');\r\n\r\n\r\n\r\n\r\nif ($('#map-canvas').length) {\r\n    var map,\r\n        service;\r\n\r\n    jQuery(function($) {\r\n        $(document).ready(function() {\r\n            var latlng = new google.maps.LatLng(40.7564971, -73.9743277);\r\n            var myOptions = {\r\n                zoom: 16,\r\n                center: latlng,\r\n                mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                scrollwheel: false\r\n            };\r\n\r\n            map = new google.maps.Map(document.getElementById(\"map-canvas\"), myOptions);\r\n\r\n\r\n            var marker = new google.maps.Marker({\r\n                position: latlng,\r\n                map: map\r\n            });\r\n            marker.setMap(map);\r\n\r\n\r\n            $('a[href=\"#google-map-tab\"]').on('shown.bs.tab', function(e) {\r\n                google.maps.event.trigger(map, 'resize');\r\n                map.setCenter(latlng);\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\n\r\n// $('.card-select > li').click(function() {\r\n//     self = this;\r\n//     $(self).addClass('card-item-selected');\r\n//     $(self).siblings('li').removeClass('card-item-selected');\r\n//     $('.form-group-cc-number input').click(function() {\r\n//         $(self).removeClass('card-item-selected');\r\n//     });\r\n// });\r\n// Lighbox gallery\r\n$('#popup-gallery').each(function() {\r\n    $(this).magnificPopup({\r\n        delegate: 'a.popup-gallery-image',\r\n        type: 'image',\r\n        gallery: {\r\n            enabled: true\r\n        }\r\n    });\r\n});\r\n\r\n// Lighbox image\r\n$('.popup-image').magnificPopup({\r\n    type: 'image'\r\n});\r\n\r\n// Lighbox text\r\n$('.popup-text').magnificPopup({\r\n    removalDelay: 500,\r\n    closeBtnInside: true,\r\n    callbacks: {\r\n        beforeOpen: function() {\r\n            this.st.mainClass = this.st.el.attr('data-effect');\r\n        }\r\n    },\r\n    midClick: true\r\n});\r\n\r\n// Lightbox iframe\r\n$('.popup-iframe').magnificPopup({\r\n    dispableOn: 700,\r\n    type: 'iframe',\r\n    removalDelay: 160,\r\n    mainClass: 'mfp-fade',\r\n    preloader: false\r\n});\r\n\r\n\r\n$('.form-group-select-plus').each(function() {\r\n    var self = $(this),\r\n        btnGroup = self.find('.btn-group').first(),\r\n        select = self.find('select');\r\n    btnGroup.children('label').last().click(function() {\r\n        btnGroup.addClass('hidden');\r\n        select.removeClass('hidden');\r\n    });\r\n});\r\n// Responsive videos\r\n$(document).ready(function() {\r\n    $(\"body\").fitVids();\r\n});\r\n\r\n// $(function($) {\r\n//     $(\"#twitter\").tweet({\r\n//         username: \"remtsoy\", //!paste here your twitter username!\r\n//         count: 3\r\n//     });\r\n// });\r\n\r\n// $(function($) {\r\n//     $(\"#twitter-ticker\").tweet({\r\n//         username: \"remtsoy\", //!paste here your twitter username!\r\n//         page: 1,\r\n//         count: 20\r\n//     });\r\n// });\r\n\r\n// $(document).ready(function() {\r\n//     var ul = $('#twitter-ticker').find(\".tweet-list\");\r\n//     var ticker = function() {\r\n//         setTimeout(function() {\r\n//             ul.find('li:first').animate({\r\n//                 marginTop: '-4.7em'\r\n//             }, 850, function() {\r\n//                 $(this).detach().appendTo(ul).removeAttr('style');\r\n//             });\r\n//             ticker();\r\n//         }, 5000);\r\n//     };\r\n//     ticker();\r\n// });\r\n$(function() {\r\n    $('#ri-grid').gridrotator({\r\n        rows: 4,\r\n        columns: 8,\r\n        animType: 'random',\r\n        animSpeed: 1200,\r\n        interval: 1200,\r\n        step: 'random',\r\n        preventClick: false,\r\n        maxStep: 2,\r\n        w992: {\r\n            rows: 5,\r\n            columns: 4\r\n        },\r\n        w768: {\r\n            rows: 6,\r\n            columns: 3\r\n        },\r\n        w480: {\r\n            rows: 8,\r\n            columns: 3\r\n        },\r\n        w320: {\r\n            rows: 5,\r\n            columns: 4\r\n        },\r\n        w240: {\r\n            rows: 6,\r\n            columns: 4\r\n        }\r\n    });\r\n\r\n});\r\n\r\n\r\n$(function() {\r\n    $('#ri-grid-no-animation').gridrotator({\r\n        rows: 4,\r\n        columns: 8,\r\n        slideshow: false,\r\n        w1024: {\r\n            rows: 4,\r\n            columns: 6\r\n        },\r\n        w768: {\r\n            rows: 3,\r\n            columns: 3\r\n        },\r\n        w480: {\r\n            rows: 4,\r\n            columns: 4\r\n        },\r\n        w320: {\r\n            rows: 5,\r\n            columns: 4\r\n        },\r\n        w240: {\r\n            rows: 6,\r\n            columns: 4\r\n        }\r\n    });\r\n\r\n});\r\n\r\nvar tid = setInterval(tagline_vertical_slide, 2500);\r\n\r\n// vertical slide\r\nfunction tagline_vertical_slide() {\r\n    var curr = $(\"#tagline ul li.active\");\r\n    curr.removeClass(\"active\").addClass(\"vs-out\");\r\n    setTimeout(function() {\r\n        curr.removeClass(\"vs-out\");\r\n    }, 500);\r\n\r\n    var nextTag = curr.next('li');\r\n    if (!nextTag.length) {\r\n        nextTag = $(\"#tagline ul li\").first();\r\n    }\r\n    nextTag.addClass(\"active\");\r\n}\r\n\r\nfunction abortTimer() { // to be called when you want to stop the timer\r\n    clearInterval(tid);\r\n}"],"sourceRoot":"/source/"}